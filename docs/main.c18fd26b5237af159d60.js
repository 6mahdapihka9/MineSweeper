(self.webpackChunkmine_sweeper=self.webpackChunkmine_sweeper||[]).push([[179],{8255:Ke=>{function we(F){return Promise.resolve().then(()=>{var m=new Error("Cannot find module '"+F+"'");throw m.code="MODULE_NOT_FOUND",m})}we.keys=()=>[],we.resolve=we,we.id=8255,Ke.exports=we},3018:(Ke,we,F)=>{"use strict";F.d(we,{deG:()=>hf,tb:()=>xw,AFp:()=>Iw,ip1:()=>A_,CZH:()=>gs,hGG:()=>z1,z2F:()=>Oc,sBO:()=>xE,Sil:()=>Mc,_Vd:()=>Xd,EJc:()=>Mw,SBq:()=>Wi,qLn:()=>z,vpe:()=>ko,gxx:()=>Zl,tBr:()=>mi,XFs:()=>Ae,OlP:()=>yn,zs3:()=>Rn,ZZ4:()=>t_,aQg:()=>nh,soG:()=>Cg,YKP:()=>PE,v3s:()=>F_,h0i:()=>Ec,PXZ:()=>Kr,R0b:()=>Wn,FiY:()=>Ur,Lbi:()=>Rw,g9A:()=>Aw,Qsj:()=>EE,FYo:()=>Yp,JOm:()=>wo,Tiy:()=>CE,q3G:()=>ln,tp0:()=>Li,EAV:()=>F1,Rgc:()=>vc,dDg:()=>vT,DyG:()=>Xa,q4F:()=>IE,GfV:()=>Qy,s_b:()=>Jp,ifc:()=>Sn,eFA:()=>IT,G48:()=>T1,Gpc:()=>ne,X6Q:()=>Lw,_c5:()=>$1,VLi:()=>D1,c2e:()=>Nw,zSh:()=>Ea,wAp:()=>st,vHH:()=>Pe,EiD:()=>Am,mCW:()=>as,qzn:()=>au,JVY:()=>bv,pB0:()=>Sf,eBb:()=>Tf,L6k:()=>Im,LAX:()=>_i,cg1:()=>qr,Tjo:()=>UT,kL8:()=>jy,yhl:()=>yd,dqk:()=>$,sIi:()=>jd,CqO:()=>P0,QGY:()=>O0,F4k:()=>Py,RDi:()=>Xs,AaK:()=>K,z3N:()=>yi,qOj:()=>f0,TTD:()=>Hh,_Bn:()=>sD,xp6:()=>lC,uIk:()=>g0,ekj:()=>sc,Suo:()=>JD,Xpm:()=>jc,lG2:()=>jg,Yz7:()=>hn,cJS:()=>xi,oAB:()=>Xu,Yjl:()=>$g,Y36:()=>Ro,_UZ:()=>M0,qZA:()=>Ny,TgZ:()=>wu,EpF:()=>xp,n5z:()=>ud,Ikx:()=>dc,LFG:()=>_n,$8M:()=>ld,NdJ:()=>ky,CRH:()=>gw,oxw:()=>L0,Q6J:()=>xy,s9C:()=>Fn,DdM:()=>jD,VKq:()=>$D,WLB:()=>HD,iGM:()=>b_,MAs:()=>_0,CHM:()=>zh,LSH:()=>da,kYT:()=>Ga,YNc:()=>Dy,W1O:()=>tT,_uU:()=>z0,Oqu:()=>By,hij:()=>Bp,Gf:()=>mg});var m=F(9765),ee=F(5319),j=F(7574),_e=F(6682),me=F(2441);var pe=F(1307);function Z(){return new m.xQ}function L(o){for(let a in o)if(o[a]===L)return a;throw Error("Could not find renamed property on target object.")}function Y(o,a){for(const u in a)a.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(o[u]=a[u])}function K(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(K).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function J(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const de=L({__forward_ref__:L});function ne(o){return o.__forward_ref__=ne,o.toString=function(){return K(this())},o}function te(o){return Ne(o)?o():o}function Ne(o){return"function"==typeof o&&o.hasOwnProperty(de)&&o.__forward_ref__===ne}class Pe extends Error{constructor(a,u){super(function(o,a){return`${o?`NG0${o}: `:""}${a}`}(a,u)),this.code=a}}function Ve(o){return"string"==typeof o?o:null==o?"":String(o)}function Dt(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():Ve(o)}function ae(o,a){const u=a?` in ${a}`:"";throw new Pe("201",`No provider for ${Dt(o)} found${u}`)}function dn(o,a){null==o&&function(o,a,u,c){throw new Error(`ASSERTION ERROR: ${o}`+(null==c?"":` [Expected=> ${u} ${c} ${a} <=Actual]`))}(a,o,null,"!=")}function hn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function xi(o){return{providers:o.providers||[],imports:o.imports||[]}}function Pr(o){return $a(o,Un)||$a(o,Ju)}function $a(o,a){return o.hasOwnProperty(a)?o[a]:null}function Ys(o){return o&&(o.hasOwnProperty(Qr)||o.hasOwnProperty(ft))?o[Qr]:null}const Un=L({\u0275prov:L}),Qr=L({\u0275inj:L}),Ju=L({ngInjectableDef:L}),ft=L({ngInjectorDef:L});var Ae=(()=>((Ae=Ae||{})[Ae.Default=0]="Default",Ae[Ae.Host=1]="Host",Ae[Ae.Self=2]="Self",Ae[Ae.SkipSelf=4]="SkipSelf",Ae[Ae.Optional=8]="Optional",Ae))();let Zt;function pn(o){const a=Zt;return Zt=o,a}function Bt(o,a,u){const c=Pr(o);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&Ae.Optional?null:void 0!==a?a:void ae(K(o),"Injector")}function et(o){return{toString:o}.toString()}var Tn=(()=>((Tn=Tn||{})[Tn.OnPush=0]="OnPush",Tn[Tn.Default=1]="Default",Tn))(),Sn=(()=>((Sn=Sn||{})[Sn.Emulated=0]="Emulated",Sn[Sn.None=2]="None",Sn[Sn.ShadowDom=3]="ShadowDom",Sn))();const kr="undefined"!=typeof globalThis&&globalThis,jo="undefined"!=typeof window&&window,H="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,G="undefined"!=typeof global&&global,$=kr||G||jo||H,He={},Be=[],jt=L({\u0275cmp:L}),gn=L({\u0275dir:L}),en=L({\u0275pipe:L}),Jr=L({\u0275mod:L}),Rt=L({\u0275loc:L}),tn=L({\u0275fac:L}),sr=L({__NG_ELEMENT_ID__:L});let Bc=0;function jc(o){return et(()=>{const u={},c={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===Tn.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||Be,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Sn.Emulated,id:"c",styles:o.styles||Be,_:null,setInput:null,schemas:o.schemas||null,tView:null},h=o.directives,g=o.features,v=o.pipes;return c.id+=Bc++,c.inputs=Ni(o.inputs,u),c.outputs=Ni(o.outputs),g&&g.forEach(w=>w(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(Mh):null,c.pipeDefs=v?()=>("function"==typeof v?v():v).map($c):null,c})}function Mh(o){return Yn(o)||function(o){return o[gn]||null}(o)}function $c(o){return function(o){return o[en]||null}(o)}const Ha={};function Xu(o){return et(()=>{const a={type:o.type,bootstrap:o.bootstrap||Be,declarations:o.declarations||Be,imports:o.imports||Be,exports:o.exports||Be,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(Ha[o.id]=o.type),a})}function Ga(o,a){return et(()=>{const u=yr(o,!0);u.declarations=a.declarations||Be,u.imports=a.imports||Be,u.exports=a.exports||Be})}function Ni(o,a){if(null==o)return He;const u={};for(const c in o)if(o.hasOwnProperty(c)){let h=o[c],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),u[h]=c,a&&(a[h]=g)}return u}const jg=jc;function $g(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function Yn(o){return o[jt]||null}function yr(o,a){const u=o[Jr]||null;if(!u&&!0===a)throw new Error(`Type ${K(o)} does not have '\u0275mod' property.`);return u}function ti(o){return Array.isArray(o)&&"object"==typeof o[1]}function qt(o){return Array.isArray(o)&&!0===o[1]}function nl(o){return 0!=(8&o.flags)}function Gc(o){return 2==(2&o.flags)}function ni(o){return 1==(1&o.flags)}function Oi(o){return null!==o.template}function Lh(o){return 0!=(512&o[2])}function Ts(o,a){return o.hasOwnProperty(tn)?o[tn]:null}class $h{constructor(a,u,c){this.previousValue=a,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Hh(){return il}function il(o){return o.type.prototype.ngOnChanges&&(o.setInput=J_),Pi}function Pi(){const o=sl(this),a=null==o?void 0:o.current;if(a){const u=o.previous;if(u===He)o.previous=a;else for(let c in a)u[c]=a[c];o.current=null,this.ngOnChanges(a)}}function J_(o,a,u,c){const h=sl(o)||function(o,a){return o[X_]=a}(o,{previous:He,current:null}),g=h.current||(h.current={}),v=h.previous,w=this.declaredInputs[u],D=v[w];g[w]=new $h(D&&D.currentValue,a,v===He),o[c]=a}Hh.ngInherit=!0;const X_="__ngSimpleChanges__";function sl(o){return o[X_]||null}let Wo;function Xs(o){Wo=o}function sn(o){return!!o.listen}const Yc={createRenderer:(o,a)=>void 0!==Wo?Wo:"undefined"!=typeof document?document:void 0};function on(o){for(;Array.isArray(o);)o=o[0];return o}function ul(o,a){return on(a[o])}function ri(o,a){return on(a[o.index])}function eo(o,a){return o.data[a]}function vr(o,a){const u=a[o];return ti(u)?u:u[0]}function cl(o){return 4==(4&o[2])}function dl(o){return 128==(128&o[2])}function to(o,a){return null==a?null:o[a]}function Jc(o){o[18]=0}function Gh(o,a){o[5]+=a;let u=o,c=o[3];for(;null!==c&&(1===a&&1===u[5]||-1===a&&0===u[5]);)c[5]+=a,u=c,c=c[3]}const ht={lFrame:nm(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function qh(){return ht.bindingsEnabled}function Te(){return ht.lFrame.lView}function xt(){return ht.lFrame.tView}function zh(o){return ht.lFrame.contextLView=o,o[8]}function An(){let o=Jg();for(;null!==o&&64===o.type;)o=o.parent;return o}function Jg(){return ht.lFrame.currentTNode}function pi(o,a){const u=ht.lFrame;u.currentTNode=o,u.isParent=a}function Wh(){return ht.lFrame.isParent}function Yo(){return ht.isInCheckNoChangesMode}function ro(o){ht.isInCheckNoChangesMode=o}function Fr(){const o=ht.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function io(){return ht.lFrame.bindingIndex++}function Yh(o,a){const u=ht.lFrame;u.bindingIndex=u.bindingRootIndex=o,ml(a)}function ml(o){ht.lFrame.currentDirectiveIndex=o}function Qo(){return ht.lFrame.currentQueryIndex}function Xh(o){ht.lFrame.currentQueryIndex=o}function tv(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function nv(o,a,u){if(u&Ae.SkipSelf){let h=a,g=o;for(;!(h=h.parent,null!==h||u&Ae.Host||(h=tv(g),null===h||(g=g[15],10&h.type))););if(null===h)return!1;a=h,o=g}const c=ht.lFrame=tm();return c.currentTNode=a,c.lView=o,!0}function yl(o){const a=tm(),u=o[1];ht.lFrame=a,a.currentTNode=u.firstChild,a.lView=o,a.tView=u,a.contextLView=o,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function tm(){const o=ht.lFrame,a=null===o?null:o.child;return null===a?nm(o):a}function nm(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function rm(){const o=ht.lFrame;return ht.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Ob=rm;function im(){const o=rm();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Lr(){return ht.lFrame.selectedIndex}function Jo(o){ht.lFrame.selectedIndex=o}function an(){const o=ht.lFrame;return eo(o.tView,o.selectedIndex)}function Ya(o,a){for(let u=a.directiveStart,c=a.directiveEnd;u<c;u++){const g=o.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:D,ngAfterViewChecked:T,ngOnDestroy:A}=g;v&&(o.contentHooks||(o.contentHooks=[])).push(-u,v),w&&((o.contentHooks||(o.contentHooks=[])).push(u,w),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(u,w)),D&&(o.viewHooks||(o.viewHooks=[])).push(-u,D),T&&((o.viewHooks||(o.viewHooks=[])).push(u,T),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(u,T)),null!=A&&(o.destroyHooks||(o.destroyHooks=[])).push(u,A)}}function Qa(o,a,u){rf(o,a,3,u)}function nf(o,a,u,c){(3&o[2])===u&&rf(o,a,u,c)}function _l(o,a){let u=o[2];(3&u)===a&&(u&=2047,u+=1,o[2]=u)}function rf(o,a,u,c){const g=null!=c?c:-1,v=a.length-1;let w=0;for(let D=void 0!==c?65535&o[18]:0;D<v;D++)if("number"==typeof a[D+1]){if(w=a[D],null!=c&&w>=c)break}else a[D]<0&&(o[18]+=65536),(w<g||-1==g)&&(ov(o,u,a,D),o[18]=(4294901760&o[18])+D+2),D++}function ov(o,a,u,c){const h=u[c]<0,g=u[c+1],w=o[h?-u[c]:u[c]];if(h){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{g.call(w)}finally{}}}else try{g.call(w)}finally{}}class Xo{constructor(a,u,c){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function un(o,a,u){const c=sn(o);let h=0;for(;h<u.length;){const g=u[h];if("number"==typeof g){if(0!==g)break;h++;const v=u[h++],w=u[h++],D=u[h++];c?o.setAttribute(a,w,D,v):a.setAttributeNS(v,w,D)}else{const v=g,w=u[++h];td(v)?c&&o.setProperty(a,v,w):c?o.setAttribute(a,v,w):a.setAttribute(v,w),h++}}return h}function of(o){return 3===o||4===o||6===o}function td(o){return 64===o.charCodeAt(0)}function af(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let u=-1;for(let c=0;c<a.length;c++){const h=a[c];"number"==typeof h?u=h:0===u||uf(o,u,h,null,-1===u||2===u?a[++c]:null)}}return o}function uf(o,a,u,c,h){let g=0,v=o.length;if(-1===a)v=-1;else for(;g<o.length;){const w=o[g++];if("number"==typeof w){if(w===a){v=-1;break}if(w>a){v=g-1;break}}}for(;g<o.length;){const w=o[g];if("number"==typeof w)break;if(w===u){if(null===c)return void(null!==h&&(o[g+1]=h));if(c===o[g+1])return void(o[g+2]=h)}g++,null!==c&&g++,null!==h&&g++}-1!==v&&(o.splice(v,0,a),g=v+1),o.splice(g++,0,u),null!==c&&o.splice(g++,0,c),null!==h&&o.splice(g++,0,h)}function sm(o){return-1!==o}function vl(o){return 32767&o}function El(o,a){let u=function(o){return o>>16}(o),c=a;for(;u>0;)c=c[15],u--;return c}let wl=!0;function nd(o){const a=wl;return wl=o,a}let lf=0;function xs(o,a){const u=od(o,a);if(-1!==u)return u;const c=a[1];c.firstCreatePass&&(o.injectorIndex=a.length,ea(c.data,o),ea(a,null),ea(c.blueprint,null));const h=Ja(o,a),g=o.injectorIndex;if(sm(h)){const v=vl(h),w=El(h,a),D=w[1].data;for(let T=0;T<8;T++)a[g+T]=w[v+T]|D[v+T]}return a[g+8]=h,g}function ea(o,a){o.push(0,0,0,0,0,0,0,0,a)}function od(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function Ja(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,c=null,h=a;for(;null!==h;){const g=h[1],v=g.type;if(c=2===v?g.declTNode:1===v?h[6]:null,null===c)return-1;if(u++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function Hn(o,a,u){!function(o,a,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(sr)&&(c=u[sr]),null==c&&(c=u[sr]=lf++);const h=255&c;a.data[o+(h>>5)]|=1<<h}(o,a,u)}function Fb(o,a,u){if(u&Ae.Optional)return o;ae(a,"NodeInjector")}function ns(o,a,u,c){if(u&Ae.Optional&&void 0===c&&(c=null),0==(u&(Ae.Self|Ae.Host))){const h=o[9],g=pn(void 0);try{return h?h.get(a,c,u&Ae.Optional):Bt(a,c,u&Ae.Optional)}finally{pn(g)}}return Fb(c,a,u)}function uv(o,a,u,c=Ae.Default,h){if(null!==o){const g=function(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(sr)?o[sr]:void 0;return"number"==typeof a?a>=0?255&a:Lb:a}(u);if("function"==typeof g){if(!nv(a,o,c))return c&Ae.Host?Fb(h,u,c):ns(a,u,c,h);try{const v=g(c);if(null!=v||c&Ae.Optional)return v;ae(u)}finally{Ob()}}else if("number"==typeof g){let v=null,w=od(o,a),D=-1,T=c&Ae.Host?a[16][6]:null;for((-1===w||c&Ae.SkipSelf)&&(D=-1===w?Ja(o,a):a[w+8],-1!==D&&ad(c,!1)?(v=a[1],w=vl(D),a=El(D,a)):w=-1);-1!==w;){const A=a[1];if(df(g,w,A.data)){const M=bl(w,a,u,v,c,T);if(M!==lv)return M}D=a[w+8],-1!==D&&ad(c,a[1].data[w+8]===T)&&df(g,w,a)?(v=A,w=vl(D),a=El(D,a)):w=-1}}}return ns(a,u,c,h)}const lv={};function Lb(){return new rs(An(),Te())}function bl(o,a,u,c,h,g){const v=a[1],w=v.data[o+8],A=cf(w,v,u,null==c?Gc(w)&&wl:c!=v&&0!=(3&w.type),h&Ae.Host&&g===w);return null!==A?ta(a,v,A,w):lv}function cf(o,a,u,c,h){const g=o.providerIndexes,v=a.data,w=1048575&g,D=o.directiveStart,A=g>>20,P=h?w+A:o.directiveEnd;for(let U=c?w:w+A;U<P;U++){const q=v[U];if(U<D&&u===q||U>=D&&q.type===u)return U}if(h){const U=v[D];if(U&&Oi(U)&&U.type===u)return D}return null}function ta(o,a,u,c){let h=o[u];const g=a.data;if(function(o){return o instanceof Xo}(h)){const v=h;v.resolving&&function(o,a){throw new Pe("200",`Circular dependency in DI detected for ${o}`)}(Dt(g[u]));const w=nd(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?pn(v.injectImpl):null;nv(o,c,Ae.Default);try{h=o[u]=v.factory(void 0,g,o,c),a.firstCreatePass&&u>=c.directiveStart&&function(o,a,u){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:g}=a.type.prototype;if(c){const v=il(a);(u.preOrderHooks||(u.preOrderHooks=[])).push(o,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,v)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-o,h),g&&((u.preOrderHooks||(u.preOrderHooks=[])).push(o,g),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,g))}(u,g[u],a)}finally{null!==D&&pn(D),nd(w),v.resolving=!1,Ob()}}return h}function df(o,a,u){return!!(u[a+(o>>5)]&1<<o)}function ad(o,a){return!(o&Ae.Self||o&Ae.Host&&a)}class rs{constructor(a,u){this._tNode=a,this._lView=u}get(a,u){return uv(this._tNode,this._lView,a,void 0,u)}}function ud(o){return et(()=>{const a=o.prototype.constructor,u=a[tn]||is(a),c=Object.prototype;let h=Object.getPrototypeOf(o.prototype).constructor;for(;h&&h!==c;){const g=h[tn]||is(h);if(g&&g!==u)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function is(o){return Ne(o)?()=>{const a=is(te(o));return a&&a()}:Ts(o)}function ld(o){return function(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const u=o.attrs;if(u){const c=u.length;let h=0;for(;h<c;){const g=u[h];if(of(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<c&&"string"==typeof u[h];)h++;else{if(g===a)return u[h+1];h+=2}}}return null}(An(),o)}const ao="__parameters__";function Ns(o,a,u){return et(()=>{const c=function(o){return function(...u){if(o){const c=o(...u);for(const h in c)this[h]=c[h]}}}(a);function h(...g){if(this instanceof h)return c.apply(this,g),this;const v=new h(...g);return w.annotation=v,w;function w(D,T,A){const M=D.hasOwnProperty(ao)?D[ao]:Object.defineProperty(D,ao,{value:[]})[ao];for(;M.length<=A;)M.push(null);return(M[A]=M[A]||[]).push(v),D}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=o,h.annotationCls=h,h})}class yn{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=hn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const hf=new yn("AnalyzeForEntryComponents"),Xa=Function;function Er(o,a){void 0===a&&(a=o);for(let u=0;u<o.length;u++){let c=o[u];Array.isArray(c)?(a===o&&(a=o.slice(0,u)),Er(c,a)):a!==o&&a.push(c)}return a}function wr(o,a){o.forEach(u=>Array.isArray(u)?wr(u,a):a(u))}function Dl(o,a,u){a>=o.length?o.push(u):o.splice(a,0,u)}function Fi(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function or(o,a,u){let c=Jn(o,a);return c>=0?o[1|c]=u:(c=~c,function(o,a,u,c){let h=o.length;if(h==a)o.push(u,c);else if(1===h)o.push(c,o[0]),o[0]=u;else{for(h--,o.push(o[h-1],o[h]);h>a;)o[h]=o[h-2],h--;o[a]=u,o[a+1]=c}}(o,c,a,u)),c}function nu(o,a){const u=Jn(o,a);if(u>=0)return o[1|u]}function Jn(o,a){return function(o,a,u){let c=0,h=o.length>>u;for(;h!==c;){const g=c+(h-c>>1),v=o[g<<u];if(a===v)return g<<u;v>a?h=g:c=g+1}return~(h<<u)}(o,a,1)}const fo={},br="__NG_DI_FLAG__",os="ngTempTokenPath",mf=/\n/gm,Sl="__source",aa=L({provide:String,useValue:L});let ua;function po(o){const a=ua;return ua=o,a}function gv(o,a=Ae.Default){if(void 0===ua)throw new Error("inject() must be called from an injection context");return null===ua?Bt(o,void 0,a):ua.get(o,a&Ae.Optional?null:void 0,a)}function _n(o,a=Ae.Default){return(Zt||gv)(te(o),a)}function la(o){const a=[];for(let u=0;u<o.length;u++){const c=te(o[u]);if(Array.isArray(c)){if(0===c.length)throw new Error("Arguments array must have arguments.");let h,g=Ae.Default;for(let v=0;v<c.length;v++){const w=c[v],D=_f(w);"number"==typeof D?-1===D?h=w.token:g|=D:h=w}a.push(_n(h,g))}else a.push(_n(c))}return a}function Rl(o,a){return o[br]=a,o.prototype[br]=a,o}function _f(o){return o[br]}function gm(o,a,u,c){const h=o[os];throw a[Sl]&&h.unshift(a[Sl]),o.message=function(o,a,u,c=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let h=K(a);if(Array.isArray(a))h=a.map(K).join(" -> ");else if("object"==typeof a){let g=[];for(let v in a)if(a.hasOwnProperty(v)){let w=a[v];g.push(v+":"+("string"==typeof w?JSON.stringify(w):K(w)))}h=`{${g.join(", ")}}`}return`${u}${c?"("+c+")":""}[${h}]: ${o.replace(mf,"\n  ")}`}("\n"+o.message,h,u,c),o.ngTokenPath=h,o[os]=null,o}const mi=Rl(Ns("Inject",o=>({token:o})),-1),Ur=Rl(Ns("Optional"),8),Li=Rl(Ns("SkipSelf"),4);let Nl;function go(o){var a;return(null===(a=function(){if(void 0===Nl&&(Nl=null,$.trustedTypes))try{Nl=$.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return Nl}())||void 0===a?void 0:a.createHTML(o))||o}class mo{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Ev extends mo{getTypeName(){return"HTML"}}class qb extends mo{getTypeName(){return"Style"}}class yo extends mo{getTypeName(){return"Script"}}class wv extends mo{getTypeName(){return"URL"}}class Cm extends mo{getTypeName(){return"ResourceURL"}}function yi(o){return o instanceof mo?o.changingThisBreaksApplicationSecurity:o}function au(o,a){const u=yd(o);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===a}function yd(o){return o instanceof mo&&o.getTypeName()||null}function bv(o){return new Ev(o)}function Im(o){return new qb(o)}function Tf(o){return new yo(o)}function _i(o){return new wv(o)}function Sf(o){return new Cm(o)}class Af{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const u=(new window.DOMParser).parseFromString(go(a),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(a):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class Cv{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const c=this.inertDocument.createElement("body");u.appendChild(c)}}getInertBodyElement(a){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=go(a),u;const c=this.inertDocument.createElement("body");return c.innerHTML=go(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(a){const u=a.attributes;for(let h=u.length-1;0<h;h--){const v=u.item(h).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&a.removeAttribute(v)}let c=a.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const Rf=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Dm=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function as(o){return(o=String(o)).match(Rf)||o.match(Dm)?o:"unsafe:"+o}function Vi(o){const a={};for(const u of o.split(","))a[u]=!0;return a}function vo(...o){const a={};for(const u of o)for(const c in u)u.hasOwnProperty(c)&&(a[c]=!0);return a}const Ml=Vi("area,br,col,hr,img,wbr"),Ol=Vi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Dv=Vi("rp,rt"),xf=vo(Ml,vo(Ol,Vi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),vo(Dv,Vi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),vo(Dv,Ol)),kl=Vi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Nf=Vi("srcset"),Of=vo(kl,Nf,Vi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Vi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),_d=Vi("script,style,template");class Pf{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let u=a.firstChild,c=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?c=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,c&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let h=this.checkClobberedElement(u,u.nextSibling);if(h){u=h;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(a){const u=a.nodeName.toLowerCase();if(!xf.hasOwnProperty(u))return this.sanitizedSomething=!0,!_d.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const c=a.attributes;for(let h=0;h<c.length;h++){const g=c.item(h),v=g.name,w=v.toLowerCase();if(!Of.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let D=g.value;kl[w]&&(D=as(D)),Nf[w]&&(o=D,D=(o=String(o)).split(",").map(a=>as(a.trim())).join(", ")),this.buf.push(" ",v,'="',kf(D),'"')}var o;return this.buf.push(">"),!0}endElement(a){const u=a.nodeName.toLowerCase();xf.hasOwnProperty(u)&&!Ml.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(a){this.buf.push(kf(a))}checkClobberedElement(a,u){if(u&&(a.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return u}}const Sm=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Sv=/([^\#-~ |!])/g;function kf(o){return o.replace(/&/g,"&amp;").replace(Sm,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(Sv,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Fl;function Am(o,a){let u=null;try{Fl=Fl||function(o){const a=new Cv(o);return function(){try{return!!(new window.DOMParser).parseFromString(go(""),"text/html")}catch(o){return!1}}()?new Af(a):a}(o);let c=a?String(a):"";u=Fl.getInertBodyElement(c);let h=5,g=c;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,c=g,g=u.innerHTML,u=Fl.getInertBodyElement(c)}while(c!==g);return go((new Pf).sanitizeChildren(vd(u)||u))}finally{if(u){const c=vd(u)||u;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function vd(o){return"content"in o&&function(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var ln=(()=>((ln=ln||{})[ln.NONE=0]="NONE",ln[ln.HTML=1]="HTML",ln[ln.STYLE=2]="STYLE",ln[ln.SCRIPT=3]="SCRIPT",ln[ln.URL=4]="URL",ln[ln.RESOURCE_URL=5]="RESOURCE_URL",ln))();function da(o){const a=function(){const o=Te();return o&&o[12]}();return a?a.sanitize(ln.URL,o)||"":au(o,"URL")?yi(o):as(Ve(o))}const Mm="__ngContext__";function ar(o,a){o[Mm]=a}function Ir(o){const a=function(o){return o[Mm]||null}(o);return a?Array.isArray(a)?a:a.lView:null}function I(o){return o.ngOriginalError}function O(o,...a){o.error(...a)}class z{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a),c=this._findContext(a),h=(o=a)&&o.ngErrorLogger||O;var o;h(this._console,"ERROR",a),u&&h(this._console,"ORIGINAL ERROR",u),c&&h(this._console,"ERROR CONTEXT",c)}_findContext(a){return a?a.ngDebugContext||this._findContext(I(a)):null}_findOriginalError(a){let u=a&&I(a);for(;u&&I(u);)u=I(u);return u||null}}const Td=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind($))();function vi(o){return o instanceof Function?o():o}var wo=(()=>((wo=wo||{})[wo.Important=1]="Important",wo[wo.DashCase=2]="DashCase",wo))();function Mv(o,a){return undefined(o,a)}function Ui(o){const a=o[3];return qt(a)?a[3]:a}function Jb(o){return ye(o[13])}function Um(o){return ye(o[4])}function ye(o){for(;null!==o&&!qt(o);)o=o[4];return o}function fa(o,a,u,c,h){if(null!=c){let g,v=!1;qt(c)?g=c:ti(c)&&(v=!0,c=c[0]);const w=on(c);0===o&&null!==u?null==h?tC(a,u,w):Ei(a,u,w,h||null,!0):1===o&&null!==u?Ei(a,u,w,h||null,!0):2===o?function(o,a,u){const c=qf(o,a);c&&function(o,a,u,c){sn(o)?o.removeChild(a,u,c):a.removeChild(u)}(o,c,a,u)}(a,w,v):3===o&&a.destroyNode(w),null!=g&&function(o,a,u,c,h){const g=u[7];g!==on(u)&&fa(a,o,c,g,h);for(let w=10;w<u.length;w++){const D=u[w];Rd(D[1],D,o,a,c,g)}}(a,o,g,u,h)}}function ks(o,a,u){return sn(o)?o.createElement(a,u):null===u?o.createElement(a):o.createElementNS(u,a)}function Xb(o,a){const u=o[9],c=u.indexOf(a),h=a[3];1024&a[2]&&(a[2]&=-1025,Gh(h,-1)),u.splice(c,1)}function Hf(o,a){if(o.length<=10)return;const u=10+a,c=o[u];if(c){const h=c[17];null!==h&&h!==o&&Xb(h,c),a>0&&(o[u-1][4]=c[4]);const g=Fi(o,10+a);!function(o,a){Rd(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(c[1],c);const v=g[19];null!==v&&v.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function eC(o,a){if(!(256&a[2])){const u=a[11];sn(u)&&u.destroyNode&&Rd(o,a,u,3,null,null),function(o){let a=o[13];if(!a)return kv(o[1],o);for(;a;){let u=null;if(ti(a))u=a[13];else{const c=a[10];c&&(u=c)}if(!u){for(;a&&!a[4]&&a!==o;)ti(a)&&kv(a[1],a),a=a[3];null===a&&(a=o),ti(a)&&kv(a[1],a),u=a&&a[4]}a=u}}(a)}}function kv(o,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function(o,a){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let c=0;c<u.length;c+=2){const h=a[u[c]];if(!(h instanceof Xo)){const g=u[c+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const w=h[g[v]],D=g[v+1];try{D.call(w)}finally{}}else try{g.call(h)}finally{}}}}(o,a),function(o,a){const u=o.cleanup,c=a[7];let h=-1;if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const v=u[g+1],w="function"==typeof v?v(a):on(a[v]),D=c[h=u[g+2]],T=u[g+3];"boolean"==typeof T?w.removeEventListener(u[g],D,T):T>=0?c[h=T]():c[h=-T].unsubscribe(),g+=2}else{const v=c[h=u[g+1]];u[g].call(v)}if(null!==c){for(let g=h+1;g<c.length;g++)c[g]();a[7]=null}}(o,a),1===a[1].type&&sn(a[11])&&a[11].destroy();const u=a[17];if(null!==u&&qt(a[3])){u!==a[3]&&Xb(u,a);const c=a[19];null!==c&&c.detachView(o)}}}function Gf(o,a,u){return function(o,a,u){let c=a;for(;null!==c&&40&c.type;)c=(a=c).parent;if(null===c)return u[0];if(2&c.flags){const h=o.data[c.directiveStart].encapsulation;if(h===Sn.None||h===Sn.Emulated)return null}return ri(c,u)}(o,a.parent,u)}function Ei(o,a,u,c,h){sn(o)?o.insertBefore(a,u,c,h):a.insertBefore(u,c,h)}function tC(o,a,u){sn(o)?o.appendChild(a,u):a.appendChild(u)}function nC(o,a,u,c,h){null!==c?Ei(o,a,u,c,h):tC(o,a,u)}function qf(o,a){return sn(o)?o.parentNode(a):a.parentNode}let zf=function(o,a,u){return 40&o.type?ri(o,u):null};function Ad(o,a,u,c){const h=Gf(o,c,a),g=a[11],w=function(o,a,u){return zf(o,a,u)}(c.parent||a[6],c,a);if(null!=h)if(Array.isArray(u))for(let D=0;D<u.length;D++)nC(g,h,u[D],w,!1);else nC(g,h,u,w,!1)}function lr(o,a){if(null!==a){const u=a.type;if(3&u)return ri(a,o);if(4&u)return Hm(-1,o[a.index]);if(8&u){const c=a.child;if(null!==c)return lr(o,c);{const h=o[a.index];return qt(h)?Hm(-1,h):on(h)}}if(32&u)return Mv(a,o)()||on(o[a.index]);{const c=Lv(o,a);return null!==c?Array.isArray(c)?c[0]:lr(Ui(o[16]),c):lr(o,a.next)}}return null}function Lv(o,a){return null!==a?o[16][6].projection[a.projection]:null}function Hm(o,a){const u=10+o+1;if(u<a.length){const c=a[u],h=c[1].firstChild;if(null!==h)return lr(c,h)}return a[7]}function qm(o,a,u,c,h,g,v){for(;null!=u;){const w=c[u.index],D=u.type;if(v&&0===a&&(w&&ar(on(w),c),u.flags|=4),64!=(64&u.flags))if(8&D)qm(o,a,u.child,c,h,g,!1),fa(a,o,h,w,g);else if(32&D){const T=Mv(u,c);let A;for(;A=T();)fa(a,o,h,A,g);fa(a,o,h,w,g)}else 16&D?zm(o,a,c,u,h,g):fa(a,o,h,w,g);u=v?u.projectionNext:u.next}}function Rd(o,a,u,c,h,g){qm(u,c,o.firstChild,a,h,g,!1)}function zm(o,a,u,c,h,g){const v=u[16],D=v[6].projection[c.projection];if(Array.isArray(D))for(let T=0;T<D.length;T++)fa(a,o,h,D[T],g);else qm(o,a,D,v[3],h,g,!0)}function jl(o,a,u){sn(o)?o.setAttribute(a,"style",u):a.style.cssText=u}function Wm(o,a,u){sn(o)?""===u?o.removeAttribute(a,"class"):o.setAttribute(a,"class",u):a.className=u}function Zm(o,a,u){let c=o.length;for(;;){const h=o.indexOf(a,u);if(-1===h)return h;if(0===h||o.charCodeAt(h-1)<=32){const g=a.length;if(h+g===c||o.charCodeAt(h+g)<=32)return h}u=h+1}}const sC="ng-template";function oC(o,a,u){let c=0;for(;c<o.length;){let h=o[c++];if(u&&"class"===h){if(h=o[c],-1!==Zm(h.toLowerCase(),a,0))return!0}else if(1===h){for(;c<o.length&&"string"==typeof(h=o[c++]);)if(h.toLowerCase()===a)return!0;return!1}}return!1}function Wf(o){return 4===o.type&&o.value!==sC}function Vv(o,a,u){return a===(4!==o.type||u?o.value:sC)}function Uv(o,a,u){let c=4;const h=o.attrs||[],g=function(o){for(let a=0;a<o.length;a++)if(of(o[a]))return a;return o.length}(h);let v=!1;for(let w=0;w<a.length;w++){const D=a[w];if("number"!=typeof D){if(!v)if(4&c){if(c=2|1&c,""!==D&&!Vv(o,D,u)||""===D&&1===a.length){if(Bi(c))return!1;v=!0}}else{const T=8&c?D:a[++w];if(8&c&&null!==o.attrs){if(!oC(o.attrs,T,u)){if(Bi(c))return!1;v=!0}continue}const M=ZS(8&c?"class":D,h,Wf(o),u);if(-1===M){if(Bi(c))return!1;v=!0;continue}if(""!==T){let P;P=M>g?"":h[M+1].toLowerCase();const U=8&c?P:null;if(U&&-1!==Zm(U,T,0)||2&c&&T!==P){if(Bi(c))return!1;v=!0}}}}else{if(!v&&!Bi(c)&&!Bi(D))return!1;if(v&&Bi(D))continue;v=!1,c=D|1&c}}return Bi(c)||v}function Bi(o){return 0==(1&o)}function ZS(o,a,u,c){if(null===a)return-1;let h=0;if(c||!u){let g=!1;for(;h<a.length;){const v=a[h];if(v===o)return h;if(3===v||6===v)g=!0;else{if(1===v||2===v){let w=a[++h];for(;"string"==typeof w;)w=a[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=g?1:2}return-1}return function(o,a){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const c=o[u];if("number"==typeof c)return-1;if(c===a)return u;u++}return-1}(a,o)}function aC(o,a,u=!1){for(let c=0;c<a.length;c++)if(Uv(o,a[c],u))return!0;return!1}function Tr(o,a){return o?":not("+a.trim()+")":a}function Zf(o){let a=o[0],u=1,c=2,h="",g=!1;for(;u<o.length;){let v=o[u];if("string"==typeof v)if(2&c){const w=o[++u];h+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&c?h+="."+v:4&c&&(h+=" "+v);else""!==h&&!Bi(v)&&(a+=Tr(g,h),h=""),c=v,g=g||!Bi(c);u++}return""!==h&&(a+=Tr(g,h)),a}const vt={};function lC(o){Yf(xt(),Te(),Lr()+o,Yo())}function Yf(o,a,u,c){if(!c)if(3==(3&a[2])){const g=o.preOrderCheckHooks;null!==g&&Qa(a,g,u)}else{const g=o.preOrderHooks;null!==g&&nf(a,g,0,u)}Jo(u)}function $l(o,a){return o<<17|a<<2}function ji(o){return o>>17&32767}function Qf(o){return 2|o}function bo(o){return(131068&o)>>2}function Ym(o,a){return-131069&o|a<<2}function Qm(o){return 1|o}function zv(o,a){const u=o.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const h=u[c],g=u[c+1];if(-1!==g){const v=o.data[g];Xh(h),v.contentQueries(2,a[g],g)}}}function ya(o,a,u,c,h,g,v,w,D,T){const A=a.blueprint.slice();return A[0]=h,A[2]=140|c,Jc(A),A[3]=A[15]=o,A[8]=u,A[10]=v||o&&o[10],A[11]=w||o&&o[11],A[12]=D||o&&o[12]||null,A[9]=T||o&&o[9]||null,A[6]=g,A[16]=2==a.type?o[16]:A,A}function _a(o,a,u,c,h){let g=o.data[a];if(null===g)g=function(o,a,u,c,h){const g=Jg(),v=Wh(),D=o.data[a]=function(o,a,u,c,h,g){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,u,a,c,h);return null===o.firstChild&&(o.firstChild=D),null!==g&&(v?null==g.child&&null!==D.parent&&(g.child=D):null===g.next&&(g.next=D)),D}(o,a,u,c,h),ht.lFrame.inI18n&&(g.flags|=64);else if(64&g.type){g.type=u,g.value=c,g.attrs=h;const v=function(){const o=ht.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return pi(g,!0),g}function fu(o,a,u,c){if(0===u)return-1;const h=a.length;for(let g=0;g<u;g++)a.push(c),o.blueprint.push(c),o.data.push(null);return h}function Md(o,a,u){yl(a);try{const c=o.viewQuery;null!==c&&dy(1,c,u);const h=o.template;null!==h&&ry(o,a,h,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&zv(o,a),o.staticViewQueries&&dy(2,o.viewQuery,u);const g=o.components;null!==g&&function(o,a){for(let u=0;u<a.length;u++)gu(o,a[u])}(a,g)}catch(c){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),c}finally{a[2]&=-5,im()}}function Hl(o,a,u,c){const h=a[2];if(256==(256&h))return;yl(a);const g=Yo();try{Jc(a),function(o){ht.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&ry(o,a,u,2,c);const v=3==(3&h);if(!g)if(v){const T=o.preOrderCheckHooks;null!==T&&Qa(a,T,null)}else{const T=o.preOrderHooks;null!==T&&nf(a,T,0,null),_l(a,0)}if(function(o){for(let a=Jb(o);null!==a;a=Um(a)){if(!a[2])continue;const u=a[9];for(let c=0;c<u.length;c++){const h=u[c],g=h[3];0==(1024&h[2])&&Gh(g,1),h[2]|=1024}}}(a),function(o){for(let a=Jb(o);null!==a;a=Um(a))for(let u=10;u<a.length;u++){const c=a[u],h=c[1];dl(c)&&Hl(h,c,h.template,c[8])}}(a),null!==o.contentQueries&&zv(o,a),!g)if(v){const T=o.contentCheckHooks;null!==T&&Qa(a,T)}else{const T=o.contentHooks;null!==T&&nf(a,T,1),_l(a,1)}!function(o,a){const u=o.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const h=u[c];if(h<0)Jo(~h);else{const g=h,v=u[++c],w=u[++c];Yh(v,g),w(2,a[g])}}}finally{Jo(-1)}}(o,a);const w=o.components;null!==w&&function(o,a){for(let u=0;u<a.length;u++)fA(o,a[u])}(a,w);const D=o.viewQuery;if(null!==D&&dy(2,D,c),!g)if(v){const T=o.viewCheckHooks;null!==T&&Qa(a,T)}else{const T=o.viewHooks;null!==T&&nf(a,T,2),_l(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),g||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,Gh(a[3],-1))}finally{im()}}function rp(o,a,u,c){const h=a[10],g=!Yo(),v=cl(a);try{g&&!v&&h.begin&&h.begin(),v&&Md(o,a,c),Hl(o,a,u,c)}finally{g&&!v&&h.end&&h.end()}}function ry(o,a,u,c,h){const g=Lr(),v=2&c;try{Jo(-1),v&&a.length>20&&Yf(o,a,20,Yo()),u(c,h)}finally{Jo(g)}}function ip(o,a,u){!qh()||(function(o,a,u,c){const h=u.directiveStart,g=u.directiveEnd;o.firstCreatePass||xs(u,a),ar(c,a);const v=u.initialInputs;for(let w=h;w<g;w++){const D=o.data[w],T=Oi(D);T&&uA(a,u,D);const A=ta(a,o,w,u);ar(A,a),null!==v&&dp(0,w-h,A,D,0,v),T&&(vr(u.index,a)[8]=A)}}(o,a,u,ri(u,a)),128==(128&u.flags)&&function(o,a,u){const c=u.directiveStart,h=u.directiveEnd,v=u.index,w=ht.lFrame.currentDirectiveIndex;try{Jo(v);for(let D=c;D<h;D++){const T=o.data[D],A=a[D];ml(D),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&Co(T,A)}}finally{Jo(-1),ml(w)}}(o,a,u))}function Od(o,a,u=ri){const c=a.localNames;if(null!==c){let h=a.index+1;for(let g=0;g<c.length;g+=2){const v=c[g+1],w=-1===v?u(a,o):o[v];o[h++]=w}}}function Pd(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=sp(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function sp(o,a,u,c,h,g,v,w,D,T){const A=20+c,M=A+h,P=function(o,a){const u=[];for(let c=0;c<a;c++)u.push(c<o?null:vt);return u}(A,M),U="function"==typeof T?T():T;return P[1]={type:o,blueprint:P,template:u,queries:null,viewQuery:w,declTNode:a,data:P.slice().fill(null,A),bindingStartIndex:A,expandoStartIndex:M,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:U,incompleteFirstPass:!1}}function Zv(o,a,u,c){const h=e0(a);null===u?h.push(c):(h.push(u),o.firstCreatePass&&t0(o).push(c,h.length-1))}function Kv(o,a,u){for(let c in o)if(o.hasOwnProperty(c)){const h=o[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(a,h):u[c]=[a,h]}return u}function wi(o,a,u,c,h,g,v,w){const D=ri(a,u);let A,T=a.inputs;!w&&null!=T&&(A=T[c])?(MC(o,u,A,c,h),Gc(a)&&function(o,a){const u=vr(a,o);16&u[2]||(u[2]|=64)}(u,a.index)):3&a.type&&(c=function(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(c),h=null!=v?v(h,a.value||"",c):h,sn(g)?g.setProperty(D,c,h):td(c)||(D.setProperty?D.setProperty(c,h):D[c]=h))}function up(o,a,u,c){let h=!1;if(qh()){const g=function(o,a,u){const c=o.directiveRegistry;let h=null;if(c)for(let g=0;g<c.length;g++){const v=c[g];aC(u,v.selectors,!1)&&(h||(h=[]),Hn(xs(u,a),o,v.type),Oi(v)?(lp(o,u),h.unshift(v)):h.push(v))}return h}(o,a,u),v=null===c?null:{"":-1};if(null!==g){h=!0,En(u,o.data.length,g.length);for(let A=0;A<g.length;A++){const M=g[A];M.providersResolver&&M.providersResolver(M)}let w=!1,D=!1,T=fu(o,a,g.length,null);for(let A=0;A<g.length;A++){const M=g[A];u.mergedAttrs=af(u.mergedAttrs,M.hostAttrs),cp(o,u,a,T,M),TC(T,M,v),null!==M.contentQueries&&(u.flags|=8),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(u.flags|=128);const P=M.type.prototype;!w&&(P.ngOnChanges||P.ngOnInit||P.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(u.index),w=!0),!D&&(P.ngOnChanges||P.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(u.index),D=!0),T++}!function(o,a){const c=a.directiveEnd,h=o.data,g=a.attrs,v=[];let w=null,D=null;for(let T=a.directiveStart;T<c;T++){const A=h[T],M=A.inputs,P=null===g||Wf(a)?null:lA(M,g);v.push(P),w=Kv(M,T,w),D=Kv(A.outputs,T,D)}null!==w&&(w.hasOwnProperty("class")&&(a.flags|=16),w.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=v,a.inputs=w,a.outputs=D}(o,u)}v&&function(o,a,u){if(a){const c=o.localNames=[];for(let h=0;h<a.length;h+=2){const g=u[a[h+1]];if(null==g)throw new Pe("301",`Export of name '${a[h+1]}' not found!`);c.push(a[h],g)}}}(u,c,v)}return u.mergedAttrs=af(u.mergedAttrs,u.attrs),h}function pu(o,a,u,c,h,g){const v=g.hostBindings;if(v){let w=o.hostBindingOpCodes;null===w&&(w=o.hostBindingOpCodes=[]);const D=~a.index;(function(o){let a=o.length;for(;a>0;){const u=o[--a];if("number"==typeof u&&u<0)return u}return 0})(w)!=D&&w.push(D),w.push(c,h,v)}}function Co(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function lp(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function TC(o,a,u){if(u){if(a.exportAs)for(let c=0;c<a.exportAs.length;c++)u[a.exportAs[c]]=o;Oi(a)&&(u[""]=o)}}function En(o,a,u){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+u,o.providerIndexes=a}function cp(o,a,u,c,h){o.data[c]=h;const g=h.factory||(h.factory=Ts(h.type)),v=new Xo(g,Oi(h),null);o.blueprint[c]=v,u[c]=v,pu(o,a,0,c,fu(o,u,h.hostVars,vt),h)}function uA(o,a,u){const c=ri(a,o),h=Pd(u),g=o[10],v=hp(o,ya(o,h,null,u.onPush?64:16,c,a,g,g.createRenderer(c,u),null,null));o[a.index]=v}function Io(o,a,u,c,h,g){const v=ri(o,a);!function(o,a,u,c,h,g,v){if(null==g)sn(o)?o.removeAttribute(a,h,u):a.removeAttribute(h);else{const w=null==v?Ve(g):v(g,c||"",h);sn(o)?o.setAttribute(a,h,w,u):u?a.setAttributeNS(u,h,w):a.setAttribute(h,w)}}(a[11],v,g,o.value,u,c,h)}function dp(o,a,u,c,h,g){const v=g[a];if(null!==v){const w=c.setInput;for(let D=0;D<v.length;){const T=v[D++],A=v[D++],M=v[D++];null!==w?c.setInput(u,M,T,A):u[A]=M}}}function lA(o,a){let u=null,c=0;for(;c<a.length;){const h=a[c];if(0!==h)if(5!==h){if("number"==typeof h)break;o.hasOwnProperty(h)&&(null===u&&(u=[]),u.push(h,o[h],a[c+1])),c+=2}else c+=2;else c+=4}return u}function SC(o,a,u,c){return new Array(o,!0,!1,a,null,0,c,u,null,null)}function fA(o,a){const u=vr(a,o);if(dl(u)){const c=u[1];80&u[2]?Hl(c,u,c.template,u[8]):u[5]>0&&zl(u)}}function zl(o){for(let c=Jb(o);null!==c;c=Um(c))for(let h=10;h<c.length;h++){const g=c[h];if(1024&g[2]){const v=g[1];Hl(v,g,v.template,g[8])}else g[5]>0&&zl(g)}const u=o[1].components;if(null!==u)for(let c=0;c<u.length;c++){const h=vr(u[c],o);dl(h)&&h[5]>0&&zl(h)}}function gu(o,a){const u=vr(a,o),c=u[1];(function(o,a){for(let u=a.length;u<o.blueprint.length;u++)a.push(o.blueprint[u])})(c,u),Md(c,u,u[8])}function hp(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function cy(o){for(;o;){o[2]|=64;const a=Ui(o);if(Lh(o)&&!a)return o;o=a}return null}function Qv(o,a,u){const c=a[10];c.begin&&c.begin();try{Hl(o,a,o.template,u)}catch(h){throw NC(a,h),h}finally{c.end&&c.end()}}function Jv(o){!function(o){for(let a=0;a<o.components.length;a++){const u=o.components[a],c=Ir(u),h=c[1];rp(h,c,h.template,u)}}(o[8])}function dy(o,a,u){Xh(0),a(o,u)}const Xv=(()=>Promise.resolve(null))();function e0(o){return o[7]||(o[7]=[])}function t0(o){return o.cleanup||(o.cleanup=[])}function NC(o,a){const u=o[9],c=u?u.get(z,null):null;c&&c.handleError(a)}function MC(o,a,u,c,h){for(let g=0;g<u.length;){const v=u[g++],w=u[g++],D=a[v],T=o.data[v];null!==T.setInput?T.setInput(D,h,c,w):D[w]=h}}function va(o,a,u){const c=ul(a,o);!function(o,a,u){sn(o)?o.setValue(a,u):a.textContent=u}(o[11],c,u)}function Wl(o,a,u){let c=u?o.styles:null,h=u?o.classes:null,g=0;if(null!==a)for(let v=0;v<a.length;v++){const w=a[v];"number"==typeof w?g=w:1==g?h=J(h,w):2==g&&(c=J(c,w+": "+a[++v]+";"))}u?o.styles=c:o.stylesWithoutHost=c,u?o.classes=h:o.classesWithoutHost=h}const Zl=new yn("INJECTOR",-1);class Vd{get(a,u=fo){if(u===fo){const c=new Error(`NullInjectorError: No provider for ${K(a)}!`);throw c.name="NullInjectorError",c}return u}}const Ea=new yn("Set Injector scope."),pp={},qn={};let py;function PC(){return void 0===py&&(py=new Vd),py}function kC(o,a=null,u=null,c){return new mA(o,u,a||PC(),c)}class mA{constructor(a,u,c,h=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];u&&wr(u,w=>this.processProvider(w,a,u)),wr([a],w=>this.processInjectorType(w,[],g)),this.records.set(Zl,Kl(void 0,this));const v=this.records.get(Ea);this.scope=null!=v?v.value:null,this.source=h||("object"==typeof a?null:K(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,u=fo,c=Ae.Default){this.assertNotDestroyed();const h=po(this),g=pn(void 0);try{if(!(c&Ae.SkipSelf)){let w=this.records.get(a);if(void 0===w){const D=("function"==typeof(o=a)||"object"==typeof o&&o instanceof yn)&&Pr(a);w=D&&this.injectableDefInScope(D)?Kl(gy(a),pp):null,this.records.set(a,w)}if(null!=w)return this.hydrate(a,w)}return(c&Ae.Self?PC():this.parent).get(a,u=c&Ae.Optional&&u===fo?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[os]=v[os]||[]).unshift(K(a)),h)throw v;return gm(v,a,"R3InjectorError",this.source)}throw v}finally{pn(g),po(h)}var o}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((c,h)=>a.push(K(h))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(a,u,c){if(!(a=te(a)))return!1;let h=Ys(a);const g=null==h&&a.ngModule||void 0,v=void 0===g?a:g,w=-1!==c.indexOf(v);if(void 0!==g&&(h=Ys(g)),null==h)return!1;if(null!=h.imports&&!w){let A;c.push(v);try{wr(h.imports,M=>{this.processInjectorType(M,u,c)&&(void 0===A&&(A=[]),A.push(M))})}finally{}if(void 0!==A)for(let M=0;M<A.length;M++){const{ngModule:P,providers:U}=A[M];wr(U,q=>this.processProvider(q,P,U||Be))}}this.injectorDefTypes.add(v);const D=Ts(v)||(()=>new v);this.records.set(v,Kl(D,pp));const T=h.providers;if(null!=T&&!w){const A=a;wr(T,M=>this.processProvider(M,A,T))}return void 0!==g&&void 0!==a.providers}processProvider(a,u,c){let h=mu(a=te(a))?a:te(a&&a.provide);const g=Do(o=a)?Kl(void 0,o.useValue):Kl(gp(o),pp);var o;if(mu(a)||!0!==a.multi)this.records.get(h);else{let v=this.records.get(h);v||(v=Kl(void 0,pp,!0),v.factory=()=>la(v.multi),this.records.set(h,v)),h=a,v.multi.push(a)}this.records.set(h,g)}hydrate(a,u){return u.value===pp&&(u.value=qn,u.value=u.factory()),"object"==typeof u.value&&u.value&&null!==(o=u.value)&&"object"==typeof o&&"function"==typeof o.ngOnDestroy&&this.onDestroy.add(u.value),u.value;var o}injectableDefInScope(a){if(!a.providedIn)return!1;const u=te(a.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function gy(o){const a=Pr(o),u=null!==a?a.factory:Ts(o);if(null!==u)return u;if(o instanceof yn)throw new Error(`Token ${K(o)} is missing a \u0275prov definition.`);if(o instanceof Function)return function(o){const a=o.length;if(a>0){const c=function(o,a){const u=[];for(let c=0;c<o;c++)u.push(a);return u}(a,"?");throw new Error(`Can't resolve all parameters for ${K(o)}: (${c.join(", ")}).`)}const u=function(o){const a=o&&(o[Un]||o[Ju]);if(a){const u=function(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),a}return null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new Error("unreachable")}function gp(o,a,u){let c;if(mu(o)){const h=te(o);return Ts(h)||gy(h)}if(Do(o))c=()=>te(o.useValue);else if(function(o){return!(!o||!o.useFactory)}(o))c=()=>o.useFactory(...la(o.deps||[]));else if(function(o){return!(!o||!o.useExisting)}(o))c=()=>_n(te(o.useExisting));else{const h=te(o&&(o.useClass||o.provide));if(!function(o){return!!o.deps}(o))return Ts(h)||gy(h);c=()=>new h(...la(o.deps))}return c}function Kl(o,a,u=!1){return{factory:o,value:a,multi:u?[]:void 0}}function Do(o){return null!==o&&"object"==typeof o&&aa in o}function mu(o){return"function"==typeof o}const yp=function(o,a,u){return function(o,a=null,u=null,c){const h=kC(o,a,u,c);return h._resolveInjectorDefTypes(),h}({name:u},a,o,u)};let Rn=(()=>{class o{static create(u,c){return Array.isArray(u)?yp(u,c,""):yp(u.providers,u.parent,u.name||"")}}return o.THROW_IF_NOT_FOUND=fo,o.NULL=new Vd,o.\u0275prov=hn({token:o,providedIn:"any",factory:()=>_n(Zl)}),o.__NG_ELEMENT_ID__=-1,o})();function Re(o,a){Ya(Ir(o)[1],An())}function f0(o){let a=function(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),u=!0;const c=[o];for(;a;){let h;if(Oi(o))h=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Error("Directives cannot inherit Components");h=a.\u0275dir}if(h){if(u){c.push(h);const v=o;v.inputs=p0(o.inputs),v.declaredInputs=p0(o.declaredInputs),v.outputs=p0(o.outputs);const w=h.hostBindings;w&&$i(o,w);const D=h.viewQuery,T=h.contentQueries;if(D&&DA(o,D),T&&TA(o,T),Y(o.inputs,h.inputs),Y(o.declaredInputs,h.declaredInputs),Y(o.outputs,h.outputs),Oi(h)&&h.data.animation){const A=o.data;A.animation=(A.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let v=0;v<g.length;v++){const w=g[v];w&&w.ngInherit&&w(o),w===f0&&(u=!1)}}a=Object.getPrototypeOf(a)}!function(o){let a=0,u=null;for(let c=o.length-1;c>=0;c--){const h=o[c];h.hostVars=a+=h.hostVars,h.hostAttrs=af(h.hostAttrs,u=af(u,h.hostAttrs))}}(c)}function p0(o){return o===He?{}:o===Be?[]:o}function DA(o,a){const u=o.viewQuery;o.viewQuery=u?(c,h)=>{a(c,h),u(c,h)}:a}function TA(o,a){const u=o.contentQueries;o.contentQueries=u?(c,h,g)=>{a(c,h,g),u(c,h,g)}:a}function $i(o,a){const u=o.hostBindings;o.hostBindings=u?(c,h)=>{a(c,h),u(c,h)}:a}let wa=null;function Ql(){if(!wa){const o=$.Symbol;if(o&&o.iterator)wa=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<a.length;++u){const c=a[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(wa=c)}}}return wa}function jd(o){return!!Xl(o)&&(Array.isArray(o)||!(o instanceof Map)&&Ql()in o)}function Xl(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function At(o,a,u){return o[a]=u}function $t(o,a,u){return!Object.is(o[a],u)&&(o[a]=u,!0)}function g0(o,a,u,c){const h=Te();return $t(h,io(),a)&&(xt(),Io(an(),h,o,a,u,c)),g0}function wn(o,a,u,c){return $t(o,io(),u)?a+Ve(u)+c:vt}function Dy(o,a,u,c,h,g,v,w){const D=Te(),T=xt(),A=o+20,M=T.firstCreatePass?function(o,a,u,c,h,g,v,w,D){const T=a.consts,A=_a(a,o,4,v||null,to(T,w));up(a,u,A,to(T,D)),Ya(a,A);const M=A.tViews=sp(2,A,c,h,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,T);return null!==a.queries&&(a.queries.template(a,A),M.queries=a.queries.embeddedTView(A)),A}(A,T,D,a,u,c,h,g,v):T.data[A];pi(M,!1);const P=D[11].createComment("");Ad(T,D,P,M),ar(P,D),hp(D,D[A]=SC(P,D,P,M)),ni(M)&&ip(T,D,M),null!=v&&Od(D,M,w)}function _0(o){return function(o,a){return o[a]}(ht.lFrame.contextLView,20+o)}function Ro(o,a=Ae.Default){const u=Te();return null===u?_n(o,a):uv(An(),u,te(o),a)}function xy(o,a,u){const c=Te();return $t(c,io(),a)&&wi(xt(),an(),c,o,a,c[11],u,!1),xy}function Ca(o,a,u,c,h){const v=h?"class":"style";MC(o,u,a.inputs[v],v,c)}function wu(o,a,u,c){const h=Te(),g=xt(),v=20+o,w=h[11],D=h[v]=ks(w,a,ht.lFrame.currentNamespace),T=g.firstCreatePass?function(o,a,u,c,h,g,v){const w=a.consts,T=_a(a,o,2,h,to(w,g));return up(a,u,T,to(w,v)),null!==T.attrs&&Wl(T,T.attrs,!1),null!==T.mergedAttrs&&Wl(T,T.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,T),T}(v,g,h,0,a,u,c):g.data[v];pi(T,!0);const A=T.mergedAttrs;null!==A&&un(w,D,A);const M=T.classes;null!==M&&Wm(w,D,M);const P=T.styles;null!==P&&jl(w,D,P),64!=(64&T.flags)&&Ad(g,h,D,T),0===ht.lFrame.elementDepthCount&&ar(D,h),ht.lFrame.elementDepthCount++,ni(T)&&(ip(g,h,T),function(o,a,u){if(nl(a)){const h=a.directiveEnd;for(let g=a.directiveStart;g<h;g++){const v=o.data[g];v.contentQueries&&v.contentQueries(1,u[g],g)}}}(g,T,h)),null!==c&&Od(h,T)}function Ny(){let o=An();Wh()?ht.lFrame.isParent=!1:(o=o.parent,pi(o,!1));const a=o;ht.lFrame.elementDepthCount--;const u=xt();u.firstCreatePass&&(Ya(u,o),nl(o)&&u.queries.elementEnd(o)),null!=a.classesWithoutHost&&function(o){return 0!=(16&o.flags)}(a)&&Ca(u,a,Te(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function(o){return 0!=(32&o.flags)}(a)&&Ca(u,a,Te(),a.stylesWithoutHost,!1)}function M0(o,a,u,c){wu(o,a,u,c),Ny()}function xp(){return Te()}function O0(o){return!!o&&"function"==typeof o.then}function Py(o){return!!o&&"function"==typeof o.subscribe}const P0=Py;function ky(o,a,u,c){const h=Te(),g=xt(),v=An();return function(o,a,u,c,h,g,v,w){const D=ni(c),A=o.firstCreatePass&&t0(o),M=a[8],P=e0(a);let U=!0;if(3&c.type||w){const Q=ri(c,a),xe=w?w(Q):Q,ve=P.length,tt=w?pt=>w(on(pt[c.index])):c.index;if(sn(u)){let pt=null;if(!w&&D&&(pt=function(o,a,u,c){const h=o.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const v=h[g];if(v===u&&h[g+1]===c){const w=a[7],D=h[g+2];return w.length>D?w[D]:null}"string"==typeof v&&(g+=2)}return null}(o,a,h,c.index)),null!==pt)(pt.__ngLastListenerFn__||pt).__ngNextListenerFn__=g,pt.__ngLastListenerFn__=g,U=!1;else{g=Fy(c,a,M,g,!1);const kt=u.listen(xe,h,g);P.push(g,kt),A&&A.push(h,tt,ve,ve+1)}}else g=Fy(c,a,M,g,!0),xe.addEventListener(h,g,v),P.push(g),A&&A.push(h,tt,ve,v)}else g=Fy(c,a,M,g,!1);const q=c.outputs;let se;if(U&&null!==q&&(se=q[h])){const Q=se.length;if(Q)for(let xe=0;xe<Q;xe+=2){const mr=a[se[xe]][se[xe+1]].subscribe(g),qs=P.length;P.push(g,mr),A&&A.push(h,c.index,qs,-(qs+1))}}}(g,h,h[11],v,o,a,!!u,c),ky}function F0(o,a,u,c){try{return!1!==u(c)}catch(h){return NC(o,h),!1}}function Fy(o,a,u,c,h){return function g(v){if(v===Function)return c;const w=2&o.flags?vr(o.index,a):a;0==(32&a[2])&&cy(w);let D=F0(a,0,c,v),T=g.__ngNextListenerFn__;for(;T;)D=F0(a,0,T,v)&&D,T=T.__ngNextListenerFn__;return h&&!1===D&&(v.preventDefault(),v.returnValue=!1),D}}function L0(o=1){return function(o){return(ht.lFrame.contextLView=function(o,a){for(;o>0;)a=a[15],o--;return a}(o,ht.lFrame.contextLView))[8]}(o)}function Fn(o,a,u){return Pt(o,"",a,"",u),Fn}function Pt(o,a,u,c,h){const g=Te(),v=wn(g,a,u,c);return v!==vt&&wi(xt(),an(),g,o,v,g[11],h,!1),Pt}function oI(o,a,u,c,h){const g=o[u+1],v=null===a;let w=c?ji(g):bo(g),D=!1;for(;0!==w&&(!1===D||v);){const A=o[w+1];aI(o[w],a)&&(D=!0,o[w+1]=c?Qm(A):Qf(A)),w=c?ji(A):bo(A)}D&&(o[u+1]=c?Qf(g):Qm(g))}function aI(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&Jn(o,a)>=0}function sc(o,a){return function(o,a,u,c){const h=Te(),g=xt(),v=function(o){const a=ht.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,u}(2);g.firstUpdatePass&&function(o,a,u,c){const h=o.data;if(null===h[u+1]){const g=h[Lr()],v=function(o,a){return a>=o.expandoStartIndex}(o,u);(function(o,a){return 0!=(o.flags&(a?16:32))})(g,c)&&null===a&&!v&&(a=!1),a=function(o,a,u,c){const h=function(o){const a=ht.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let g=c?a.residualClasses:a.residualStyles;if(null===h)0===(c?a.classBindings:a.styleBindings)&&(u=Lp(u=Uy(null,o,a,u,c),a.attrs,c),g=null);else{const v=a.directiveStylingLast;if(-1===v||o[v]!==h)if(u=Uy(h,o,a,u,c),null===g){let D=function(o,a,u){const c=u?a.classBindings:a.styleBindings;if(0!==bo(c))return o[ji(c)]}(o,a,c);void 0!==D&&Array.isArray(D)&&(D=Uy(null,o,a,D[1],c),D=Lp(D,a.attrs,c),function(o,a,u,c){o[ji(u?a.classBindings:a.styleBindings)]=c}(o,a,c,D))}else g=function(o,a,u){let c;const h=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<h;g++)c=Lp(c,o[g].hostAttrs,u);return Lp(c,a.attrs,u)}(o,a,c)}return void 0!==g&&(c?a.residualClasses=g:a.residualStyles=g),u}(h,g,a,c),function(o,a,u,c,h,g){let v=g?a.classBindings:a.styleBindings,w=ji(v),D=bo(v);o[c]=u;let A,T=!1;if(Array.isArray(u)){const M=u;A=M[1],(null===A||Jn(M,A)>0)&&(T=!0)}else A=u;if(h)if(0!==D){const P=ji(o[w+1]);o[c+1]=$l(P,w),0!==P&&(o[P+1]=Ym(o[P+1],c)),o[w+1]=function(o,a){return 131071&o|a<<17}(o[w+1],c)}else o[c+1]=$l(w,0),0!==w&&(o[w+1]=Ym(o[w+1],c)),w=c;else o[c+1]=$l(D,0),0===w?w=c:o[D+1]=Ym(o[D+1],c),D=c;T&&(o[c+1]=Qf(o[c+1])),oI(o,A,c,!0),oI(o,A,c,!1),function(o,a,u,c,h){const g=h?o.residualClasses:o.residualStyles;null!=g&&"string"==typeof a&&Jn(g,a)>=0&&(u[c+1]=Qm(u[c+1]))}(a,A,o,c,g),v=$l(w,D),g?a.classBindings=v:a.styleBindings=v}(h,g,a,u,v,c)}}(g,o,v,c),a!==vt&&$t(h,v,a)&&function(o,a,u,c,h,g,v,w){if(!(3&a.type))return;const D=o.data,T=D[w+1];Up(function(o){return 1==(1&o)}(T)?q0(D,a,u,h,bo(T),v):void 0)||(Up(g)||function(o){return 2==(2&o)}(T)&&(g=q0(D,null,u,h,w,v)),function(o,a,u,c,h){const g=sn(o);if(a)h?g?o.addClass(u,c):u.classList.add(c):g?o.removeClass(u,c):u.classList.remove(c);else{let v=-1===c.indexOf("-")?void 0:wo.DashCase;if(null==h)g?o.removeStyle(u,c,v):u.style.removeProperty(c);else{const w="string"==typeof h&&h.endsWith("!important");w&&(h=h.slice(0,-10),v|=wo.Important),g?o.setStyle(u,c,h,v):u.style.setProperty(c,h,w?"important":"")}}}(c,v,ul(Lr(),u),h,g))}(g,g.data[Lr()],h,h[11],o,h[v+1]=function(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=K(yi(o)))),o}(a,u),c,v)}(o,a,null,!0),sc}function Uy(o,a,u,c,h){let g=null;const v=u.directiveEnd;let w=u.directiveStylingLast;for(-1===w?w=u.directiveStart:w++;w<v&&(g=a[w],c=Lp(c,g.hostAttrs,h),g!==o);)w++;return null!==o&&(u.directiveStylingLast=w),c}function Lp(o,a,u){const c=u?1:2;let h=-1;if(null!==a)for(let g=0;g<a.length;g++){const v=a[g];"number"==typeof v?h=v:h===c&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),or(o,v,!!u||a[++g]))}return void 0===o?null:o}function q0(o,a,u,c,h,g){const v=null===a;let w;for(;h>0;){const D=o[h],T=Array.isArray(D),A=T?D[1]:D,M=null===A;let P=u[h+1];P===vt&&(P=M?Be:void 0);let U=M?nu(P,c):A===c?P:void 0;if(T&&!Up(U)&&(U=nu(D,c)),Up(U)&&(w=U,v))return w;const q=o[h+1];h=v?ji(q):bo(q)}if(null!==a){let D=g?a.residualClasses:a.residualStyles;null!=D&&(w=nu(D,c))}return w}function Up(o){return void 0!==o}function z0(o,a=""){const u=Te(),c=xt(),h=o+20,g=c.firstCreatePass?_a(c,h,1,a,null):c.data[h],v=u[h]=function(o,a){return sn(o)?o.createText(a):o.createTextNode(a)}(u[11],a);Ad(c,u,v,g),pi(g,!1)}function By(o){return Bp("",o,""),By}function Bp(o,a,u){const c=Te(),h=wn(c,o,a,u);return h!==vt&&va(c,Lr(),h),Bp}function dc(o,a,u){const c=Te();return $t(c,io(),a)&&wi(xt(),an(),c,o,a,c[11],u,!0),dc}const hc=void 0;var SI=["en",[["a","p"],["AM","PM"],hc],[["AM","PM"],hc,hc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],hc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],hc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",hc,"{1} 'at' {0}",hc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(o){const a=Math.floor(Math.abs(o)),u=o.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===u?1:5}];let Iu={};function qr(o){const a=function(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=Sa(a);if(u)return u;const c=a.split("-")[0];if(u=Sa(c),u)return u;if("en"===c)return SI;throw new Error(`Missing locale data for the locale "${o}".`)}function jy(o){return qr(o)[st.PluralCase]}function Sa(o){return o in Iu||(Iu[o]=$.ng&&$.ng.common&&$.ng.common.locales&&$.ng.common.locales[o]),Iu[o]}var st=(()=>((st=st||{})[st.LocaleId=0]="LocaleId",st[st.DayPeriodsFormat=1]="DayPeriodsFormat",st[st.DayPeriodsStandalone=2]="DayPeriodsStandalone",st[st.DaysFormat=3]="DaysFormat",st[st.DaysStandalone=4]="DaysStandalone",st[st.MonthsFormat=5]="MonthsFormat",st[st.MonthsStandalone=6]="MonthsStandalone",st[st.Eras=7]="Eras",st[st.FirstDayOfWeek=8]="FirstDayOfWeek",st[st.WeekendRange=9]="WeekendRange",st[st.DateFormat=10]="DateFormat",st[st.TimeFormat=11]="TimeFormat",st[st.DateTimeFormat=12]="DateTimeFormat",st[st.NumberSymbols=13]="NumberSymbols",st[st.NumberFormats=14]="NumberFormats",st[st.CurrencyCode=15]="CurrencyCode",st[st.CurrencySymbol=16]="CurrencySymbol",st[st.CurrencyName=17]="CurrencyName",st[st.Currencies=18]="Currencies",st[st.Directionality=19]="Directionality",st[st.PluralCase=20]="PluralCase",st[st.ExtraData=21]="ExtraData",st))();const Aa="en-US";let MI=Aa;function $y(o){dn(o,"Expected localeId to be defined"),"string"==typeof o&&(MI=o.toLowerCase().replace(/_/g,"-"))}function Qd(o,a,u,c,h){if(o=te(o),Array.isArray(o))for(let g=0;g<o.length;g++)Qd(o[g],a,u,c,h);else{const g=xt(),v=Te();let w=mu(o)?o:te(o.provide),D=gp(o);const T=An(),A=1048575&T.providerIndexes,M=T.directiveStart,P=T.providerIndexes>>20;if(mu(o)||!o.multi){const U=new Xo(D,h,Ro),q=Wp(w,a,h?A:A+P,M);-1===q?(Hn(xs(T,v),g,w),zp(g,o,a.length),a.push(w),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),u.push(U),v.push(U)):(u[q]=U,v[q]=U)}else{const U=Wp(w,a,A+P,M),q=Wp(w,a,A,A+P),se=U>=0&&u[U],Q=q>=0&&u[q];if(h&&!Q||!h&&!se){Hn(xs(T,v),g,w);const xe=function(o,a,u,c,h){const g=new Xo(o,u,Ro);return g.multi=[],g.index=a,g.componentProviders=0,Zy(g,h,c&&!u),g}(h?oR:iD,u.length,h,c,D);!h&&Q&&(u[q].providerFactory=xe),zp(g,o,a.length,0),a.push(w),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),u.push(xe),v.push(xe)}else zp(g,o,U>-1?U:q,Zy(u[h?q:U],D,!h&&c));!h&&c&&Q&&u[q].componentProviders++}}}function zp(o,a,u,c){const h=mu(a);if(h||function(o){return!!o.useClass}(a)){const v=(a.useClass||a).prototype.ngOnDestroy;if(v){const w=o.destroyHooks||(o.destroyHooks=[]);if(!h&&a.multi){const D=w.indexOf(u);-1===D?w.push(u,[c,v]):w[D+1].push(c,v)}else w.push(u,v)}}}function Zy(o,a,u){return u&&o.componentProviders++,o.multi.push(a)-1}function Wp(o,a,u,c){for(let h=u;h<c;h++)if(a[h]===o)return h;return-1}function iD(o,a,u,c){return Ky(this.multi,[])}function oR(o,a,u,c){const h=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=ta(u,u[1],this.providerFactory.index,c);g=w.slice(0,v),Ky(h,g);for(let D=v;D<w.length;D++)g.push(w[D])}else g=[],Ky(h,g);return g}function Ky(o,a){for(let u=0;u<o.length;u++)a.push((0,o[u])());return a}function sD(o,a=[]){return u=>{u.providersResolver=(c,h)=>function(o,a,u){const c=xt();if(c.firstCreatePass){const h=Oi(o);Qd(u,c.data,c.blueprint,h,!0),Qd(a,c.data,c.blueprint,h,!1)}}(c,h?h(o):o,a)}}class mE{}const Jd="ngComponent";class aD{resolveComponentFactory(a){throw function(o){const a=Error(`No component factory found for ${K(o)}. Did you add it to @NgModule.entryComponents?`);return a[Jd]=o,a}(a)}}let Xd=(()=>{class o{}return o.NULL=new aD,o})();function Yy(...o){}function No(o,a){return new Wi(ri(o,a))}const vE=function(){return No(An(),Te())};let Wi=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=vE,o})();function eh(o){return o instanceof Wi?o.nativeElement:o}class Yp{}let EE=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>lD(),o})();const lD=function(){const o=Te(),u=vr(An().index,o);return function(o){return o[11]}(ti(u)?u:o)};let CE=(()=>{class o{}return o.\u0275prov=hn({token:o,providedIn:"root",factory:()=>null}),o})();class Qy{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const IE=new Qy("12.2.7");class Jy{constructor(){}supports(a){return jd(a)}create(a){return new dD(a)}}const Xy=(o,a)=>a;class dD{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||Xy}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,c=this._removalsHead,h=0,g=null;for(;u||c;){const v=!c||u&&u.currentIndex<fD(c,h,g)?u:c,w=fD(v,h,g),D=v.currentIndex;if(v===c)h--,c=c._nextRemoved;else if(u=u._next,null==v.previousIndex)h++;else{g||(g=[]);const T=w-h,A=D-h;if(T!=A){for(let P=0;P<T;P++){const U=P<g.length?g[P]:g[P]=0,q=U+P;A<=q&&q<T&&(g[P]=U+1)}g[v.previousIndex]=A-T}}w!==D&&a(v,w,D)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!jd(a))throw new Error(`Error trying to diff '${K(a)}'. Only arrays and iterables are allowed`);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let h,g,v,u=this._itHead,c=!1;if(Array.isArray(a)){this.length=a.length;for(let w=0;w<this.length;w++)g=a[w],v=this._trackByFn(w,g),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,g,v,w)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,v,w),c=!0),u=u._next}else h=0,function(o,a){if(Array.isArray(o))for(let u=0;u<o.length;u++)a(o[u]);else{const u=o[Ql()]();let c;for(;!(c=u.next()).done;)a(c.value)}}(a,w=>{v=this._trackByFn(h,w),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,w,v,h)),Object.is(u.item,w)||this._addIdentityChange(u,w)):(u=this._mismatch(u,w,v,h),c=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,c,h){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,g,h)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,g,h)):a=this._addAfter(new th(u,c),g,h),a}_verifyReinsertion(a,u,c,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?a=this._reinsertAfter(g,a._prev,h):a.currentIndex!=h&&(a.currentIndex=h,this._addToMoves(a,h)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const h=a._prevRemoved,g=a._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(a,u,c),this._addToMoves(a,c),a}_moveAfter(a,u,c){return this._unlink(a),this._insertAfter(a,u,c),this._addToMoves(a,c),a}_addAfter(a,u,c){return this._insertAfter(a,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,c){const h=null===u?this._itHead:u._next;return a._next=h,a._prev=u,null===h?this._itTail=a:h._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new hD),this._linkedRecords.put(a),a.currentIndex=c,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,c=a._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new hD),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class th{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class DE{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,a))return c;return null}remove(a){const u=a._prevDup,c=a._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class hD{constructor(){this.map=new Map}put(a){const u=a.trackById;let c=this.map.get(u);c||(c=new DE,this.map.set(u,c)),c.add(a)}get(a,u){const h=this.map.get(a);return h?h.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function fD(o,a,u){const c=o.previousIndex;if(null===c)return c;let h=0;return u&&c<u.length&&(h=u[c]),c+a+h}class TE{constructor(){}supports(a){return a instanceof Map||Xl(a)}create(){return new pD}}class pD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||Xl(a)))throw new Error(`Error trying to diff '${K(a)}'. Only maps and objects are allowed`)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(c,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(h,c);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const c=a._prev;return u._next=a,u._prev=c,a._prev=u,c&&(c._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const h=this._records.get(a);this._maybeAddToChanges(h,u);const g=h._prev,v=h._next;return g&&(g._next=v),v&&(v._prev=g),h._next=null,h._prev=null,h}const c=new dR(a);return this._records.set(a,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(c=>u(a[c],c))}}class dR{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function e_(){return new t_([new Jy])}let t_=(()=>{class o{constructor(u){this.factories=u}static create(u,c){if(null!=c){const h=c.factories.slice();u=u.concat(h)}return new o(u)}static extend(u){return{provide:o,useFactory:c=>o.create(u,c||e_()),deps:[[o,new Li,new Ur]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(null!=c)return c;throw new Error(`Cannot find a differ supporting object '${u}' of type '${function(o){return o.name||typeof o}(u)}'`)}}return o.\u0275prov=hn({token:o,providedIn:"root",factory:e_}),o})();function gD(){return new nh([new TE])}let nh=(()=>{class o{constructor(u){this.factories=u}static create(u,c){if(c){const h=c.factories.slice();u=u.concat(h)}return new o(u)}static extend(u){return{provide:o,useFactory:c=>o.create(u,c||gD()),deps:[[o,new Li,new Ur]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(c)return c;throw new Error(`Cannot find a differ supporting object '${u}'`)}}return o.\u0275prov=hn({token:o,providedIn:"root",factory:gD}),o})();function n_(o,a,u,c,h=!1){for(;null!==u;){const g=a[u.index];if(null!==g&&c.push(on(g)),qt(g))for(let w=10;w<g.length;w++){const D=g[w],T=D[1].firstChild;null!==T&&n_(D[1],D,T,c)}const v=u.type;if(8&v)n_(o,a,u.child,c);else if(32&v){const w=Mv(u,a);let D;for(;D=w();)c.push(D)}else if(16&v){const w=Lv(a,u);if(Array.isArray(w))c.push(...w);else{const D=Ui(a[16]);n_(D[1],D,w,c,!0)}}u=h?u.projectionNext:u.next}return c}class _c{constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,u=a[1];return n_(u,a,u.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(qt(a)){const u=a[8],c=u?u.indexOf(this):-1;c>-1&&(Hf(a,c),Fi(u,c))}this._attachedToViewContainer=!1}eC(this._lView[1],this._lView)}onDestroy(a){Zv(this._lView[1],this._lView,null,a)}markForCheck(){cy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Qv(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(o,a,u){ro(!0);try{Qv(o,a,u)}finally{ro(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var a;this._appRef=null,Rd(this._lView[1],a=this._lView,a[11],2,null,null)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=a}}class AE extends _c{constructor(a){super(a),this._view=a}detectChanges(){Jv(this._view)}checkNoChanges(){!function(o){ro(!0);try{Jv(o)}finally{ro(!1)}}(this._view)}get context(){return null}}const xu=function(o){return function(o,a,u){if(Gc(o)&&!u){const c=vr(o.index,a);return new _c(c,c)}return 47&o.type?new _c(a[16],a):null}(An(),Te(),16==(16&o))};let xE=(()=>{class o{}return o.__NG_ELEMENT_ID__=xu,o})();const mD=[new TE],hR=new t_([new Jy]),fR=new nh(mD),ME=function(){return oh(An(),Te())};let vc=(()=>{class o{}return o.__NG_ELEMENT_ID__=ME,o})();const pR=vc,gR=class extends pR{constructor(a,u,c){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(a){const u=this._declarationTContainer.tViews,c=ya(this._declarationLView,u,a,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(c[19]=g.createEmbeddedView(u)),Md(u,c,a),new _c(c)}};function oh(o,a){return 4&o.type?new gR(a,o,No(o,a)):null}class Ec{}class PE{}const _D=function(){return r_(An(),Te())};let Jp=(()=>{class o{}return o.__NG_ELEMENT_ID__=_D,o})();const _R=Jp,ED=class extends _R{constructor(a,u,c){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=c}get element(){return No(this._hostTNode,this._hostLView)}get injector(){return new rs(this._hostTNode,this._hostLView)}get parentInjector(){const a=Ja(this._hostTNode,this._hostLView);if(sm(a)){const u=El(a,this._hostLView),c=vl(a);return new rs(u[1].data[c+8],u)}return new rs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=wD(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,u,c){const h=a.createEmbeddedView(u||{});return this.insert(h,c),h}createComponent(a,u,c,h,g){const v=c||this.parentInjector;if(!g&&null==a.ngModule&&v){const D=v.get(Ec,null);D&&(g=D)}const w=a.create(v,h,void 0,g);return this.insert(w.hostView,u),w}insert(a,u){const c=a._lView,h=c[1];if(qt(c[3])){const A=this.indexOf(a);if(-1!==A)this.detach(A);else{const M=c[3],P=new ED(M,M[6],M[3]);P.detach(P.indexOf(a))}}const g=this._adjustIndex(u),v=this._lContainer;!function(o,a,u,c){const h=10+c,g=u.length;c>0&&(u[h-1][4]=a),c<g-10?(a[4]=u[h],Dl(u,10+c,a)):(u.push(a),a[4]=null),a[3]=u;const v=a[17];null!==v&&u!==v&&function(o,a){const u=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===u?o[9]=[a]:u.push(a)}(v,a);const w=a[19];null!==w&&w.insertView(o),a[2]|=128}(h,c,v,g);const w=Hm(g,v),D=c[11],T=qf(D,v[7]);return null!==T&&function(o,a,u,c,h,g){c[0]=h,c[6]=a,Rd(o,c,u,1,h,g)}(h,v[6],D,c,T,w),a.attachToViewContainerRef(),Dl(kE(v),g,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=wD(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),c=Hf(this._lContainer,u);c&&(Fi(kE(this._lContainer),u),eC(c[1],c))}detach(a){const u=this._adjustIndex(a,-1),c=Hf(this._lContainer,u);return c&&null!=Fi(kE(this._lContainer),u)?new _c(c):null}_adjustIndex(a,u=0){return null==a?this.length+u:a}};function wD(o){return o[8]}function kE(o){return o[8]||(o[8]=[])}function r_(o,a){let u;const c=a[o.index];if(qt(c))u=c;else{let h;if(8&o.type)h=on(c);else{const g=a[11];h=g.createComment("");const v=ri(o,a);Ei(g,qf(g,v),h,function(o,a){return sn(o)?o.nextSibling(a):a.nextSibling}(g,v),!1)}a[o.index]=u=SC(c,a,h,o),hp(a,u)}return new ED(u,o,a)}const bc={};class LD extends Xd{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=Yn(a);return new ku(u,this.ngModule)}}function sw(o){const a=[];for(let u in o)o.hasOwnProperty(u)&&a.push({propName:o[u],templateName:u});return a}const UN=new yn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Td});class ku extends mE{constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=a.selectors.map(Zf).join(","),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return sw(this.componentDef.inputs)}get outputs(){return sw(this.componentDef.outputs)}create(a,u,c,h){const g=(h=h||this.ngModule)?function(o,a){return{get:(u,c,h)=>{const g=o.get(u,bc,h);return g!==bc||c===bc?g:a.get(u,c,h)}}}(a,h.injector):a,v=g.get(Yp,Yc),w=g.get(CE,null),D=v.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",A=c?function(o,a,u){if(sn(o))return o.selectRootElement(a,u===Sn.ShadowDom);let c="string"==typeof a?o.querySelector(a):a;return c.textContent="",c}(D,c,this.componentDef.encapsulation):ks(v.createRenderer(null,this.componentDef),T,function(o){const a=o.toLowerCase();return"svg"===a?"http://www.w3.org/2000/svg":"math"===a?"http://www.w3.org/1998/MathML/":null}(T)),M=this.componentDef.onPush?576:528,P=function(o,a){return{components:[],scheduler:o||Td,clean:Xv,playerHandler:a||null,flags:0}}(),U=sp(0,null,null,1,0,null,null,null,null,null),q=ya(null,U,P,M,null,null,v,D,w,g);let se,Q;yl(q);try{const xe=function(o,a,u,c,h,g){const v=u[1];u[20]=o;const D=_a(v,20,2,"#host",null),T=D.mergedAttrs=a.hostAttrs;null!==T&&(Wl(D,T,!0),null!==o&&(un(h,o,T),null!==D.classes&&Wm(h,o,D.classes),null!==D.styles&&jl(h,o,D.styles)));const A=c.createRenderer(o,a),M=ya(u,Pd(a),null,a.onPush?64:16,u[20],D,c,A,g||null,null);return v.firstCreatePass&&(Hn(xs(D,u),v,a.type),lp(v,D),En(D,u.length,1)),hp(u,M),u[20]=M}(A,this.componentDef,q,v,D);if(A)if(c)un(D,A,["ng-version",IE.full]);else{const{attrs:ve,classes:tt}=function(o){const a=[],u=[];let c=1,h=2;for(;c<o.length;){let g=o[c];if("string"==typeof g)2===h?""!==g&&a.push(g,o[++c]):8===h&&u.push(g);else{if(!Bi(h))break;h=g}c++}return{attrs:a,classes:u}}(this.componentDef.selectors[0]);ve&&un(D,A,ve),tt&&tt.length>0&&Wm(D,A,tt.join(" "))}if(Q=eo(U,20),void 0!==u){const ve=Q.projection=[];for(let tt=0;tt<this.ngContentSelectors.length;tt++){const pt=u[tt];ve.push(null!=pt?Array.from(pt):null)}}se=function(o,a,u,c,h){const g=u[1],v=function(o,a,u){const c=An();o.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),cp(o,c,a,fu(o,a,1,null),u));const h=ta(a,o,c.directiveStart,c);ar(h,a);const g=ri(c,a);return g&&ar(g,a),h}(g,u,a);if(c.components.push(v),o[8]=v,h&&h.forEach(D=>D(v,a)),a.contentQueries){const D=An();a.contentQueries(1,v,D.directiveStart)}const w=An();return!g.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(Jo(w.index),pu(u[1],w,0,w.directiveStart,w.directiveEnd,a),Co(a,v)),v}(xe,this.componentDef,q,P,[Re]),Md(U,q,null)}finally{im()}return new jR(this.componentType,se,No(Q,q),q,Q)}}class jR extends class{}{constructor(a,u,c,h,g){super(),this.location=c,this._rootLView=h,this._tNode=g,this.instance=u,this.hostView=this.changeDetectorRef=new AE(h),this.componentType=a}get injector(){return new rs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}const Cc=new Map;class BD extends Ec{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new LD(this);const c=yr(a),h=a[Rt]||null;h&&$y(h),this._bootstrapComponents=vi(c.bootstrap),this._r3Injector=kC(a,u,[{provide:Ec,useValue:this},{provide:Xd,useValue:this.componentFactoryResolver}],K(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,u=Rn.THROW_IF_NOT_FOUND,c=Ae.Default){return a===Rn||a===Ec||a===Zl?this:this._r3Injector.get(a,u,c)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class hg extends PE{constructor(a){super(),this.moduleType=a,null!==yr(a)&&function(o){const a=new Set;!function u(c){const h=yr(c,!0),g=h.id;null!==g&&(function(o,a,u){if(a&&a!==u)throw new Error(`Duplicate module registered for ${o} - ${K(a)} vs ${K(a.name)}`)}(g,Cc.get(g),c),Cc.set(g,c));const v=vi(h.imports);for(const w of v)a.has(w)||(a.add(w),u(w))}(o)}(a)}create(a){return new BD(this.moduleType,a)}}function jD(o,a,u){const c=Fr()+o,h=Te();return h[c]===vt?At(h,c,u?a.call(u):a()):function(o,a){return o[a]}(h,c)}function $D(o,a,u,c){return function(o,a,u,c,h,g){const v=a+u;return $t(o,v,h)?At(o,v+1,g?c.call(g,h):c(h)):Tc(o,v+1)}(Te(),Fr(),o,a,u,c)}function HD(o,a,u,c,h){return function(o,a,u,c,h,g,v){const w=a+u;return function(o,a,u,c){const h=$t(o,a,u);return $t(o,a+1,c)||h}(o,w,h,g)?At(o,w+2,v?c.call(v,h,g):c(h,g)):Tc(o,w+2)}(Te(),Fr(),o,a,u,c,h)}function Tc(o,a){const u=o[a];return u===vt?void 0:u}function Po(o){return a=>{setTimeout(o,void 0,a)}}const ko=class extends m.xQ{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,c){var h,g,v;let w=a,D=u||(()=>null),T=c;if(a&&"object"==typeof a){const M=a;w=null===(h=M.next)||void 0===h?void 0:h.bind(M),D=null===(g=M.error)||void 0===g?void 0:g.bind(M),T=null===(v=M.complete)||void 0===v?void 0:v.bind(M)}this.__isAsync&&(D=Po(D),w&&(w=Po(w)),T&&(T=Po(T)));const A=super.subscribe({next:w,error:D,complete:T});return a instanceof ee.w&&a.add(A),A}};function GR(){return this._results[Ql()]()}class __{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Ql(),c=__.prototype;c[u]||(c[u]=GR)}get changes(){return this._changes||(this._changes=new ko)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const c=this;c.dirty=!1;const h=Er(a);(this._changesDetected=!function(o,a,u){if(o.length!==a.length)return!1;for(let c=0;c<o.length;c++){let h=o[c],g=a[c];if(u&&(h=u(h),g=u(g)),g!==h)return!1}return!0}(c._results,h,u))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class hw{constructor(a){this.queryList=a,this.matches=null}clone(){return new hw(this.queryList)}setDirty(){this.queryList.setDirty()}}class v_{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const c=null!==a.contentQueries?a.contentQueries[0]:u.length,h=[];for(let g=0;g<c;g++){const v=u.getByIndex(g);h.push(this.queries[v.indexInDeclarationView].clone())}return new v_(h)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==eT(a,u).matches&&this.queries[u].setDirty()}}class KD{constructor(a,u,c=null){this.predicate=a,this.flags=u,this.read=c}}class fw{constructor(a=[]){this.queries=a}elementStart(a,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let c=0;c<this.length;c++){const h=null!==u?u.length:0,g=this.getByIndex(c).embeddedTView(a,h);g&&(g.indexInDeclarationView=c,null!==u?u.push(g):u=[g])}return null!==u?new fw(u):null}template(a,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class E_{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new E_(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=a.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const g=c[h];this.matchTNodeWithReadOption(a,u,zR(u,g)),this.matchTNodeWithReadOption(a,u,cf(u,a,g,!1,!1))}else c===vc?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,cf(u,a,c,!1,!1))}matchTNodeWithReadOption(a,u,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===Wi||h===Jp||h===vc&&4&u.type)this.addMatch(u.index,-2);else{const g=cf(u,a,h,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,c)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function zR(o,a){const u=o.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===a)return u[c+1];return null}function YD(o,a,u,c){return-1===u?function(o,a){return 11&o.type?No(o,a):4&o.type?oh(o,a):null}(a,o):-2===u?function(o,a,u){return u===Wi?No(a,o):u===vc?oh(a,o):u===Jp?r_(a,o):void 0}(o,a,c):ta(o,o[1],u,a)}function pw(o,a,u,c){const h=a[19].queries[c];if(null===h.matches){const g=o.data,v=u.matches,w=[];for(let D=0;D<v.length;D+=2){const T=v[D];w.push(T<0?null:YD(a,g[T],v[D+1],u.metadata.read))}h.matches=w}return h.matches}function w_(o,a,u,c){const h=o.queries.getByIndex(u),g=h.matches;if(null!==g){const v=pw(o,a,h,u);for(let w=0;w<g.length;w+=2){const D=g[w];if(D>0)c.push(v[w/2]);else{const T=g[w+1],A=a[-D];for(let M=10;M<A.length;M++){const P=A[M];P[17]===P[3]&&w_(P[1],P,T,c)}if(null!==A[9]){const M=A[9];for(let P=0;P<M.length;P++){const U=M[P];w_(U[1],U,T,c)}}}}}return c}function b_(o){const a=Te(),u=xt(),c=Qo();Xh(c+1);const h=eT(u,c);if(o.dirty&&cl(a)===(2==(2&h.metadata.flags))){if(null===h.matches)o.reset([]);else{const g=h.crossesNgTemplate?w_(u,a,c,[]):pw(u,a,h,c);o.reset(g,eh),o.notifyOnChanges()}return!0}return!1}function mg(o,a,u){const c=xt();c.firstCreatePass&&(Vu(c,new KD(o,a,u),-1),2==(2&a)&&(c.staticViewQueries=!0)),XD(c,Te(),a)}function JD(o,a,u,c){const h=xt();if(h.firstCreatePass){const g=An();Vu(h,new KD(a,u,c),g.index),function(o,a){const u=o.contentQueries||(o.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,a)}(h,o),2==(2&u)&&(h.staticContentQueries=!0)}XD(h,Te(),u)}function gw(){return o=Te(),a=Qo(),o[19].queries[a].queryList;var o,a}function XD(o,a,u){const c=new __(4==(4&u));Zv(o,a,c,c.destroy),null===a[19]&&(a[19]=new v_),a[19].queries.push(new hw(c))}function Vu(o,a,u){null===o.queries&&(o.queries=new fw),o.queries.track(new E_(a,u))}function eT(o,a){return o.queries.getByIndex(a)}function tT(o,a){return oh(o,a)}const A_=new yn("Application Initializer");let gs=(()=>{class o{constructor(u){this.appInits=u,this.resolve=Yy,this.reject=Yy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(O0(g))u.push(g);else if(P0(g)){const v=new Promise((w,D)=>{g.subscribe({complete:w,error:D})});u.push(v)}}Promise.all(u).then(()=>{c()}).catch(h=>{this.reject(h)}),0===u.length&&c(),this.initialized=!0}}return o.\u0275fac=function(u){return new(u||o)(_n(A_,8))},o.\u0275prov=hn({token:o,factory:o.\u0275fac}),o})();const Iw=new yn("AppId"),Tw={provide:Iw,useFactory:function(){return`${Sw()}${Sw()}${Sw()}`},deps:[]};function Sw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Aw=new yn("Platform Initializer"),Rw=new yn("Platform ID"),xw=new yn("appBootstrapListener");let Nw=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=hn({token:o,factory:o.\u0275fac}),o})();const Cg=new yn("LocaleId"),Mw=new yn("DefaultCurrencyCode");class R_{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}const Ig=function(o){return new hg(o)},p1=Ig,gT=function(o){return Promise.resolve(Ig(o))},Ow=function(o){const a=Ig(o),c=vi(yr(o).declarations).reduce((h,g)=>{const v=Yn(g);return v&&h.push(new ku(v)),h},[]);return new R_(a,c)},mT=Ow,yT=function(o){return Promise.resolve(Ow(o))};let Mc=(()=>{class o{constructor(){this.compileModuleSync=p1,this.compileModuleAsync=gT,this.compileModuleAndAllComponentsSync=mT,this.compileModuleAndAllComponentsAsync=yT}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=hn({token:o,factory:o.\u0275fac}),o})();const v1=(()=>Promise.resolve(0))();function Pw(o){"undefined"==typeof Zone?v1.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Wn{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ko(!1),this.onMicrotaskEmpty=new ko(!1),this.onStable=new ko(!1),this.onError=new ko(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&u,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function(){let o=$.requestAnimationFrame,a=$.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&a){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const c=a[Zone.__symbol__("OriginalDelegate")];c&&(a=c)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function(o){const a=()=>{!function(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call($,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,xn(o),o.isCheckStableRunning=!0,x_(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),xn(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,h,g,v,w)=>{try{return N_(o),u.invokeTask(h,g,v,w)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||o.shouldCoalesceRunChangeDetection)&&a(),M_(o)}},onInvoke:(u,c,h,g,v,w,D)=>{try{return N_(o),u.invoke(h,g,v,w,D)}finally{o.shouldCoalesceRunChangeDetection&&a(),M_(o)}},onHasTask:(u,c,h,g)=>{u.hasTask(h,g),c===h&&("microTask"==g.change?(o._hasPendingMicrotasks=g.microTask,xn(o),x_(o)):"macroTask"==g.change&&(o.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,c,h,g)=>(u.handleError(h,g),o.runOutsideAngular(()=>o.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Wn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Wn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,u,c){return this._inner.run(a,u,c)}runTask(a,u,c,h){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+h,a,_T,Yy,Yy);try{return g.runTask(v,u,c)}finally{g.cancelTask(v)}}runGuarded(a,u,c){return this._inner.runGuarded(a,u,c)}runOutsideAngular(a){return this._outer.run(a)}}const _T={};function x_(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function xn(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function N_(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function M_(o){o._nesting--,x_(o)}class C1{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ko,this.onMicrotaskEmpty=new ko,this.onStable=new ko,this.onError=new ko}run(a,u,c){return a.apply(u,c)}runGuarded(a,u,c){return a.apply(u,c)}runOutsideAngular(a){return a()}runTask(a,u,c,h){return a.apply(u,c)}}let vT=(()=>{class o{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Wn.assertNotInAngularZone(),Pw(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Pw(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,h){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:h})}whenStable(u,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,h){return[]}}return o.\u0275fac=function(u){return new(u||o)(_n(Wn))},o.\u0275prov=hn({token:o,factory:o.\u0275fac}),o})(),ET=(()=>{class o{constructor(){this._applications=new Map,kw.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return kw.findTestabilityInTree(this,u,c)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=hn({token:o,factory:o.\u0275fac}),o})();class I1{addToWindow(a){}findTestabilityInTree(a,u,c){return null}}function D1(o){kw=o}let kw=new I1,Fw=!0,wT=!1;function Lw(){return wT=!0,Fw}function T1(){if(wT)throw new Error("Cannot enable prod mode after platform setup.");Fw=!1}let ms;const CT=new yn("AllowMultipleToken");class Kr{constructor(a,u){this.name=a,this.token=u}}function IT(o,a,u=[]){const c=`Platform: ${a}`,h=new yn(c);return(g=[])=>{let v=DT();if(!v||v.injector.get(CT,!1))if(o)o(u.concat(g).concat({provide:h,useValue:!0}));else{const w=u.concat(g).concat({provide:h,useValue:!0},{provide:Ea,useValue:"platform"});!function(o){if(ms&&!ms.destroyed&&!ms.injector.get(CT,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ms=o.get(TT);const a=o.get(Aw,null);a&&a.forEach(u=>u())}(Rn.create({providers:w,name:c}))}return function(o){const a=DT();if(!a)throw new Error("No platform exists!");if(!a.injector.get(o,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return a}(h)}}function DT(){return ms&&!ms.destroyed?ms:null}let TT=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const w=function(o,a){let u;return u="noop"===o?new C1:("zone.js"===o?void 0:o)||new Wn({enableLongStackTrace:Lw(),shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),D=[{provide:Wn,useValue:w}];return w.run(()=>{const T=Rn.create({providers:D,parent:this.injector,name:u.moduleType.name}),A=u.create(T),M=A.injector.get(z,null);if(!M)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return w.runOutsideAngular(()=>{const P=w.onError.subscribe({next:U=>{M.handleError(U)}});A.onDestroy(()=>{Fo(this._modules,A),P.unsubscribe()})}),function(o,a,u){try{const c=u();return O0(c)?c.catch(h=>{throw a.runOutsideAngular(()=>o.handleError(h)),h}):c}catch(c){throw a.runOutsideAngular(()=>o.handleError(c)),c}}(M,w,()=>{const P=A.injector.get(gs);return P.runInitializers(),P.donePromise.then(()=>($y(A.injector.get(Cg,Aa)||Aa),this._moduleDoBootstrap(A),A))})})}bootstrapModule(u,c=[]){const h=k_({},c);return function(o,a,u){const c=new hg(u);return Promise.resolve(c)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(u){const c=u.injector.get(Oc);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new Error(`The module ${K(u.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(u){return new(u||o)(_n(Rn))},o.\u0275prov=hn({token:o,factory:o.\u0275fac}),o})();function k_(o,a){return Array.isArray(a)?a.reduce(k_,o):Object.assign(Object.assign({},o),a)}let Oc=(()=>{class o{constructor(u,c,h,g,v){this._zone=u,this._injector=c,this._exceptionHandler=h,this._componentFactoryResolver=g,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new j.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),D=new j.y(T=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{Wn.assertNotInAngularZone(),Pw(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{Wn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{A.unsubscribe(),M.unsubscribe()}});this.isStable=(0,_e.T)(w,D.pipe(o=>(0,pe.x)()(function(o,a){return function(c){let h;h="function"==typeof o?o:function(){return o};const g=Object.create(c,me.N);return g.source=c,g.subjectFactory=h,g}}(Z)(o))))}bootstrap(u,c){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let h;h=u instanceof mE?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(h.componentType);const g=function(o){return o.isBoundToModule}(h)?void 0:this._injector.get(Ec),w=h.create(Rn.NULL,[],c||h.selector,g),D=w.location.nativeElement,T=w.injector.get(vT,null),A=T&&w.injector.get(ET);return T&&A&&A.registerApplication(D,T),w.onDestroy(()=>{this.detachView(w.hostView),Fo(this.components,w),A&&A.unregisterApplication(D)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;Fo(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(xw,[]).concat(this._bootstrapListeners).forEach(h=>h(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(u){return new(u||o)(_n(Wn),_n(Rn),_n(z),_n(Xd),_n(gs))},o.\u0275prov=hn({token:o,factory:o.\u0275fac}),o})();function Fo(o,a){const u=o.indexOf(a);u>-1&&o.splice(u,1)}class F_{}class P1{}const k1={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let F1=(()=>{class o{constructor(u,c){this._compiler=u,this._config=c||k1}load(u){return this.loadAndCompile(u)}loadAndCompile(u){let[c,h]=u.split("#");return void 0===h&&(h="default"),F(8255)(c).then(g=>g[h]).then(g=>Si(g,c,h)).then(g=>this._compiler.compileModuleAsync(g))}loadFactory(u){let[c,h]=u.split("#"),g="NgFactory";return void 0===h&&(h="default",g=""),F(8255)(this._config.factoryPathPrefix+c+this._config.factoryPathSuffix).then(v=>v[h+g]).then(v=>Si(v,c,h))}}return o.\u0275fac=function(u){return new(u||o)(_n(Mc),_n(P1,8))},o.\u0275prov=hn({token:o,factory:o.\u0275fac}),o})();function Si(o,a,u){if(!o)throw new Error(`Cannot find '${u}' in '${a}'`);return o}const UT=function(o){return null},$1=IT(null,"core",[{provide:Rw,useValue:"unknown"},{provide:TT,deps:[Rn]},{provide:ET,deps:[]},{provide:Nw,deps:[]}]),G1=[{provide:Oc,useClass:Oc,deps:[Wn,Rn,z,Xd,gs]},{provide:UN,deps:[Wn],useFactory:function(o){let a=[];return o.onStable.subscribe(()=>{for(;a.length;)a.pop()()}),function(u){a.push(u)}}},{provide:gs,useClass:gs,deps:[[new Ur,A_]]},{provide:Mc,useClass:Mc,deps:[]},Tw,{provide:t_,useFactory:function(){return hR},deps:[]},{provide:nh,useFactory:function(){return fR},deps:[]},{provide:Cg,useFactory:function(o){return $y(o=o||"undefined"!=typeof $localize&&$localize.locale||Aa),o},deps:[[new mi(Cg),new Ur,new Li]]},{provide:Mw,useValue:"USD"}];let z1=(()=>{class o{constructor(u){}}return o.\u0275fac=function(u){return new(u||o)(_n(Oc))},o.\u0275mod=Xu({type:o}),o.\u0275inj=xi({providers:G1}),o})()},8939:(Ke,we,F)=>{"use strict";F.d(we,{hO:()=>K,xv:()=>Z,Dh:()=>pe,GT:()=>oe,on:()=>k,pX:()=>me});var m=F(3018),ee=F(7841),j=F(9126);Ke=F.hmd(Ke);const _e=["ngOnDestroy"],me=(J,de,ne,te={})=>new Proxy(J,{get:(Ne,be)=>ne.runOutsideAngular(()=>{var Pe;if(J[be])return(null===(Pe=null==te?void 0:te.spy)||void 0===Pe?void 0:Pe.get)&&te.spy.get(be,J[be]),J[be];if(_e.indexOf(be)>-1)return()=>{};const je=de.toPromise().then(rt=>{const Ve=rt&&rt[be];return"function"==typeof Ve?Ve.bind(rt):Ve&&Ve.then?Ve.then(Dt=>ne.run(()=>Dt)):ne.run(()=>Ve)});return new Proxy(()=>{},{get:(rt,Ve)=>je[Ve],apply:(rt,Ve,Dt)=>je.then(Nt=>{var Ce;const ie=Nt&&Nt(...Dt);return(null===(Ce=null==te?void 0:te.spy)||void 0===Ce?void 0:Ce.apply)&&te.spy.apply(be,Dt,ie),ie})})})}),oe=(J,de)=>{de.forEach(ne=>{Object.getOwnPropertyNames(ne.prototype||ne).forEach(te=>{Object.defineProperty(J.prototype,te,Object.getOwnPropertyDescriptor(ne.prototype||ne,te))})})};class Ee{constructor(de){return de}}const pe=new m.OlP("angularfire2.app.options"),Z=new m.OlP("angularfire2.app.name");function k(J,de,ne){const Ne="object"==typeof ne&&ne||{};Ne.name=Ne.name||"string"==typeof ne&&ne||"[DEFAULT]";const Pe=ee.Z.apps.filter(je=>je&&je.name===Ne.name)[0]||de.runOutsideAngular(()=>ee.Z.initializeApp(J,Ne));try{JSON.stringify(J)!==JSON.stringify(Pe.options)&&L("error",`${Pe.name} Firebase App already initialized with different options${Ke.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(je){}return new Ee(Pe)}const L=(J,...de)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[J](...de)},Y={provide:Ee,useFactory:k,deps:[pe,m.R0b,[new m.FiY,Z]]};let K=(()=>{class J{constructor(ne){ee.Z.registerVersion("angularfire",j.q4.full,"core"),ee.Z.registerVersion("angularfire",j.q4.full,"app-compat"),ee.Z.registerVersion("angular",m.q4F.full,ne.toString())}static initializeApp(ne,te){return{ngModule:J,providers:[{provide:pe,useValue:ne},{provide:Z,useValue:te}]}}}return J.\u0275fac=function(ne){return new(ne||J)(m.LFG(m.Lbi))},J.\u0275mod=m.oAB({type:J}),J.\u0275inj=m.cJS({providers:[Y]}),J})()},9126:(Ke,we,F)=>{"use strict";F.d(we,{q4:()=>k,iC:()=>ie,fc:()=>Nt,HU:()=>je,cc:()=>K});var m=F(3018);(0,F(5452).registerVersion)("firebase","9.1.0","app");var me=F(7771),oe=F(3637),Ee=F(3342),pe=F(309),Z=F(2639);Ke=F.hmd(Ke);const k=new m.GfV("7.0.4"),L=!!Ke.hot,Y=(le,...X)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[le](...X)};function K(le,X,Me,Qe,Tt){const[,ot,wt]=globalThis.\u0275AngularfireInstanceCache.find(rn=>rn[0]===le)||[];if(ot)return function(le,X){try{return le.toString()===X.toString()}catch(Me){return le===X}}(Tt,wt)||(Y("error",`${X} was already initialized on the ${Me} Firebase App with different settings.${L?" You may need to reload as Firebase is not HMR aware.":""}`),Y("warn",{is:Tt,was:wt})),ot;{const rn=Qe();return globalThis.\u0275AngularfireInstanceCache.push([le,rn,Tt]),rn}}function Ne(){}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[]);class be{constructor(X,Me=me.N){this.zone=X,this.delegate=Me}now(){return this.delegate.now()}schedule(X,Me,Qe){const Tt=this.zone;return this.delegate.schedule(function(wt){Tt.runGuarded(()=>{X.apply(this,[wt])})},Me,Qe)}}class Pe{constructor(X){this.zone=X,this.task=null}call(X,Me){const Qe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ne,{},Ne,Ne)),Me.pipe((0,Ee.b)({next:Qe,complete:Qe,error:Qe})).subscribe(X).add(Qe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let je=(()=>{class le{constructor(Me){this.ngZone=Me,this.outsideAngular=Me.runOutsideAngular(()=>new be(Zone.current)),this.insideAngular=Me.run(()=>new be(Zone.current,oe.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return le.\u0275fac=function(Me){return new(Me||le)(m.LFG(m.R0b))},le.\u0275prov=m.Yz7({token:le,factory:le.\u0275fac,providedIn:"root"}),le})();function rt(){const le=globalThis.\u0275AngularFireScheduler;if(!le)throw new Error("AngularFireModule has not been provided");return le}function Nt(le){return le.pipe((0,pe.QV)(rt().outsideAngular))}function ie(le){return rt(),function(le){return function(Me){return(Me=Me.lift(new Pe(le.ngZone))).pipe((0,Z.R)(le.outsideAngular),(0,pe.QV)(le.insideAngular))}}(rt())(le)}},4486:(Ke,we,F)=>{"use strict";F.d(we,{Z:()=>de});var m=F(3854),ee=F(6034),j=F(5452),_e=F(5601);class me{constructor(te,Ne){this._delegate=te,this.firebase=Ne,(0,j._addComponent)(te,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=te.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(te){this._delegate.automaticDataCollectionEnabled=te}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(te=>{this._delegate.checkDestroyed(),te()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,j.deleteApp)(this._delegate)))}_getService(te,Ne=j._DEFAULT_ENTRY_NAME){var be;this._delegate.checkDestroyed();const Pe=this._delegate.container.getProvider(te);return!Pe.isInitialized()&&"EXPLICIT"===(null===(be=Pe.getComponent())||void 0===be?void 0:be.instantiationMode)&&Pe.initialize(),Pe.getImmediate({identifier:Ne})}_removeServiceInstance(te,Ne=j._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(te).clearInstance(Ne)}_addComponent(te){(0,j._addComponent)(this._delegate,te)}_addOrOverwriteComponent(te){(0,j._addOrOverwriteComponent)(this._delegate,te)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ee=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),k=function Z(){const ne=function(ne){const te={},Ne={__esModule:!0,initializeApp:function(Nt,Ce={}){const ie=j.initializeApp(Nt,Ce);if((0,m.r3)(te,ie.name))return te[ie.name];const ae=new ne(ie,Ne);return te[ie.name]=ae,ae},app:Pe,registerVersion:j.registerVersion,setLogLevel:j.setLogLevel,onLog:j.onLog,apps:null,SDK_VERSION:j.SDK_VERSION,INTERNAL:{registerComponent:function(Nt){const Ce=Nt.name,ie=Ce.replace("-compat","");if(j._registerComponent(Nt)&&"PUBLIC"===Nt.type){const ae=(he=Pe())=>{if("function"!=typeof he[ie])throw Ee.create("invalid-app-argument",{appName:Ce});return he[ie]()};void 0!==Nt.serviceProps&&(0,m.ZB)(ae,Nt.serviceProps),Ne[ie]=ae,ne.prototype[ie]=function(...he){return this._getService.bind(this,Ce).apply(this,Nt.multipleInstances?he:[])}}return"PUBLIC"===Nt.type?Ne[ie]:null},removeApp:function(Nt){delete te[Nt]},useAsService:function(Nt,Ce){return"serverAuth"===Ce?null:Ce},modularAPIs:j}};function Pe(Nt){if(!(0,m.r3)(te,Nt=Nt||j._DEFAULT_ENTRY_NAME))throw Ee.create("no-app",{appName:Nt});return te[Nt]}return Ne.default=Ne,Object.defineProperty(Ne,"apps",{get:function(){return Object.keys(te).map(Nt=>te[Nt])}}),Pe.App=ne,Ne}(me);return ne.INTERNAL=Object.assign(Object.assign({},ne.INTERNAL),{createFirebaseNamespace:Z,extendNamespace:function(Ne){(0,m.ZB)(ne,Ne)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),ne}(),L=new _e.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){L.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ne=self.firebase.SDK_VERSION;ne&&ne.indexOf("LITE")>=0&&L.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const de=k;(0,j.registerVersion)("@firebase/app-compat","0.1.2",undefined)},5452:(Ke,we,F)=>{"use strict";F.r(we),F.d(we,{FirebaseError:()=>_e.ZR,SDK_VERSION:()=>Ri,_DEFAULT_ENTRY_NAME:()=>Tt,_addComponent:()=>Dn,_addOrOverwriteComponent:()=>hi,_apps:()=>wt,_clearComponents:()=>Vt,_components:()=>rn,_getProvider:()=>dn,_registerComponent:()=>fi,_removeServiceInstance:()=>lt,deleteApp:()=>Ks,getApp:()=>Pr,getApps:()=>$a,initializeApp:()=>xi,onLog:()=>Un,registerVersion:()=>Ys,setLogLevel:()=>Qr});var m=F(8239),ee=F(6034),j=F(5601),_e=F(3854);class me{constructor(Ae){this.container=Ae}getPlatformInfoString(){return this.container.getProviders().map(Zt=>{if(function(ft){const Ae=ft.getComponent();return"VERSION"===(null==Ae?void 0:Ae.type)}(Zt)){const fn=Zt.getImmediate();return`${fn.library}/${fn.version}`}return null}).filter(Zt=>Zt).join(" ")}}const Ee="@firebase/app",Z=new j.Yd("@firebase/app"),Tt="[DEFAULT]",ot={[Ee]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},wt=new Map,rn=new Map;function Dn(ft,Ae){try{ft.container.addComponent(Ae)}catch(Zt){Z.debug(`Component ${Ae.name} failed to register with FirebaseApp ${ft.name}`,Zt)}}function hi(ft,Ae){ft.container.addOrOverwriteComponent(Ae)}function fi(ft){const Ae=ft.name;if(rn.has(Ae))return Z.debug(`There were multiple attempts to register component ${Ae}.`),!1;rn.set(Ae,ft);for(const Zt of wt.values())Dn(Zt,ft);return!0}function dn(ft,Ae){return ft.container.getProvider(Ae)}function lt(ft,Ae,Zt=Tt){dn(ft,Ae).clearInstance(Zt)}function Vt(){rn.clear()}const bs=new _e.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class hn{constructor(Ae,Zt,fn){this._isDeleted=!1,this._options=Object.assign({},Ae),this._config=Object.assign({},Zt),this._name=Zt.name,this._automaticDataCollectionEnabled=Zt.automaticDataCollectionEnabled,this._container=fn,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ae){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ae}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ae){this._isDeleted=Ae}checkDestroyed(){if(this.isDeleted)throw bs.create("app-deleted",{appName:this._name})}}const Ri="9.1.0";function xi(ft,Ae={}){"object"!=typeof Ae&&(Ae={name:Ae});const Zt=Object.assign({name:Tt,automaticDataCollectionEnabled:!1},Ae),fn=Zt.name;if("string"!=typeof fn||!fn)throw bs.create("bad-app-name",{appName:String(fn)});const pn=wt.get(fn);if(pn){if((0,_e.vZ)(ft,pn.options)&&(0,_e.vZ)(Zt,pn.config))return pn;throw bs.create("duplicate-app",{appName:fn})}const Bt=new ee.H0(fn);for(const et of rn.values())Bt.addComponent(et);const Ye=new hn(ft,Zt,Bt);return wt.set(fn,Ye),Ye}function Pr(ft=Tt){const Ae=wt.get(ft);if(!Ae)throw bs.create("no-app",{appName:ft});return Ae}function $a(){return Array.from(wt.values())}function Ks(ft){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,m.Z)(function*(ft){const Ae=ft.name;wt.has(Ae)&&(wt.delete(Ae),yield Promise.all(ft.container.getProviders().map(Zt=>Zt.delete())),ft.isDeleted=!0)})).apply(this,arguments)}function Ys(ft,Ae,Zt){var fn;let pn=null!==(fn=ot[ft])&&void 0!==fn?fn:ft;Zt&&(pn+=`-${Zt}`);const Bt=pn.match(/\s|\//),Ye=Ae.match(/\s|\//);if(Bt||Ye){const et=[`Unable to register library "${pn}" with version "${Ae}":`];return Bt&&et.push(`library name "${pn}" contains illegal characters (whitespace or "/")`),Bt&&Ye&&et.push("and"),Ye&&et.push(`version name "${Ae}" contains illegal characters (whitespace or "/")`),void Z.warn(et.join(" "))}fi(new ee.wA(`${pn}-version`,()=>({library:pn,version:Ae}),"VERSION"))}function Un(ft,Ae){if(null!==ft&&"function"!=typeof ft)throw bs.create("invalid-log-argument");(0,j.Am)(ft,Ae)}function Qr(ft){(0,j.Ub)(ft)}fi(new ee.wA("platform-logger",Ae=>new me(Ae),"PRIVATE")),Ys(Ee,"0.7.1",undefined),Ys("fire-js","")},6034:(Ke,we,F)=>{"use strict";F.d(we,{wA:()=>j,H0:()=>pe});var m=F(4762),ee=F(3854),j=function(){function Z(k,L,Y){this.name=k,this.instanceFactory=L,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Z.prototype.setInstantiationMode=function(k){return this.instantiationMode=k,this},Z.prototype.setMultipleInstances=function(k){return this.multipleInstances=k,this},Z.prototype.setServiceProps=function(k){return this.serviceProps=k,this},Z.prototype.setInstanceCreatedCallback=function(k){return this.onInstanceCreated=k,this},Z}(),_e="[DEFAULT]",me=function(){function Z(k,L){this.name=k,this.container=L,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Z.prototype.get=function(k){var L=this.normalizeInstanceIdentifier(k);if(!this.instancesDeferred.has(L)){var Y=new ee.BH;if(this.instancesDeferred.set(L,Y),this.isInitialized(L)||this.shouldAutoInitialize())try{var K=this.getOrInitializeService({instanceIdentifier:L});K&&Y.resolve(K)}catch(J){}}return this.instancesDeferred.get(L).promise},Z.prototype.getImmediate=function(k){var L,Y=this.normalizeInstanceIdentifier(null==k?void 0:k.identifier),K=null!==(L=null==k?void 0:k.optional)&&void 0!==L&&L;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(K)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(J){if(K)return null;throw J}},Z.prototype.getComponent=function(){return this.component},Z.prototype.setComponent=function(k){var L,Y;if(k.name!==this.name)throw Error("Mismatching Component "+k.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=k,this.shouldAutoInitialize()){if(function(Z){return"EAGER"===Z.instantiationMode}(k))try{this.getOrInitializeService({instanceIdentifier:_e})}catch(Pe){}try{for(var K=(0,m.XA)(this.instancesDeferred.entries()),J=K.next();!J.done;J=K.next()){var de=(0,m.CR)(J.value,2),te=de[1],Ne=this.normalizeInstanceIdentifier(de[0]);try{var be=this.getOrInitializeService({instanceIdentifier:Ne});te.resolve(be)}catch(Pe){}}}catch(Pe){L={error:Pe}}finally{try{J&&!J.done&&(Y=K.return)&&Y.call(K)}finally{if(L)throw L.error}}}},Z.prototype.clearInstance=function(k){void 0===k&&(k=_e),this.instancesDeferred.delete(k),this.instancesOptions.delete(k),this.instances.delete(k)},Z.prototype.delete=function(){return(0,m.mG)(this,void 0,void 0,function(){var k;return(0,m.Jh)(this,function(L){switch(L.label){case 0:return k=Array.from(this.instances.values()),[4,Promise.all((0,m.ev)((0,m.ev)([],(0,m.CR)(k.filter(function(Y){return"INTERNAL"in Y}).map(function(Y){return Y.INTERNAL.delete()}))),(0,m.CR)(k.filter(function(Y){return"_delete"in Y}).map(function(Y){return Y._delete()}))))];case 1:return L.sent(),[2]}})})},Z.prototype.isComponentSet=function(){return null!=this.component},Z.prototype.isInitialized=function(k){return void 0===k&&(k=_e),this.instances.has(k)},Z.prototype.getOptions=function(k){return void 0===k&&(k=_e),this.instancesOptions.get(k)||{}},Z.prototype.initialize=function(k){var L,Y;void 0===k&&(k={});var K=k.options,J=void 0===K?{}:K,de=this.normalizeInstanceIdentifier(k.instanceIdentifier);if(this.isInitialized(de))throw Error(this.name+"("+de+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var ne=this.getOrInitializeService({instanceIdentifier:de,options:J});try{for(var te=(0,m.XA)(this.instancesDeferred.entries()),Ne=te.next();!Ne.done;Ne=te.next()){var be=(0,m.CR)(Ne.value,2),je=be[1];de===this.normalizeInstanceIdentifier(be[0])&&je.resolve(ne)}}catch(Ve){L={error:Ve}}finally{try{Ne&&!Ne.done&&(Y=te.return)&&Y.call(te)}finally{if(L)throw L.error}}return ne},Z.prototype.onInit=function(k,L){var Y,K=this.normalizeInstanceIdentifier(L),J=null!==(Y=this.onInitCallbacks.get(K))&&void 0!==Y?Y:new Set;J.add(k),this.onInitCallbacks.set(K,J);var de=this.instances.get(K);return de&&k(de,K),function(){J.delete(k)}},Z.prototype.invokeOnInitCallbacks=function(k,L){var Y,K,J=this.onInitCallbacks.get(L);if(J)try{for(var de=(0,m.XA)(J),ne=de.next();!ne.done;ne=de.next()){var te=ne.value;try{te(k,L)}catch(Ne){}}}catch(Ne){Y={error:Ne}}finally{try{ne&&!ne.done&&(K=de.return)&&K.call(de)}finally{if(Y)throw Y.error}}},Z.prototype.getOrInitializeService=function(k){var L=k.instanceIdentifier,Y=k.options,K=void 0===Y?{}:Y,J=this.instances.get(L);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:oe(L),options:K}),this.instances.set(L,J),this.instancesOptions.set(L,K),this.invokeOnInitCallbacks(J,L),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,L,J)}catch(de){}return J||null},Z.prototype.normalizeInstanceIdentifier=function(k){return void 0===k&&(k=_e),this.component?this.component.multipleInstances?k:_e:k},Z.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},Z}();function oe(Z){return Z===_e?void 0:Z}var pe=function(){function Z(k){this.name=k,this.providers=new Map}return Z.prototype.addComponent=function(k){var L=this.getProvider(k.name);if(L.isComponentSet())throw new Error("Component "+k.name+" has already been registered with "+this.name);L.setComponent(k)},Z.prototype.addOrOverwriteComponent=function(k){this.getProvider(k.name).isComponentSet()&&this.providers.delete(k.name),this.addComponent(k)},Z.prototype.getProvider=function(k){if(this.providers.has(k))return this.providers.get(k);var L=new me(k,this);return this.providers.set(k,L),L},Z.prototype.getProviders=function(){return Array.from(this.providers.values())},Z}()},5601:(Ke,we,F)=>{"use strict";F.d(we,{in:()=>ee,Yd:()=>Ee,Ub:()=>pe,Am:()=>Z});const m=[];var ee=(()=>{return(k=ee||(ee={}))[k.DEBUG=0]="DEBUG",k[k.VERBOSE=1]="VERBOSE",k[k.INFO=2]="INFO",k[k.WARN=3]="WARN",k[k.ERROR=4]="ERROR",k[k.SILENT=5]="SILENT",ee;var k})();const j={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},_e=ee.INFO,me={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},oe=(k,L,...Y)=>{if(L<k.logLevel)return;const K=(new Date).toISOString(),J=me[L];if(!J)throw new Error(`Attempted to log a message with an invalid logType (value: ${L})`);console[J](`[${K}]  ${k.name}:`,...Y)};class Ee{constructor(L){this.name=L,this._logLevel=_e,this._logHandler=oe,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(L){if(!(L in ee))throw new TypeError(`Invalid value "${L}" assigned to \`logLevel\``);this._logLevel=L}setLogLevel(L){this._logLevel="string"==typeof L?j[L]:L}get logHandler(){return this._logHandler}set logHandler(L){if("function"!=typeof L)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=L}get userLogHandler(){return this._userLogHandler}set userLogHandler(L){this._userLogHandler=L}debug(...L){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...L),this._logHandler(this,ee.DEBUG,...L)}log(...L){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...L),this._logHandler(this,ee.VERBOSE,...L)}info(...L){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...L),this._logHandler(this,ee.INFO,...L)}warn(...L){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...L),this._logHandler(this,ee.WARN,...L)}error(...L){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...L),this._logHandler(this,ee.ERROR,...L)}}function pe(k){m.forEach(L=>{L.setLogLevel(k)})}function Z(k,L){for(const Y of m){let K=null;L&&L.level&&(K=j[L.level]),Y.userLogHandler=null===k?null:(J,de,...ne)=>{const te=ne.map(Ne=>{if(null==Ne)return null;if("string"==typeof Ne)return Ne;if("number"==typeof Ne||"boolean"==typeof Ne)return Ne.toString();if(Ne instanceof Error)return Ne.message;try{return JSON.stringify(Ne)}catch(be){return null}}).filter(Ne=>Ne).join(" ");de>=(null!=K?K:J.logLevel)&&k({level:ee[de].toLowerCase(),message:te,args:ne,type:J.name})}}}},3854:(Ke,we,F)=>{"use strict";F.d(we,{BH:()=>K,LL:()=>X,ZR:()=>le,tV:()=>Z,r3:()=>dn,Sg:()=>J,ne:()=>Ks,vZ:()=>bs,ZB:()=>L,pd:()=>Pr,m9:()=>jo,z$:()=>de,jU:()=>Ne,ru:()=>be,d:()=>je,xb:()=>Vt,w1:()=>rt,hl:()=>Ce,uI:()=>ne,UG:()=>te,b$:()=>Pe,G6:()=>Nt,Mn:()=>Ve,xO:()=>Ri,zd:()=>xi});const _e=function(H){const G=[];let $=0;for(let Ie=0;Ie<H.length;Ie++){let re=H.charCodeAt(Ie);re<128?G[$++]=re:re<2048?(G[$++]=re>>6|192,G[$++]=63&re|128):55296==(64512&re)&&Ie+1<H.length&&56320==(64512&H.charCodeAt(Ie+1))?(re=65536+((1023&re)<<10)+(1023&H.charCodeAt(++Ie)),G[$++]=re>>18|240,G[$++]=re>>12&63|128,G[$++]=re>>6&63|128,G[$++]=63&re|128):(G[$++]=re>>12|224,G[$++]=re>>6&63|128,G[$++]=63&re|128)}return G},oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,G){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let re=0;re<H.length;re+=3){const He=H[re],Be=re+1<H.length,jt=Be?H[re+1]:0,gn=re+2<H.length,en=gn?H[re+2]:0;let tn=(15&jt)<<2|en>>6,sr=63&en;gn||(sr=64,Be||(tn=64)),Ie.push($[He>>2],$[(3&He)<<4|jt>>4],$[tn],$[sr])}return Ie.join("")},encodeString(H,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(H):this.encodeByteArray(_e(H),G)},decodeString(H,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(H):function(H){const G=[];let $=0,Ie=0;for(;$<H.length;){const re=H[$++];if(re<128)G[Ie++]=String.fromCharCode(re);else if(re>191&&re<224){const He=H[$++];G[Ie++]=String.fromCharCode((31&re)<<6|63&He)}else if(re>239&&re<365){const gn=((7&re)<<18|(63&H[$++])<<12|(63&H[$++])<<6|63&H[$++])-65536;G[Ie++]=String.fromCharCode(55296+(gn>>10)),G[Ie++]=String.fromCharCode(56320+(1023&gn))}else{const He=H[$++],Be=H[$++];G[Ie++]=String.fromCharCode((15&re)<<12|(63&He)<<6|63&Be)}}return G.join("")}(this.decodeStringToByteArray(H,G))},decodeStringToByteArray(H,G){this.init_();const $=G?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let re=0;re<H.length;){const He=$[H.charAt(re++)],jt=re<H.length?$[H.charAt(re)]:0;++re;const en=re<H.length?$[H.charAt(re)]:64;++re;const Rt=re<H.length?$[H.charAt(re)]:64;if(++re,null==He||null==jt||null==en||null==Rt)throw Error();Ie.push(He<<2|jt>>4),64!==en&&(Ie.push(jt<<4&240|en>>2),64!==Rt&&Ie.push(en<<6&192|Rt))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}},pe=function(H){return function(H){const G=_e(H);return oe.encodeByteArray(G,!0)}(H).replace(/\./g,"")},Z=function(H){try{return oe.decodeString(H,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function L(H,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return G}for(const $ in G)!G.hasOwnProperty($)||!Y($)||(H[$]=L(H[$],G[$]));return H}function Y(H){return"__proto__"!==H}class K{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,$)=>{this.resolve=G,this.reject=$})}wrapCallback(G){return($,Ie)=>{$?this.reject($):this.resolve(Ie),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G($):G($,Ie))}}}function J(H,G){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=G||"demo-project",re=H.iat||0,He=H.sub||H.user_id;if(!He)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Be=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:re,exp:re+3600,auth_time:re,sub:He,user_id:He,firebase:{sign_in_provider:"custom",identities:{}}},H);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(Be)),""].join(".")}function de(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ne(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(de())}function te(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(H){return!1}}function Ne(){return"object"==typeof self&&self.self===self}function be(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function Pe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function je(){return de().indexOf("Electron/")>=0}function rt(){const H=de();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function Ve(){return de().indexOf("MSAppHost/")>=0}function Nt(){return!te()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ce(){return"object"==typeof indexedDB}class le extends Error{constructor(G,$,Ie){super($),this.code=G,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,le.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,X.prototype.create)}}class X{constructor(G,$,Ie){this.service=G,this.serviceName=$,this.errors=Ie}create(G,...$){const Ie=$[0]||{},re=`${this.service}/${G}`,He=this.errors[G],Be=He?function(H,G){return H.replace(Qe,($,Ie)=>{const re=G[Ie];return null!=re?String(re):`<${Ie}?>`})}(He,Ie):"Error";return new le(re,`${this.serviceName}: ${Be} (${re}).`,Ie)}}const Qe=/\{\$([^}]+)}/g;function dn(H,G){return Object.prototype.hasOwnProperty.call(H,G)}function Vt(H){for(const G in H)if(Object.prototype.hasOwnProperty.call(H,G))return!1;return!0}function bs(H,G){if(H===G)return!0;const $=Object.keys(H),Ie=Object.keys(G);for(const re of $){if(!Ie.includes(re))return!1;const He=H[re],Be=G[re];if(hn(He)&&hn(Be)){if(!bs(He,Be))return!1}else if(He!==Be)return!1}for(const re of Ie)if(!$.includes(re))return!1;return!0}function hn(H){return null!==H&&"object"==typeof H}function Ri(H){const G=[];for(const[$,Ie]of Object.entries(H))Array.isArray(Ie)?Ie.forEach(re=>{G.push(encodeURIComponent($)+"="+encodeURIComponent(re))}):G.push(encodeURIComponent($)+"="+encodeURIComponent(Ie));return G.length?"&"+G.join("&"):""}function xi(H){const G={};return H.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[re,He]=Ie.split("=");G[decodeURIComponent(re)]=decodeURIComponent(He)}}),G}function Pr(H){const G=H.indexOf("?");if(!G)return"";const $=H.indexOf("#",G);return H.substring(G,$>0?$:void 0)}function Ks(H,G){const $=new Uo(H,G);return $.subscribe.bind($)}class Uo{constructor(G,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{G(this)}).catch(Ie=>{this.error(Ie)})}next(G){this.forEachObserver($=>{$.next(G)})}error(G){this.forEachObserver($=>{$.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,$,Ie){let re;if(void 0===G&&void 0===$&&void 0===Ie)throw new Error("Missing Observer.");re=function(H,G){if("object"!=typeof H||null===H)return!1;for(const $ of["next","error","complete"])if($ in H&&"function"==typeof H[$])return!0;return!1}(G)?G:{next:G,error:$,complete:Ie},void 0===re.next&&(re.next=Qr),void 0===re.error&&(re.error=Qr),void 0===re.complete&&(re.complete=Qr);const He=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?re.error(this.finalError):re.complete()}catch(Be){}}),this.observers.push(re),He}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,G)}sendOne(G,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{$(this.observers[G])}catch(Ie){"undefined"!=typeof console&&console.error&&console.error(Ie)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qr(){}function jo(H){return H&&H._delegate?H._delegate:H}},7841:(Ke,we,F)=>{"use strict";F.d(we,{Z:()=>m.Z});var m=F(4486);m.Z.registerVersion("firebase","9.1.0","app-compat")},670:(Ke,we,F)=>{"use strict";F.r(we);var m=F(8239),ee=F(4486),j=F(3854),_e=F(5452),me=F(4762),oe=F(5601),Ee=F(6034);const de=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ne=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},te=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),be=new oe.Yd("@firebase/auth");function Pe(b,...y){be.logLevel<=oe.in.ERROR&&be.error(`Auth (${_e.SDK_VERSION}): ${b}`,...y)}function je(b,...y){throw Nt(b,...y)}function rt(b,...y){return Nt(b,...y)}function Ve(b,y,_){const I=Object.assign(Object.assign({},ne()),{[y]:_});return new j.LL("auth","Firebase",I).create(y,{appName:b.name})}function Dt(b,y,_){if(!(y instanceof _))throw _.name!==y.constructor.name&&je(b,"argument-error"),Ve(b,"argument-error",`Type of ${y.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Nt(b,...y){if("string"!=typeof b){const _=y[0],I=[...y.slice(1)];return I[0]&&(I[0].appName=b.name),b._errorFactory.create(_,...I)}return te.create(b,...y)}function Ce(b,y,..._){if(!b)throw Nt(y,..._)}function ie(b){const y="INTERNAL ASSERTION FAILED: "+b;throw Pe(y),new Error(y)}function ae(b,y){b||ie(y)}const he=new Map;function ue(b){ae(b instanceof Function,"Expected a class definition");let y=he.get(b);return y?(ae(y instanceof b,"Instance stored in cache mismatched with class"),y):(y=new b,he.set(b,y),y)}function Me(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function Qe(){return"http:"===Tt()||"https:"===Tt()}function Tt(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class rn{constructor(y,_){this.shortDelay=y,this.longDelay=_,ae(_>y,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Qe()||(0,j.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Dn(b,y){ae(b.emulator,"Emulator should always be set here");const{url:_}=b.emulator;return y?`${_}${y.startsWith("/")?y.slice(1):y}`:_}class hi{static initialize(y,_,I){this.fetchImpl=y,_&&(this.headersImpl=_),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ie("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ie("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ie("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const fi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},dn=new rn(3e4,6e4);function lt(b,y){return b.tenantId&&!y.tenantId?Object.assign(Object.assign({},y),{tenantId:b.tenantId}):y}function Vt(b,y,_,I){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,m.Z)(function*(b,y,_,I,R={}){return bs(b,R,()=>{let O={},z={};I&&("GET"===y?z=I:O={body:JSON.stringify(I)});const ge=(0,j.xO)(Object.assign({key:b.config.apiKey},z)).slice(1),Fe=new(hi.headers());return Fe.set("Content-Type","application/json"),Fe.set("X-Client-Version",b._getSdkClientVersion()),b.languageCode&&Fe.set("X-Firebase-Locale",b.languageCode),hi.fetch()(Pr(b,b.config.apiHost,_,ge),Object.assign({method:y,headers:Fe,referrerPolicy:"no-referrer"},O))})})).apply(this,arguments)}function bs(b,y,_){return hn.apply(this,arguments)}function hn(){return(hn=(0,m.Z)(function*(b,y,_){b._canInitEmulator=!1;const I=Object.assign(Object.assign({},fi),y);try{const R=new $a(b),O=yield Promise.race([_(),R.promise]);R.clearNetworkTimeout();const z=yield O.json();if("needConfirmation"in z)throw Ks(b,"account-exists-with-different-credential",z);if(O.ok&&!("errorMessage"in z))return z;{const ge=O.ok?z.errorMessage:z.error.message,[Fe,ze]=ge.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw Ks(b,"credential-already-in-use",z);if("EMAIL_EXISTS"===Fe)throw Ks(b,"email-already-in-use",z);const dt=I[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(ze)throw Ve(b,dt,ze);je(b,dt)}}catch(R){if(R instanceof j.ZR)throw R;je(b,"network-request-failed")}})).apply(this,arguments)}function Ri(b,y,_,I){return xi.apply(this,arguments)}function xi(){return(xi=(0,m.Z)(function*(b,y,_,I,R={}){const O=yield Vt(b,y,_,I,R);return"mfaPendingCredential"in O&&je(b,"multi-factor-auth-required",{serverResponse:O}),O})).apply(this,arguments)}function Pr(b,y,_,I){const R=`${y}${_}?${I}`;return b.config.emulator?Dn(b.config,R):`${b.config.apiScheme}://${R}`}class $a{constructor(y){this.auth=y,this.timer=null,this.promise=new Promise((_,I)=>{this.timer=setTimeout(()=>I(rt(this.auth,"timeout")),dn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ks(b,y,_){const I={appName:b.name};_.email&&(I.email=_.email),_.phoneNumber&&(I.phoneNumber=_.phoneNumber);const R=rt(b,y,I);return R.customData._tokenResponse=_,R}function Ys(){return(Ys=(0,m.Z)(function*(b,y){return Vt(b,"POST","/v1/accounts:delete",y)})).apply(this,arguments)}function Un(b,y){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,m.Z)(function*(b,y){return Vt(b,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Ju(b,y){return ft.apply(this,arguments)}function ft(){return(ft=(0,m.Z)(function*(b,y){return Vt(b,"POST","/v1/accounts:lookup",y)})).apply(this,arguments)}function Ae(b){if(b)try{const y=new Date(Number(b));if(!isNaN(y.getTime()))return y.toUTCString()}catch(y){}}function pn(){return(pn=(0,m.Z)(function*(b,y=!1){const _=(0,j.m9)(b),I=yield _.getIdToken(y),R=Ye(I);Ce(R&&R.exp&&R.auth_time&&R.iat,_.auth,"internal-error");const O="object"==typeof R.firebase?R.firebase:void 0,z=null==O?void 0:O.sign_in_provider;return{claims:R,token:I,authTime:Ae(Bt(R.auth_time)),issuedAtTime:Ae(Bt(R.iat)),expirationTime:Ae(Bt(R.exp)),signInProvider:z||null,signInSecondFactor:(null==O?void 0:O.sign_in_second_factor)||null}})).apply(this,arguments)}function Bt(b){return 1e3*Number(b)}function Ye(b){const[y,_,I]=b.split(".");if(void 0===y||void 0===_||void 0===I)return Pe("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,j.tV)(_);return R?JSON.parse(R):(Pe("Failed to decode base64 JWT payload"),null)}catch(R){return Pe("Caught error parsing JWT payload as JSON",R),null}}function Tn(b,y){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,m.Z)(function*(b,y,_=!1){if(_)return y;try{return yield y}catch(I){throw I instanceof j.ZR&&Cs(I)&&b.auth.currentUser===b&&(yield b.auth.signOut()),I}})).apply(this,arguments)}function Cs({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class Sn{constructor(y){this.user=y,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(y){var _;if(y){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const R=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(y=!1){var _=this;if(!this.isRunning)return;const I=this.getInterval(y);this.timerId=setTimeout((0,m.Z)(function*(){yield _.iteration()}),I)}iteration(){var y=this;return(0,m.Z)(function*(){try{yield y.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&y.schedule(!0))}y.schedule()})()}}class kr{constructor(y,_){this.createdAt=y,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ae(this.lastLoginAt),this.creationTime=Ae(this.createdAt)}_copy(y){this.createdAt=y.createdAt,this.lastLoginAt=y.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function jo(b){return H.apply(this,arguments)}function H(){return(H=(0,m.Z)(function*(b){var y;const _=b.auth,I=yield b.getIdToken(),R=yield Tn(b,Ju(_,{idToken:I}));Ce(null==R?void 0:R.users.length,_,"internal-error");const O=R.users[0];b._notifyReloadListener(O);const z=(null===(y=O.providerUserInfo)||void 0===y?void 0:y.length)?re(O.providerUserInfo):[],ge=Ie(b.providerData,z),dt=!!b.isAnonymous&&!(b.email&&O.passwordHash||(null==ge?void 0:ge.length)),at={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:ge,metadata:new kr(O.createdAt,O.lastLoginAt),isAnonymous:dt};Object.assign(b,at)})).apply(this,arguments)}function $(){return($=(0,m.Z)(function*(b){const y=(0,j.m9)(b);yield jo(y),yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)})).apply(this,arguments)}function Ie(b,y){return[...b.filter(I=>!y.some(R=>R.providerId===I.providerId)),...y]}function re(b){return b.map(y=>{var{providerId:_}=y,I=(0,me._T)(y,["providerId"]);return{providerId:_,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function Be(){return(Be=(0,m.Z)(function*(b,y){const _=yield bs(b,{},()=>{const I=(0,j.xO)({grant_type:"refresh_token",refresh_token:y}).slice(1),{tokenApiHost:R,apiKey:O}=b.config,z=Pr(b,R,"/v1/token",`key=${O}`);return hi.fetch()(z,{method:"POST",headers:{"X-Client-Version":b._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:I})});return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class jt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(y){Ce(y.idToken,"internal-error"),Ce(void 0!==y.idToken,"internal-error"),Ce(void 0!==y.refreshToken,"internal-error");const _="expiresIn"in y&&void 0!==y.expiresIn?Number(y.expiresIn):function(b){const y=Ye(b);return Ce(y,"internal-error"),Ce(void 0!==y.exp,"internal-error"),Ce(void 0!==y.iat,"internal-error"),Number(y.exp)-Number(y.iat)}(y.idToken);this.updateTokensAndExpiration(y.idToken,y.refreshToken,_)}getToken(y,_=!1){var I=this;return(0,m.Z)(function*(){return Ce(!I.accessToken||I.refreshToken,y,"user-token-expired"),_||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(y,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(y,_){var I=this;return(0,m.Z)(function*(){const{accessToken:R,refreshToken:O,expiresIn:z}=yield function(b,y){return Be.apply(this,arguments)}(y,_);I.updateTokensAndExpiration(R,O,Number(z))})()}updateTokensAndExpiration(y,_,I){this.refreshToken=_||null,this.accessToken=y||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(y,_){const{refreshToken:I,accessToken:R,expirationTime:O}=_,z=new jt;return I&&(Ce("string"==typeof I,"internal-error",{appName:y}),z.refreshToken=I),R&&(Ce("string"==typeof R,"internal-error",{appName:y}),z.accessToken=R),O&&(Ce("number"==typeof O,"internal-error",{appName:y}),z.expirationTime=O),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(y){this.accessToken=y.accessToken,this.refreshToken=y.refreshToken,this.expirationTime=y.expirationTime}_clone(){return Object.assign(new jt,this.toJSON())}_performRefresh(){return ie("not implemented")}}function gn(b,y){Ce("string"==typeof b||void 0===b,"internal-error",{appName:y})}class en{constructor(y){var{uid:_,auth:I,stsTokenManager:R}=y,O=(0,me._T)(y,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Sn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=I,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.metadata=new kr(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(y){var _=this;return(0,m.Z)(function*(){const I=yield Tn(_,_.stsTokenManager.getToken(_.auth,y));return Ce(I,_.auth,"internal-error"),_.accessToken!==I&&(_.accessToken=I,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),I})()}getIdTokenResult(y){return function(b){return pn.apply(this,arguments)}(this,y)}reload(){return function(b){return $.apply(this,arguments)}(this)}_assign(y){this!==y&&(Ce(this.uid===y.uid,this.auth,"internal-error"),this.displayName=y.displayName,this.photoURL=y.photoURL,this.email=y.email,this.emailVerified=y.emailVerified,this.phoneNumber=y.phoneNumber,this.isAnonymous=y.isAnonymous,this.tenantId=y.tenantId,this.providerData=y.providerData.map(_=>Object.assign({},_)),this.metadata._copy(y.metadata),this.stsTokenManager._assign(y.stsTokenManager))}_clone(y){return new en(Object.assign(Object.assign({},this),{auth:y,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(y){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=y,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(y){this.reloadListener?this.reloadListener(y):this.reloadUserInfo=y}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(y,_=!1){var I=this;return(0,m.Z)(function*(){let R=!1;y.idToken&&y.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(y),R=!0),_&&(yield jo(I)),yield I.auth._persistUserIfCurrent(I),R&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var y=this;return(0,m.Z)(function*(){const _=yield y.getIdToken();return yield Tn(y,function(b,y){return Ys.apply(this,arguments)}(y.auth,{idToken:_})),y.stsTokenManager.clearRefreshToken(),y.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(y=>Object.assign({},y)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(y,_){var I,R,O,z,ge,Fe,ze,dt;const at=null!==(I=_.displayName)&&void 0!==I?I:void 0,Lt=null!==(R=_.email)&&void 0!==R?R:void 0,cn=null!==(O=_.phoneNumber)&&void 0!==O?O:void 0,Xn=null!==(z=_.photoURL)&&void 0!==z?z:void 0,Jt=null!==(ge=_.tenantId)&&void 0!==ge?ge:void 0,it=null!==(Fe=_._redirectEventId)&&void 0!==Fe?Fe:void 0,Yt=null!==(ze=_.createdAt)&&void 0!==ze?ze:void 0,Dd=null!==(dt=_.lastLoginAt)&&void 0!==dt?dt:void 0,{uid:Td,emailVerified:Sd,isAnonymous:Bl,providerData:lu,stsTokenManager:Gn}=_;Ce(Td&&Gn,y,"internal-error");const vi=jt.fromJSON(this.name,Gn);Ce("string"==typeof Td,y,"internal-error"),gn(at,y.name),gn(Lt,y.name),Ce("boolean"==typeof Sd,y,"internal-error"),Ce("boolean"==typeof Bl,y,"internal-error"),gn(cn,y.name),gn(Xn,y.name),gn(Jt,y.name),gn(it,y.name),gn(Yt,y.name),gn(Dd,y.name);const Lm=new en({uid:Td,auth:y,email:Lt,emailVerified:Sd,displayName:at,isAnonymous:Bl,photoURL:Xn,phoneNumber:cn,tenantId:Jt,stsTokenManager:vi,createdAt:Yt,lastLoginAt:Dd});return lu&&Array.isArray(lu)&&(Lm.providerData=lu.map(Zb=>Object.assign({},Zb))),it&&(Lm._redirectEventId=it),Lm}static _fromIdTokenResponse(y,_,I=!1){return(0,m.Z)(function*(){const R=new jt;R.updateFromServerResponse(_);const O=new en({uid:_.localId,auth:y,stsTokenManager:R,isAnonymous:I});return yield jo(O),O})()}}const Rt=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(_,I){var R=this;return(0,m.Z)(function*(){R.storage[_]=I})()}_get(_){var I=this;return(0,m.Z)(function*(){const R=I.storage[_];return void 0===R?null:R})()}_remove(_){var I=this;return(0,m.Z)(function*(){delete I.storage[_]})()}_addListener(_,I){}_removeListener(_,I){}}return b.type="NONE",b})();function tn(b,y,_){return`firebase:${b}:${y}:${_}`}class sr{constructor(y,_,I){this.persistence=y,this.auth=_,this.userKey=I;const{config:R,name:O}=this.auth;this.fullUserKey=tn(this.userKey,R.apiKey,O),this.fullPersistenceKey=tn("persistence",R.apiKey,O),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(y){return this.persistence._set(this.fullUserKey,y.toJSON())}getCurrentUser(){var y=this;return(0,m.Z)(function*(){const _=yield y.persistence._get(y.fullUserKey);return _?en._fromJSON(y.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(y){var _=this;return(0,m.Z)(function*(){if(_.persistence===y)return;const I=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=y,I?_.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(y,_,I="authUser"){return(0,m.Z)(function*(){if(!_.length)return new sr(ue(Rt),y,I);const R=(yield Promise.all(_.map(function(){var ze=(0,m.Z)(function*(dt){if(yield dt._isAvailable())return dt});return function(dt){return ze.apply(this,arguments)}}()))).filter(ze=>ze);let O=R[0]||ue(Rt);const z=tn(I,y.config.apiKey,y.name);let ge=null;for(const ze of _)try{const dt=yield ze._get(z);if(dt){const at=en._fromJSON(y,dt);ze!==O&&(ge=at),O=ze;break}}catch(dt){}const Fe=R.filter(ze=>ze._shouldAllowMigration);return O._shouldAllowMigration&&Fe.length?(O=Fe[0],ge&&(yield O._set(z,ge.toJSON())),yield Promise.all(_.map(function(){var ze=(0,m.Z)(function*(dt){if(dt!==O)try{yield dt._remove(z)}catch(at){}});return function(dt){return ze.apply(this,arguments)}}())),new sr(O,y,I)):new sr(O,y,I)})()}}function Bc(b){const y=b.toLowerCase();if(y.includes("opera/")||y.includes("opr/")||y.includes("opios/"))return"Opera";if($c(y))return"IEMobile";if(y.includes("msie")||y.includes("trident/"))return"IE";if(y.includes("edge/"))return"Edge";if(jc(y))return"Firefox";if(y.includes("silk/"))return"Silk";if(Xu(y))return"Blackberry";if(Ga(y))return"Webos";if(Nh(y))return"Safari";if((y.includes("chrome/")||Mh(y))&&!y.includes("edge/"))return"Chrome";if(Ha(y))return"Android";{const I=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==I?void 0:I.length))return I[1]}return"Other"}function jc(b=(0,j.z$)()){return/firefox\//i.test(b)}function Nh(b=(0,j.z$)()){const y=b.toLowerCase();return y.includes("safari/")&&!y.includes("chrome/")&&!y.includes("crios/")&&!y.includes("android")}function Mh(b=(0,j.z$)()){return/crios\//i.test(b)}function $c(b=(0,j.z$)()){return/iemobile/i.test(b)}function Ha(b=(0,j.z$)()){return/android/i.test(b)}function Xu(b=(0,j.z$)()){return/blackberry/i.test(b)}function Ga(b=(0,j.z$)()){return/webos/i.test(b)}function Ni(b=(0,j.z$)()){return/iphone|ipad|ipod/i.test(b)}function es(b=(0,j.z$)()){return Ni(b)||Ha(b)||Ga(b)||Xu(b)||/windows phone/i.test(b)||$c(b)}function yr(b,y=[]){let _;switch(b){case"Browser":_=Bc((0,j.z$)());break;case"Worker":_=`${Bc((0,j.z$)())}-${b}`;break;default:_=b}const I=y.length?y.join(","):"FirebaseCore-web";return`${_}/JsCore/${_e.SDK_VERSION}/${I}`}class Y_{constructor(y,_){this.app=y,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ue(this),this.idTokenSubscription=new Ue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=te,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=y.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(y,_){var I=this;return _&&(this._popupRedirectResolver=ue(_)),this._initializationPromise=this.queue((0,m.Z)(function*(){var R;I._deleted||(I.persistenceManager=yield sr.create(I,y),!I._deleted&&((null===(R=I._popupRedirectResolver)||void 0===R?void 0:R._shouldInitProactively)&&(yield I._popupRedirectResolver._initialize(I)),yield I.initializeCurrentUser(_),!I._deleted&&(I._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var y=this;return(0,m.Z)(function*(){if(y._deleted)return;const _=yield y.assertedPersistence.getCurrentUser();if(y.currentUser||_){if(y.currentUser&&_&&y.currentUser.uid===_.uid)return y._currentUser._assign(_),void(yield y.currentUser.getIdToken());yield y._updateCurrentUser(_)}})()}initializeCurrentUser(y){var _=this;return(0,m.Z)(function*(){var I;let R=yield _.assertedPersistence.getCurrentUser();if(y&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const O=null===(I=_.redirectUser)||void 0===I?void 0:I._redirectEventId,z=null==R?void 0:R._redirectEventId,ge=yield _.tryRedirectSignIn(y);(!O||O===z)&&(null==ge?void 0:ge.user)&&(R=ge.user)}return R?R._redirectEventId?(Ce(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===R._redirectEventId?_.directlySetCurrentUser(R):_.reloadAndSetCurrentUserOrClear(R)):_.reloadAndSetCurrentUserOrClear(R):_.directlySetCurrentUser(null)})()}tryRedirectSignIn(y){var _=this;return(0,m.Z)(function*(){let I=null;try{I=yield _._popupRedirectResolver._completeRedirectFn(_,y,!0)}catch(R){yield _._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(y){var _=this;return(0,m.Z)(function*(){try{yield jo(y)}catch(I){if("auth/network-request-failed"!==I.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(y)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var y=this;return(0,m.Z)(function*(){y._deleted=!0})()}updateCurrentUser(y){var _=this;return(0,m.Z)(function*(){const I=y?(0,j.m9)(y):null;return I&&Ce(I.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(I&&I._clone(_))})()}_updateCurrentUser(y){var _=this;return(0,m.Z)(function*(){if(!_._deleted)return y&&Ce(_.tenantId===y.tenantId,_,"tenant-id-mismatch"),_.queue((0,m.Z)(function*(){yield _.directlySetCurrentUser(y),_.notifyAuthListeners()}))})()}signOut(){var y=this;return(0,m.Z)(function*(){return(y.redirectPersistenceManager||y._popupRedirectResolver)&&(yield y._setRedirectUser(null)),y._updateCurrentUser(null)})()}setPersistence(y){var _=this;return this.queue((0,m.Z)(function*(){yield _.assertedPersistence.setPersistence(ue(y))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(y){this._errorFactory=new j.LL("auth","Firebase",y())}onAuthStateChanged(y,_,I){return this.registerStateListener(this.authStateSubscription,y,_,I)}onIdTokenChanged(y,_,I){return this.registerStateListener(this.idTokenSubscription,y,_,I)}toJSON(){var y;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(y=this._currentUser)||void 0===y?void 0:y.toJSON()}}_setRedirectUser(y,_){var I=this;return(0,m.Z)(function*(){const R=yield I.getOrInitRedirectPersistenceManager(_);return null===y?R.removeCurrentUser():R.setCurrentUser(y)})()}getOrInitRedirectPersistenceManager(y){var _=this;return(0,m.Z)(function*(){if(!_.redirectPersistenceManager){const I=y&&ue(y)||_._popupRedirectResolver;Ce(I,_,"argument-error"),_.redirectPersistenceManager=yield sr.create(_,[ue(I._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(y){var _=this;return(0,m.Z)(function*(){var I,R;return _._isInitialized&&(yield _.queue((0,m.Z)(function*(){}))),(null===(I=_._currentUser)||void 0===I?void 0:I._redirectEventId)===y?_._currentUser:(null===(R=_.redirectUser)||void 0===R?void 0:R._redirectEventId)===y?_.redirectUser:null})()}_persistUserIfCurrent(y){var _=this;return(0,m.Z)(function*(){if(y===_.currentUser)return _.queue((0,m.Z)(function*(){return _.directlySetCurrentUser(y)}))})()}_notifyListenersIfCurrent(y){y===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var y,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(_=null===(y=this.currentUser)||void 0===y?void 0:y.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(y,_,I,R){if(this._deleted)return()=>{};const O="function"==typeof _?_:_.next.bind(_),z=this._isInitialized?Promise.resolve():this._initializationPromise;return Ce(z,this,"internal-error"),z.then(()=>O(this.currentUser)),"function"==typeof _?y.addObserver(_,I,R):y.addObserver(_)}directlySetCurrentUser(y){var _=this;return(0,m.Z)(function*(){_.currentUser&&_.currentUser!==y&&(_._currentUser._stopProactiveRefresh(),y&&_.isProactiveRefreshEnabled&&y._startProactiveRefresh()),_.currentUser=y,y?yield _.assertedPersistence.setCurrentUser(y):yield _.assertedPersistence.removeCurrentUser()})()}queue(y){return this.operations=this.operations.then(y,y),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(y){!y||this.frameworks.includes(y)||(this.frameworks.push(y),this.frameworks.sort(),this.clientVersion=yr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function Gt(b){return(0,j.m9)(b)}class Ue{constructor(y){this.auth=y,this.observer=null,this.addObserver=(0,j.ne)(_=>this.observer=_)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function nn(b){const y=b.indexOf(":");return y<0?"":b.substr(0,y+1)}function Qs(b){if(!b)return null;const y=Number(b);return isNaN(y)?null:y}class _r{constructor(y,_){this.providerId=y,this.signInMethod=_}toJSON(){return ie("not implemented")}_getIdTokenResponse(y){return ie("not implemented")}_linkToIdToken(y,_){return ie("not implemented")}_getReauthenticationResolver(y){return ie("not implemented")}}function mn(b,y){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,m.Z)(function*(b,y){return Vt(b,"POST","/v1/accounts:resetPassword",lt(b,y))})).apply(this,arguments)}function qa(b,y){return yt.apply(this,arguments)}function yt(){return(yt=(0,m.Z)(function*(b,y){return Vt(b,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Hc(b,y){return Js.apply(this,arguments)}function Js(){return(Js=(0,m.Z)(function*(b,y){return Vt(b,"POST","/v1/accounts:update",lt(b,y))})).apply(this,arguments)}function Mi(){return(Mi=(0,m.Z)(function*(b,y){return Ri(b,"POST","/v1/accounts:signInWithPassword",lt(b,y))})).apply(this,arguments)}function $n(b,y){return Go.apply(this,arguments)}function Go(){return(Go=(0,m.Z)(function*(b,y){return Vt(b,"POST","/v1/accounts:sendOobCode",lt(b,y))})).apply(this,arguments)}function Is(b,y){return ei.apply(this,arguments)}function ei(){return(ei=(0,m.Z)(function*(b,y){return $n(b,y)})).apply(this,arguments)}function Kt(b,y){return el.apply(this,arguments)}function el(){return(el=(0,m.Z)(function*(b,y){return $n(b,y)})).apply(this,arguments)}function Ph(b,y){return za.apply(this,arguments)}function za(){return(za=(0,m.Z)(function*(b,y){return $n(b,y)})).apply(this,arguments)}function kh(b,y){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,m.Z)(function*(b,y){return $n(b,y)})).apply(this,arguments)}function Ds(){return(Ds=(0,m.Z)(function*(b,y){return Ri(b,"POST","/v1/accounts:signInWithEmailLink",lt(b,y))})).apply(this,arguments)}function Fh(){return(Fh=(0,m.Z)(function*(b,y){return Ri(b,"POST","/v1/accounts:signInWithEmailLink",lt(b,y))})).apply(this,arguments)}class ti extends _r{constructor(y,_,I,R=null){super("password",I),this._email=y,this._password=_,this._tenantId=R}static _fromEmailAndPassword(y,_){return new ti(y,_,"password")}static _fromEmailAndCode(y,_,I=null){return new ti(y,_,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(y){const _="string"==typeof y?JSON.parse(y):y;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(y){var _=this;return(0,m.Z)(function*(){switch(_.signInMethod){case"password":return function(b,y){return Mi.apply(this,arguments)}(y,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function(b,y){return Ds.apply(this,arguments)}(y,{email:_._email,oobCode:_._password});default:je(y,"internal-error")}})()}_linkToIdToken(y,_){var I=this;return(0,m.Z)(function*(){switch(I.signInMethod){case"password":return qa(y,{idToken:_,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function(b,y){return Fh.apply(this,arguments)}(y,{idToken:_,email:I._email,oobCode:I._password});default:je(y,"internal-error")}})()}_getReauthenticationResolver(y){return this._getIdTokenResponse(y)}}function qt(b,y){return nl.apply(this,arguments)}function nl(){return(nl=(0,m.Z)(function*(b,y){return Ri(b,"POST","/v1/accounts:signInWithIdp",lt(b,y))})).apply(this,arguments)}class ni extends _r{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(y){const _=new ni(y.providerId,y.signInMethod);return y.idToken||y.accessToken?(y.idToken&&(_.idToken=y.idToken),y.accessToken&&(_.accessToken=y.accessToken),y.nonce&&!y.pendingToken&&(_.nonce=y.nonce),y.pendingToken&&(_.pendingToken=y.pendingToken)):y.oauthToken&&y.oauthTokenSecret?(_.accessToken=y.oauthToken,_.secret=y.oauthTokenSecret):je("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(y){const _="string"==typeof y?JSON.parse(y):y,{providerId:I,signInMethod:R}=_,O=(0,me._T)(_,["providerId","signInMethod"]);if(!I||!R)return null;const z=new ni(I,R);return Object.assign(z,O),z}_getIdTokenResponse(y){return qt(y,this.buildRequest())}_linkToIdToken(y,_){const I=this.buildRequest();return I.idToken=_,qt(y,I)}_getReauthenticationResolver(y){const _=this.buildRequest();return _.autoCreate=!1,qt(y,_)}buildRequest(){const y={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)y.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),y.postBody=(0,j.xO)(_)}return y}}function Oi(b,y){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,m.Z)(function*(b,y){return Vt(b,"POST","/v1/accounts:sendVerificationCode",lt(b,y))})).apply(this,arguments)}function Vh(){return(Vh=(0,m.Z)(function*(b,y){return Ri(b,"POST","/v1/accounts:signInWithPhoneNumber",lt(b,y))})).apply(this,arguments)}function Hg(){return(Hg=(0,m.Z)(function*(b,y){const _=yield Ri(b,"POST","/v1/accounts:signInWithPhoneNumber",lt(b,y));if(_.temporaryProof)throw Ks(b,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Db={USER_NOT_FOUND:"user-not-found"};function Gg(){return(Gg=(0,m.Z)(function*(b,y){return Ri(b,"POST","/v1/accounts:signInWithPhoneNumber",lt(b,Object.assign(Object.assign({},y),{operation:"REAUTH"})),Db)})).apply(this,arguments)}class Za extends _r{constructor(y){super("phone","phone"),this.params=y}static _fromVerification(y,_){return new Za({verificationId:y,verificationCode:_})}static _fromTokenResponse(y,_){return new Za({phoneNumber:y,temporaryProof:_})}_getIdTokenResponse(y){return function(b,y){return Vh.apply(this,arguments)}(y,this._makeVerificationRequest())}_linkToIdToken(y,_){return function(b,y){return Hg.apply(this,arguments)}(y,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(y){return function(b,y){return Gg.apply(this,arguments)}(y,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:y,phoneNumber:_,verificationId:I,verificationCode:R}=this.params;return y&&_?{temporaryProof:y,phoneNumber:_}:{sessionInfo:I,code:R}}toJSON(){const y={providerId:this.providerId};return this.params.phoneNumber&&(y.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(y.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(y.verificationCode=this.params.verificationCode),this.params.verificationId&&(y.verificationId=this.params.verificationId),y}static fromJSON(y){"string"==typeof y&&(y=JSON.parse(y));const{verificationId:_,verificationCode:I,phoneNumber:R,temporaryProof:O}=y;return I||_||R||O?new Za({verificationId:_,verificationCode:I,phoneNumber:R,temporaryProof:O}):null}}class qc{constructor(y){var _,I,R,O,z,ge;const Fe=(0,j.zd)((0,j.pd)(y)),ze=null!==(_=Fe.apiKey)&&void 0!==_?_:null,dt=null!==(I=Fe.oobCode)&&void 0!==I?I:null,at=function(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=Fe.mode)&&void 0!==R?R:null);Ce(ze&&dt&&at,"argument-error"),this.apiKey=ze,this.operation=at,this.code=dt,this.continueUrl=null!==(O=Fe.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(z=Fe.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(ge=Fe.tenantId)&&void 0!==ge?ge:null}static parseLink(y){const _=function(b){const y=(0,j.zd)((0,j.pd)(b)).link,_=y?(0,j.zd)((0,j.pd)(y)).deep_link_id:null,I=(0,j.zd)((0,j.pd)(b)).deep_link_id;return(I?(0,j.zd)((0,j.pd)(I)).link:null)||I||_||y||b}(y);try{return new qc(_)}catch(I){return null}}}let qg=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(_,I){return ti._fromEmailAndPassword(_,I)}static credentialWithLink(_,I){const R=qc.parseLink(I);return Ce(R,"argument-error"),ti._fromEmailAndCode(_,R.code,R.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class qo{constructor(y){this.providerId=y,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(y){this.defaultLanguageCode=y}setCustomParameters(y){return this.customParameters=y,this}getCustomParameters(){return this.customParameters}}class rl extends qo{constructor(){super(...arguments),this.scopes=[]}addScope(y){return this.scopes.includes(y)||this.scopes.push(y),this}getScopes(){return[...this.scopes]}}class zo extends rl{static credentialFromJSON(y){const _="string"==typeof y?JSON.parse(y):y;return Ce("providerId"in _&&"signInMethod"in _,"argument-error"),ni._fromParams(_)}credential(y){return this._credential(y)}_credential(y){return Ce(y.idToken||y.accessToken,"argument-error"),ni._fromParams(Object.assign(Object.assign({},y),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(y){return zo.oauthCredentialFromTaggedObject(y)}static credentialFromError(y){return zo.oauthCredentialFromTaggedObject(y.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:_,oauthAccessToken:I,oauthTokenSecret:R,pendingToken:O,nonce:z,providerId:ge}=y;if(!I&&!R&&!_&&!O||!ge)return null;try{return new zo(ge)._credential({idToken:_,accessToken:I,rawNonce:z,pendingToken:O})}catch(Fe){return null}}}let Uh=(()=>{class b extends rl{constructor(){super("facebook.com")}static credential(_){return ni._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch(I){return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),Bh=(()=>{class b extends rl{constructor(){super("google.com"),this.addScope("profile")}static credential(_,I){return ni._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:I})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:I,oauthAccessToken:R}=_;if(!I&&!R)return null;try{return b.credential(I,R)}catch(O){return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),jh=(()=>{class b extends rl{constructor(){super("github.com")}static credential(_){return ni._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch(I){return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class Ka extends _r{constructor(y,_){super(y,y),this.pendingToken=_}_getIdTokenResponse(y){return qt(y,this.buildRequest())}_linkToIdToken(y,_){const I=this.buildRequest();return I.idToken=_,qt(y,I)}_getReauthenticationResolver(y){const _=this.buildRequest();return _.autoCreate=!1,qt(y,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(y){const _="string"==typeof y?JSON.parse(y):y,{providerId:I,signInMethod:R,pendingToken:O}=_;return I&&R&&O&&I===R?new Ka(I,O):null}static _create(y,_){return new Ka(y,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let $h=(()=>{class b extends rl{constructor(){super("twitter.com")}static credential(_,I){return ni._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:I})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:I,oauthTokenSecret:R}=_;if(!I||!R)return null;try{return b.credential(I,R)}catch(O){return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function Hh(b,y){return il.apply(this,arguments)}function il(){return(il=(0,m.Z)(function*(b,y){return Ri(b,"POST","/v1/accounts:signUp",lt(b,y))})).apply(this,arguments)}class Pi{constructor(y){this.user=y.user,this.providerId=y.providerId,this._tokenResponse=y._tokenResponse,this.operationType=y.operationType}static _fromIdTokenResponse(y,_,I,R=!1){return(0,m.Z)(function*(){const O=yield en._fromIdTokenResponse(y,I,R),z=J_(I);return new Pi({user:O,providerId:z,_tokenResponse:I,operationType:_})})()}static _forOperation(y,_,I){return(0,m.Z)(function*(){yield y._updateTokensIfNecessary(I,!0);const R=J_(I);return new Pi({user:y,providerId:R,_tokenResponse:I,operationType:_})})()}}function J_(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function sl(){return(sl=(0,m.Z)(function*(b){var y;const _=Gt(b);if(yield _._initializationPromise,null===(y=_.currentUser)||void 0===y?void 0:y.isAnonymous)return new Pi({user:_.currentUser,providerId:null,operationType:"signIn"});const I=yield Hh(_,{returnSecureToken:!0}),R=yield Pi._fromIdTokenResponse(_,"signIn",I,!0);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}class zc extends j.ZR{constructor(y,_,I,R){var O;super(_.code,_.message),this.operationType=I,this.user=R,this.name="FirebaseError",Object.setPrototypeOf(this,zc.prototype),this.appName=y.name,this.code=_.code,this.tenantId=null!==(O=y.tenantId)&&void 0!==O?O:void 0,this.serverResponse=_.customData.serverResponse}static _fromErrorAndOperation(y,_,I,R){return new zc(y,_,I,R)}}function ol(b,y,_,I){return("reauthenticate"===y?_._getReauthenticationResolver(b):_._getIdTokenResponse(b)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?zc._fromErrorAndOperation(b,O,y,I):O})}function Wg(b){return new Set(b.map(({providerId:y})=>y).filter(y=>!!y))}function Wc(){return(Wc=(0,m.Z)(function*(b,y){const _=(0,j.m9)(b);yield Xs(!0,_,y);const{providerUserInfo:I}=yield Un(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[y]}),R=Wg(I||[]);return _.providerData=_.providerData.filter(O=>R.has(O.providerId)),R.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Zc(b,y){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,m.Z)(function*(b,y,_=!1){const I=yield Tn(b,y._linkToIdToken(b.auth,yield b.getIdToken()),_);return Pi._forOperation(b,"link",I)})).apply(this,arguments)}function Xs(b,y,_){return al.apply(this,arguments)}function al(){return(al=(0,m.Z)(function*(b,y,_){yield jo(y);const R=!1===b?"provider-already-linked":"no-such-provider";Ce(Wg(y.providerData).has(_)===b,y.auth,R)})).apply(this,arguments)}function Kc(b,y){return sn.apply(this,arguments)}function sn(){return(sn=(0,m.Z)(function*(b,y,_=!1){const{auth:I}=b,R="reauthenticate";try{const O=yield Tn(b,ol(I,R,y,b),_);Ce(O.idToken,I,"internal-error");const z=Ye(O.idToken);Ce(z,I,"internal-error");const{sub:ge}=z;return Ce(b.uid===ge,I,"user-mismatch"),Pi._forOperation(b,R,O)}catch(O){throw"auth/user-not-found"===(null==O?void 0:O.code)&&je(I,"user-mismatch"),O}})).apply(this,arguments)}function Zg(b,y){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,m.Z)(function*(b,y,_=!1){const I="signIn",R=yield ol(b,I,y),O=yield Pi._fromIdTokenResponse(b,I,R);return _||(yield b._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Qc(b,y){return on.apply(this,arguments)}function on(){return(on=(0,m.Z)(function*(b,y){return Zg(Gt(b),y)})).apply(this,arguments)}function Kg(b,y){return Yg.apply(this,arguments)}function Yg(){return(Yg=(0,m.Z)(function*(b,y){const _=(0,j.m9)(b);return yield Xs(!1,_,y.providerId),Zc(_,y)})).apply(this,arguments)}function ul(b,y){return ri.apply(this,arguments)}function ri(){return(ri=(0,m.Z)(function*(b,y){return Kc((0,j.m9)(b),y)})).apply(this,arguments)}function Nb(b,y){return eo.apply(this,arguments)}function eo(){return(eo=(0,m.Z)(function*(b,y){return Ri(b,"POST","/v1/accounts:signInWithCustomToken",lt(b,y))})).apply(this,arguments)}function vr(){return(vr=(0,m.Z)(function*(b,y){const _=Gt(b),I=yield Nb(_,{token:y,returnSecureToken:!0}),R=yield Pi._fromIdTokenResponse(_,"signIn",I);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}class cl{constructor(y,_){this.factorId=y,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(y,_){return"phoneInfo"in _?dl._fromServerResponse(y,_):je(y,"internal-error")}}class dl extends cl{constructor(y){super("phone",y),this.phoneNumber=y.phoneInfo}static _fromServerResponse(y,_){return new dl(_)}}function hl(b,y,_){var I;Ce((null===(I=_.url)||void 0===I?void 0:I.length)>0,b,"invalid-continue-uri"),Ce(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),y.continueUrl=_.url,y.dynamicLinkDomain=_.dynamicLinkDomain,y.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(Ce(_.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),y.iosBundleId=_.iOS.bundleId),_.android&&(Ce(_.android.packageName.length>0,b,"missing-android-pkg-name"),y.androidInstallApp=_.android.installApp,y.androidMinimumVersionCode=_.android.minimumVersion,y.androidPackageName=_.android.packageName)}function Jc(){return(Jc=(0,m.Z)(function*(b,y,_){const I=(0,j.m9)(b),R={requestType:"PASSWORD_RESET",email:y};_&&hl(I,R,_),yield Kt(I,R)})).apply(this,arguments)}function ht(){return(ht=(0,m.Z)(function*(b,y,_){yield mn((0,j.m9)(b),{oobCode:y,newPassword:_})})).apply(this,arguments)}function Zo(){return(Zo=(0,m.Z)(function*(b,y){yield Hc((0,j.m9)(b),{oobCode:y})})).apply(this,arguments)}function fl(b,y){return pl.apply(this,arguments)}function pl(){return(pl=(0,m.Z)(function*(b,y){const _=(0,j.m9)(b),I=yield mn(_,{oobCode:y}),R=I.requestType;switch(Ce(R,_,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ce(I.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ce(I.mfaInfo,_,"internal-error");default:Ce(I.email,_,"internal-error")}let O=null;return I.mfaInfo&&(O=cl._fromServerResponse(Gt(_),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:O},operation:R}})).apply(this,arguments)}function Ko(){return(Ko=(0,m.Z)(function*(b,y){const{data:_}=yield fl((0,j.m9)(b),y);return _.email})).apply(this,arguments)}function Te(){return(Te=(0,m.Z)(function*(b,y,_){const I=Gt(b),R=yield Hh(I,{returnSecureToken:!0,email:y,password:_}),O=yield Pi._fromIdTokenResponse(I,"signIn",R);return yield I._updateCurrentUser(O.user),O})).apply(this,arguments)}function An(){return(An=(0,m.Z)(function*(b,y,_){const I=(0,j.m9)(b),R={requestType:"EMAIL_SIGNIN",email:y};Ce(_.handleCodeInApp,I,"argument-error"),_&&hl(I,R,_),yield Ph(I,R)})).apply(this,arguments)}function pi(){return(pi=(0,m.Z)(function*(b,y,_){const I=(0,j.m9)(b),R=qg.credentialWithLink(y,_||Me());return Ce(R._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Qc(I,R)})).apply(this,arguments)}function Wh(b,y){return no.apply(this,arguments)}function no(){return(no=(0,m.Z)(function*(b,y){return Vt(b,"POST","/v1/accounts:createAuthUri",lt(b,y))})).apply(this,arguments)}function Xg(){return(Xg=(0,m.Z)(function*(b,y){const I={identifier:y,continueUri:Qe()?Me():"http://localhost"},{signinMethods:R}=yield Wh((0,j.m9)(b),I);return R||[]})).apply(this,arguments)}function ro(){return(ro=(0,m.Z)(function*(b,y){const _=(0,j.m9)(b),R={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};y&&hl(_.auth,R,y);const{email:O}=yield Is(_.auth,R);O!==b.email&&(yield b.reload())})).apply(this,arguments)}function gi(){return(gi=(0,m.Z)(function*(b,y,_){const I=(0,j.m9)(b),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:y};_&&hl(I.auth,O,_);const{email:z}=yield kh(I.auth,O);z!==b.email&&(yield b.reload())})).apply(this,arguments)}function Zh(b,y){return io.apply(this,arguments)}function io(){return(io=(0,m.Z)(function*(b,y){return Vt(b,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Kh(){return(Kh=(0,m.Z)(function*(b,{displayName:y,photoURL:_}){if(void 0===y&&void 0===_)return;const I=(0,j.m9)(b),O={idToken:yield I.getIdToken(),displayName:y,photoUrl:_,returnSecureToken:!0},z=yield Tn(I,Zh(I.auth,O));I.displayName=z.displayName||null,I.photoURL=z.photoUrl||null;const ge=I.providerData.find(({providerId:Fe})=>"password"===Fe);ge&&(ge.displayName=I.displayName,ge.photoURL=I.photoURL),yield I._updateTokensIfNecessary(z)})).apply(this,arguments)}function Qh(b,y,_){return ml.apply(this,arguments)}function ml(){return(ml=(0,m.Z)(function*(b,y,_){const{auth:I}=b,O={idToken:yield b.getIdToken(),returnSecureToken:!0};y&&(O.email=y),_&&(O.password=_);const z=yield Tn(b,qa(I,O));yield b._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class Qo{constructor(y,_,I={}){this.isNewUser=y,this.providerId=_,this.profile=I}}class Xh extends Qo{constructor(y,_,I,R){super(y,_,I),this.username=R}}class tv extends Qo{constructor(y,_){super(y,"facebook.com",_)}}class nv extends Xh{constructor(y,_){super(y,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class yl extends Qo{constructor(y,_){super(y,"google.com",_)}}class tm extends Xh{constructor(y,_,I){super(y,"twitter.com",_,I)}}function nm(b){const{user:y,_tokenResponse:_}=b;return y.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function(b){var y,_;if(!b)return null;const{providerId:I}=b,R=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},O=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!I&&(null==b?void 0:b.idToken)){const z=null===(_=null===(y=Ye(b.idToken))||void 0===y?void 0:y.firebase)||void 0===_?void 0:_.sign_in_provider;if(z)return new Qo(O,"anonymous"!==z&&"custom"!==z?z:null)}if(!I)return null;switch(I){case"facebook.com":return new tv(O,R);case"github.com":return new nv(O,R);case"google.com":return new yl(O,R);case"twitter.com":return new tm(O,R,b.screenName||null);case"custom":case"anonymous":return new Qo(O,null);default:return new Qo(O,I,R)}}(_)}class As{constructor(y,_){this.type=y,this.credential=_}static _fromIdtoken(y){return new As("enroll",y)}static _fromMfaPendingCredential(y){return new As("signin",y)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(y){var _,I;if(null==y?void 0:y.multiFactorSession){if(null===(_=y.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return As._fromMfaPendingCredential(y.multiFactorSession.pendingCredential);if(null===(I=y.multiFactorSession)||void 0===I?void 0:I.idToken)return As._fromIdtoken(y.multiFactorSession.idToken)}return null}}class ef{constructor(y,_,I){this.session=y,this.hints=_,this.signInResolver=I}static _fromError(y,_){const I=Gt(y),R=(_.serverResponse.mfaInfo||[]).map(z=>cl._fromServerResponse(I,z));Ce(_.serverResponse.mfaPendingCredential,I,"internal-error");const O=As._fromMfaPendingCredential(_.serverResponse.mfaPendingCredential);return new ef(O,R,function(){var z=(0,m.Z)(function*(ge){const Fe=yield ge._process(I,O);delete _.serverResponse.mfaInfo,delete _.serverResponse.mfaPendingCredential;const ze=Object.assign(Object.assign({},_.serverResponse),{idToken:Fe.idToken,refreshToken:Fe.refreshToken});switch(_.operationType){case"signIn":const dt=yield Pi._fromIdTokenResponse(I,_.operationType,ze);return yield I._updateCurrentUser(dt.user),dt;case"reauthenticate":return Ce(_.user,I,"internal-error"),Pi._forOperation(_.user,_.operationType,ze);default:je(I,"internal-error")}});return function(ge){return z.apply(this,arguments)}}())}resolveSignIn(y){var _=this;return(0,m.Z)(function*(){return _.signInResolver(y)})()}}function rv(b,y){return Vt(b,"POST","/v2/accounts/mfaEnrollment:start",lt(b,y))}class Ya{constructor(y){this.user=y,this.enrolledFactors=[],y._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(I=>cl._fromServerResponse(y.auth,I)))})}static _fromUser(y){return new Ya(y)}getSession(){var y=this;return(0,m.Z)(function*(){return As._fromIdtoken(yield y.user.getIdToken())})()}enroll(y,_){var I=this;return(0,m.Z)(function*(){const R=y,O=yield I.getSession(),z=yield Tn(I.user,R._process(I.user.auth,O,_));return yield I.user._updateTokensIfNecessary(z),I.user.reload()})()}unenroll(y){var _=this;return(0,m.Z)(function*(){const I="string"==typeof y?y:y.uid,R=yield _.user.getIdToken(),O=yield Tn(_.user,function(b,y){return Vt(b,"POST","/v2/accounts/mfaEnrollment:withdraw",lt(b,y))}(_.user.auth,{idToken:R,mfaEnrollmentId:I}));_.enrolledFactors=_.enrolledFactors.filter(({uid:z})=>z!==I),yield _.user._updateTokensIfNecessary(O);try{yield _.user.reload()}catch(z){if("auth/user-token-expired"!==z.code)throw z}})()}}const Qa=new WeakMap,_l="__sak";class rf{constructor(y,_){this.storage=y,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(_l,"1"),this.storage.removeItem(_l),Promise.resolve(!0)):Promise.resolve(!1)}catch(y){return Promise.resolve(!1)}}_set(y,_){return this.storage.setItem(y,JSON.stringify(_)),Promise.resolve()}_get(y){const _=this.storage.getItem(y);return Promise.resolve(_?JSON.parse(_):null)}_remove(y){return this.storage.removeItem(y),Promise.resolve()}}const Xc=(()=>{class b extends rf{constructor(){super(window.localStorage,"LOCAL"),this.boundEventHandler=(_,I)=>this.onStorageEvent(_,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const b=(0,j.z$)();return Nh(b)||Ni(b)}()&&function(){try{return!(!window||window===window.top)}catch(b){return!1}}(),this.fallbackToPolling=es(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const I of Object.keys(this.listeners)){const R=this.storage.getItem(I),O=this.localCache[I];R!==O&&_(I,O,R)}}onStorageEvent(_,I=!1){if(!_.key)return void this.forAllChangedKeys((ge,Fe,ze)=>{this.notifyListeners(ge,ze)});const R=_.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ge=this.storage.getItem(R);if(_.newValue!==ge)null!==_.newValue?this.storage.setItem(R,_.newValue):this.storage.removeItem(R);else if(this.localCache[R]===_.newValue&&!I)return}const O=()=>{const ge=this.storage.getItem(R);!I&&this.localCache[R]===ge||this.notifyListeners(R,ge)},z=this.storage.getItem(R);(0,j.w1)()&&10===document.documentMode&&z!==_.newValue&&_.newValue!==_.oldValue?setTimeout(O,10):O()}notifyListeners(_,I){this.localCache[_]=I;const R=this.listeners[_];if(R)for(const O of Array.from(R))O(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,I,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:I,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,I){var R=()=>super._set,O=this;return(0,m.Z)(function*(){yield R().call(O,_,I),O.localCache[_]=JSON.stringify(I)})()}_get(_){var I=()=>super._get,R=this;return(0,m.Z)(function*(){const O=yield I().call(R,_);return R.localCache[_]=JSON.stringify(O),O})()}_remove(_){var I=()=>super._remove,R=this;return(0,m.Z)(function*(){yield I().call(R,_),delete R.localCache[_]})()}}return b.type="LOCAL",b})(),Rs=(()=>{class b extends rf{constructor(){super(window.sessionStorage,"SESSION")}_addListener(_,I){}_removeListener(_,I){}}return b.type="SESSION",b})();let oo=(()=>{class b{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const I=this.receivers.find(O=>O.isListeningto(_));if(I)return I;const R=new b(_);return this.receivers.push(R),R}isListeningto(_){return this.eventTarget===_}handleEvent(_){var I=this;return(0,m.Z)(function*(){const R=_,{eventId:O,eventType:z,data:ge}=R.data,Fe=I.handlersMap[z];if(!(null==Fe?void 0:Fe.size))return;R.ports[0].postMessage({status:"ack",eventId:O,eventType:z});const ze=Array.from(Fe).map(function(){var at=(0,m.Z)(function*(Lt){return Lt(R.origin,ge)});return function(Lt){return at.apply(this,arguments)}}()),dt=yield function(b){return Promise.all(b.map(function(){var y=(0,m.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(I){return{fulfilled:!1,reason:I}}});return function(_){return y.apply(this,arguments)}}()))}(ze);R.ports[0].postMessage({status:"done",eventId:O,eventType:z,response:dt})})()}_subscribe(_,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(I)}_unsubscribe(_,I){this.handlersMap[_]&&I&&this.handlersMap[_].delete(I),(!I||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function ed(b="",y=10){let _="";for(let I=0;I<y;I++)_+=Math.floor(10*Math.random());return b+_}class Pb{constructor(y){this.target=y,this.handlers=new Set}removeMessageHandler(y){y.messageChannel&&(y.messageChannel.port1.removeEventListener("message",y.onMessage),y.messageChannel.port1.close()),this.handlers.delete(y)}_send(y,_,I=50){var R=this;return(0,m.Z)(function*(){const O="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let z,ge;return new Promise((Fe,ze)=>{const dt=ed("",20);O.port1.start();const at=setTimeout(()=>{ze(new Error("unsupported_event"))},I);ge={messageChannel:O,onMessage(Lt){const cn=Lt;if(cn.data.eventId===dt)switch(cn.data.status){case"ack":clearTimeout(at),z=setTimeout(()=>{ze(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Fe(cn.data.response);break;default:clearTimeout(at),clearTimeout(z),ze(new Error("invalid_response"))}}},R.handlers.add(ge),O.port1.addEventListener("message",ge.onMessage),R.target.postMessage({eventType:y,eventId:dt,data:_},[O.port2])}).finally(()=>{ge&&R.removeMessageHandler(ge)})})()}}function un(){return window}function td(){return void 0!==un().WorkerGlobalScope&&"function"==typeof un().importScripts}function uf(){return(uf=(0,m.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(b){return null}})).apply(this,arguments)}const om="firebaseLocalStorageDb",wl="firebaseLocalStorage",nd="fbase_key";class rd{constructor(y){this.request=y}toPromise(){return new Promise((y,_)=>{this.request.addEventListener("success",()=>{y(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function id(b,y){return b.transaction([wl],y?"readwrite":"readonly").objectStore(wl)}function lf(){const b=indexedDB.open(om,1);return new Promise((y,_)=>{b.addEventListener("error",()=>{_(b.error)}),b.addEventListener("upgradeneeded",()=>{const I=b.result;try{I.createObjectStore(wl,{keyPath:nd})}catch(R){_(R)}}),b.addEventListener("success",(0,m.Z)(function*(){const I=b.result;I.objectStoreNames.contains(wl)?y(I):(I.close(),yield function(){const b=indexedDB.deleteDatabase(om);return new rd(b).toPromise()}(),y(yield lf()))}))})}function ts(b,y,_){return xs.apply(this,arguments)}function xs(){return(xs=(0,m.Z)(function*(b,y,_){const I=id(b,!0).put({[nd]:y,value:_});return new rd(I).toPromise()})).apply(this,arguments)}function od(){return(od=(0,m.Z)(function*(b,y){const _=id(b,!1).get(y),I=yield new rd(_).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Ja(b,y){const _=id(b,!0).delete(y);return new rd(_).toPromise()}const ns=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,m.Z)(function*(){return _.db||(_.db=yield lf()),_.db})()}_withRetries(_){var I=this;return(0,m.Z)(function*(){let R=0;for(;;)try{const O=yield I._openDb();return yield _(O)}catch(O){if(R++>3)throw O;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,m.Z)(function*(){return td()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,m.Z)(function*(){_.receiver=oo._getInstance(td()?self:null),_.receiver._subscribe("keyChanged",function(){var I=(0,m.Z)(function*(R,O){return{keyProcessed:(yield _._poll()).includes(O.key)}});return function(R,O){return I.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var I=(0,m.Z)(function*(R,O){return["keyChanged"]});return function(R,O){return I.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,m.Z)(function*(){var I,R;if(_.activeServiceWorker=yield function(){return uf.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Pb(_.activeServiceWorker);const O=yield _.sender._send("ping",{},800);!O||(null===(I=O[0])||void 0===I?void 0:I.fulfilled)&&(null===(R=O[0])||void 0===R?void 0:R.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var I=this;return(0,m.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function(){var b;return(null===(b=null==navigator?void 0:navigator.serviceWorker)||void 0===b?void 0:b.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:_},I.serviceWorkerReceiverAvailable?800:50)}catch(R){}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const _=yield lf();return yield ts(_,_l,"1"),yield Ja(_,_l),!0}catch(_){}return!1})()}_withPendingWrite(_){var I=this;return(0,m.Z)(function*(){I.pendingWrites++;try{yield _()}finally{I.pendingWrites--}})()}_set(_,I){var R=this;return(0,m.Z)(function*(){return R._withPendingWrite((0,m.Z)(function*(){return yield R._withRetries(O=>ts(O,_,I)),R.localCache[_]=I,R.notifyServiceWorker(_)}))})()}_get(_){var I=this;return(0,m.Z)(function*(){const R=yield I._withRetries(O=>function(b,y){return od.apply(this,arguments)}(O,_));return I.localCache[_]=R,R})()}_remove(_){var I=this;return(0,m.Z)(function*(){return I._withPendingWrite((0,m.Z)(function*(){return yield I._withRetries(R=>Ja(R,_)),delete I.localCache[_],I.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,m.Z)(function*(){const I=yield _._withRetries(z=>{const ge=id(z,!1).getAll();return new rd(ge).toPromise()});if(!I)return[];if(0!==_.pendingWrites)return[];const R=[],O=new Set;for(const{fbase_key:z,value:ge}of I)O.add(z),JSON.stringify(_.localCache[z])!==JSON.stringify(ge)&&(_.notifyListeners(z,ge),R.push(z));for(const z of Object.keys(_.localCache))_.localCache[z]&&!O.has(z)&&(_.notifyListeners(z,null),R.push(z));return R})()}notifyListeners(_,I){this.localCache[_]=I;const R=this.listeners[_];if(R)for(const O of Array.from(R))O(I)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function uv(b,y){return Vt(b,"POST","/v2/accounts/mfaSignIn:start",lt(b,y))}function bl(){return(bl=(0,m.Z)(function*(b){return(yield Vt(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ta(b){return new Promise((y,_)=>{const I=document.createElement("script");I.setAttribute("src",b),I.onload=y,I.onerror=R=>{const O=rt("internal-error");O.customData=R,_(O)},I.type="text/javascript",I.charset="UTF-8",function(){var b,y;return null!==(y=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==y?y:document}().appendChild(I)})}function na(b){return`__${b}${Math.floor(1e6*Math.random())}`}const rs=1e12;class ud{constructor(y){this.auth=y,this.counter=rs,this._widgets=new Map}render(y,_){const I=this.counter;return this._widgets.set(I,new is(y,this.auth.name,_||{})),this.counter++,I}reset(y){var _;const I=y||rs;null===(_=this._widgets.get(I))||void 0===_||_.delete(),this._widgets.delete(I)}getResponse(y){var _;return(null===(_=this._widgets.get(y||rs))||void 0===_?void 0:_.getResponse())||""}execute(y){var _=this;return(0,m.Z)(function*(){var I;return null===(I=_._widgets.get(y||rs))||void 0===I||I.execute(),""})()}}class is{constructor(y,_,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof y?document.getElementById(y):y;Ce(R,"argument-error",{appName:_}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(b){const y=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<50;I++)y.push(_.charAt(Math.floor(Math.random()*_.length)));return y.join("")}();const{callback:y,"expired-callback":_}=this.params;if(y)try{y(this.responseToken)}catch(I){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(I){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ss=na("rcb"),ao=new rn(3e4,6e4);class Qn{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!un().grecaptcha}load(y,_=""){return Ce((b=_).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b),y,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(un().grecaptcha):new Promise((I,R)=>{const O=un().setTimeout(()=>{R(rt(y,"network-request-failed"))},ao.get());un()[ss]=()=>{un().clearTimeout(O),delete un()[ss];const ge=un().grecaptcha;if(!ge)return void R(rt(y,"internal-error"));const Fe=ge.render;ge.render=(ze,dt)=>{const at=Fe(ze,dt);return this.counter++,at},this.hostLanguage=_,I(ge)},ta(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:ss,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(O),R(rt(y,"internal-error"))})});var b}clearedOneInstance(){this.counter--}shouldResolveImmediately(y){return!!un().grecaptcha&&(y===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ns{load(y){return(0,m.Z)(function*(){return new ud(y)})()}clearedOneInstance(){}}const Vb="recaptcha",am={theme:"light",type:"image"};class Ub{constructor(y,_=Object.assign({},am),I){this.parameters=_,this.type=Vb,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Gt(I),this.isInvisible="invisible"===this.parameters.size,Ce("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof y?document.getElementById(y):y;Ce(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ns:new Qn,this.validateStartingState()}verify(){var y=this;return(0,m.Z)(function*(){y.assertNotDestroyed();const _=yield y.render(),I=y.getAssertedRecaptcha();return I.getResponse(_)||new Promise(O=>{const z=ge=>{!ge||(y.tokenChangeListeners.delete(z),O(ge))};y.tokenChangeListeners.add(z),y.isInvisible&&I.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(y){return Promise.reject(y)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(y=>{throw this.renderPromise=null,y})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(y=>{this.container.removeChild(y)})}validateStartingState(){Ce(!this.parameters.sitekey,this.auth,"argument-error"),Ce(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ce("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(y){return _=>{if(this.tokenChangeListeners.forEach(I=>I(_)),"function"==typeof y)y(_);else if("string"==typeof y){const I=un()[y];"function"==typeof I&&I(_)}}}assertNotDestroyed(){Ce(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var y=this;return(0,m.Z)(function*(){if(yield y.init(),!y.widgetId){let _=y.container;if(!y.isInvisible){const I=document.createElement("div");_.appendChild(I),_=I}y.widgetId=y.getAssertedRecaptcha().render(_,y.parameters)}return y.widgetId})()}init(){var y=this;return(0,m.Z)(function*(){Ce(Qe()&&!td(),y.auth,"internal-error"),yield function(){let b=null;return new Promise(y=>{"complete"!==document.readyState?(b=()=>y(),window.addEventListener("load",b)):y()}).catch(y=>{throw b&&window.removeEventListener("load",b),y})}(),y.recaptcha=yield y._recaptchaLoader.load(y.auth,y.auth.languageCode||void 0);const _=yield function(b){return bl.apply(this,arguments)}(y.auth);Ce(_,y.auth,"internal-error"),y.parameters.sitekey=_})()}getAssertedRecaptcha(){return Ce(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class um{constructor(y,_){this.verificationId=y,this.onConfirmation=_}confirm(y){const _=Za._fromVerification(this.verificationId,y);return this.onConfirmation(_)}}function hf(){return(hf=(0,m.Z)(function*(b,y,_){const I=Gt(b),R=yield Cl(I,y,(0,j.m9)(_));return new um(R,O=>Qc(I,O))})).apply(this,arguments)}function ff(){return(ff=(0,m.Z)(function*(b,y,_){const I=(0,j.m9)(b);yield Xs(!1,I,"phone");const R=yield Cl(I.auth,y,(0,j.m9)(_));return new um(R,O=>Kg(I,O))})).apply(this,arguments)}function cm(){return(cm=(0,m.Z)(function*(b,y,_){const I=(0,j.m9)(b),R=yield Cl(I.auth,y,(0,j.m9)(_));return new um(R,O=>ul(I,O))})).apply(this,arguments)}function Cl(b,y,_){return dd.apply(this,arguments)}function dd(){return(dd=(0,m.Z)(function*(b,y,_){var I;const R=yield _.verify();try{let O;if(Ce("string"==typeof R,b,"argument-error"),Ce(_.type===Vb,b,"argument-error"),O="string"==typeof y?{phoneNumber:y}:y,"session"in O){const z=O.session;if("phoneNumber"in O)return Ce("enroll"===z.type,b,"internal-error"),(yield rv(b,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{Ce("signin"===z.type,b,"internal-error");const ge=(null===(I=O.multiFactorHint)||void 0===I?void 0:I.uid)||O.multiFactorUid;return Ce(ge,b,"missing-multi-factor-info"),(yield uv(b,{mfaPendingCredential:z.credential,mfaEnrollmentId:ge,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield Oi(b,{phoneNumber:O.phoneNumber,recaptchaToken:R});return z}}finally{_._reset()}})).apply(this,arguments)}function pf(){return(pf=(0,m.Z)(function*(b,y){yield Zc((0,j.m9)(b),y)})).apply(this,arguments)}let Il=(()=>{class b{constructor(_){this.providerId=b.PROVIDER_ID,this.auth=Gt(_)}verifyPhoneNumber(_,I){return Cl(this.auth,_,(0,j.m9)(I))}static credential(_,I){return Za._fromVerification(_,I)}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:I,temporaryProof:R}=_;return I&&R?Za._fromTokenResponse(I,R):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function co(b,y){return y?ue(y):(Ce(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class ra extends _r{constructor(y){super("custom","custom"),this.params=y}_getIdTokenResponse(y){return qt(y,this._buildIdpRequest())}_linkToIdToken(y,_){return qt(y,this._buildIdpRequest(_))}_getReauthenticationResolver(y){return qt(y,this._buildIdpRequest())}_buildIdpRequest(y){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return y&&(_.idToken=y),_}}function dv(b){return Zg(b.auth,new ra(b),b.bypassAuthState)}function Bn(b){const{auth:y,user:_}=b;return Ce(_,y,"internal-error"),Kc(_,new ra(b),b.bypassAuthState)}function Xa(b){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,m.Z)(function*(b){const{auth:y,user:_}=b;return Ce(_,y,"internal-error"),Zc(_,new ra(b),b.bypassAuthState)})).apply(this,arguments)}class Bb{constructor(y,_,I,R,O=!1){this.auth=y,this.resolver=I,this.user=R,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var y=this;return new Promise(function(){var _=(0,m.Z)(function*(I,R){y.pendingPromise={resolve:I,reject:R};try{y.eventManager=yield y.resolver._initialize(y.auth),yield y.onExecution(),y.eventManager.registerConsumer(y)}catch(O){y.reject(O)}});return function(I,R){return _.apply(this,arguments)}}())}onAuthEvent(y){var _=this;return(0,m.Z)(function*(){const{urlResponse:I,sessionId:R,postBody:O,tenantId:z,error:ge,type:Fe}=y;if(ge)return void _.reject(ge);const ze={auth:_.auth,requestUri:I,sessionId:R,tenantId:z||void 0,postBody:O||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Fe)(ze))}catch(dt){_.reject(dt)}})()}onError(y){this.reject(y)}getIdpTask(y){switch(y){case"signInViaPopup":case"signInViaRedirect":return dv;case"linkViaPopup":case"linkViaRedirect":return Xa;case"reauthViaPopup":case"reauthViaRedirect":return Bn;default:je(this.auth,"internal-error")}}resolve(y){ae(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(y),this.unregisterAndCleanUp()}reject(y){ae(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(y),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const jb=new rn(2e3,1e4);function wr(){return(wr=(0,m.Z)(function*(b,y,_){const I=Gt(b);Dt(b,y,qo);const R=co(I,_);return new tu(I,"signInViaPopup",y,R).executeNotNull()})).apply(this,arguments)}function Fi(){return(Fi=(0,m.Z)(function*(b,y,_){const I=(0,j.m9)(b);Dt(I.auth,y,qo);const R=co(I.auth,_);return new tu(I.auth,"reauthViaPopup",y,R,I).executeNotNull()})).apply(this,arguments)}function eu(){return(eu=(0,m.Z)(function*(b,y,_){const I=(0,j.m9)(b);Dt(I.auth,y,qo);const R=co(I.auth,_);return new tu(I.auth,"linkViaPopup",y,R,I).executeNotNull()})).apply(this,arguments)}let tu=(()=>{class b extends Bb{constructor(_,I,R,O,z){super(_,I,O,z),this.provider=R,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var _=this;return(0,m.Z)(function*(){const I=yield _.execute();return Ce(I,_.auth,"internal-error"),I})()}onExecution(){var _=this;return(0,m.Z)(function*(){ae(1===_.filter.length,"Popup operations only handle one event");const I=ed();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],I),_.authWindow.associatedEvent=I,_.resolver._originValidation(_.auth).catch(R=>{_.reject(R)}),_.resolver._isIframeWebStorageSupported(_.auth,R=>{R||_.reject(rt(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(rt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const _=()=>{var I,R;this.pollId=(null===(R=null===(I=this.authWindow)||void 0===I?void 0:I.window)||void 0===R?void 0:R.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(rt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,jb.get())};_()}}return b.currentPopupAction=null,b})();const ia=new Map;class fv extends Bb{constructor(y,_,I=!1){super(y,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,I),this.eventId=null}execute(){var y=()=>super.execute,_=this;return(0,m.Z)(function*(){let I=ia.get(_.auth._key());if(!I){try{const O=(yield function(b,y){return or.apply(this,arguments)}(_.resolver,_.auth))?yield y().call(_):null;I=()=>Promise.resolve(O)}catch(R){I=()=>Promise.reject(R)}ia.set(_.auth._key(),I)}return I()})()}onAuthEvent(y){var _=()=>super.onAuthEvent,I=this;return(0,m.Z)(function*(){if("signInViaRedirect"===y.type)return _().call(I,y);if("unknown"!==y.type){if(y.eventId){const R=yield I.auth._redirectUserForId(y.eventId);if(R)return I.user=R,_().call(I,y);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function or(){return(or=(0,m.Z)(function*(b,y){const _=hm(y),I="true"===(yield ho(b)._get(_));return yield ho(b)._remove(_),I})).apply(this,arguments)}function nu(b,y){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,m.Z)(function*(b,y){return ho(b)._set(hm(y),"true")})).apply(this,arguments)}function ho(b){return ue(b._redirectPersistence)}function hm(b){return tn("pendingRedirect",b.config.apiKey,b.name)}function iu(){return(iu=(0,m.Z)(function*(b,y,_){const I=Gt(b);Dt(b,y,qo);const R=co(I,_);return yield nu(R,I),R._openRedirect(I,y,"signInViaRedirect")})).apply(this,arguments)}function sa(){return(sa=(0,m.Z)(function*(b,y,_){const I=(0,j.m9)(b);Dt(I.auth,y,qo);const R=co(I.auth,_);yield nu(R,I.auth);const O=yield pm(I);return R._openRedirect(I.auth,y,"reauthViaRedirect",O)})).apply(this,arguments)}function fo(){return(fo=(0,m.Z)(function*(b,y,_){const I=(0,j.m9)(b);Dt(I.auth,y,qo);const R=co(I.auth,_);yield Xs(!1,I,y.providerId),yield nu(R,I.auth);const O=yield pm(I);return R._openRedirect(I.auth,y,"linkViaRedirect",O)})).apply(this,arguments)}function os(){return(os=(0,m.Z)(function*(b,y){return yield Gt(b)._initializationPromise,oa(b,y,!1)})).apply(this,arguments)}function oa(b,y){return mf.apply(this,arguments)}function mf(){return(mf=(0,m.Z)(function*(b,y,_=!1){const I=Gt(b),R=co(I,y),z=yield new fv(I,R,_).execute();return z&&!_&&(delete z.user._redirectEventId,yield I._persistUserIfCurrent(z.user),yield I._setRedirectUser(null,y)),z})).apply(this,arguments)}function pm(b){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,m.Z)(function*(b){const y=ed(`${b.uid}:::`);return b._redirectEventId=y,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),y})).apply(this,arguments)}class aa{constructor(y){this.auth=y,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(y){this.consumers.add(y),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,y)&&(this.sendToConsumer(this.queuedRedirectEvent,y),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(y){this.consumers.delete(y)}onEvent(y){if(this.hasEventBeenHandled(y))return!1;let _=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(y,I)&&(_=!0,this.sendToConsumer(y,I),this.saveEventToCache(y))}),this.hasHandledPotentialRedirect||!function(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return po(b);default:return!1}}(y)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=y,_=!0)),_}sendToConsumer(y,_){var I;if(y.error&&!po(y)){const R=(null===(I=y.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";_.onError(rt(this.auth,R))}else _.onAuthEvent(y)}isEventForConsumer(y,_){const I=null===_.eventId||!!y.eventId&&y.eventId===_.eventId;return _.filter.includes(y.type)&&I}hasEventBeenHandled(y){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ua(y))}saveEventToCache(y){this.cachedEventUids.add(ua(y)),this.lastProcessedEventTime=Date.now()}}function ua(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(y=>y).join("-")}function po({type:b,error:y}){return"unknown"===b&&"auth/no-auth-event"===(null==y?void 0:y.code)}function _n(b){return Al.apply(this,arguments)}function Al(){return(Al=(0,m.Z)(function*(b,y={}){return Vt(b,"GET","/v1/projects",y)})).apply(this,arguments)}const $b=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,la=/^https?/;function _f(){return(_f=(0,m.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:y}=yield _n(b);for(const _ of y)try{if(gm(_))return}catch(I){}je(b,"unauthorized-domain")})).apply(this,arguments)}function gm(b){const y=Me(),{protocol:_,hostname:I}=new URL(y);if(b.startsWith("chrome-extension://")){const z=new URL(b);return""===z.hostname&&""===I?"chrome-extension:"===_&&b.replace("chrome-extension://","")===y.replace("chrome-extension://",""):"chrome-extension:"===_&&z.hostname===I}if(!la.test(_))return!1;if($b.test(b))return I===b;const R=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(I)}const xl=new rn(3e4,6e4);function mv(){const b=un().___jsl;if(null==b?void 0:b.H)for(const y of Object.keys(b.H))if(b.H[y].r=b.H[y].r||[],b.H[y].L=b.H[y].L||[],b.H[y].r=[...b.H[y].L],b.CP)for(let _=0;_<b.CP.length;_++)b.CP[_]=null}let Ur=null;function su(b){return Ur=Ur||function(b){return new Promise((y,_)=>{var I,R,O;function z(){mv(),gapi.load("gapi.iframes",{callback:()=>{y(gapi.iframes.getContext())},ontimeout:()=>{mv(),_(rt(b,"network-request-failed"))},timeout:xl.get()})}if(null===(R=null===(I=un().gapi)||void 0===I?void 0:I.iframes)||void 0===R?void 0:R.Iframe)y(gapi.iframes.getContext());else{if(!(null===(O=un().gapi)||void 0===O?void 0:O.load)){const ge=na("iframefcb");return un()[ge]=()=>{gapi.load?z():_(rt(b,"network-request-failed"))},ta(`https://apis.google.com/js/api.js?onload=${ge}`)}z()}}).catch(y=>{throw Ur=null,y})}(b),Ur}const Li=new rn(5e3,15e3),vf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},pd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ym(b){const y=b.config;Ce(y.authDomain,b,"auth-domain-config-required");const _=y.emulator?Dn(y,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,I={apiKey:y.apiKey,appName:b.name,v:_e.SDK_VERSION},R=pd.get(b.config.apiHost);R&&(I.eid=R);const O=b._getFrameworks();return O.length&&(I.fw=O.join(",")),`${_}?${(0,j.xO)(I).slice(1)}`}function wf(){return(wf=(0,m.Z)(function*(b){const y=yield su(b),_=un().gapi;return Ce(_,b,"internal-error"),y.open({where:document.body,url:ym(b),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vf,dontclear:!0},I=>new Promise(function(){var R=(0,m.Z)(function*(O,z){yield I.restyle({setHideOnLeave:!1});const ge=rt(b,"network-request-failed"),Fe=un().setTimeout(()=>{z(ge)},Li.get());function ze(){un().clearTimeout(Fe),O(I)}I.ping(ze).then(ze,()=>{z(ge)})});return function(O,z){return R.apply(this,arguments)}}()))})).apply(this,arguments)}const Ps={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class _m{constructor(y){this.window=y,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(y){}}}function Nl(b,y,_,I,R,O){Ce(b.config.authDomain,b,"auth-domain-config-required"),Ce(b.config.apiKey,b,"invalid-api-key");const z={apiKey:b.config.apiKey,appName:b.name,authType:_,redirectUrl:I,v:_e.SDK_VERSION,eventId:R};if(y instanceof qo){y.setDefaultLanguage(b.languageCode),z.providerId=y.providerId||"",(0,j.xb)(y.getCustomParameters())||(z.customParameters=JSON.stringify(y.getCustomParameters()));for(const[Fe,ze]of Object.entries(O||{}))z[Fe]=ze}if(y instanceof rl){const Fe=y.getScopes().filter(ze=>""!==ze);Fe.length>0&&(z.scopes=Fe.join(","))}b.tenantId&&(z.tid=b.tenantId);const ge=z;for(const Fe of Object.keys(ge))void 0===ge[Fe]&&delete ge[Fe];return`${function({config:b}){return b.emulator?Dn(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,j.xO)(ge).slice(1)}`}const go="webStorageSupport";class ou extends class{constructor(y){this.factorId=y}_process(y,_,I){switch(_.type){case"enroll":return this._finalizeEnroll(y,_.credential,I);case"signin":return this._finalizeSignIn(y,_.credential);default:return ie("unexpected MultiFactorSessionType")}}}{constructor(y){super("phone"),this.credential=y}static _fromCredential(y){return new ou(y)}_finalizeEnroll(y,_,I){return function(b,y){return Vt(b,"POST","/v2/accounts/mfaEnrollment:finalize",lt(b,y))}(y,{idToken:_,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(y,_){return function(b,y){return Vt(b,"POST","/v2/accounts/mfaSignIn:finalize",lt(b,y))}(y,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Df=(()=>{class b{constructor(){}static assertion(_){return ou._fromCredential(_)}}return b.FACTOR_ID="phone",b})();var b;class bm{constructor(y){this.auth=y,this.internalListeners=new Map}getUid(){var y;return this.assertAuthConfigured(),(null===(y=this.auth.currentUser)||void 0===y?void 0:y.uid)||null}getToken(y){var _=this;return(0,m.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(y)}:null})()}addAuthTokenListener(y){if(this.assertAuthConfigured(),this.internalListeners.has(y))return;const _=this.auth.onIdTokenChanged(I=>{var R;y((null===(R=I)||void 0===R?void 0:R.stsTokenManager.accessToken)||null)});this.internalListeners.set(y,_),this.updateProactiveRefresh()}removeAuthTokenListener(y){this.assertAuthConfigured();const _=this.internalListeners.get(y);!_||(this.internalListeners.delete(y),_(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function yo(){return window}function yi(){return(yi=(0,m.Z)(function*(b,y,_){var I;const{BuildInfo:R}=yo();ae(y.sessionId,"AuthEvent did not contain a session ID");const O=yield Sf(y.sessionId),z={};return Ni()?z.ibi=R.packageName:Ha()?z.apn=R.packageName:je(b,"operation-not-supported-in-this-environment"),R.displayName&&(z.appDisplayName=R.displayName),z.sessionId=O,Nl(b,_,y.type,void 0,null!==(I=y.eventId)&&void 0!==I?I:void 0,z)})).apply(this,arguments)}function yd(){return(yd=(0,m.Z)(function*(b){const{BuildInfo:y}=yo(),_={};Ni()?_.iosBundleId=y.packageName:Ha()?_.androidPackageName=y.packageName:je(b,"operation-not-supported-in-this-environment"),yield _n(b,_)})).apply(this,arguments)}function Tf(){return(Tf=(0,m.Z)(function*(b,y,_){const{cordova:I}=yo();let R=()=>{};try{yield new Promise((O,z)=>{let ge=null;function Fe(){var at;O();const Lt=null===(at=I.plugins.browsertab)||void 0===at?void 0:at.close;"function"==typeof Lt&&Lt(),"function"==typeof(null==_?void 0:_.close)&&_.close()}function ze(){ge||(ge=window.setTimeout(()=>{z(rt(b,"redirect-cancelled-by-user"))},2e3))}function dt(){"visible"===(null==document?void 0:document.visibilityState)&&ze()}y.addPassiveListener(Fe),document.addEventListener("resume",ze,!1),Ha()&&document.addEventListener("visibilitychange",dt,!1),R=()=>{y.removePassiveListener(Fe),document.removeEventListener("resume",ze,!1),document.removeEventListener("visibilitychange",dt,!1),ge&&window.clearTimeout(ge)}})}finally{R()}})).apply(this,arguments)}function Sf(b){return _o.apply(this,arguments)}function _o(){return(_o=(0,m.Z)(function*(b){const y=Af(b),_=yield crypto.subtle.digest("SHA-256",y);return Array.from(new Uint8Array(_)).map(R=>R.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Af(b){if(ae(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(b);const y=new ArrayBuffer(b.length),_=new Uint8Array(y);for(let I=0;I<b.length;I++)_[I]=b.charCodeAt(I);return _}b="Browser",(0,_e._registerComponent)(new Ee.wA("auth",(y,{options:_})=>{const I=y.getProvider("app").getImmediate(),{apiKey:R,authDomain:O}=I.options;return(z=>{Ce(R&&!R.includes(":"),"invalid-api-key",{appName:z.name}),Ce(!(null==O?void 0:O.includes(":")),"argument-error",{appName:z.name});const ge={apiKey:R,authDomain:O,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yr(b)},Fe=new Y_(z,ge);return function(b,y){const _=(null==y?void 0:y.persistence)||[],I=(Array.isArray(_)?_:[_]).map(ue);(null==y?void 0:y.errorMap)&&b._updateErrorMap(y.errorMap),b._initializeWithPersistence(I,null==y?void 0:y.popupRedirectResolver)}(Fe,_),Fe})(I)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((y,_,I)=>{y.getProvider("auth-internal").initialize()})),(0,_e._registerComponent)(new Ee.wA("auth-internal",y=>{const _=Gt(y.getProvider("auth").getImmediate());return new bm(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,_e.registerVersion)("@firebase/auth","0.18.0",void 0);class Iv extends aa{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(y=>{this.resolveInialized=y})}addPassiveListener(y){this.passiveListeners.add(y)}removePassiveListener(y){this.passiveListeners.delete(y)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(y){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(y)),super.onEvent(y)}initialized(){var y=this;return(0,m.Z)(function*(){yield y.initPromise})()}}function Dm(b){return as.apply(this,arguments)}function as(){return(as=(0,m.Z)(function*(b){const y=yield vo()._get(Ml(b));return y&&(yield vo()._remove(Ml(b))),y})).apply(this,arguments)}function Vi(){const b=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const I=Math.floor(Math.random()*y.length);b.push(y.charAt(I))}return b.join("")}function vo(){return ue(Xc)}function Ml(b){return tn("authEvent",b.config.apiKey,b.name)}function Br(b){if(!(null==b?void 0:b.includes("?")))return{};const[y,..._]=b.split("?");return(0,j.zd)(_.join("?"))}function kl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:rt("no-auth-event")}}function _d(){var b;return(null===(b=null==self?void 0:self.location)||void 0===b?void 0:b.protocol)||null}function Sm(b=(0,j.z$)()){return!("file:"!==_d()&&"ionic:"!==_d()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function vd(){try{const b=self.localStorage,y=ed();if(b)return b.setItem(y,"1"),b.removeItem(y),!function(b=(0,j.z$)()){return(0,j.w1)()&&11===(null==document?void 0:document.documentMode)||function(b=(0,j.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,j.hl)()}catch(b){return Ed()&&(0,j.hl)()}return!1}function Ed(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ln(){return("http:"===_d()||"https:"===_d()||(0,j.ru)()||Sm())&&!((0,j.b$)()||(0,j.UG)())&&vd()&&!Ed()}function Rm(){return Sm()&&"undefined"!=typeof document}function da(){return(da=(0,m.Z)(function*(){return!!Rm()&&new Promise(b=>{const y=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(y),b(!0)})})})).apply(this,arguments)}const Cr={LOCAL:"local",NONE:"none",SESSION:"session"},Eo=Ce,wd="persistence";function Ff(b){return Lf.apply(this,arguments)}function Lf(){return(Lf=(0,m.Z)(function*(b){yield b._initializationPromise;const y=xv(),_=tn(wd,b.config.apiKey,b.name);(null==y?void 0:y.sessionStorage)&&y.sessionStorage.setItem(_,b._getPersistence())})).apply(this,arguments)}function xv(){return"undefined"!=typeof window?window:null}const Ll=Ce;class vn{constructor(){this.browserResolver=ue(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rs,this._completeRedirectFn=oa}_openPopup(y,_,I,R){var O=this;return(0,m.Z)(function*(){var z;ae(null===(z=O.eventManagers[y._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const ge=Nl(y,_,I,Me(),R);return function(b,y,_,I=500,R=600){const O=Math.max((window.screen.availHeight-R)/2,0).toString(),z=Math.max((window.screen.availWidth-I)/2,0).toString();let ge="";const Fe=Object.assign(Object.assign({},Ps),{width:I.toString(),height:R.toString(),top:O,left:z}),ze=(0,j.z$)().toLowerCase();_&&(ge=Mh(ze)?"_blank":_),jc(ze)&&(y=y||"http://localhost",Fe.scrollbars="yes");const dt=Object.entries(Fe).reduce((Lt,[cn,Xn])=>`${Lt}${cn}=${Xn},`,"");if(function(b=(0,j.z$)()){var y;return Ni(b)&&!!(null===(y=window.navigator)||void 0===y?void 0:y.standalone)}(ze)&&"_self"!==ge)return function(b,y){const _=document.createElement("a");_.href=b,_.target=y;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(I)}(y||"",ge),new _m(null);const at=window.open(y||"",ge,dt);Ce(at,b,"popup-blocked");try{at.focus()}catch(Lt){}return new _m(at)}(y,ge,ed())})()}_openRedirect(y,_,I,R){var O=this;return(0,m.Z)(function*(){return yield O._originValidation(y),b=Nl(y,_,I,Me(),R),un().location.href=b,new Promise(()=>{});var b})()}_initialize(y){const _=y._key();if(this.eventManagers[_]){const{manager:R,promise:O}=this.eventManagers[_];return R?Promise.resolve(R):(ae(O,"If manager is not set, promise should be"),O)}const I=this.initAndGetManager(y);return this.eventManagers[_]={promise:I},I}initAndGetManager(y){var _=this;return(0,m.Z)(function*(){const I=yield function(b){return wf.apply(this,arguments)}(y),R=new aa(y);return I.register("authEvent",O=>(Ce(null==O?void 0:O.authEvent,y,"invalid-auth-event"),{status:R.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[y._key()]={manager:R},_.iframes[y._key()]=I,R})()}_isIframeWebStorageSupported(y,_){this.iframes[y._key()].send(go,{type:go},R=>{var O;const z=null===(O=null==R?void 0:R[0])||void 0===O?void 0:O[go];void 0!==z&&_(!!z),je(y,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(y){const _=y._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function(b){return _f.apply(this,arguments)}(y)),this.originValidationPromises[_]}get _shouldInitProactively(){return es()||Nh()||Ni()}}),this.cordovaResolver=ue(class{constructor(){this._redirectPersistence=Rs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=oa}_initialize(y){var _=this;return(0,m.Z)(function*(){const I=y._key();let R=_.eventManagers.get(I);return R||(R=new Iv(y),_.eventManagers.set(I,R),_.attachCallbackListeners(y,R)),R})()}_openPopup(y){je(y,"operation-not-supported-in-this-environment")}_openRedirect(y,_,I,R){var O=this;return(0,m.Z)(function*(){!function(b){var y,_,I,R,O,z,ge,Fe,ze,dt;const at=yo();Ce("function"==typeof(null===(y=null==at?void 0:at.universalLinks)||void 0===y?void 0:y.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ce(void 0!==(null===(_=null==at?void 0:at.BuildInfo)||void 0===_?void 0:_.packageName),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ce("function"==typeof(null===(O=null===(R=null===(I=null==at?void 0:at.cordova)||void 0===I?void 0:I.plugins)||void 0===R?void 0:R.browsertab)||void 0===O?void 0:O.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ce("function"==typeof(null===(Fe=null===(ge=null===(z=null==at?void 0:at.cordova)||void 0===z?void 0:z.plugins)||void 0===ge?void 0:ge.browsertab)||void 0===Fe?void 0:Fe.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ce("function"==typeof(null===(dt=null===(ze=null==at?void 0:at.cordova)||void 0===ze?void 0:ze.InAppBrowser)||void 0===dt?void 0:dt.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(y);const z=yield O._initialize(y);yield z.initialized(),z.resetRedirect(),ia.clear(),yield O._originValidation(y);const ge=function(b,y,_=null){return{type:y,eventId:_,urlResponse:null,sessionId:Vi(),postBody:null,tenantId:b.tenantId,error:rt(b,"no-auth-event")}}(y,I,R);yield function(b,y){return vo()._set(Ml(b),y)}(y,ge);const Fe=yield function(b,y,_){return yi.apply(this,arguments)}(y,ge,_),ze=yield function(b){const{cordova:y}=yo();return new Promise(_=>{y.plugins.browsertab.isAvailable(I=>{let R=null;I?y.plugins.browsertab.openUrl(b):R=y.InAppBrowser.open(b,function(b=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}()?"_blank":"_system","location=yes"),_(R)})})}(Fe);return function(b,y,_){return Tf.apply(this,arguments)}(y,z,ze)})()}_isIframeWebStorageSupported(y,_){throw new Error("Method not implemented.")}_originValidation(y){const _=y._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function(b){return yd.apply(this,arguments)}(y)),this.originValidationPromises[_]}attachCallbackListeners(y,_){const{universalLinks:I,handleOpenURL:R,BuildInfo:O}=yo(),z=setTimeout((0,m.Z)(function*(){yield Dm(y),_.onEvent(kl())}),500),ge=function(){var dt=(0,m.Z)(function*(at){clearTimeout(z);const Lt=yield Dm(y);let cn=null;Lt&&(null==at?void 0:at.url)&&(cn=function(b,y){var _,I;const R=function(b){const y=Br(b),_=y.link?decodeURIComponent(y.link):void 0,I=Br(_).link,R=y.deep_link_id?decodeURIComponent(y.deep_link_id):void 0;return Br(R).link||R||I||_||b}(y);if(R.includes("/__/auth/callback")){const O=Br(R),z=O.firebaseError?function(b){try{return JSON.parse(b)}catch(y){return null}}(decodeURIComponent(O.firebaseError)):null,ge=null===(I=null===(_=null==z?void 0:z.code)||void 0===_?void 0:_.split("auth/"))||void 0===I?void 0:I[1],Fe=ge?rt(ge):null;return Fe?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:R,postBody:null}}return null}(Lt,at.url)),_.onEvent(cn||kl())});return function(Lt){return dt.apply(this,arguments)}}();void 0!==I&&"function"==typeof I.subscribe&&I.subscribe(null,ge);const Fe=R,ze=`${O.packageName.toLowerCase()}://`;yo().handleOpenURL=function(){var dt=(0,m.Z)(function*(at){if(at.toLowerCase().startsWith(ze)&&ge({url:at}),"function"==typeof Fe)try{Fe(at)}catch(Lt){console.error(Lt)}});return function(at){return dt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Rs,this._completeRedirectFn=oa}_initialize(y){var _=this;return(0,m.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(y)})()}_openPopup(y,_,I,R){var O=this;return(0,m.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(y,_,I,R)})()}_openRedirect(y,_,I,R){var O=this;return(0,m.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(y,_,I,R)})()}_isIframeWebStorageSupported(y,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(y,_)}_originValidation(y){return this.assertedUnderlyingResolver._originValidation(y)}get _shouldInitProactively(){return Rm()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ll(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var y=this;return(0,m.Z)(function*(){if(y.underlyingResolver)return;const _=yield function(){return da.apply(this,arguments)}();y.underlyingResolver=_?y.cordovaResolver:y.browserResolver})()}}function Vl(b){return b.unwrap()}function Mm(b){return ha(b)}function ar(b,y){var _;const I=null===(_=y.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===y.code)y.resolver=new Om(b,function(b,y){var _;const I=(0,j.m9)(b),R=y;return Ce(y.operationType,I,"argument-error"),Ce(null===(_=R.serverResponse)||void 0===_?void 0:_.mfaPendingCredential,I,"argument-error"),ef._fromError(I,R)}(b,y));else if(I){const R=ha(y),O=y;R&&(O.credential=R,O.tenantId=I.tenantId||void 0,O.email=I.email||void 0,O.phoneNumber=I.phoneNumber||void 0)}}function ha(b){const{_tokenResponse:y}=b instanceof j.ZR?b.customData:b;if(!y)return null;if(!(b instanceof j.ZR)&&"temporaryProof"in y&&"phoneNumber"in y)return Il.credentialFromResult(b);const _=y.providerId;if(!_||"password"===_)return null;let I;switch(_){case"google.com":I=Bh;break;case"facebook.com":I=Uh;break;case"github.com":I=jh;break;case"twitter.com":I=$h;break;default:const{oauthIdToken:R,oauthAccessToken:O,oauthTokenSecret:z,pendingToken:ge,nonce:Fe}=y;return O||z||R||ge?ge?_.startsWith("saml.")?Ka._create(_,ge):ni._fromParams({providerId:_,signInMethod:_,pendingToken:ge,idToken:R,accessToken:O}):new zo(_).credential({idToken:R,accessToken:O,rawNonce:Fe}):null}return b instanceof j.ZR?I.credentialFromError(b):I.credentialFromResult(b)}function Ir(b,y){return bd.apply(this,arguments)}function bd(){return(bd=(0,m.Z)(function*(b,y){let _;try{_=yield y}catch(O){throw O instanceof j.ZR&&ar(b,O),O}const{operationType:I,user:R}=_;return{operationType:I,credential:Mm(_),additionalUserInfo:nm(_),user:us.getOrCreate(R)}})).apply(this,arguments)}function Vf(b,y){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,m.Z)(function*(b,y){const _=yield y;return{verificationId:_.verificationId,confirm:I=>Ir(b,_.confirm(I))}})).apply(this,arguments)}class Om{constructor(y,_){this.resolver=_,this.auth=function(b){return b.wrapped()}(y)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(y){return Ir(Vl(this.auth),this.resolver.resolveSignIn(y))}}class us{constructor(y){this._delegate=y,this.multiFactor=function(b){const y=(0,j.m9)(b);return Qa.has(y)||Qa.set(y,Ya._fromUser(y)),Qa.get(y)}(y)}static getOrCreate(y){return us.USER_MAP.has(y)||us.USER_MAP.set(y,new us(y)),us.USER_MAP.get(y)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(y){return this._delegate.getIdTokenResult(y)}getIdToken(y){return this._delegate.getIdToken(y)}linkAndRetrieveDataWithCredential(y){return this.linkWithCredential(y)}linkWithCredential(y){var _=this;return(0,m.Z)(function*(){return Ir(_.auth,Kg(_._delegate,y))})()}linkWithPhoneNumber(y,_){var I=this;return(0,m.Z)(function*(){return Vf(I.auth,function(b,y,_){return ff.apply(this,arguments)}(I._delegate,y,_))})()}linkWithPopup(y){var _=this;return(0,m.Z)(function*(){return Ir(_.auth,function(b,y,_){return eu.apply(this,arguments)}(_._delegate,y,vn))})()}linkWithRedirect(y){var _=this;return(0,m.Z)(function*(){return yield Ff(Gt(_.auth)),function(b,y,_){return function(b,y,_){return fo.apply(this,arguments)}(b,y,_)}(_._delegate,y,vn)})()}reauthenticateAndRetrieveDataWithCredential(y){return this.reauthenticateWithCredential(y)}reauthenticateWithCredential(y){var _=this;return(0,m.Z)(function*(){return Ir(_.auth,ul(_._delegate,y))})()}reauthenticateWithPhoneNumber(y,_){return Vf(this.auth,function(b,y,_){return cm.apply(this,arguments)}(this._delegate,y,_))}reauthenticateWithPopup(y){return Ir(this.auth,function(b,y,_){return Fi.apply(this,arguments)}(this._delegate,y,vn))}reauthenticateWithRedirect(y){var _=this;return(0,m.Z)(function*(){return yield Ff(Gt(_.auth)),function(b,y,_){return function(b,y,_){return sa.apply(this,arguments)}(b,y,_)}(_._delegate,y,vn)})()}sendEmailVerification(y){return function(b,y){return ro.apply(this,arguments)}(this._delegate,y)}unlink(y){var _=this;return(0,m.Z)(function*(){return yield function(b,y){return Wc.apply(this,arguments)}(_._delegate,y),_})()}updateEmail(y){return function(b,y){return Qh((0,j.m9)(b),y,null)}(this._delegate,y)}updatePassword(y){return function(b,y){return Qh((0,j.m9)(b),null,y)}(this._delegate,y)}updatePhoneNumber(y){return function(b,y){return pf.apply(this,arguments)}(this._delegate,y)}updateProfile(y){return function(b,y){return Kh.apply(this,arguments)}(this._delegate,y)}verifyBeforeUpdateEmail(y,_){return function(b,y,_){return gi.apply(this,arguments)}(this._delegate,y,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}us.USER_MAP=new WeakMap;const Ul=Ce;let Uf=(()=>{class b{constructor(_,I){if(this.app=_,I.isInitialized())return this._delegate=I.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:R}=_.options;Ul(R,"invalid-api-key",{appName:_.name});let O=[Rt];if("undefined"!=typeof window){O=function(b,y){const _=xv();if(!(null==_?void 0:_.sessionStorage))return[];const I=tn(wd,b,y);switch(_.sessionStorage.getItem(I)){case Cr.NONE:return[Rt];case Cr.LOCAL:return[ns,Rs];case Cr.SESSION:return[Rs];default:return[]}}(R,_.name);for(const ge of[ns,Xc,Rs])O.includes(ge)||O.push(ge)}Ul(R,"invalid-api-key",{appName:_.name});const z="undefined"!=typeof window?vn:void 0;this._delegate=I.initialize({options:{persistence:O,popupRedirectResolver:z}}),this._delegate._updateErrorMap(de),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?us.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,I){!function(b,y,_){const I=Gt(b);Ce(I._canInitEmulator,I,"emulator-config-failed"),Ce(/^https?:\/\//.test(y),I,"invalid-emulator-scheme");const R=!!(null==_?void 0:_.disableWarnings),O=nn(y),{host:z,port:ge}=function(b){const y=nn(b),_=/(\/\/)?([^?#/]+)/.exec(b.substr(y.length));if(!_)return{host:"",port:null};const I=_[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(I);if(R){const O=R[1];return{host:O,port:Qs(I.substr(O.length+1))}}{const[O,z]=I.split(":");return{host:O,port:Qs(z)}}}(y);I.config.emulator={url:`${O}//${z}${null===ge?"":`:${ge}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:z,port:ge,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:R})}),function(b){function y(){const _=document.createElement("p"),I=_.style;_.innerText="Running in emulator mode. Do not use with production credentials.",I.position="fixed",I.width="100%",I.backgroundColor="#ffffff",I.border=".1em solid #000000",I.color="#b50000",I.bottom="0px",I.left="0px",I.margin="0px",I.zIndex="10000",I.textAlign="center",_.classList.add("firebase-emulator-warning"),document.body.appendChild(_)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&!b&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}(R)}(this._delegate,_,I)}applyActionCode(_){return function(b,y){return Zo.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return fl(this._delegate,_)}confirmPasswordReset(_,I){return function(b,y,_){return ht.apply(this,arguments)}(this._delegate,_,I)}createUserWithEmailAndPassword(_,I){var R=this;return(0,m.Z)(function*(){return Ir(R._delegate,function(b,y,_){return Te.apply(this,arguments)}(R._delegate,_,I))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function(b,y){return Xg.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function(b,y){const _=qc.parseLink(y);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}(0,_)}getRedirectResult(){var _=this;return(0,m.Z)(function*(){Ul(ln(),_._delegate,"operation-not-supported-in-this-environment");const I=yield function(b,y){return os.apply(this,arguments)}(_._delegate,vn);return I?Ir(_._delegate,Promise.resolve(I)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function(b,y){Gt(b)._logFramework(y)}(this._delegate,_)}onAuthStateChanged(_,I,R){const{next:O,error:z,complete:ge}=Bf(_,I,R);return this._delegate.onAuthStateChanged(O,z,ge)}onIdTokenChanged(_,I,R){const{next:O,error:z,complete:ge}=Bf(_,I,R);return this._delegate.onIdTokenChanged(O,z,ge)}sendSignInLinkToEmail(_,I){return function(b,y,_){return An.apply(this,arguments)}(this._delegate,_,I)}sendPasswordResetEmail(_,I){return function(b,y,_){return Jc.apply(this,arguments)}(this._delegate,_,I||void 0)}setPersistence(_){var I=this;return(0,m.Z)(function*(){let R;switch(function(b,y){Eo(Object.values(Cr).includes(y),b,"invalid-persistence-type"),(0,j.b$)()?Eo(y!==Cr.SESSION,b,"unsupported-persistence-type"):(0,j.UG)()?Eo(y===Cr.NONE,b,"unsupported-persistence-type"):Ed()?Eo(y===Cr.NONE||y===Cr.LOCAL&&(0,j.hl)(),b,"unsupported-persistence-type"):Eo(y===Cr.NONE||vd(),b,"unsupported-persistence-type")}(I._delegate,_),_){case Cr.SESSION:R=Rs;break;case Cr.LOCAL:R=(yield ue(ns)._isAvailable())?ns:Xc;break;case Cr.NONE:R=Rt;break;default:return je("argument-error",{appName:I._delegate.name})}return I._delegate.setPersistence(R)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return Ir(this._delegate,function(b){return sl.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return Ir(this._delegate,Qc(this._delegate,_))}signInWithCustomToken(_){return Ir(this._delegate,function(b,y){return vr.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,I){return Ir(this._delegate,function(b,y,_){return Qc((0,j.m9)(b),qg.credential(y,_))}(this._delegate,_,I))}signInWithEmailLink(_,I){return Ir(this._delegate,function(b,y,_){return pi.apply(this,arguments)}(this._delegate,_,I))}signInWithPhoneNumber(_,I){return Vf(this._delegate,function(b,y,_){return hf.apply(this,arguments)}(this._delegate,_,I))}signInWithPopup(_){var I=this;return(0,m.Z)(function*(){return Ul(ln(),I._delegate,"operation-not-supported-in-this-environment"),Ir(I._delegate,function(b,y,_){return wr.apply(this,arguments)}(I._delegate,_,vn))})()}signInWithRedirect(_){var I=this;return(0,m.Z)(function*(){return Ul(ln(),I._delegate,"operation-not-supported-in-this-environment"),yield Ff(I._delegate),function(b,y,_){return function(b,y,_){return iu.apply(this,arguments)}(b,y,_)}(I._delegate,_,vn)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function(b,y){return Ko.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=Cr,b})();function Bf(b,y,_){let I=b;"function"!=typeof b&&({next:I,error:y,complete:_}=b);const R=I;return{next:z=>R(z&&us.getOrCreate(z)),error:y,complete:_}}class uu{constructor(){this.providerId="phone",this._delegate=new Il(Vl(ee.Z.auth()))}static credential(y,_){return Il.credential(y,_)}verifyPhoneNumber(y,_){return this._delegate.verifyPhoneNumber(y,_)}unwrap(){return this._delegate}}uu.PHONE_SIGN_IN_METHOD=Il.PHONE_SIGN_IN_METHOD,uu.PROVIDER_ID=Il.PROVIDER_ID;const Pm=Ce;class km{constructor(y,_,I=ee.Z.app()){var R;Pm(null===(R=I.options)||void 0===R?void 0:R.apiKey,"invalid-api-key",{appName:I.name}),this._delegate=new Ub(y,_,I.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(b){b.INTERNAL.registerComponent(new Ee.wA("auth-compat",y=>{const _=y.getProvider("app-compat").getImmediate(),I=y.getProvider("auth");return new Uf(_,I)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:qg,FacebookAuthProvider:Uh,GithubAuthProvider:jh,GoogleAuthProvider:Bh,OAuthProvider:zo,PhoneAuthProvider:uu,PhoneMultiFactorGenerator:Df,RecaptchaVerifier:km,TwitterAuthProvider:$h,Auth:Uf,AuthCredential:_r,Error:j.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.1.3")}(ee.Z)},7574:(Ke,we,F)=>{"use strict";F.d(we,{y:()=>L});var m=F(7393),j=F(9181),_e=F(6490),oe=F(6554),Ee=F(4487);var k=F(2494);let L=(()=>{class K{constructor(de){this._isScalar=!1,de&&(this._subscribe=de)}lift(de){const ne=new K;return ne.source=this,ne.operator=de,ne}subscribe(de,ne,te){const{operator:Ne}=this,be=function(K,J,de){if(K){if(K instanceof m.L)return K;if(K[j.b])return K[j.b]()}return K||J||de?new m.L(K,J,de):new m.L(_e.c)}(de,ne,te);if(be.add(Ne?Ne.call(be,this.source):this.source||k.v.useDeprecatedSynchronousErrorHandling&&!be.syncErrorThrowable?this._subscribe(be):this._trySubscribe(be)),k.v.useDeprecatedSynchronousErrorHandling&&be.syncErrorThrowable&&(be.syncErrorThrowable=!1,be.syncErrorThrown))throw be.syncErrorValue;return be}_trySubscribe(de){try{return this._subscribe(de)}catch(ne){k.v.useDeprecatedSynchronousErrorHandling&&(de.syncErrorThrown=!0,de.syncErrorValue=ne),function(K){for(;K;){const{closed:J,destination:de,isStopped:ne}=K;if(J||ne)return!1;K=de&&de instanceof m.L?de:null}return!0}(de)?de.error(ne):console.warn(ne)}}forEach(de,ne){return new(ne=Y(ne))((te,Ne)=>{let be;be=this.subscribe(Pe=>{try{de(Pe)}catch(je){Ne(je),be&&be.unsubscribe()}},Ne,te)})}_subscribe(de){const{source:ne}=this;return ne&&ne.subscribe(de)}[oe.L](){return this}pipe(...de){return 0===de.length?this:function(K){return 0===K.length?Ee.y:1===K.length?K[0]:function(de){return K.reduce((ne,te)=>te(ne),de)}}(de)(this)}toPromise(de){return new(de=Y(de))((ne,te)=>{let Ne;this.subscribe(be=>Ne=be,be=>te(be),()=>ne(Ne))})}}return K.create=J=>new K(J),K})();function Y(K){if(K||(K=k.v.Promise||Promise),!K)throw new Error("no Promise impl found");return K}},6490:(Ke,we,F)=>{"use strict";F.d(we,{c:()=>j});var m=F(2494),ee=F(4449);const j={closed:!0,next(_e){},error(_e){if(m.v.useDeprecatedSynchronousErrorHandling)throw _e;(0,ee.z)(_e)},complete(){}}},9765:(Ke,we,F)=>{"use strict";F.d(we,{Yc:()=>Ee,xQ:()=>pe});var m=F(7574),ee=F(7393),j=F(5319),_e=F(7971),me=F(8858),oe=F(9181);class Ee extends ee.L{constructor(L){super(L),this.destination=L}}let pe=(()=>{class k extends m.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[oe.b](){return new Ee(this)}lift(Y){const K=new Z(this,this);return K.operator=Y,K}next(Y){if(this.closed)throw new _e.N;if(!this.isStopped){const{observers:K}=this,J=K.length,de=K.slice();for(let ne=0;ne<J;ne++)de[ne].next(Y)}}error(Y){if(this.closed)throw new _e.N;this.hasError=!0,this.thrownError=Y,this.isStopped=!0;const{observers:K}=this,J=K.length,de=K.slice();for(let ne=0;ne<J;ne++)de[ne].error(Y);this.observers.length=0}complete(){if(this.closed)throw new _e.N;this.isStopped=!0;const{observers:Y}=this,K=Y.length,J=Y.slice();for(let de=0;de<K;de++)J[de].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(Y){if(this.closed)throw new _e.N;return super._trySubscribe(Y)}_subscribe(Y){if(this.closed)throw new _e.N;return this.hasError?(Y.error(this.thrownError),j.w.EMPTY):this.isStopped?(Y.complete(),j.w.EMPTY):(this.observers.push(Y),new me.W(this,Y))}asObservable(){const Y=new m.y;return Y.source=this,Y}}return k.create=(L,Y)=>new Z(L,Y),k})();class Z extends pe{constructor(L,Y){super(),this.destination=L,this.source=Y}next(L){const{destination:Y}=this;Y&&Y.next&&Y.next(L)}error(L){const{destination:Y}=this;Y&&Y.error&&this.destination.error(L)}complete(){const{destination:L}=this;L&&L.complete&&this.destination.complete()}_subscribe(L){const{source:Y}=this;return Y?this.source.subscribe(L):j.w.EMPTY}}},8858:(Ke,we,F)=>{"use strict";F.d(we,{W:()=>ee});var m=F(5319);class ee extends m.w{constructor(_e,me){super(),this.subject=_e,this.subscriber=me,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const _e=this.subject,me=_e.observers;if(this.subject=null,!me||0===me.length||_e.isStopped||_e.closed)return;const oe=me.indexOf(this.subscriber);-1!==oe&&me.splice(oe,1)}}},7393:(Ke,we,F)=>{"use strict";F.d(we,{L:()=>Ee});var m=F(9105),ee=F(6490),j=F(5319),_e=F(9181),me=F(2494),oe=F(4449);class Ee extends j.w{constructor(k,L,Y){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=ee.c;break;case 1:if(!k){this.destination=ee.c;break}if("object"==typeof k){k instanceof Ee?(this.syncErrorThrowable=k.syncErrorThrowable,this.destination=k,k.add(this)):(this.syncErrorThrowable=!0,this.destination=new pe(this,k));break}default:this.syncErrorThrowable=!0,this.destination=new pe(this,k,L,Y)}}[_e.b](){return this}static create(k,L,Y){const K=new Ee(k,L,Y);return K.syncErrorThrowable=!1,K}next(k){this.isStopped||this._next(k)}error(k){this.isStopped||(this.isStopped=!0,this._error(k))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(k){this.destination.next(k)}_error(k){this.destination.error(k),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:k}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=k,this}}class pe extends Ee{constructor(k,L,Y,K){super(),this._parentSubscriber=k;let J,de=this;(0,m.m)(L)?J=L:L&&(J=L.next,Y=L.error,K=L.complete,L!==ee.c&&(de=Object.create(L),(0,m.m)(de.unsubscribe)&&this.add(de.unsubscribe.bind(de)),de.unsubscribe=this.unsubscribe.bind(this))),this._context=de,this._next=J,this._error=Y,this._complete=K}next(k){if(!this.isStopped&&this._next){const{_parentSubscriber:L}=this;me.v.useDeprecatedSynchronousErrorHandling&&L.syncErrorThrowable?this.__tryOrSetError(L,this._next,k)&&this.unsubscribe():this.__tryOrUnsub(this._next,k)}}error(k){if(!this.isStopped){const{_parentSubscriber:L}=this,{useDeprecatedSynchronousErrorHandling:Y}=me.v;if(this._error)Y&&L.syncErrorThrowable?(this.__tryOrSetError(L,this._error,k),this.unsubscribe()):(this.__tryOrUnsub(this._error,k),this.unsubscribe());else if(L.syncErrorThrowable)Y?(L.syncErrorValue=k,L.syncErrorThrown=!0):(0,oe.z)(k),this.unsubscribe();else{if(this.unsubscribe(),Y)throw k;(0,oe.z)(k)}}}complete(){if(!this.isStopped){const{_parentSubscriber:k}=this;if(this._complete){const L=()=>this._complete.call(this._context);me.v.useDeprecatedSynchronousErrorHandling&&k.syncErrorThrowable?(this.__tryOrSetError(k,L),this.unsubscribe()):(this.__tryOrUnsub(L),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(k,L){try{k.call(this._context,L)}catch(Y){if(this.unsubscribe(),me.v.useDeprecatedSynchronousErrorHandling)throw Y;(0,oe.z)(Y)}}__tryOrSetError(k,L,Y){if(!me.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{L.call(this._context,Y)}catch(K){return me.v.useDeprecatedSynchronousErrorHandling?(k.syncErrorValue=K,k.syncErrorThrown=!0,!0):((0,oe.z)(K),!0)}return!1}_unsubscribe(){const{_parentSubscriber:k}=this;this._context=null,this._parentSubscriber=null,k.unsubscribe()}}},5319:(Ke,we,F)=>{"use strict";F.d(we,{w:()=>oe});var m=F(9796),ee=F(1555),j=F(9105);const me=(()=>{function pe(Z){return Error.call(this),this.message=Z?`${Z.length} errors occurred during unsubscription:\n${Z.map((k,L)=>`${L+1}) ${k.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Z,this}return pe.prototype=Object.create(Error.prototype),pe})();class oe{constructor(Z){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,Z&&(this._ctorUnsubscribe=!0,this._unsubscribe=Z)}unsubscribe(){let Z;if(this.closed)return;let{_parentOrParents:k,_ctorUnsubscribe:L,_unsubscribe:Y,_subscriptions:K}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,k instanceof oe)k.remove(this);else if(null!==k)for(let J=0;J<k.length;++J)k[J].remove(this);if((0,j.m)(Y)){L&&(this._unsubscribe=void 0);try{Y.call(this)}catch(J){Z=J instanceof me?Ee(J.errors):[J]}}if((0,m.k)(K)){let J=-1,de=K.length;for(;++J<de;){const ne=K[J];if((0,ee.K)(ne))try{ne.unsubscribe()}catch(te){Z=Z||[],te instanceof me?Z=Z.concat(Ee(te.errors)):Z.push(te)}}}if(Z)throw new me(Z)}add(Z){let k=Z;if(!Z)return oe.EMPTY;switch(typeof Z){case"function":k=new oe(Z);case"object":if(k===this||k.closed||"function"!=typeof k.unsubscribe)return k;if(this.closed)return k.unsubscribe(),k;if(!(k instanceof oe)){const K=k;k=new oe,k._subscriptions=[K]}break;default:throw new Error("unrecognized teardown "+Z+" added to Subscription.")}let{_parentOrParents:L}=k;if(null===L)k._parentOrParents=this;else if(L instanceof oe){if(L===this)return k;k._parentOrParents=[L,this]}else{if(-1!==L.indexOf(this))return k;L.push(this)}const Y=this._subscriptions;return null===Y?this._subscriptions=[k]:Y.push(k),k}remove(Z){const k=this._subscriptions;if(k){const L=k.indexOf(Z);-1!==L&&k.splice(L,1)}}}var pe;function Ee(pe){return pe.reduce((Z,k)=>Z.concat(k instanceof me?k.errors:k),[])}oe.EMPTY=((pe=new oe).closed=!0,pe)},2494:(Ke,we,F)=>{"use strict";F.d(we,{v:()=>ee});let m=!1;const ee={Promise:void 0,set useDeprecatedSynchronousErrorHandling(j){if(j){const _e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+_e.stack)}else m&&console.log("RxJS: Back to a better error behavior. Thank you. <3");m=j},get useDeprecatedSynchronousErrorHandling(){return m}}},5345:(Ke,we,F)=>{"use strict";F.d(we,{IY:()=>_e,Ds:()=>oe,ft:()=>pe});var m=F(7393),ee=F(7574),j=F(7444);class _e extends m.L{constructor(k){super(),this.parent=k}_next(k){this.parent.notifyNext(k)}_error(k){this.parent.notifyError(k),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class oe extends m.L{notifyNext(k){this.destination.next(k)}notifyError(k){this.destination.error(k)}notifyComplete(){this.destination.complete()}}function pe(Z,k){if(k.closed)return;if(Z instanceof ee.y)return Z.subscribe(k);let L;try{L=(0,j.s)(Z)(k)}catch(Y){k.error(Y)}return L}},2441:(Ke,we,F)=>{"use strict";F.d(we,{c:()=>me,N:()=>oe});var m=F(9765),ee=F(7574),j=F(5319),_e=F(1307);class me extends ee.y{constructor(L,Y){super(),this.source=L,this.subjectFactory=Y,this._refCount=0,this._isComplete=!1}_subscribe(L){return this.getSubject().subscribe(L)}getSubject(){const L=this._subject;return(!L||L.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let L=this._connection;return L||(this._isComplete=!1,L=this._connection=new j.w,L.add(this.source.subscribe(new Ee(this.getSubject(),this))),L.closed&&(this._connection=null,L=j.w.EMPTY)),L}refCount(){return(0,_e.x)()(this)}}const oe=(()=>{const k=me.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:k._subscribe},_isComplete:{value:k._isComplete,writable:!0},getSubject:{value:k.getSubject},connect:{value:k.connect},refCount:{value:k.refCount}}})();class Ee extends m.Yc{constructor(L,Y){super(L),this.connectable=Y}_error(L){this._unsubscribe(),super._error(L)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const L=this.connectable;if(L){this.connectable=null;const Y=L._connection;L._refCount=0,L._subject=null,L._connection=null,Y&&Y.unsubscribe()}}}},9193:(Ke,we,F)=>{"use strict";F.d(we,{E:()=>ee,c:()=>j});var m=F(7574);const ee=new m.y(me=>me.complete());function j(me){return me?function(me){return new m.y(oe=>me.schedule(()=>oe.complete()))}(me):ee}},4402:(Ke,we,F)=>{"use strict";F.d(we,{D:()=>de});var m=F(7574),ee=F(7444),j=F(5319),_e=F(6554),Ee=F(4087),pe=F(377),L=F(4072),Y=F(9489);function de(ne,te){return te?function(ne,te){if(null!=ne){if(function(ne){return ne&&"function"==typeof ne[_e.L]}(ne))return function(ne,te){return new m.y(Ne=>{const be=new j.w;return be.add(te.schedule(()=>{const Pe=ne[_e.L]();be.add(Pe.subscribe({next(je){be.add(te.schedule(()=>Ne.next(je)))},error(je){be.add(te.schedule(()=>Ne.error(je)))},complete(){be.add(te.schedule(()=>Ne.complete()))}}))})),be})}(ne,te);if((0,L.t)(ne))return function(ne,te){return new m.y(Ne=>{const be=new j.w;return be.add(te.schedule(()=>ne.then(Pe=>{be.add(te.schedule(()=>{Ne.next(Pe),be.add(te.schedule(()=>Ne.complete()))}))},Pe=>{be.add(te.schedule(()=>Ne.error(Pe)))}))),be})}(ne,te);if((0,Y.z)(ne))return(0,Ee.r)(ne,te);if(function(ne){return ne&&"function"==typeof ne[pe.hZ]}(ne)||"string"==typeof ne)return function(ne,te){if(!ne)throw new Error("Iterable cannot be null");return new m.y(Ne=>{const be=new j.w;let Pe;return be.add(()=>{Pe&&"function"==typeof Pe.return&&Pe.return()}),be.add(te.schedule(()=>{Pe=ne[pe.hZ](),be.add(te.schedule(function(){if(Ne.closed)return;let je,rt;try{const Ve=Pe.next();je=Ve.value,rt=Ve.done}catch(Ve){return void Ne.error(Ve)}rt?Ne.complete():(Ne.next(je),this.schedule())}))})),be})}(ne,te)}throw new TypeError((null!==ne&&typeof ne||ne)+" is not observable")}(ne,te):ne instanceof m.y?ne:new m.y((0,ee.s)(ne))}},6693:(Ke,we,F)=>{"use strict";F.d(we,{n:()=>_e});var m=F(7574),ee=F(5015),j=F(4087);function _e(me,oe){return oe?(0,j.r)(me,oe):new m.y((0,ee.V)(me))}},6682:(Ke,we,F)=>{"use strict";F.d(we,{T:()=>me});var m=F(7574),ee=F(4869),j=F(3282),_e=F(6693);function me(...oe){let Ee=Number.POSITIVE_INFINITY,pe=null,Z=oe[oe.length-1];return(0,ee.K)(Z)?(pe=oe.pop(),oe.length>1&&"number"==typeof oe[oe.length-1]&&(Ee=oe.pop())):"number"==typeof Z&&(Ee=oe.pop()),null===pe&&1===oe.length&&oe[0]instanceof m.y?oe[0]:(0,j.J)(Ee)((0,_e.n)(oe,pe))}},5917:(Ke,we,F)=>{"use strict";F.d(we,{of:()=>_e});var m=F(4869),ee=F(6693),j=F(4087);function _e(...me){let oe=me[me.length-1];return(0,m.K)(oe)?(me.pop(),(0,j.r)(me,oe)):(0,ee.n)(me)}},8002:(Ke,we,F)=>{"use strict";F.d(we,{U:()=>ee});var m=F(7393);function ee(me,oe){return function(pe){if("function"!=typeof me)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return pe.lift(new j(me,oe))}}class j{constructor(oe,Ee){this.project=oe,this.thisArg=Ee}call(oe,Ee){return Ee.subscribe(new _e(oe,this.project,this.thisArg))}}class _e extends m.L{constructor(oe,Ee,pe){super(oe),this.project=Ee,this.count=0,this.thisArg=pe||this}_next(oe){let Ee;try{Ee=this.project.call(this.thisArg,oe,this.count++)}catch(pe){return void this.destination.error(pe)}this.destination.next(Ee)}}},3282:(Ke,we,F)=>{"use strict";F.d(we,{J:()=>j});var m=F(9773),ee=F(4487);function j(_e=Number.POSITIVE_INFINITY){return(0,m.zg)(ee.y,_e)}},9773:(Ke,we,F)=>{"use strict";F.d(we,{zg:()=>_e});var m=F(8002),ee=F(4402),j=F(5345);function _e(pe,Z,k=Number.POSITIVE_INFINITY){return"function"==typeof Z?L=>L.pipe(_e((Y,K)=>(0,ee.D)(pe(Y,K)).pipe((0,m.U)((J,de)=>Z(Y,J,K,de))),k)):("number"==typeof Z&&(k=Z),L=>L.lift(new me(pe,k)))}class me{constructor(Z,k=Number.POSITIVE_INFINITY){this.project=Z,this.concurrent=k}call(Z,k){return k.subscribe(new oe(Z,this.project,this.concurrent))}}class oe extends j.Ds{constructor(Z,k,L=Number.POSITIVE_INFINITY){super(Z),this.project=k,this.concurrent=L,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(Z){this.active<this.concurrent?this._tryNext(Z):this.buffer.push(Z)}_tryNext(Z){let k;const L=this.index++;try{k=this.project(Z,L)}catch(Y){return void this.destination.error(Y)}this.active++,this._innerSub(k)}_innerSub(Z){const k=new j.IY(this),L=this.destination;L.add(k);const Y=(0,j.ft)(Z,k);Y!==k&&L.add(Y)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(Z){this.destination.next(Z)}notifyComplete(){const Z=this.buffer;this.active--,Z.length>0?this._next(Z.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(Ke,we,F)=>{"use strict";F.d(we,{ht:()=>L,QV:()=>Z});var m=F(7393),ee=F(9193),j=F(5917),_e=F(7574);class pe{constructor(J,de,ne){this.kind=J,this.value=de,this.error=ne,this.hasValue="N"===J}observe(J){switch(this.kind){case"N":return J.next&&J.next(this.value);case"E":return J.error&&J.error(this.error);case"C":return J.complete&&J.complete()}}do(J,de,ne){switch(this.kind){case"N":return J&&J(this.value);case"E":return de&&de(this.error);case"C":return ne&&ne()}}accept(J,de,ne){return J&&"function"==typeof J.next?this.observe(J):this.do(J,de,ne)}toObservable(){switch(this.kind){case"N":return(0,j.of)(this.value);case"E":return K=this.error,new _e.y(de=>de.error(K));case"C":return(0,ee.c)()}var K;throw new Error("unexpected notification kind value")}static createNext(J){return void 0!==J?new pe("N",J):pe.undefinedValueNotification}static createError(J){return new pe("E",void 0,J)}static createComplete(){return pe.completeNotification}}function Z(K,J=0){return function(ne){return ne.lift(new k(K,J))}}pe.completeNotification=new pe("C"),pe.undefinedValueNotification=new pe("N",void 0);class k{constructor(J,de=0){this.scheduler=J,this.delay=de}call(J,de){return de.subscribe(new L(J,this.scheduler,this.delay))}}class L extends m.L{constructor(J,de,ne=0){super(J),this.scheduler=de,this.delay=ne}static dispatch(J){const{notification:de,destination:ne}=J;de.observe(ne),this.unsubscribe()}scheduleMessage(J){this.destination.add(this.scheduler.schedule(L.dispatch,this.delay,new Y(J,this.destination)))}_next(J){this.scheduleMessage(pe.createNext(J))}_error(J){this.scheduleMessage(pe.createError(J)),this.unsubscribe()}_complete(){this.scheduleMessage(pe.createComplete()),this.unsubscribe()}}class Y{constructor(J,de){this.notification=J,this.destination=de}}},1307:(Ke,we,F)=>{"use strict";F.d(we,{x:()=>ee});var m=F(7393);function ee(){return function(oe){return oe.lift(new j(oe))}}class j{constructor(oe){this.connectable=oe}call(oe,Ee){const{connectable:pe}=this;pe._refCount++;const Z=new _e(oe,pe),k=Ee.subscribe(Z);return Z.closed||(Z.connection=pe.connect()),k}}class _e extends m.L{constructor(oe,Ee){super(oe),this.connectable=Ee}_unsubscribe(){const{connectable:oe}=this;if(!oe)return void(this.connection=null);this.connectable=null;const Ee=oe._refCount;if(Ee<=0)return void(this.connection=null);if(oe._refCount=Ee-1,Ee>1)return void(this.connection=null);const{connection:pe}=this,Z=oe._connection;this.connection=null,Z&&(!pe||Z===pe)&&Z.unsubscribe()}}},2639:(Ke,we,F)=>{"use strict";F.d(we,{R:()=>ne});var m=F(7574);let ee=1;const j=Promise.resolve(),_e={};function me(Ne){return Ne in _e&&(delete _e[Ne],!0)}const oe={setImmediate(Ne){const be=ee++;return _e[be]=!0,j.then(()=>me(be)&&Ne()),be},clearImmediate(Ne){me(Ne)}};var pe=F(6465),k=F(6102);const K=new class extends k.v{flush(be){this.active=!0,this.scheduled=void 0;const{actions:Pe}=this;let je,rt=-1,Ve=Pe.length;be=be||Pe.shift();do{if(je=be.execute(be.state,be.delay))break}while(++rt<Ve&&(be=Pe.shift()));if(this.active=!1,je){for(;++rt<Ve&&(be=Pe.shift());)be.unsubscribe();throw je}}}(class extends pe.o{constructor(be,Pe){super(be,Pe),this.scheduler=be,this.work=Pe}requestAsyncId(be,Pe,je=0){return null!==je&&je>0?super.requestAsyncId(be,Pe,je):(be.actions.push(this),be.scheduled||(be.scheduled=oe.setImmediate(be.flush.bind(be,null))))}recycleAsyncId(be,Pe,je=0){if(null!==je&&je>0||null===je&&this.delay>0)return super.recycleAsyncId(be,Pe,je);0===be.actions.length&&(oe.clearImmediate(Pe),be.scheduled=void 0)}});var J=F(6561);class de extends m.y{constructor(be,Pe=0,je=K){super(),this.source=be,this.delayTime=Pe,this.scheduler=je,(!(0,J.k)(Pe)||Pe<0)&&(this.delayTime=0),(!je||"function"!=typeof je.schedule)&&(this.scheduler=K)}static create(be,Pe=0,je=K){return new de(be,Pe,je)}static dispatch(be){const{source:Pe,subscriber:je}=be;return this.add(Pe.subscribe(je))}_subscribe(be){return this.scheduler.schedule(de.dispatch,this.delayTime,{source:this.source,subscriber:be})}}function ne(Ne,be=0){return function(je){return je.lift(new te(Ne,be))}}class te{constructor(be,Pe){this.scheduler=be,this.delay=Pe}call(be,Pe){return new de(Pe,this.delay,this.scheduler).subscribe(be)}}},3342:(Ke,we,F)=>{"use strict";F.d(we,{b:()=>_e});var m=F(7393);function ee(){}var j=F(9105);function _e(Ee,pe,Z){return function(L){return L.lift(new me(Ee,pe,Z))}}class me{constructor(pe,Z,k){this.nextOrObserver=pe,this.error=Z,this.complete=k}call(pe,Z){return Z.subscribe(new oe(pe,this.nextOrObserver,this.error,this.complete))}}class oe extends m.L{constructor(pe,Z,k,L){super(pe),this._tapNext=ee,this._tapError=ee,this._tapComplete=ee,this._tapError=k||ee,this._tapComplete=L||ee,(0,j.m)(Z)?(this._context=this,this._tapNext=Z):Z&&(this._context=Z,this._tapNext=Z.next||ee,this._tapError=Z.error||ee,this._tapComplete=Z.complete||ee)}_next(pe){try{this._tapNext.call(this._context,pe)}catch(Z){return void this.destination.error(Z)}this.destination.next(pe)}_error(pe){try{this._tapError.call(this._context,pe)}catch(Z){return void this.destination.error(Z)}this.destination.error(pe)}_complete(){try{this._tapComplete.call(this._context)}catch(pe){return void this.destination.error(pe)}return this.destination.complete()}}},4087:(Ke,we,F)=>{"use strict";F.d(we,{r:()=>j});var m=F(7574),ee=F(5319);function j(_e,me){return new m.y(oe=>{const Ee=new ee.w;let pe=0;return Ee.add(me.schedule(function(){pe!==_e.length?(oe.next(_e[pe++]),oe.closed||Ee.add(this.schedule())):oe.complete()})),Ee})}},6465:(Ke,we,F)=>{"use strict";F.d(we,{o:()=>j});var m=F(5319);class ee extends m.w{constructor(me,oe){super()}schedule(me,oe=0){return this}}class j extends ee{constructor(me,oe){super(me,oe),this.scheduler=me,this.work=oe,this.pending=!1}schedule(me,oe=0){if(this.closed)return this;this.state=me;const Ee=this.id,pe=this.scheduler;return null!=Ee&&(this.id=this.recycleAsyncId(pe,Ee,oe)),this.pending=!0,this.delay=oe,this.id=this.id||this.requestAsyncId(pe,this.id,oe),this}requestAsyncId(me,oe,Ee=0){return setInterval(me.flush.bind(me,this),Ee)}recycleAsyncId(me,oe,Ee=0){if(null!==Ee&&this.delay===Ee&&!1===this.pending)return oe;clearInterval(oe)}execute(me,oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ee=this._execute(me,oe);if(Ee)return Ee;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,oe){let pe,Ee=!1;try{this.work(me)}catch(Z){Ee=!0,pe=!!Z&&Z||new Error(Z)}if(Ee)return this.unsubscribe(),pe}_unsubscribe(){const me=this.id,oe=this.scheduler,Ee=oe.actions,pe=Ee.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==pe&&Ee.splice(pe,1),null!=me&&(this.id=this.recycleAsyncId(oe,me,null)),this.delay=null}}},6102:(Ke,we,F)=>{"use strict";F.d(we,{v:()=>ee});let m=(()=>{class j{constructor(me,oe=j.now){this.SchedulerAction=me,this.now=oe}schedule(me,oe=0,Ee){return new this.SchedulerAction(this,me).schedule(Ee,oe)}}return j.now=()=>Date.now(),j})();class ee extends m{constructor(_e,me=m.now){super(_e,()=>ee.delegate&&ee.delegate!==this?ee.delegate.now():me()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(_e,me=0,oe){return ee.delegate&&ee.delegate!==this?ee.delegate.schedule(_e,me,oe):super.schedule(_e,me,oe)}flush(_e){const{actions:me}=this;if(this.active)return void me.push(_e);let oe;this.active=!0;do{if(oe=_e.execute(_e.state,_e.delay))break}while(_e=me.shift());if(this.active=!1,oe){for(;_e=me.shift();)_e.unsubscribe();throw oe}}}},3637:(Ke,we,F)=>{"use strict";F.d(we,{z:()=>j,P:()=>_e});var m=F(6465);const j=new(F(6102).v)(m.o),_e=j},7771:(Ke,we,F)=>{"use strict";F.d(we,{c:()=>oe,N:()=>me});var m=F(6465),j=F(6102);const me=new class extends j.v{}(class extends m.o{constructor(pe,Z){super(pe,Z),this.scheduler=pe,this.work=Z}schedule(pe,Z=0){return Z>0?super.schedule(pe,Z):(this.delay=Z,this.state=pe,this.scheduler.flush(this),this)}execute(pe,Z){return Z>0||this.closed?super.execute(pe,Z):this._execute(pe,Z)}requestAsyncId(pe,Z,k=0){return null!==k&&k>0||null===k&&this.delay>0?super.requestAsyncId(pe,Z,k):pe.flush(this)}}),oe=me},377:(Ke,we,F)=>{"use strict";F.d(we,{hZ:()=>ee});const ee="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Ke,we,F)=>{"use strict";F.d(we,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Ke,we,F)=>{"use strict";F.d(we,{b:()=>m});const m="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(Ke,we,F)=>{"use strict";F.d(we,{N:()=>ee});const ee=(()=>{function j(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return j.prototype=Object.create(Error.prototype),j})()},4449:(Ke,we,F)=>{"use strict";function m(ee){setTimeout(()=>{throw ee},0)}F.d(we,{z:()=>m})},4487:(Ke,we,F)=>{"use strict";function m(ee){return ee}F.d(we,{y:()=>m})},9796:(Ke,we,F)=>{"use strict";F.d(we,{k:()=>m});const m=Array.isArray||(ee=>ee&&"number"==typeof ee.length)},9489:(Ke,we,F)=>{"use strict";F.d(we,{z:()=>m});const m=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},9105:(Ke,we,F)=>{"use strict";function m(ee){return"function"==typeof ee}F.d(we,{m:()=>m})},6561:(Ke,we,F)=>{"use strict";F.d(we,{k:()=>ee});var m=F(9796);function ee(j){return!(0,m.k)(j)&&j-parseFloat(j)+1>=0}},1555:(Ke,we,F)=>{"use strict";function m(ee){return null!==ee&&"object"==typeof ee}F.d(we,{K:()=>m})},4072:(Ke,we,F)=>{"use strict";function m(ee){return!!ee&&"function"!=typeof ee.subscribe&&"function"==typeof ee.then}F.d(we,{t:()=>m})},4869:(Ke,we,F)=>{"use strict";function m(ee){return ee&&"function"==typeof ee.schedule}F.d(we,{K:()=>m})},7444:(Ke,we,F)=>{"use strict";F.d(we,{s:()=>L});var m=F(5015),ee=F(4449),_e=F(377),oe=F(6554),pe=F(9489),Z=F(4072),k=F(1555);const L=Y=>{if(Y&&"function"==typeof Y[oe.L])return(Y=>K=>{const J=Y[oe.L]();if("function"!=typeof J.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return J.subscribe(K)})(Y);if((0,pe.z)(Y))return(0,m.V)(Y);if((0,Z.t)(Y))return(Y=>K=>(Y.then(J=>{K.closed||(K.next(J),K.complete())},J=>K.error(J)).then(null,ee.z),K))(Y);if(Y&&"function"==typeof Y[_e.hZ])return(Y=>K=>{const J=Y[_e.hZ]();for(;;){let de;try{de=J.next()}catch(ne){return K.error(ne),K}if(de.done){K.complete();break}if(K.next(de.value),K.closed)break}return"function"==typeof J.return&&K.add(()=>{J.return&&J.return()}),K})(Y);{const J=`You provided ${(0,k.K)(Y)?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(J)}}},5015:(Ke,we,F)=>{"use strict";F.d(we,{V:()=>m});const m=ee=>j=>{for(let _e=0,me=ee.length;_e<me&&!j.closed;_e++)j.next(ee[_e]);j.complete()}},748:(Ke,we,F)=>{"use strict";var m=F(3018);let ee=null;function j(){return ee}const Ee=new m.OlP("DocumentToken");let pe=(()=>{class i{historyGo(r){throw new Error("Not implemented")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=(0,m.Yz7)({factory:Z,token:i,providedIn:"platform"}),i})();function Z(){return(0,m.LFG)(L)}const k=new m.OlP("Location Initialized");let L=(()=>{class i extends pe{constructor(r){super(),this._doc=r,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return j().getBaseHref(this._doc)}onPopState(r){const s=j().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",r,!1),()=>s.removeEventListener("popstate",r)}onHashChange(r){const s=j().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",r,!1),()=>s.removeEventListener("hashchange",r)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(r){this.location.pathname=r}pushState(r,s,l){Y()?this._history.pushState(r,s,l):this.location.hash=l}replaceState(r,s,l){Y()?this._history.replaceState(r,s,l):this.location.hash=l}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}}return i.\u0275fac=function(r){return new(r||i)(m.LFG(Ee))},i.\u0275prov=(0,m.Yz7)({factory:K,token:i,providedIn:"platform"}),i})();function Y(){return!!window.history.pushState}function K(){return new L((0,m.LFG)(Ee))}function J(i,n){if(0==i.length)return n;if(0==n.length)return i;let r=0;return i.endsWith("/")&&r++,n.startsWith("/")&&r++,2==r?i+n.substring(1):1==r?i+n:i+"/"+n}function de(i){const n=i.match(/#|\?|$/),r=n&&n.index||i.length;return i.slice(0,r-("/"===i[r-1]?1:0))+i.slice(r)}function ne(i){return i&&"?"!==i[0]?"?"+i:i}let te=(()=>{class i{historyGo(r){throw new Error("Not implemented")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=(0,m.Yz7)({factory:Ne,token:i,providedIn:"root"}),i})();function Ne(i){const n=(0,m.LFG)(Ee).location;return new Pe((0,m.LFG)(pe),n&&n.origin||"")}const be=new m.OlP("appBaseHref");let Pe=(()=>{class i extends te{constructor(r,s){if(super(),this._platformLocation=r,this._removeListenerFns=[],null==s&&(s=this._platformLocation.getBaseHrefFromDOM()),null==s)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=s}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return J(this._baseHref,r)}path(r=!1){const s=this._platformLocation.pathname+ne(this._platformLocation.search),l=this._platformLocation.hash;return l&&r?`${s}${l}`:s}pushState(r,s,l,d){const f=this.prepareExternalUrl(l+ne(d));this._platformLocation.pushState(r,s,f)}replaceState(r,s,l,d){const f=this.prepareExternalUrl(l+ne(d));this._platformLocation.replaceState(r,s,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(r=0){var s,l;null===(l=(s=this._platformLocation).historyGo)||void 0===l||l.call(s,r)}}return i.\u0275fac=function(r){return new(r||i)(m.LFG(pe),m.LFG(be,8))},i.\u0275prov=m.Yz7({token:i,factory:i.\u0275fac}),i})(),je=(()=>{class i extends te{constructor(r,s){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],null!=s&&(this._baseHref=s)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let s=this._platformLocation.hash;return null==s&&(s="#"),s.length>0?s.substring(1):s}prepareExternalUrl(r){const s=J(this._baseHref,r);return s.length>0?"#"+s:s}pushState(r,s,l,d){let f=this.prepareExternalUrl(l+ne(d));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.pushState(r,s,f)}replaceState(r,s,l,d){let f=this.prepareExternalUrl(l+ne(d));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.replaceState(r,s,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(r=0){var s,l;null===(l=(s=this._platformLocation).historyGo)||void 0===l||l.call(s,r)}}return i.\u0275fac=function(r){return new(r||i)(m.LFG(pe),m.LFG(be,8))},i.\u0275prov=m.Yz7({token:i,factory:i.\u0275fac}),i})(),rt=(()=>{class i{constructor(r,s){this._subject=new m.vpe,this._urlChangeListeners=[],this._platformStrategy=r;const l=this._platformStrategy.getBaseHref();this._platformLocation=s,this._baseHref=de(Nt(l)),this._platformStrategy.onPopState(d=>{this._subject.emit({url:this.path(!0),pop:!0,state:d.state,type:d.type})})}path(r=!1){return this.normalize(this._platformStrategy.path(r))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(r,s=""){return this.path()==this.normalize(r+ne(s))}normalize(r){return i.stripTrailingSlash(function(i,n){return i&&n.startsWith(i)?n.substring(i.length):n}(this._baseHref,Nt(r)))}prepareExternalUrl(r){return r&&"/"!==r[0]&&(r="/"+r),this._platformStrategy.prepareExternalUrl(r)}go(r,s="",l=null){this._platformStrategy.pushState(l,"",r,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ne(s)),l)}replaceState(r,s="",l=null){this._platformStrategy.replaceState(l,"",r,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ne(s)),l)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(r=0){var s,l;null===(l=(s=this._platformStrategy).historyGo)||void 0===l||l.call(s,r)}onUrlChange(r){this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)}))}_notifyUrlChangeListeners(r="",s){this._urlChangeListeners.forEach(l=>l(r,s))}subscribe(r,s,l){return this._subject.subscribe({next:r,error:s,complete:l})}}return i.\u0275fac=function(r){return new(r||i)(m.LFG(te),m.LFG(pe))},i.normalizeQueryParams=ne,i.joinWithSlash=J,i.stripTrailingSlash=de,i.\u0275prov=(0,m.Yz7)({factory:Ve,token:i,providedIn:"root"}),i})();function Ve(){return new rt((0,m.LFG)(te),(0,m.LFG)(pe))}function Nt(i){return i.replace(/\/index.html$/,"")}var ae=(()=>((ae=ae||{})[ae.Zero=0]="Zero",ae[ae.One=1]="One",ae[ae.Two=2]="Two",ae[ae.Few=3]="Few",ae[ae.Many=4]="Many",ae[ae.Other=5]="Other",ae))();const Pr=m.kL8;class _r{}let Ho=(()=>{class i extends _r{constructor(r){super(),this.locale=r}getPluralCategory(r,s){switch(Pr(s||this.locale)(r)){case ae.Zero:return"zero";case ae.One:return"one";case ae.Two:return"two";case ae.Few:return"few";case ae.Many:return"many";default:return"other"}}}return i.\u0275fac=function(r){return new(r||i)(m.LFG(m.soG))},i.\u0275prov=m.Yz7({token:i,factory:i.\u0275fac}),i})();class Oh{constructor(n,r,s,l){this.$implicit=n,this.ngForOf=r,this.index=s,this.count=l}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Mi=(()=>{class i{constructor(r,s,l){this._viewContainer=r,this._template=s,this._differs=l,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const r=this._ngForOf;if(!this._differ&&r)try{this._differ=this._differs.find(r).create(this.ngForTrackBy)}catch(s){throw new Error(`Cannot find a differ supporting object '${r}' of type '${function(i){return i.name||typeof i}(r)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){const s=[];r.forEachOperation((l,d,f)=>{if(null==l.previousIndex){const E=this._viewContainer.createEmbeddedView(this._template,new Oh(null,this._ngForOf,-1,-1),null===f?void 0:f),C=new $n(l,E);s.push(C)}else if(null==f)this._viewContainer.remove(null===d?void 0:d);else if(null!==d){const E=this._viewContainer.get(d);this._viewContainer.move(E,f);const C=new $n(l,E);s.push(C)}});for(let l=0;l<s.length;l++)this._perViewChange(s[l].view,s[l].record);for(let l=0,d=this._viewContainer.length;l<d;l++){const f=this._viewContainer.get(l);f.context.index=l,f.context.count=d,f.context.ngForOf=this._ngForOf}r.forEachIdentityChange(l=>{this._viewContainer.get(l.currentIndex).context.$implicit=l.item})}_perViewChange(r,s){r.context.$implicit=s.item}static ngTemplateContextGuard(r,s){return!0}}return i.\u0275fac=function(r){return new(r||i)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},i.\u0275dir=m.lG2({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),i})();class $n{constructor(n,r){this.record=n,this.view=r}}let Is=(()=>{class i{constructor(r,s){this._viewContainer=r,this._context=new ei,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=s}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){Kt("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){Kt("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,s){return!0}}return i.\u0275fac=function(r){return new(r||i)(m.Y36(m.s_b),m.Y36(m.Rgc))},i.\u0275dir=m.lG2({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),i})();class ei{constructor(){this.$implicit=null,this.ngIf=null}}function Kt(i,n){if(n&&!n.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${(0,m.AaK)(n)}'.`)}let Nn=(()=>{class i{constructor(r,s,l){this._ngEl=r,this._differs=s,this._renderer=l,this._ngStyle=null,this._differ=null}set ngStyle(r){this._ngStyle=r,!this._differ&&r&&(this._differ=this._differs.find(r).create())}ngDoCheck(){if(this._differ){const r=this._differ.diff(this._ngStyle);r&&this._applyChanges(r)}}_setStyle(r,s){const[l,d]=r.split(".");null!=(s=null!=s&&d?`${s}${d}`:s)?this._renderer.setStyle(this._ngEl.nativeElement,l,s):this._renderer.removeStyle(this._ngEl.nativeElement,l)}_applyChanges(r){r.forEachRemovedItem(s=>this._setStyle(s.key,null)),r.forEachAddedItem(s=>this._setStyle(s.key,s.currentValue)),r.forEachChangedItem(s=>this._setStyle(s.key,s.currentValue))}}return i.\u0275fac=function(r){return new(r||i)(m.Y36(m.SBq),m.Y36(m.aQg),m.Y36(m.Qsj))},i.\u0275dir=m.lG2({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),i})(),zg=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=m.oAB({type:i}),i.\u0275inj=m.cJS({providers:[{provide:_r,useClass:Ho}]}),i})();function il(i){return"server"===i}let sl=(()=>{class i{}return i.\u0275prov=(0,m.Yz7)({token:i,providedIn:"root",factory:()=>new zc((0,m.LFG)(Ee),window)}),i})();class zc{constructor(n,r){this.document=n,this.window=r,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const r=function(i,n){const r=i.getElementById(n)||i.getElementsByName(n)[0];if(r)return r;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const s=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let l=s.currentNode;for(;l;){const d=l.shadowRoot;if(d){const f=d.getElementById(n)||d.querySelector(`[name="${n}"]`);if(f)return f}l=s.nextNode()}}return null}(this.document,n);r&&(this.scrollToElement(r),this.attemptFocus(r))}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const r=this.window.history;r&&r.scrollRestoration&&(r.scrollRestoration=n)}}scrollToElement(n){const r=n.getBoundingClientRect(),s=r.left+this.window.pageXOffset,l=r.top+this.window.pageYOffset,d=this.offset();this.window.scrollTo(s-d[0],l-d[1])}attemptFocus(n){return n.focus(),this.document.activeElement===n}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=ol(this.window.history)||ol(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch(n){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(n){return!1}}}function ol(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class Wo extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var i;i=new Wo,ee||(ee=i)}onAndCancel(n,r,s){return n.addEventListener(r,s,!1),()=>{n.removeEventListener(r,s,!1)}}dispatchEvent(n,r){n.dispatchEvent(r)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,r){return(r=r||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,r){return"window"===r?window:"document"===r?n:"body"===r?n.body:null}getBaseHref(n){const r=(Xs=Xs||document.querySelector("base"),Xs?Xs.getAttribute("href"):null);return null==r?null:function(i){Kc=Kc||document.createElement("a"),Kc.setAttribute("href",i);const n=Kc.pathname;return"/"===n.charAt(0)?n:`/${n}`}(r)}resetBaseElement(){Xs=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function(i,n){n=encodeURIComponent(n);for(const r of i.split(";")){const s=r.indexOf("="),[l,d]=-1==s?[r,""]:[r.slice(0,s),r.slice(s+1)];if(l.trim()===n)return decodeURIComponent(d)}return null}(document.cookie,n)}}let Kc,Xs=null;const Zg=new m.OlP("TRANSITION_ID"),Qc=[{provide:m.ip1,useFactory:function(i,n,r){return()=>{r.get(m.CZH).donePromise.then(()=>{const s=j(),l=n.querySelectorAll(`style[ng-transition="${i}"]`);for(let d=0;d<l.length;d++)s.remove(l[d])})}},deps:[Zg,Ee,m.zs3],multi:!0}];class on{static init(){(0,m.VLi)(new on)}addToWindow(n){m.dqk.getAngularTestability=(s,l=!0)=>{const d=n.findTestabilityInTree(s,l);if(null==d)throw new Error("Could not find testability for element.");return d},m.dqk.getAllAngularTestabilities=()=>n.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>n.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(s=>{const l=m.dqk.getAllAngularTestabilities();let d=l.length,f=!1;const E=function(C){f=f||C,d--,0==d&&s(f)};l.forEach(function(C){C.whenStable(E)})})}findTestabilityInTree(n,r,s){if(null==r)return null;const l=n.getTestability(r);return null!=l?l:s?j().isShadowRoot(r)?this.findTestabilityInTree(n,r.host,!0):this.findTestabilityInTree(n,r.parentElement,!0):null}}let Kg=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=m.Yz7({token:i,factory:i.\u0275fac}),i})();const Zo=new m.OlP("EventManagerPlugins");let fl=(()=>{class i{constructor(r,s){this._zone=s,this._eventNameToPlugin=new Map,r.forEach(l=>l.manager=this),this._plugins=r.slice().reverse()}addEventListener(r,s,l){return this._findPluginFor(s).addEventListener(r,s,l)}addGlobalEventListener(r,s,l){return this._findPluginFor(s).addGlobalEventListener(r,s,l)}getZone(){return this._zone}_findPluginFor(r){const s=this._eventNameToPlugin.get(r);if(s)return s;const l=this._plugins;for(let d=0;d<l.length;d++){const f=l[d];if(f.supports(r))return this._eventNameToPlugin.set(r,f),f}throw new Error(`No event manager plugin found for event ${r}`)}}return i.\u0275fac=function(r){return new(r||i)(m.LFG(Zo),m.LFG(m.R0b))},i.\u0275prov=m.Yz7({token:i,factory:i.\u0275fac}),i})();class pl{constructor(n){this._doc=n}addGlobalEventListener(n,r,s){const l=j().getGlobalEventTarget(this._doc,n);if(!l)throw new Error(`Unsupported event target ${l} for event ${r}`);return this.addEventListener(l,r,s)}}let qh=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(r){const s=new Set;r.forEach(l=>{this._stylesSet.has(l)||(this._stylesSet.add(l),s.add(l))}),this.onStylesAdded(s)}onStylesAdded(r){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=m.Yz7({token:i,factory:i.\u0275fac}),i})(),Ko=(()=>{class i extends qh{constructor(r){super(),this._doc=r,this._hostNodes=new Map,this._hostNodes.set(r.head,[])}_addStylesToHost(r,s,l){r.forEach(d=>{const f=this._doc.createElement("style");f.textContent=d,l.push(s.appendChild(f))})}addHost(r){const s=[];this._addStylesToHost(this._stylesSet,r,s),this._hostNodes.set(r,s)}removeHost(r){const s=this._hostNodes.get(r);s&&s.forEach(Qg),this._hostNodes.delete(r)}onStylesAdded(r){this._hostNodes.forEach((s,l)=>{this._addStylesToHost(r,l,s)})}ngOnDestroy(){this._hostNodes.forEach(r=>r.forEach(Qg))}}return i.\u0275fac=function(r){return new(r||i)(m.LFG(Ee))},i.\u0275prov=m.Yz7({token:i,factory:i.\u0275fac}),i})();function Qg(i){j().remove(i)}const Te={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},xt=/%COMP%/g;function no(i,n,r){for(let s=0;s<n.length;s++){let l=n[s];Array.isArray(l)?no(i,l,r):(l=l.replace(xt,i),r.push(l))}return r}function ev(i){return n=>{if("__ngUnwrap__"===n)return i;!1===i(n)&&(n.preventDefault(),n.returnValue=!1)}}let Yo=(()=>{class i{constructor(r,s,l){this.eventManager=r,this.sharedStylesHost=s,this.appId=l,this.rendererByCompId=new Map,this.defaultRenderer=new ro(r)}createRenderer(r,s){if(!r||!s)return this.defaultRenderer;switch(s.encapsulation){case m.ifc.Emulated:{let l=this.rendererByCompId.get(s.id);return l||(l=new io(this.eventManager,this.sharedStylesHost,s,this.appId),this.rendererByCompId.set(s.id,l)),l.applyToHost(r),l}case 1:case m.ifc.ShadowDom:return new Ss(this.eventManager,this.sharedStylesHost,r,s);default:if(!this.rendererByCompId.has(s.id)){const l=no(s.id,s.styles,[]);this.sharedStylesHost.addStyles(l),this.rendererByCompId.set(s.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(r){return new(r||i)(m.LFG(fl),m.LFG(Ko),m.LFG(m.AFp))},i.\u0275prov=m.Yz7({token:i,factory:i.\u0275fac}),i})();class ro{constructor(n){this.eventManager=n,this.data=Object.create(null)}destroy(){}createElement(n,r){return r?document.createElementNS(Te[r]||r,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,r){n.appendChild(r)}insertBefore(n,r,s){n&&n.insertBefore(r,s)}removeChild(n,r){n&&n.removeChild(r)}selectRootElement(n,r){let s="string"==typeof n?document.querySelector(n):n;if(!s)throw new Error(`The selector "${n}" did not match any elements`);return r||(s.textContent=""),s}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,r,s,l){if(l){r=l+":"+r;const d=Te[l];d?n.setAttributeNS(d,r,s):n.setAttribute(r,s)}else n.setAttribute(r,s)}removeAttribute(n,r,s){if(s){const l=Te[s];l?n.removeAttributeNS(l,r):n.removeAttribute(`${s}:${r}`)}else n.removeAttribute(r)}addClass(n,r){n.classList.add(r)}removeClass(n,r){n.classList.remove(r)}setStyle(n,r,s,l){l&(m.JOm.DashCase|m.JOm.Important)?n.style.setProperty(r,s,l&m.JOm.Important?"important":""):n.style[r]=s}removeStyle(n,r,s){s&m.JOm.DashCase?n.style.removeProperty(r):n.style[r]=""}setProperty(n,r,s){n[r]=s}setValue(n,r){n.nodeValue=r}listen(n,r,s){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,r,ev(s)):this.eventManager.addEventListener(n,r,ev(s))}}class io extends ro{constructor(n,r,s,l){super(n),this.component=s;const d=no(l+"-"+s.id,s.styles,[]);r.addStyles(d),this.contentAttr="_ngcontent-%COMP%".replace(xt,l+"-"+s.id),this.hostAttr=function(i){return"_nghost-%COMP%".replace(xt,i)}(l+"-"+s.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,r){const s=super.createElement(n,r);return super.setAttribute(s,this.contentAttr,""),s}}class Ss extends ro{constructor(n,r,s,l){super(n),this.sharedStylesHost=r,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=no(l.id,l.styles,[]);for(let f=0;f<d.length;f++){const E=document.createElement("style");E.textContent=d[f],this.shadowRoot.appendChild(E)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,r){return super.appendChild(this.nodeOrShadowRoot(n),r)}insertBefore(n,r,s){return super.insertBefore(this.nodeOrShadowRoot(n),r,s)}removeChild(n,r){return super.removeChild(this.nodeOrShadowRoot(n),r)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let Kh=(()=>{class i extends pl{constructor(r){super(r)}supports(r){return!0}addEventListener(r,s,l){return r.addEventListener(s,l,!1),()=>this.removeEventListener(r,s,l)}removeEventListener(r,s,l){return r.removeEventListener(s,l)}}return i.\u0275fac=function(r){return new(r||i)(m.LFG(Ee))},i.\u0275prov=m.Yz7({token:i,factory:i.\u0275fac}),i})();const yl=["alt","control","meta","shift"],nm={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},rm={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Lr={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let Jo=(()=>{class i extends pl{constructor(r){super(r)}supports(r){return null!=i.parseEventName(r)}addEventListener(r,s,l){const d=i.parseEventName(s),f=i.eventCallback(d.fullKey,l,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>j().onAndCancel(r,d.domEventName,f))}static parseEventName(r){const s=r.toLowerCase().split("."),l=s.shift();if(0===s.length||"keydown"!==l&&"keyup"!==l)return null;const d=i._normalizeKey(s.pop());let f="";if(yl.forEach(C=>{const S=s.indexOf(C);S>-1&&(s.splice(S,1),f+=C+".")}),f+=d,0!=s.length||0===d.length)return null;const E={};return E.domEventName=l,E.fullKey=f,E}static getEventFullKey(r){let s="",l=function(i){let n=i.key;if(null==n){if(n=i.keyIdentifier,null==n)return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),3===i.location&&rm.hasOwnProperty(n)&&(n=rm[n]))}return nm[n]||n}(r);return l=l.toLowerCase()," "===l?l="space":"."===l&&(l="dot"),yl.forEach(d=>{d!=l&&Lr[d](r)&&(s+=d+".")}),s+=l,s}static eventCallback(r,s,l){return d=>{i.getEventFullKey(d)===r&&l.runGuarded(()=>s(d))}}static _normalizeKey(r){switch(r){case"esc":return"escape";default:return r}}}return i.\u0275fac=function(r){return new(r||i)(m.LFG(Ee))},i.\u0275prov=m.Yz7({token:i,factory:i.\u0275fac}),i})();const ov=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function(){Wo.makeCurrent(),on.init()},multi:!0},{provide:Ee,useFactory:function(){return(0,m.RDi)(document),document},deps:[]}]),so=[[],{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function(){return new m.qLn},deps:[]},{provide:Zo,useClass:Kh,multi:!0,deps:[Ee,m.R0b,m.Lbi]},{provide:Zo,useClass:Jo,multi:!0,deps:[Ee]},[],{provide:Yo,useClass:Yo,deps:[fl,Ko,m.AFp]},{provide:m.FYo,useExisting:Yo},{provide:qh,useExisting:Ko},{provide:Ko,useClass:Ko,deps:[Ee]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b]},{provide:fl,useClass:fl,deps:[Zo,m.R0b]},{provide:class{},useClass:Kg,deps:[]},[]];let Xo=(()=>{class i{constructor(r){if(r)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(r){return{ngModule:i,providers:[{provide:m.AFp,useValue:r.appId},{provide:Zg,useExisting:m.AFp},Qc]}}}return i.\u0275fac=function(r){return new(r||i)(m.LFG(i,12))},i.\u0275mod=m.oAB({type:i}),i.\u0275inj=m.cJS({providers:so,imports:[zg,m.hGG]}),i})();"undefined"!=typeof window&&window;class sd{}const ts="*";function xs(i,n){return{type:7,name:i,definitions:n,options:{}}}function ea(i,n=null){return{type:4,styles:n,timings:i}}function Ja(i,n=null){return{type:2,steps:i,options:n}}function Hn(i){return{type:6,styles:i,offset:null}}function ns(i,n,r=null){return{type:1,expr:i,animation:n,options:r}}function bl(i,n,r=null){return{type:11,selector:i,animation:n,options:r}}function ta(i){Promise.resolve(null).then(i)}class na{constructor(n=0,r=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=n+r}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._onStartFns.push(n)}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ta(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(s=>s()),r.length=0}}class df{constructor(n){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=n;let r=0,s=0,l=0;const d=this.players.length;0==d?ta(()=>this._onFinish()):this.players.forEach(f=>{f.onDone(()=>{++r==d&&this._onFinish()}),f.onDestroy(()=>{++s==d&&this._onDestroy()}),f.onStart(()=>{++l==d&&this._onStart()})}),this.totalTime=this.players.reduce((f,E)=>Math.max(f,E.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const r=n*this.totalTime;this.players.forEach(s=>{const l=s.totalTime?Math.min(1,r/s.totalTime):1;s.setPosition(l)})}getPosition(){const n=this.players.reduce((r,s)=>null===r||s.totalTime>r.totalTime?s:r,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(s=>s()),r.length=0}}function rs(){return"undefined"!=typeof window&&void 0!==window.document}function ud(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function is(i){switch(i.length){case 0:return new na;case 1:return i[0];default:return new df(i)}}function ld(i,n,r,s,l={},d={}){const f=[],E=[];let C=-1,S=null;if(s.forEach(x=>{const N=x.offset,V=N==C,B=V&&S||{};Object.keys(x).forEach(W=>{let fe=W,De=x[W];if("offset"!==W)switch(fe=n.normalizePropertyName(fe,f),De){case"!":De=l[W];break;case ts:De=d[W];break;default:De=n.normalizeStyleValue(W,fe,De,f)}B[fe]=De}),V||E.push(B),S=B,C=N}),f.length){const x="\n - ";throw new Error(`Unable to animate due to the following errors:${x}${f.join(x)}`)}return E}function ss(i,n,r,s){switch(n){case"start":i.onStart(()=>s(r&&ao(r,"start",i)));break;case"done":i.onDone(()=>s(r&&ao(r,"done",i)));break;case"destroy":i.onDestroy(()=>s(r&&ao(r,"destroy",i)))}}function ao(i,n,r){const s=r.totalTime,d=uo(i.element,i.triggerName,i.fromState,i.toState,n||i.phaseName,null==s?i.totalTime:s,!!r.disabled),f=i._data;return null!=f&&(d._data=f),d}function uo(i,n,r,s,l="",d=0,f){return{element:i,triggerName:n,fromState:r,toState:s,phaseName:l,totalTime:d,disabled:!!f}}function Qn(i,n,r){let s;return i instanceof Map?(s=i.get(n),s||i.set(n,s=r)):(s=i[n],s||(s=i[n]=r)),s}function cd(i){const n=i.indexOf(":");return[i.substring(1,n),i.substr(n+1)]}let Ns=(i,n)=>!1,am=(i,n)=>!1,cv=(i,n,r)=>[];const yn=ud();(yn||"undefined"!=typeof Element)&&(Ns=rs()?(i,n)=>{for(;n&&n!==document.documentElement;){if(n===i)return!0;n=n.parentNode||n.host}return!1}:(i,n)=>i.contains(n),am=(()=>{if(yn||Element.prototype.matches)return(i,n)=>i.matches(n);{const i=Element.prototype,n=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector;return n?(r,s)=>n.apply(r,[s]):am}})(),cv=(i,n,r)=>{let s=[];if(r){const l=i.querySelectorAll(n);for(let d=0;d<l.length;d++)s.push(l[d])}else{const l=i.querySelector(n);l&&s.push(l)}return s});let lo=null,ff=!1;function lm(i){lo||(lo=("undefined"!=typeof document?document.body:null)||{},ff=!!lo.style&&"WebkitAppearance"in lo.style);let n=!0;return lo.style&&!function(i){return"ebkit"==i.substring(1,6)}(i)&&(n=i in lo.style,!n&&ff&&(n="Webkit"+i.charAt(0).toUpperCase()+i.substr(1)in lo.style)),n}const Cl=am,dd=Ns,dm=cv;function pf(i){const n={};return Object.keys(i).forEach(r=>{const s=r.replace(/([a-z])([A-Z])/g,"$1-$2");n[s]=i[r]}),n}let Il=(()=>{class i{validateStyleProperty(r){return lm(r)}matchesElement(r,s){return Cl(r,s)}containsElement(r,s){return dd(r,s)}query(r,s,l){return dm(r,s,l)}computeStyle(r,s,l){return l||""}animate(r,s,l,d,f,E=[],C){return new na(l,d)}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=m.Yz7({token:i,factory:i.\u0275fac}),i})(),co=(()=>{class i{}return i.NOOP=new Il,i})();const Xa="ng-enter",Ms="ng-leave",Er="ng-trigger",wr=".ng-trigger",Dl="ng-animating",Fi=".ng-animating";function Vr(i){if("number"==typeof i)return i;const n=i.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:eu(parseFloat(n[1]),n[2])}function eu(i,n){switch(n){case"s":return 1e3*i;default:return i}}function tu(i,n,r){return i.hasOwnProperty("duration")?i:function(i,n,r){let l,d=0,f="";if("string"==typeof i){const E=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===E)return n.push(`The provided timing value "${i}" is invalid.`),{duration:0,delay:0,easing:""};l=eu(parseFloat(E[1]),E[2]);const C=E[3];null!=C&&(d=eu(parseFloat(C),E[4]));const S=E[5];S&&(f=S)}else l=i;if(!r){let E=!1,C=n.length;l<0&&(n.push("Duration values below 0 are not allowed for this animation step."),E=!0),d<0&&(n.push("Delay values below 0 are not allowed for this animation step."),E=!0),E&&n.splice(C,0,`The provided timing value "${i}" is invalid.`)}return{duration:l,delay:d,easing:f}}(i,n,r)}function ia(i,n={}){return Object.keys(i).forEach(r=>{n[r]=i[r]}),n}function Os(i,n,r={}){if(n)for(let s in i)r[s]=i[s];else ia(i,r);return r}function or(i,n,r){return r?n+":"+r+";":""}function nu(i){let n="";for(let r=0;r<i.style.length;r++){const s=i.style.item(r);n+=or(0,s,i.style.getPropertyValue(s))}for(const r in i.style)i.style.hasOwnProperty(r)&&!r.startsWith("_")&&(n+=or(0,fd(r),i.style[r]));i.setAttribute("style",n)}function Jn(i,n,r){i.style&&(Object.keys(n).forEach(s=>{const l=sa(s);r&&!r.hasOwnProperty(s)&&(r[s]=i.style[l]),i.style[l]=n[s]}),ud()&&nu(i))}function ru(i,n){i.style&&(Object.keys(n).forEach(r=>{const s=sa(r);i.style[s]=""}),ud()&&nu(i))}function ho(i){return Array.isArray(i)?1==i.length?i[0]:Ja(i):i}const gf=new RegExp("{{\\s*(.+?)\\s*}}","g");function fm(i){let n=[];if("string"==typeof i){let r;for(;r=gf.exec(i);)n.push(r[1]);gf.lastIndex=0}return n}function iu(i,n,r){const s=i.toString(),l=s.replace(gf,(d,f)=>{let E=n[f];return n.hasOwnProperty(f)||(r.push(`Please provide a value for the animation param ${f}`),E=""),E.toString()});return l==s?i:l}function hd(i){const n=[];let r=i.next();for(;!r.done;)n.push(r.value),r=i.next();return n}const Tl=/-+([a-z0-9])/g;function sa(i){return i.replace(Tl,(...n)=>n[1].toUpperCase())}function fd(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function pv(i,n){return 0===i||0===n}function fo(i,n,r){const s=Object.keys(r);if(s.length&&n.length){let d=n[0],f=[];if(s.forEach(E=>{d.hasOwnProperty(E)||f.push(E),d[E]=r[E]}),f.length)for(var l=1;l<n.length;l++){let E=n[l];f.forEach(function(C){E[C]=os(i,C)})}}return n}function br(i,n,r){switch(n.type){case 7:return i.visitTrigger(n,r);case 0:return i.visitState(n,r);case 1:return i.visitTransition(n,r);case 2:return i.visitSequence(n,r);case 3:return i.visitGroup(n,r);case 4:return i.visitAnimate(n,r);case 5:return i.visitKeyframes(n,r);case 6:return i.visitStyle(n,r);case 8:return i.visitReference(n,r);case 9:return i.visitAnimateChild(n,r);case 10:return i.visitAnimateRef(n,r);case 11:return i.visitQuery(n,r);case 12:return i.visitStagger(n,r);default:throw new Error(`Unable to resolve animation metadata node #${n.type}`)}}function os(i,n){return window.getComputedStyle(i)[n]}function mf(i,n){const r=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(s=>function(i,n,r){if(":"==i[0]){const C=function(i,n){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(r,s)=>parseFloat(s)>parseFloat(r);case":decrement":return(r,s)=>parseFloat(s)<parseFloat(r);default:return n.push(`The transition alias value "${i}" is not supported`),"* => *"}}(i,r);if("function"==typeof C)return void n.push(C);i=C}const s=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==s||s.length<4)return r.push(`The provided transition expression "${i}" is not supported`),n;const l=s[1],d=s[2],f=s[3];n.push(ua(l,f));"<"==d[0]&&!("*"==l&&"*"==f)&&n.push(ua(f,l))}(s,r,n)):r.push(i),r}const yf=new Set(["true","1"]),aa=new Set(["false","0"]);function ua(i,n){const r=yf.has(i)||aa.has(i),s=yf.has(n)||aa.has(n);return(l,d)=>{let f="*"==i||i==l,E="*"==n||n==d;return!f&&r&&"boolean"==typeof l&&(f=l?yf.has(i):aa.has(i)),!E&&s&&"boolean"==typeof d&&(E=d?yf.has(n):aa.has(n)),f&&E}}const gv=new RegExp("s*:selfs*,?","g");function _n(i,n,r){return new $b(i).build(n,r)}class $b{constructor(n){this._driver=n}build(n,r){const s=new _f(r);return this._resetContextStyleTimingState(s),br(this,ho(n),s)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles={},n.collectedStyles[""]={},n.currentTime=0}visitTrigger(n,r){let s=r.queryCount=0,l=r.depCount=0;const d=[],f=[];return"@"==n.name.charAt(0)&&r.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),n.definitions.forEach(E=>{if(this._resetContextStyleTimingState(r),0==E.type){const C=E,S=C.name;S.toString().split(/\s*,\s*/).forEach(x=>{C.name=x,d.push(this.visitState(C,r))}),C.name=S}else if(1==E.type){const C=this.visitTransition(E,r);s+=C.queryCount,l+=C.depCount,f.push(C)}else r.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:n.name,states:d,transitions:f,queryCount:s,depCount:l,options:null}}visitState(n,r){const s=this.visitStyle(n.styles,r),l=n.options&&n.options.params||null;if(s.containsDynamicStyles){const d=new Set,f=l||{};if(s.styles.forEach(E=>{if(xl(E)){const C=E;Object.keys(C).forEach(S=>{fm(C[S]).forEach(x=>{f.hasOwnProperty(x)||d.add(x)})})}}),d.size){const E=hd(d.values());r.errors.push(`state("${n.name}", ...) must define default values for all the following style substitutions: ${E.join(", ")}`)}}return{type:0,name:n.name,style:s,options:l?{params:l}:null}}visitTransition(n,r){r.queryCount=0,r.depCount=0;const s=br(this,ho(n.animation),r);return{type:1,matchers:mf(n.expr,r.errors),animation:s,queryCount:r.queryCount,depCount:r.depCount,options:mi(n.options)}}visitSequence(n,r){return{type:2,steps:n.steps.map(s=>br(this,s,r)),options:mi(n.options)}}visitGroup(n,r){const s=r.currentTime;let l=0;const d=n.steps.map(f=>{r.currentTime=s;const E=br(this,f,r);return l=Math.max(l,r.currentTime),E});return r.currentTime=l,{type:3,steps:d,options:mi(n.options)}}visitAnimate(n,r){const s=function(i,n){let r=null;if(i.hasOwnProperty("duration"))r=i;else if("number"==typeof i)return Ur(tu(i,n).duration,0,"");const s=i;if(s.split(/\s+/).some(d=>"{"==d.charAt(0)&&"{"==d.charAt(1))){const d=Ur(0,0,"");return d.dynamic=!0,d.strValue=s,d}return r=r||tu(s,n),Ur(r.duration,r.delay,r.easing)}(n.timings,r.errors);r.currentAnimateTimings=s;let l,d=n.styles?n.styles:Hn({});if(5==d.type)l=this.visitKeyframes(d,r);else{let f=n.styles,E=!1;if(!f){E=!0;const S={};s.easing&&(S.easing=s.easing),f=Hn(S)}r.currentTime+=s.duration+s.delay;const C=this.visitStyle(f,r);C.isEmptyStep=E,l=C}return r.currentAnimateTimings=null,{type:4,timings:s,style:l,options:null}}visitStyle(n,r){const s=this._makeStyleAst(n,r);return this._validateStyleAst(s,r),s}_makeStyleAst(n,r){const s=[];Array.isArray(n.styles)?n.styles.forEach(f=>{"string"==typeof f?f==ts?s.push(f):r.errors.push(`The provided style string value ${f} is not allowed.`):s.push(f)}):s.push(n.styles);let l=!1,d=null;return s.forEach(f=>{if(xl(f)){const E=f,C=E.easing;if(C&&(d=C,delete E.easing),!l)for(let S in E)if(E[S].toString().indexOf("{{")>=0){l=!0;break}}}),{type:6,styles:s,easing:d,offset:n.offset,containsDynamicStyles:l,options:null}}_validateStyleAst(n,r){const s=r.currentAnimateTimings;let l=r.currentTime,d=r.currentTime;s&&d>0&&(d-=s.duration+s.delay),n.styles.forEach(f=>{"string"!=typeof f&&Object.keys(f).forEach(E=>{if(!this._driver.validateStyleProperty(E))return void r.errors.push(`The provided animation property "${E}" is not a supported CSS property for animations`);const C=r.collectedStyles[r.currentQuerySelector],S=C[E];let x=!0;S&&(d!=l&&d>=S.startTime&&l<=S.endTime&&(r.errors.push(`The CSS property "${E}" that exists between the times of "${S.startTime}ms" and "${S.endTime}ms" is also being animated in a parallel animation between the times of "${d}ms" and "${l}ms"`),x=!1),d=S.startTime),x&&(C[E]={startTime:d,endTime:l}),r.options&&function(i,n,r){const s=n.params||{},l=fm(i);l.length&&l.forEach(d=>{s.hasOwnProperty(d)||r.push(`Unable to resolve the local animation param ${d} in the given list of values`)})}(f[E],r.options,r.errors)})})}visitKeyframes(n,r){const s={type:5,styles:[],options:null};if(!r.currentAnimateTimings)return r.errors.push("keyframes() must be placed inside of a call to animate()"),s;let d=0;const f=[];let E=!1,C=!1,S=0;const x=n.steps.map($e=>{const We=this._makeStyleAst($e,r);let Ge=null!=We.offset?We.offset:function(i){if("string"==typeof i)return null;let n=null;if(Array.isArray(i))i.forEach(r=>{if(xl(r)&&r.hasOwnProperty("offset")){const s=r;n=parseFloat(s.offset),delete s.offset}});else if(xl(i)&&i.hasOwnProperty("offset")){const r=i;n=parseFloat(r.offset),delete r.offset}return n}(We.styles),Ze=0;return null!=Ge&&(d++,Ze=We.offset=Ge),C=C||Ze<0||Ze>1,E=E||Ze<S,S=Ze,f.push(Ze),We});C&&r.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),E&&r.errors.push("Please ensure that all keyframe offsets are in order");const N=n.steps.length;let V=0;d>0&&d<N?r.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==d&&(V=1/(N-1));const B=N-1,W=r.currentTime,fe=r.currentAnimateTimings,De=fe.duration;return x.forEach(($e,We)=>{const Ge=V>0?We==B?1:V*We:f[We],Ze=Ge*De;r.currentTime=W+fe.delay+Ze,fe.duration=Ze,this._validateStyleAst($e,r),$e.offset=Ge,s.styles.push($e)}),s}visitReference(n,r){return{type:8,animation:br(this,ho(n.animation),r),options:mi(n.options)}}visitAnimateChild(n,r){return r.depCount++,{type:9,options:mi(n.options)}}visitAnimateRef(n,r){return{type:10,animation:this.visitReference(n.animation,r),options:mi(n.options)}}visitQuery(n,r){const s=r.currentQuerySelector,l=n.options||{};r.queryCount++,r.currentQuery=n;const[d,f]=function(i){const n=!!i.split(/\s*,\s*/).find(r=>":self"==r);return n&&(i=i.replace(gv,"")),[i=i.replace(/@\*/g,wr).replace(/@\w+/g,r=>wr+"-"+r.substr(1)).replace(/:animating/g,Fi),n]}(n.selector);r.currentQuerySelector=s.length?s+" "+d:d,Qn(r.collectedStyles,r.currentQuerySelector,{});const E=br(this,ho(n.animation),r);return r.currentQuery=null,r.currentQuerySelector=s,{type:11,selector:d,limit:l.limit||0,optional:!!l.optional,includeSelf:f,animation:E,originalSelector:n.selector,options:mi(n.options)}}visitStagger(n,r){r.currentQuery||r.errors.push("stagger() can only be used inside of query()");const s="full"===n.timings?{duration:0,delay:0,easing:"full"}:tu(n.timings,r.errors,!0);return{type:12,animation:br(this,ho(n.animation),r),timings:s,options:null}}}class _f{constructor(n){this.errors=n,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function xl(i){return!Array.isArray(i)&&"object"==typeof i}function mi(i){return i?(i=ia(i)).params&&(i.params=function(i){return i?ia(i):null}(i.params)):i={},i}function Ur(i,n,r){return{duration:i,delay:n,easing:r}}function su(i,n,r,s,l,d,f=null,E=!1){return{type:1,element:i,keyframes:n,preStyleProps:r,postStyleProps:s,duration:l,delay:d,totalTime:l+d,easing:f,subTimeline:E}}class Li{constructor(){this._map=new Map}consume(n){let r=this._map.get(n);return r?this._map.delete(n):r=[],r}append(n,r){let s=this._map.get(n);s||this._map.set(n,s=[]),s.push(...r)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const vf=new RegExp(":enter","g"),ym=new RegExp(":leave","g");function Ef(i,n,r,s,l,d={},f={},E,C,S=[]){return(new wf).buildKeyframes(i,n,r,s,l,d,f,E,C,S)}class wf{buildKeyframes(n,r,s,l,d,f,E,C,S,x=[]){S=S||new Li;const N=new ca(n,r,S,l,d,x,[]);N.options=C,N.currentTimeline.setStyles([f],null,N.errors,C),br(this,s,N);const V=N.timelines.filter(B=>B.containsAnimation());if(V.length&&Object.keys(E).length){const B=V[V.length-1];B.allowOnlyTimelineStyles()||B.setStyles([E],null,N.errors,C)}return V.length?V.map(B=>B.buildKeyframes()):[su(r,[],[],[],0,0,"",!1)]}visitTrigger(n,r){}visitState(n,r){}visitTransition(n,r){}visitAnimateChild(n,r){const s=r.subInstructions.consume(r.element);if(s){const l=r.createSubContext(n.options),d=r.currentTimeline.currentTime,f=this._visitSubInstructions(s,l,l.options);d!=f&&r.transformIntoNewTimeline(f)}r.previousNode=n}visitAnimateRef(n,r){const s=r.createSubContext(n.options);s.transformIntoNewTimeline(),this.visitReference(n.animation,s),r.transformIntoNewTimeline(s.currentTimeline.currentTime),r.previousNode=n}_visitSubInstructions(n,r,s){let d=r.currentTimeline.currentTime;const f=null!=s.duration?Vr(s.duration):null,E=null!=s.delay?Vr(s.delay):null;return 0!==f&&n.forEach(C=>{const S=r.appendInstructionToTimeline(C,f,E);d=Math.max(d,S.duration+S.delay)}),d}visitReference(n,r){r.updateOptions(n.options,!0),br(this,n.animation,r),r.previousNode=n}visitSequence(n,r){const s=r.subContextCount;let l=r;const d=n.options;if(d&&(d.params||d.delay)&&(l=r.createSubContext(d),l.transformIntoNewTimeline(),null!=d.delay)){6==l.previousNode.type&&(l.currentTimeline.snapshotCurrentStyles(),l.previousNode=Ps);const f=Vr(d.delay);l.delayNextStep(f)}n.steps.length&&(n.steps.forEach(f=>br(this,f,l)),l.currentTimeline.applyStylesToKeyframe(),l.subContextCount>s&&l.transformIntoNewTimeline()),r.previousNode=n}visitGroup(n,r){const s=[];let l=r.currentTimeline.currentTime;const d=n.options&&n.options.delay?Vr(n.options.delay):0;n.steps.forEach(f=>{const E=r.createSubContext(n.options);d&&E.delayNextStep(d),br(this,f,E),l=Math.max(l,E.currentTimeline.currentTime),s.push(E.currentTimeline)}),s.forEach(f=>r.currentTimeline.mergeTimelineCollectedStyles(f)),r.transformIntoNewTimeline(l),r.previousNode=n}_visitTiming(n,r){if(n.dynamic){const s=n.strValue;return tu(r.params?iu(s,r.params,r.errors):s,r.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,r){const s=r.currentAnimateTimings=this._visitTiming(n.timings,r),l=r.currentTimeline;s.delay&&(r.incrementTime(s.delay),l.snapshotCurrentStyles());const d=n.style;5==d.type?this.visitKeyframes(d,r):(r.incrementTime(s.duration),this.visitStyle(d,r),l.applyStylesToKeyframe()),r.currentAnimateTimings=null,r.previousNode=n}visitStyle(n,r){const s=r.currentTimeline,l=r.currentAnimateTimings;!l&&s.getCurrentStyleProperties().length&&s.forwardFrame();const d=l&&l.easing||n.easing;n.isEmptyStep?s.applyEmptyStep(d):s.setStyles(n.styles,d,r.errors,r.options),r.previousNode=n}visitKeyframes(n,r){const s=r.currentAnimateTimings,l=r.currentTimeline.duration,d=s.duration,E=r.createSubContext().currentTimeline;E.easing=s.easing,n.styles.forEach(C=>{E.forwardTime((C.offset||0)*d),E.setStyles(C.styles,C.easing,r.errors,r.options),E.applyStylesToKeyframe()}),r.currentTimeline.mergeTimelineCollectedStyles(E),r.transformIntoNewTimeline(l+d),r.previousNode=n}visitQuery(n,r){const s=r.currentTimeline.currentTime,l=n.options||{},d=l.delay?Vr(l.delay):0;d&&(6===r.previousNode.type||0==s&&r.currentTimeline.getCurrentStyleProperties().length)&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Ps);let f=s;const E=r.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!l.optional,r.errors);r.currentQueryTotal=E.length;let C=null;E.forEach((S,x)=>{r.currentQueryIndex=x;const N=r.createSubContext(n.options,S);d&&N.delayNextStep(d),S===r.element&&(C=N.currentTimeline),br(this,n.animation,N),N.currentTimeline.applyStylesToKeyframe(),f=Math.max(f,N.currentTimeline.currentTime)}),r.currentQueryIndex=0,r.currentQueryTotal=0,r.transformIntoNewTimeline(f),C&&(r.currentTimeline.mergeTimelineCollectedStyles(C),r.currentTimeline.snapshotCurrentStyles()),r.previousNode=n}visitStagger(n,r){const s=r.parentContext,l=r.currentTimeline,d=n.timings,f=Math.abs(d.duration),E=f*(r.currentQueryTotal-1);let C=f*r.currentQueryIndex;switch(d.duration<0?"reverse":d.easing){case"reverse":C=E-C;break;case"full":C=s.currentStaggerTime}const x=r.currentTimeline;C&&x.delayNextStep(C);const N=x.currentTime;br(this,n.animation,r),r.previousNode=n,s.currentStaggerTime=l.currentTime-N+(l.startTime-s.currentTimeline.startTime)}}const Ps={};class ca{constructor(n,r,s,l,d,f,E,C){this._driver=n,this.element=r,this.subInstructions=s,this._enterClassName=l,this._leaveClassName=d,this.errors=f,this.timelines=E,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ps,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=C||new gd(this._driver,r,0),E.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,r){if(!n)return;const s=n;let l=this.options;null!=s.duration&&(l.duration=Vr(s.duration)),null!=s.delay&&(l.delay=Vr(s.delay));const d=s.params;if(d){let f=l.params;f||(f=this.options.params={}),Object.keys(d).forEach(E=>{(!r||!f.hasOwnProperty(E))&&(f[E]=iu(d[E],f,this.errors))})}}_copyOptions(){const n={};if(this.options){const r=this.options.params;if(r){const s=n.params={};Object.keys(r).forEach(l=>{s[l]=r[l]})}}return n}createSubContext(n=null,r,s){const l=r||this.element,d=new ca(this._driver,l,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(l,s||0));return d.previousNode=this.previousNode,d.currentAnimateTimings=this.currentAnimateTimings,d.options=this._copyOptions(),d.updateOptions(n),d.currentQueryIndex=this.currentQueryIndex,d.currentQueryTotal=this.currentQueryTotal,d.parentContext=this,this.subContextCount++,d}transformIntoNewTimeline(n){return this.previousNode=Ps,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,r,s){const l={duration:null!=r?r:n.duration,delay:this.currentTimeline.currentTime+(null!=s?s:0)+n.delay,easing:""},d=new Hb(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,l,n.stretchStartingKeyframe);return this.timelines.push(d),l}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,r,s,l,d,f){let E=[];if(l&&E.push(this.element),n.length>0){n=(n=n.replace(vf,"."+this._enterClassName)).replace(ym,"."+this._leaveClassName);let S=this._driver.query(this.element,n,1!=s);0!==s&&(S=s<0?S.slice(S.length+s,S.length):S.slice(0,s)),E.push(...S)}return!d&&0==E.length&&f.push(`\`query("${r}")\` returned zero elements. (Use \`query("${r}", { optional: true })\` if you wish to allow this.)`),E}}class gd{constructor(n,r,s,l){this._driver=n,this.element=r,this.startTime=s,this._elementTimelineStylesLookup=l,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(r),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(r,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const r=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||r?(this.forwardTime(this.currentTime+n),r&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,r){return this.applyStylesToKeyframe(),new gd(this._driver,n,r||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,r){this._localTimelineStyles[n]=r,this._globalTimelineStyles[n]=r,this._styleSummary[n]={time:this.currentTime,value:r}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&(this._previousKeyframe.easing=n),Object.keys(this._globalTimelineStyles).forEach(r=>{this._backFill[r]=this._globalTimelineStyles[r]||ts,this._currentKeyframe[r]=ts}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,r,s,l){r&&(this._previousKeyframe.easing=r);const d=l&&l.params||{},f=function(i,n){const r={};let s;return i.forEach(l=>{"*"===l?(s=s||Object.keys(n),s.forEach(d=>{r[d]=ts})):Os(l,!1,r)}),r}(n,this._globalTimelineStyles);Object.keys(f).forEach(E=>{const C=iu(f[E],d,s);this._pendingStyles[E]=C,this._localTimelineStyles.hasOwnProperty(E)||(this._backFill[E]=this._globalTimelineStyles.hasOwnProperty(E)?this._globalTimelineStyles[E]:ts),this._updateStyle(E,C)})}applyStylesToKeyframe(){const n=this._pendingStyles,r=Object.keys(n);0!=r.length&&(this._pendingStyles={},r.forEach(s=>{this._currentKeyframe[s]=n[s]}),Object.keys(this._localTimelineStyles).forEach(s=>{this._currentKeyframe.hasOwnProperty(s)||(this._currentKeyframe[s]=this._localTimelineStyles[s])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(n=>{const r=this._localTimelineStyles[n];this._pendingStyles[n]=r,this._updateStyle(n,r)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let r in this._currentKeyframe)n.push(r);return n}mergeTimelineCollectedStyles(n){Object.keys(n._styleSummary).forEach(r=>{const s=this._styleSummary[r],l=n._styleSummary[r];(!s||l.time>s.time)&&this._updateStyle(r,l.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,r=new Set,s=1===this._keyframes.size&&0===this.duration;let l=[];this._keyframes.forEach((E,C)=>{const S=Os(E,!0);Object.keys(S).forEach(x=>{const N=S[x];"!"==N?n.add(x):N==ts&&r.add(x)}),s||(S.offset=C/this.duration),l.push(S)});const d=n.size?hd(n.values()):[],f=r.size?hd(r.values()):[];if(s){const E=l[0],C=ia(E);E.offset=0,C.offset=1,l=[E,C]}return su(this.element,l,d,f,this.duration,this.startTime,this.easing,!1)}}class Hb extends gd{constructor(n,r,s,l,d,f,E=!1){super(n,r,f.delay),this.keyframes=s,this.preStyleProps=l,this.postStyleProps=d,this._stretchStartingKeyframe=E,this.timings={duration:f.duration,delay:f.delay,easing:f.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:r,duration:s,easing:l}=this.timings;if(this._stretchStartingKeyframe&&r){const d=[],f=s+r,E=r/f,C=Os(n[0],!1);C.offset=0,d.push(C);const S=Os(n[0],!1);S.offset=bf(E),d.push(S);const x=n.length-1;for(let N=1;N<=x;N++){let V=Os(n[N],!1);V.offset=bf((r+V.offset*s)/f),d.push(V)}s=f,r=0,l="",n=d}return su(this.element,n,this.preStyleProps,this.postStyleProps,s,r,l,!0)}}function bf(i,n=3){const r=Math.pow(10,n-1);return Math.round(i*r)/r}class Cf{}class _v extends Cf{normalizePropertyName(n,r){return sa(n)}normalizeStyleValue(n,r,s,l){let d="";const f=s.toString().trim();if(If[r]&&0!==s&&"0"!==s)if("number"==typeof s)d="px";else{const E=s.match(/^[+-]?[\d\.]+([a-z]*)$/);E&&0==E[1].length&&l.push(`Please provide a CSS unit value for ${n}:${s}`)}return f+d}}const If=(()=>function(i){const n={};return i.forEach(r=>n[r]=!0),n}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function vm(i,n,r,s,l,d,f,E,C,S,x,N,V){return{type:0,element:i,triggerName:n,isRemovalTransition:l,fromState:r,fromStyles:d,toState:s,toStyles:f,timelines:E,queriedElements:C,preStyleProps:S,postStyleProps:x,totalTime:N,errors:V}}const md={};class vv{constructor(n,r,s){this._triggerName=n,this.ast=r,this._stateStyles=s}match(n,r,s,l){return function(i,n,r,s,l){return i.some(d=>d(n,r,s,l))}(this.ast.matchers,n,r,s,l)}buildStyles(n,r,s){const l=this._stateStyles["*"],d=this._stateStyles[n],f=l?l.buildStyles(r,s):{};return d?d.buildStyles(r,s):f}build(n,r,s,l,d,f,E,C,S,x){const N=[],V=this.ast.options&&this.ast.options.params||md,W=this.buildStyles(s,E&&E.params||md,N),fe=C&&C.params||md,De=this.buildStyles(l,fe,N),$e=new Set,We=new Map,Ge=new Map,Ze="void"===l,Xt={params:Object.assign(Object.assign({},V),fe)},Zn=x?[]:Ef(n,r,this.ast.animation,d,f,W,De,Xt,S,N);let Or=0;if(Zn.forEach(Ws=>{Or=Math.max(Ws.duration+Ws.delay,Or)}),N.length)return vm(r,this._triggerName,s,l,Ze,W,De,[],[],We,Ge,Or,N);Zn.forEach(Ws=>{const Uc=Ws.element,aP=Qn(We,Uc,{});Ws.preStyleProps.forEach(Ug=>aP[Ug]=!0);const bb=Qn(Ge,Uc,{});Ws.postStyleProps.forEach(Ug=>bb[Ug]=!0),Uc!==r&&$e.add(Uc)});const Xi=hd($e.values());return vm(r,this._triggerName,s,l,Ze,W,De,Zn,Xi,We,Ge,Or)}}class Df{constructor(n,r,s){this.styles=n,this.defaultParams=r,this.normalizer=s}buildStyles(n,r){const s={},l=ia(this.defaultParams);return Object.keys(n).forEach(d=>{const f=n[d];null!=f&&(l[d]=f)}),this.styles.styles.forEach(d=>{if("string"!=typeof d){const f=d;Object.keys(f).forEach(E=>{let C=f[E];C.length>1&&(C=iu(C,l,r));const S=this.normalizer.normalizePropertyName(E,r);C=this.normalizer.normalizeStyleValue(E,S,C,r),s[S]=C})}}),s}}class wm{constructor(n,r,s){this.name=n,this.ast=r,this._normalizer=s,this.transitionFactories=[],this.states={},r.states.forEach(l=>{this.states[l.name]=new Df(l.style,l.options&&l.options.params||{},s)}),mo(this.states,"true","1"),mo(this.states,"false","0"),r.transitions.forEach(l=>{this.transitionFactories.push(new vv(n,l,this.states))}),this.fallbackTransition=function(i,n,r){return new vv(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(f,E)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,r,s,l){return this.transitionFactories.find(f=>f.match(n,r,s,l))||null}matchStyles(n,r,s){return this.fallbackTransition.buildStyles(n,r,s)}}function mo(i,n,r){i.hasOwnProperty(n)?i.hasOwnProperty(r)||(i[r]=i[n]):i.hasOwnProperty(r)&&(i[n]=i[r])}const Ev=new Li;class qb{constructor(n,r,s){this.bodyNode=n,this._driver=r,this._normalizer=s,this._animations={},this._playersById={},this.players=[]}register(n,r){const s=[],l=_n(this._driver,r,s);if(s.length)throw new Error(`Unable to build the animation due to the following errors: ${s.join("\n")}`);this._animations[n]=l}_buildPlayer(n,r,s){const l=n.element,d=ld(0,this._normalizer,0,n.keyframes,r,s);return this._driver.animate(l,d,n.duration,n.delay,n.easing,[],!0)}create(n,r,s={}){const l=[],d=this._animations[n];let f;const E=new Map;if(d?(f=Ef(this._driver,r,d,Xa,Ms,{},{},s,Ev,l),f.forEach(x=>{const N=Qn(E,x.element,{});x.postStyleProps.forEach(V=>N[V]=null)})):(l.push("The requested animation doesn't exist or has already been destroyed"),f=[]),l.length)throw new Error(`Unable to create the animation due to the following errors: ${l.join("\n")}`);E.forEach((x,N)=>{Object.keys(x).forEach(V=>{x[V]=this._driver.computeStyle(N,V,ts)})});const S=is(f.map(x=>{const N=E.get(x.element);return this._buildPlayer(x,{},N)}));return this._playersById[n]=S,S.onDestroy(()=>this.destroy(n)),this.players.push(S),S}destroy(n){const r=this._getPlayer(n);r.destroy(),delete this._playersById[n];const s=this.players.indexOf(r);s>=0&&this.players.splice(s,1)}_getPlayer(n){const r=this._playersById[n];if(!r)throw new Error(`Unable to find the timeline player referenced by ${n}`);return r}listen(n,r,s,l){const d=uo(r,"","","");return ss(this._getPlayer(n),s,d,l),()=>{}}command(n,r,s,l){if("register"==s)return void this.register(n,l[0]);if("create"==s)return void this.create(n,r,l[0]||{});const d=this._getPlayer(n);switch(s){case"play":d.play();break;case"pause":d.pause();break;case"reset":d.reset();break;case"restart":d.restart();break;case"finish":d.finish();break;case"init":d.init();break;case"setPosition":d.setPosition(parseFloat(l[0]));break;case"destroy":this.destroy(n)}}}const yo="ng-animate-queued",Cm="ng-animate-disabled",yi=".ng-animate-disabled",bv=[],Im={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Tf={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},_i="__ng_removed";class Sf{constructor(n,r=""){this.namespaceId=r;const s=n&&n.hasOwnProperty("value");if(this.value=null!=(i=s?n.value:n)?i:null,s){const d=ia(n);delete d.value,this.options=d}else this.options={};var i;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(n){const r=n.params;if(r){const s=this.options.params;Object.keys(r).forEach(l=>{null==s[l]&&(s[l]=r[l])})}}}const _o="void",Af=new Sf(_o);class Cv{constructor(n,r,s){this.id=n,this.hostElement=r,this._engine=s,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+n,Br(r,this._hostClassName)}listen(n,r,s,l){if(!this._triggers.hasOwnProperty(r))throw new Error(`Unable to listen on the animation trigger event "${s}" because the animation trigger "${r}" doesn't exist!`);if(null==s||0==s.length)throw new Error(`Unable to listen on the animation trigger "${r}" because the provided event is undefined!`);if("start"!=(i=s)&&"done"!=i)throw new Error(`The provided animation trigger event "${s}" for the animation trigger "${r}" is not supported!`);var i;const d=Qn(this._elementListeners,n,[]),f={name:r,phase:s,callback:l};d.push(f);const E=Qn(this._engine.statesByElement,n,{});return E.hasOwnProperty(r)||(Br(n,Er),Br(n,Er+"-"+r),E[r]=Af),()=>{this._engine.afterFlush(()=>{const C=d.indexOf(f);C>=0&&d.splice(C,1),this._triggers[r]||delete E[r]})}}register(n,r){return!this._triggers[n]&&(this._triggers[n]=r,!0)}_getTrigger(n){const r=this._triggers[n];if(!r)throw new Error(`The provided animation trigger "${n}" has not been registered!`);return r}trigger(n,r,s,l=!0){const d=this._getTrigger(r),f=new Rf(this.id,r,n);let E=this._engine.statesByElement.get(n);E||(Br(n,Er),Br(n,Er+"-"+r),this._engine.statesByElement.set(n,E={}));let C=E[r];const S=new Sf(s,this.id);if(!(s&&s.hasOwnProperty("value"))&&C&&S.absorbOptions(C.options),E[r]=S,C||(C=Af),S.value!==_o&&C.value===S.value){if(!function(i,n){const r=Object.keys(i),s=Object.keys(n);if(r.length!=s.length)return!1;for(let l=0;l<r.length;l++){const d=r[l];if(!n.hasOwnProperty(d)||i[d]!==n[d])return!1}return!0}(C.params,S.params)){const fe=[],De=d.matchStyles(C.value,C.params,fe),$e=d.matchStyles(S.value,S.params,fe);fe.length?this._engine.reportError(fe):this._engine.afterFlush(()=>{ru(n,De),Jn(n,$e)})}return}const V=Qn(this._engine.playersByElement,n,[]);V.forEach(fe=>{fe.namespaceId==this.id&&fe.triggerName==r&&fe.queued&&fe.destroy()});let B=d.matchTransition(C.value,S.value,n,S.params),W=!1;if(!B){if(!l)return;B=d.fallbackTransition,W=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:r,transition:B,fromState:C,toState:S,player:f,isFallbackTransition:W}),W||(Br(n,yo),f.onStart(()=>{Pl(n,yo)})),f.onDone(()=>{let fe=this.players.indexOf(f);fe>=0&&this.players.splice(fe,1);const De=this._engine.playersByElement.get(n);if(De){let $e=De.indexOf(f);$e>=0&&De.splice($e,1)}}),this.players.push(f),V.push(f),f}deregister(n){delete this._triggers[n],this._engine.statesByElement.forEach((r,s)=>{delete r[n]}),this._elementListeners.forEach((r,s)=>{this._elementListeners.set(s,r.filter(l=>l.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const r=this._engine.playersByElement.get(n);r&&(r.forEach(s=>s.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,r){const s=this._engine.driver.query(n,wr,!0);s.forEach(l=>{if(l[_i])return;const d=this._engine.fetchNamespacesByElement(l);d.size?d.forEach(f=>f.triggerLeaveAnimation(l,r,!1,!0)):this.clearElementCache(l)}),this._engine.afterFlushAnimationsDone(()=>s.forEach(l=>this.clearElementCache(l)))}triggerLeaveAnimation(n,r,s,l){const d=this._engine.statesByElement.get(n);if(d){const f=[];if(Object.keys(d).forEach(E=>{if(this._triggers[E]){const C=this.trigger(n,E,_o,l);C&&f.push(C)}}),f.length)return this._engine.markElementAsRemoved(this.id,n,!0,r),s&&is(f).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const r=this._elementListeners.get(n),s=this._engine.statesByElement.get(n);if(r&&s){const l=new Set;r.forEach(d=>{const f=d.name;if(l.has(f))return;l.add(f);const C=this._triggers[f].fallbackTransition,S=s[f]||Af,x=new Sf(_o),N=new Rf(this.id,f,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:f,transition:C,fromState:S,toState:x,player:N,isFallbackTransition:!0})})}}removeNode(n,r){const s=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,r),this.triggerLeaveAnimation(n,r,!0))return;let l=!1;if(s.totalAnimations){const d=s.players.length?s.playersByQueriedElement.get(n):[];if(d&&d.length)l=!0;else{let f=n;for(;f=f.parentNode;)if(s.statesByElement.get(f)){l=!0;break}}}if(this.prepareLeaveAnimationListeners(n),l)s.markElementAsRemoved(this.id,n,!1,r);else{const d=n[_i];(!d||d===Im)&&(s.afterFlush(()=>this.clearElementCache(n)),s.destroyInnerAnimations(n),s._onRemovalComplete(n,r))}}insertNode(n,r){Br(n,this._hostClassName)}drainQueuedTransitions(n){const r=[];return this._queue.forEach(s=>{const l=s.player;if(l.destroyed)return;const d=s.element,f=this._elementListeners.get(d);f&&f.forEach(E=>{if(E.name==s.triggerName){const C=uo(d,s.triggerName,s.fromState.value,s.toState.value);C._data=n,ss(s.player,E.phase,C,E.callback)}}),l.markedForDestroy?this._engine.afterFlush(()=>{l.destroy()}):r.push(s)}),this._queue=[],r.sort((s,l)=>{const d=s.transition.ast.depCount,f=l.transition.ast.depCount;return 0==d||0==f?d-f:this._engine.driver.containsElement(s.element,l.element)?1:-1})}destroy(n){this.players.forEach(r=>r.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}elementContainsData(n){let r=!1;return this._elementListeners.has(n)&&(r=!0),r=!!this._queue.find(s=>s.element===n)||r,r}}class Iv{constructor(n,r,s){this.bodyNode=n,this.driver=r,this._normalizer=s,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(l,d)=>{}}_onRemovalComplete(n,r){this.onRemovalComplete(n,r)}get queuedPlayers(){const n=[];return this._namespaceList.forEach(r=>{r.players.forEach(s=>{s.queued&&n.push(s)})}),n}createNamespace(n,r){const s=new Cv(n,r,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,r)?this._balanceNamespaceList(s,r):(this.newHostElements.set(r,s),this.collectEnterElement(r)),this._namespaceLookup[n]=s}_balanceNamespaceList(n,r){const s=this._namespaceList.length-1;if(s>=0){let l=!1;for(let d=s;d>=0;d--)if(this.driver.containsElement(this._namespaceList[d].hostElement,r)){this._namespaceList.splice(d+1,0,n),l=!0;break}l||this._namespaceList.splice(0,0,n)}else this._namespaceList.push(n);return this.namespacesByHostElement.set(r,n),n}register(n,r){let s=this._namespaceLookup[n];return s||(s=this.createNamespace(n,r)),s}registerTrigger(n,r,s){let l=this._namespaceLookup[n];l&&l.register(r,s)&&this.totalAnimations++}destroy(n,r){if(!n)return;const s=this._fetchNamespace(n);this.afterFlush(()=>{this.namespacesByHostElement.delete(s.hostElement),delete this._namespaceLookup[n];const l=this._namespaceList.indexOf(s);l>=0&&this._namespaceList.splice(l,1)}),this.afterFlushAnimationsDone(()=>s.destroy(r))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const r=new Set,s=this.statesByElement.get(n);if(s){const l=Object.keys(s);for(let d=0;d<l.length;d++){const f=s[l[d]].namespaceId;if(f){const E=this._fetchNamespace(f);E&&r.add(E)}}}return r}trigger(n,r,s,l){if(as(r)){const d=this._fetchNamespace(n);if(d)return d.trigger(r,s,l),!0}return!1}insertNode(n,r,s,l){if(!as(r))return;const d=r[_i];if(d&&d.setForRemoval){d.setForRemoval=!1,d.setForMove=!0;const f=this.collectedLeaveElements.indexOf(r);f>=0&&this.collectedLeaveElements.splice(f,1)}if(n){const f=this._fetchNamespace(n);f&&f.insertNode(r,s)}l&&this.collectEnterElement(r)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,r){r?this.disabledNodes.has(n)||(this.disabledNodes.add(n),Br(n,Cm)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),Pl(n,Cm))}removeNode(n,r,s,l){if(as(r)){const d=n?this._fetchNamespace(n):null;if(d?d.removeNode(r,l):this.markElementAsRemoved(n,r,!1,l),s){const f=this.namespacesByHostElement.get(r);f&&f.id!==n&&f.removeNode(r,l)}}else this._onRemovalComplete(r,l)}markElementAsRemoved(n,r,s,l){this.collectedLeaveElements.push(r),r[_i]={namespaceId:n,setForRemoval:l,hasAnimation:s,removedBeforeQueried:!1}}listen(n,r,s,l,d){return as(r)?this._fetchNamespace(n).listen(r,s,l,d):()=>{}}_buildInstruction(n,r,s,l,d){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,s,l,n.fromState.options,n.toState.options,r,d)}destroyInnerAnimations(n){let r=this.driver.query(n,wr,!0);r.forEach(s=>this.destroyActiveAnimationsForElement(s)),0!=this.playersByQueriedElement.size&&(r=this.driver.query(n,Fi,!0),r.forEach(s=>this.finishActiveQueriedAnimationOnElement(s)))}destroyActiveAnimationsForElement(n){const r=this.playersByElement.get(n);r&&r.forEach(s=>{s.queued?s.markedForDestroy=!0:s.destroy()})}finishActiveQueriedAnimationOnElement(n){const r=this.playersByQueriedElement.get(n);r&&r.forEach(s=>s.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return is(this.players).onDone(()=>n());n()})}processLeaveNode(n){const r=n[_i];if(r&&r.setForRemoval){if(n[_i]=Im,r.namespaceId){this.destroyInnerAnimations(n);const s=this._fetchNamespace(r.namespaceId);s&&s.clearElementCache(n)}this._onRemovalComplete(n,r.setForRemoval)}this.driver.matchesElement(n,yi)&&this.markElementAsDisabled(n,!1),this.driver.query(n,yi,!0).forEach(s=>{this.markElementAsDisabled(s,!1)})}flush(n=-1){let r=[];if(this.newHostElements.size&&(this.newHostElements.forEach((s,l)=>this._balanceNamespaceList(s,l)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let s=0;s<this.collectedEnterElements.length;s++)Br(this.collectedEnterElements[s],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const s=[];try{r=this._flushAnimations(s,n)}finally{for(let l=0;l<s.length;l++)s[l]()}}else for(let s=0;s<this.collectedLeaveElements.length;s++)this.processLeaveNode(this.collectedLeaveElements[s]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(s=>s()),this._flushFns=[],this._whenQuietFns.length){const s=this._whenQuietFns;this._whenQuietFns=[],r.length?is(r).onDone(()=>{s.forEach(l=>l())}):s.forEach(l=>l())}}reportError(n){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${n.join("\n")}`)}_flushAnimations(n,r){const s=new Li,l=[],d=new Map,f=[],E=new Map,C=new Map,S=new Map,x=new Set;this.disabledNodes.forEach(Xe=>{x.add(Xe);const ct=this.driver.query(Xe,".ng-animate-queued",!0);for(let Ct=0;Ct<ct.length;Ct++)x.add(ct[Ct])});const N=this.bodyNode,V=Array.from(this.statesByElement.keys()),B=Ml(V,this.collectedEnterElements),W=new Map;let fe=0;B.forEach((Xe,ct)=>{const Ct=Xa+fe++;W.set(ct,Ct),Xe.forEach(zt=>Br(zt,Ct))});const De=[],$e=new Set,We=new Set;for(let Xe=0;Xe<this.collectedLeaveElements.length;Xe++){const ct=this.collectedLeaveElements[Xe],Ct=ct[_i];Ct&&Ct.setForRemoval&&(De.push(ct),$e.add(ct),Ct.hasAnimation?this.driver.query(ct,".ng-star-inserted",!0).forEach(zt=>$e.add(zt)):We.add(ct))}const Ge=new Map,Ze=Ml(V,Array.from($e));Ze.forEach((Xe,ct)=>{const Ct=Ms+fe++;Ge.set(ct,Ct),Xe.forEach(zt=>Br(zt,Ct))}),n.push(()=>{B.forEach((Xe,ct)=>{const Ct=W.get(ct);Xe.forEach(zt=>Pl(zt,Ct))}),Ze.forEach((Xe,ct)=>{const Ct=Ge.get(ct);Xe.forEach(zt=>Pl(zt,Ct))}),De.forEach(Xe=>{this.processLeaveNode(Xe)})});const Xt=[],Zn=[];for(let Xe=this._namespaceList.length-1;Xe>=0;Xe--)this._namespaceList[Xe].drainQueuedTransitions(r).forEach(Ct=>{const zt=Ct.player,Yr=Ct.element;if(Xt.push(zt),this.collectedEnterElements.length){const Qu=Yr[_i];if(Qu&&Qu.setForMove)return void zt.destroy()}const Yu=!N||!this.driver.containsElement(N,Yr),Zs=Ge.get(Yr),xh=W.get(Yr),Kn=this._buildInstruction(Ct,s,xh,Zs,Yu);if(Kn.errors&&Kn.errors.length)Zn.push(Kn);else{if(Yu)return zt.onStart(()=>ru(Yr,Kn.fromStyles)),zt.onDestroy(()=>Jn(Yr,Kn.toStyles)),void l.push(zt);if(Ct.isFallbackTransition)return zt.onStart(()=>ru(Yr,Kn.fromStyles)),zt.onDestroy(()=>Jn(Yr,Kn.toStyles)),void l.push(zt);Kn.timelines.forEach(Qu=>Qu.stretchStartingKeyframe=!0),s.append(Yr,Kn.timelines),f.push({instruction:Kn,player:zt,element:Yr}),Kn.queriedElements.forEach(Qu=>Qn(E,Qu,[]).push(zt)),Kn.preStyleProps.forEach((Qu,Cb)=>{const FS=Object.keys(Qu);if(FS.length){let Bg=C.get(Cb);Bg||C.set(Cb,Bg=new Set),FS.forEach(vN=>Bg.add(vN))}}),Kn.postStyleProps.forEach((Qu,Cb)=>{const FS=Object.keys(Qu);let Bg=S.get(Cb);Bg||S.set(Cb,Bg=new Set),FS.forEach(vN=>Bg.add(vN))})}});if(Zn.length){const Xe=[];Zn.forEach(ct=>{Xe.push(`@${ct.triggerName} has failed due to:\n`),ct.errors.forEach(Ct=>Xe.push(`- ${Ct}\n`))}),Xt.forEach(ct=>ct.destroy()),this.reportError(Xe)}const Or=new Map,Xi=new Map;f.forEach(Xe=>{const ct=Xe.element;s.has(ct)&&(Xi.set(ct,ct),this._beforeAnimationBuild(Xe.player.namespaceId,Xe.instruction,Or))}),l.forEach(Xe=>{const ct=Xe.element;this._getPreviousPlayers(ct,!1,Xe.namespaceId,Xe.triggerName,null).forEach(zt=>{Qn(Or,ct,[]).push(zt),zt.destroy()})});const Ws=De.filter(Xe=>Tv(Xe,C,S)),Uc=new Map;vo(Uc,this.driver,We,S,ts).forEach(Xe=>{Tv(Xe,C,S)&&Ws.push(Xe)});const bb=new Map;B.forEach((Xe,ct)=>{vo(bb,this.driver,new Set(Xe),C,"!")}),Ws.forEach(Xe=>{const ct=Uc.get(Xe),Ct=bb.get(Xe);Uc.set(Xe,Object.assign(Object.assign({},ct),Ct))});const Ug=[],uP=[],lP={};f.forEach(Xe=>{const{element:ct,player:Ct,instruction:zt}=Xe;if(s.has(ct)){if(x.has(ct))return Ct.onDestroy(()=>Jn(ct,zt.toStyles)),Ct.disabled=!0,Ct.overrideTotalTime(zt.totalTime),void l.push(Ct);let Yr=lP;if(Xi.size>1){let Zs=ct;const xh=[];for(;Zs=Zs.parentNode;){const Kn=Xi.get(Zs);if(Kn){Yr=Kn;break}xh.push(Zs)}xh.forEach(Kn=>Xi.set(Kn,Yr))}const Yu=this._buildAnimation(Ct.namespaceId,zt,Or,d,bb,Uc);if(Ct.setRealPlayer(Yu),Yr===lP)Ug.push(Ct);else{const Zs=this.playersByElement.get(Yr);Zs&&Zs.length&&(Ct.parentPlayer=is(Zs)),l.push(Ct)}}else ru(ct,zt.fromStyles),Ct.onDestroy(()=>Jn(ct,zt.toStyles)),uP.push(Ct),x.has(ct)&&l.push(Ct)}),uP.forEach(Xe=>{const ct=d.get(Xe.element);if(ct&&ct.length){const Ct=is(ct);Xe.setRealPlayer(Ct)}}),l.forEach(Xe=>{Xe.parentPlayer?Xe.syncPlayerEvents(Xe.parentPlayer):Xe.destroy()});for(let Xe=0;Xe<De.length;Xe++){const ct=De[Xe],Ct=ct[_i];if(Pl(ct,Ms),Ct&&Ct.hasAnimation)continue;let zt=[];if(E.size){let Yu=E.get(ct);Yu&&Yu.length&&zt.push(...Yu);let Zs=this.driver.query(ct,Fi,!0);for(let xh=0;xh<Zs.length;xh++){let Kn=E.get(Zs[xh]);Kn&&Kn.length&&zt.push(...Kn)}}const Yr=zt.filter(Yu=>!Yu.destroyed);Yr.length?Wb(this,ct,Yr):this.processLeaveNode(ct)}return De.length=0,Ug.forEach(Xe=>{this.players.push(Xe),Xe.onDone(()=>{Xe.destroy();const ct=this.players.indexOf(Xe);this.players.splice(ct,1)}),Xe.play()}),Ug}elementContainsData(n,r){let s=!1;const l=r[_i];return l&&l.setForRemoval&&(s=!0),this.playersByElement.has(r)&&(s=!0),this.playersByQueriedElement.has(r)&&(s=!0),this.statesByElement.has(r)&&(s=!0),this._fetchNamespace(n).elementContainsData(r)||s}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,r,s,l,d){let f=[];if(r){const E=this.playersByQueriedElement.get(n);E&&(f=E)}else{const E=this.playersByElement.get(n);if(E){const C=!d||d==_o;E.forEach(S=>{S.queued||!C&&S.triggerName!=l||f.push(S)})}}return(s||l)&&(f=f.filter(E=>!(s&&s!=E.namespaceId||l&&l!=E.triggerName))),f}_beforeAnimationBuild(n,r,s){const d=r.element,f=r.isRemovalTransition?void 0:n,E=r.isRemovalTransition?void 0:r.triggerName;for(const C of r.timelines){const S=C.element,x=S!==d,N=Qn(s,S,[]);this._getPreviousPlayers(S,x,f,E,r.toState).forEach(B=>{const W=B.getRealPlayer();W.beforeDestroy&&W.beforeDestroy(),B.destroy(),N.push(B)})}ru(d,r.fromStyles)}_buildAnimation(n,r,s,l,d,f){const E=r.triggerName,C=r.element,S=[],x=new Set,N=new Set,V=r.timelines.map(W=>{const fe=W.element;x.add(fe);const De=fe[_i];if(De&&De.removedBeforeQueried)return new na(W.duration,W.delay);const $e=fe!==C,We=function(i){const n=[];return kl(i,n),n}((s.get(fe)||bv).map(Or=>Or.getRealPlayer())).filter(Or=>!!Or.element&&Or.element===fe),Ge=d.get(fe),Ze=f.get(fe),Xt=ld(0,this._normalizer,0,W.keyframes,Ge,Ze),Zn=this._buildPlayer(W,Xt,We);if(W.subTimeline&&l&&N.add(fe),$e){const Or=new Rf(n,E,fe);Or.setRealPlayer(Zn),S.push(Or)}return Zn});S.forEach(W=>{Qn(this.playersByQueriedElement,W.element,[]).push(W),W.onDone(()=>function(i,n,r){let s;if(i instanceof Map){if(s=i.get(n),s){if(s.length){const l=s.indexOf(r);s.splice(l,1)}0==s.length&&i.delete(n)}}else if(s=i[n],s){if(s.length){const l=s.indexOf(r);s.splice(l,1)}0==s.length&&delete i[n]}return s}(this.playersByQueriedElement,W.element,W))}),x.forEach(W=>Br(W,Dl));const B=is(V);return B.onDestroy(()=>{x.forEach(W=>Pl(W,Dl)),Jn(C,r.toStyles)}),N.forEach(W=>{Qn(l,W,[]).push(B)}),B}_buildPlayer(n,r,s){return r.length>0?this.driver.animate(n.element,r,n.duration,n.delay,n.easing,s):new na(n.duration,n.delay)}}class Rf{constructor(n,r,s){this.namespaceId=n,this.triggerName=r,this.element=s,this._player=new na,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(n){this._containsRealPlayer||(this._player=n,Object.keys(this._queuedCallbacks).forEach(r=>{this._queuedCallbacks[r].forEach(s=>ss(n,r,void 0,s))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const r=this._player;r.triggerCallback&&n.onStart(()=>r.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,r){Qn(this._queuedCallbacks,n,[]).push(r)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const r=this._player;r.triggerCallback&&r.triggerCallback(n)}}function as(i){return i&&1===i.nodeType}function Vi(i,n){const r=i.style.display;return i.style.display=null!=n?n:"none",r}function vo(i,n,r,s,l){const d=[];r.forEach(C=>d.push(Vi(C)));const f=[];s.forEach((C,S)=>{const x={};C.forEach(N=>{const V=x[N]=n.computeStyle(S,N,l);(!V||0==V.length)&&(S[_i]=Tf,f.push(S))}),i.set(S,x)});let E=0;return r.forEach(C=>Vi(C,d[E++])),f}function Ml(i,n){const r=new Map;if(i.forEach(E=>r.set(E,[])),0==n.length)return r;const l=new Set(n),d=new Map;function f(E){if(!E)return 1;let C=d.get(E);if(C)return C;const S=E.parentNode;return C=r.has(S)?S:l.has(S)?1:f(S),d.set(E,C),C}return n.forEach(E=>{const C=f(E);1!==C&&r.get(C).push(E)}),r}const Ol="$$classes";function Br(i,n){if(i.classList)i.classList.add(n);else{let r=i[Ol];r||(r=i[Ol]={}),r[n]=!0}}function Pl(i,n){if(i.classList)i.classList.remove(n);else{let r=i[Ol];r&&delete r[n]}}function Wb(i,n,r){is(r).onDone(()=>i.processLeaveNode(n))}function kl(i,n){for(let r=0;r<i.length;r++){const s=i[r];s instanceof df?kl(s.players,n):n.push(s)}}function Tv(i,n,r){const s=r.get(i);if(!s)return!1;let l=n.get(i);return l?s.forEach(d=>l.add(d)):n.set(i,s),r.delete(i),!0}class Mf{constructor(n,r,s){this.bodyNode=n,this._driver=r,this._normalizer=s,this._triggerCache={},this.onRemovalComplete=(l,d)=>{},this._transitionEngine=new Iv(n,r,s),this._timelineEngine=new qb(n,r,s),this._transitionEngine.onRemovalComplete=(l,d)=>this.onRemovalComplete(l,d)}registerTrigger(n,r,s,l,d){const f=n+"-"+l;let E=this._triggerCache[f];if(!E){const C=[],S=_n(this._driver,d,C);if(C.length)throw new Error(`The animation trigger "${l}" has failed to build due to the following errors:\n - ${C.join("\n - ")}`);E=function(i,n,r){return new wm(i,n,r)}(l,S,this._normalizer),this._triggerCache[f]=E}this._transitionEngine.registerTrigger(r,l,E)}register(n,r){this._transitionEngine.register(n,r)}destroy(n,r){this._transitionEngine.destroy(n,r)}onInsert(n,r,s,l){this._transitionEngine.insertNode(n,r,s,l)}onRemove(n,r,s,l){this._transitionEngine.removeNode(n,r,l||!1,s)}disableAnimations(n,r){this._transitionEngine.markElementAsDisabled(n,r)}process(n,r,s,l){if("@"==s.charAt(0)){const[d,f]=cd(s);this._timelineEngine.command(d,r,f,l)}else this._transitionEngine.trigger(n,r,s,l)}listen(n,r,s,l,d){if("@"==s.charAt(0)){const[f,E]=cd(s);return this._timelineEngine.listen(f,r,E,d)}return this._transitionEngine.listen(n,r,s,l,d)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Of(i,n){let r=null,s=null;return Array.isArray(n)&&n.length?(r=Pf(n[0]),n.length>1&&(s=Pf(n[n.length-1]))):n&&(r=Pf(n)),r||s?new _d(i,r,s):null}let _d=(()=>{class i{constructor(r,s,l){this._element=r,this._startStyles=s,this._endStyles=l,this._state=0;let d=i.initialStylesByElement.get(r);d||i.initialStylesByElement.set(r,d={}),this._initialStyles=d}start(){this._state<1&&(this._startStyles&&Jn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Jn(this._element,this._initialStyles),this._endStyles&&(Jn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(ru(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ru(this._element,this._endStyles),this._endStyles=null),Jn(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function Pf(i){let n=null;const r=Object.keys(i);for(let s=0;s<r.length;s++){const l=r[s];Sm(l)&&(n=n||{},n[l]=i[l])}return n}function Sm(i){return"display"===i||"position"===i}const kf="animation",Fl="animationend";class vd{constructor(n,r,s,l,d,f,E){this._element=n,this._name=r,this._duration=s,this._delay=l,this._easing=d,this._fillMode=f,this._onDoneFn=E,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=C=>this._handleCallback(C)}apply(){(function(i,n){const r=wd(i,"").trim();let s=0;r.length&&(function(i,n){let r=0;for(let s=0;s<i.length;s++)","===i.charAt(s)&&r++;return r}(r)+1,n=`${r}, ${n}`),Eo(i,"",n)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Cr(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Ed(this._element,this._name,"paused")}resume(){Ed(this._element,this._name,"running")}setPosition(n){const r=xm(this._element,this._name);this._position=n*this._duration,Eo(this._element,"Delay",`-${this._position}ms`,r)}getPosition(){return this._position}_handleCallback(n){const r=n._ngTestManualTimestamp||Date.now(),s=1e3*parseFloat(n.elapsedTime.toFixed(3));n.animationName==this._name&&Math.max(r-this._startTime,0)>=this._delay&&s>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Cr(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(i,n){const s=wd(i,"").split(","),l=da(s,n);l>=0&&(s.splice(l,1),Eo(i,"",s.join(",")))}(this._element,this._name))}}function Ed(i,n,r){Eo(i,"PlayState",r,xm(i,n))}function xm(i,n){const r=wd(i,"");return r.indexOf(",")>0?da(r.split(","),n):da([r],n)}function da(i,n){for(let r=0;r<i.length;r++)if(i[r].indexOf(n)>=0)return r;return-1}function Cr(i,n,r){r?i.removeEventListener(Fl,n):i.addEventListener(Fl,n)}function Eo(i,n,r,s){const l=kf+n;if(null!=s){const d=i.style[l];if(d.length){const f=d.split(",");f[s]=r,r=f.join(",")}}i.style[l]=r}function wd(i,n){return i.style[kf+n]||""}class Rv{constructor(n,r,s,l,d,f,E,C){this.element=n,this.keyframes=r,this.animationName=s,this._duration=l,this._delay=d,this._finalStyles=E,this._specialStyles=C,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=f||"linear",this.totalTime=l+d,this._buildStyler()}onStart(n){this._onStartFns.push(n)}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(n=>n()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(n){this._styler.setPosition(n)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new vd(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(n){const r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(s=>s()),r.length=0}beforeDestroy(){this.init();const n={};if(this.hasStarted()){const r=this._state>=3;Object.keys(this._finalStyles).forEach(s=>{"offset"!=s&&(n[s]=r?this._finalStyles[s]:os(this.element,s))})}this.currentSnapshot=n}}class xv extends na{constructor(n,r){super(),this.element=n,this._startingStyles={},this.__initialized=!1,this._styles=pf(r)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(n=>{this._startingStyles[n]=this.element.style[n]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(n=>this.element.style.setProperty(n,this._styles[n])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(n=>{const r=this._startingStyles[n];r?this.element.style.setProperty(n,r):this.element.style.removeProperty(n)}),this._startingStyles=null,super.destroy())}}class Vl{constructor(){this._count=0}validateStyleProperty(n){return lm(n)}matchesElement(n,r){return Cl(n,r)}containsElement(n,r){return dd(n,r)}query(n,r,s){return dm(n,r,s)}computeStyle(n,r,s){return window.getComputedStyle(n)[r]}buildKeyframeElement(n,r,s){s=s.map(E=>pf(E));let l=`@keyframes ${r} {\n`,d="";s.forEach(E=>{d=" ";const C=parseFloat(E.offset);l+=`${d}${100*C}% {\n`,d+=" ",Object.keys(E).forEach(S=>{const x=E[S];switch(S){case"offset":return;case"easing":return void(x&&(l+=`${d}animation-timing-function: ${x};\n`));default:return void(l+=`${d}${S}: ${x};\n`)}}),l+=`${d}}\n`}),l+="}\n";const f=document.createElement("style");return f.textContent=l,f}animate(n,r,s,l,d,f=[],E){const C=f.filter(De=>De instanceof Rv),S={};pv(s,l)&&C.forEach(De=>{let $e=De.currentSnapshot;Object.keys($e).forEach(We=>S[We]=$e[We])});const x=function(i){let n={};return i&&(Array.isArray(i)?i:[i]).forEach(s=>{Object.keys(s).forEach(l=>{"offset"==l||"easing"==l||(n[l]=s[l])})}),n}(r=fo(n,r,S));if(0==s)return new xv(n,x);const N="gen_css_kf_"+this._count++,V=this.buildKeyframeElement(n,N,r);(function(i){var n;const r=null===(n=i.getRootNode)||void 0===n?void 0:n.call(i);return"undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot?r:document.head})(n).appendChild(V);const W=Of(n,r),fe=new Rv(n,r,N,s,l,d,x,W);return fe.onDestroy(()=>{var i;(i=V).parentNode.removeChild(i)}),fe}}class bd{constructor(n,r,s,l){this.element=n,this.keyframes=r,this.options=s,this._specialStyles=l,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=s.duration,this._delay=s.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(n,r,s){return n.animate(r,s)}onStart(n){this._onStartFns.push(n)}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(r=>{"offset"!=r&&(n[r]=this._finished?this._finalKeyframe[r]:os(this.element,r))}),this.currentSnapshot=n}triggerCallback(n){const r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(s=>s()),r.length=0}}class Vf{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Om().toString()),this._cssKeyframesDriver=new Vl}validateStyleProperty(n){return lm(n)}matchesElement(n,r){return Cl(n,r)}containsElement(n,r){return dd(n,r)}query(n,r,s){return dm(n,r,s)}computeStyle(n,r,s){return window.getComputedStyle(n)[r]}overrideWebAnimationsSupport(n){this._isNativeImpl=n}animate(n,r,s,l,d,f=[],E){if(!E&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(n,r,s,l,d,f);const x={duration:s,delay:l,fill:0==l?"both":"forwards"};d&&(x.easing=d);const N={},V=f.filter(W=>W instanceof bd);pv(s,l)&&V.forEach(W=>{let fe=W.currentSnapshot;Object.keys(fe).forEach(De=>N[De]=fe[De])});const B=Of(n,r=fo(n,r=r.map(W=>Os(W,!1)),N));return new bd(n,r,x,B)}}function Om(){return rs()&&Element.prototype.animate||{}}let us=(()=>{class i extends sd{constructor(r,s){super(),this._nextAnimationId=0,this._renderer=r.createRenderer(s.body,{id:"0",encapsulation:m.ifc.None,styles:[],data:{animation:[]}})}build(r){const s=this._nextAnimationId.toString();this._nextAnimationId++;const l=Array.isArray(r)?Ja(r):r;return Bf(this._renderer,null,s,"register",[l]),new Ul(s,this._renderer)}}return i.\u0275fac=function(r){return new(r||i)(m.LFG(m.FYo),m.LFG(Ee))},i.\u0275prov=m.Yz7({token:i,factory:i.\u0275fac}),i})();class Ul extends class{}{constructor(n,r){super(),this._id=n,this._renderer=r}create(n,r){return new Uf(this._id,n,r||{},this._renderer)}}class Uf{constructor(n,r,s,l){this.id=n,this.element=r,this._renderer=l,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",s)}_listen(n,r){return this._renderer.listen(this.element,`@@${this.id}:${n}`,r)}_command(n,...r){return Bf(this._renderer,this.element,this.id,n,r)}onDone(n){this._listen("done",n)}onStart(n){this._listen("start",n)}onDestroy(n){this._listen("destroy",n)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(n){this._command("setPosition",n)}getPosition(){var n,r;return null!==(r=null===(n=this._renderer.engine.players[+this.id])||void 0===n?void 0:n.getPosition())&&void 0!==r?r:0}}function Bf(i,n,r,s,l){return i.setProperty(n,`@@${r}:${s}`,l)}const Pm="@.disabled";let km=(()=>{class i{constructor(r,s,l){this.delegate=r,this.engine=s,this._zone=l,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),s.onRemovalComplete=(d,f)=>{f&&f.parentNode(d)&&f.removeChild(d.parentNode,d)}}createRenderer(r,s){const d=this.delegate.createRenderer(r,s);if(!(r&&s&&s.data&&s.data.animation)){let x=this._rendererCache.get(d);return x||(x=new Id("",d,this.engine),this._rendererCache.set(d,x)),x}const f=s.id,E=s.id+"-"+this._currentId;this._currentId++,this.engine.register(E,r);const C=x=>{Array.isArray(x)?x.forEach(C):this.engine.registerTrigger(f,E,r,x.name,x)};return s.data.animation.forEach(C),new Fm(this,E,d,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(r,s,l){r>=0&&r<this._microtaskId?this._zone.run(()=>s(l)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(d=>{const[f,E]=d;f(E)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([s,l]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(r){return new(r||i)(m.LFG(m.FYo),m.LFG(Mf),m.LFG(m.R0b))},i.\u0275prov=m.Yz7({token:i,factory:i.\u0275fac}),i})();class Id{constructor(n,r,s){this.namespaceId=n,this.delegate=r,this.engine=s,this.destroyNode=this.delegate.destroyNode?l=>r.destroyNode(l):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(n,r){return this.delegate.createElement(n,r)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,r){this.delegate.appendChild(n,r),this.engine.onInsert(this.namespaceId,r,n,!1)}insertBefore(n,r,s,l=!0){this.delegate.insertBefore(n,r,s),this.engine.onInsert(this.namespaceId,r,n,l)}removeChild(n,r,s){this.engine.onRemove(this.namespaceId,r,this.delegate,s)}selectRootElement(n,r){return this.delegate.selectRootElement(n,r)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,r,s,l){this.delegate.setAttribute(n,r,s,l)}removeAttribute(n,r,s){this.delegate.removeAttribute(n,r,s)}addClass(n,r){this.delegate.addClass(n,r)}removeClass(n,r){this.delegate.removeClass(n,r)}setStyle(n,r,s,l){this.delegate.setStyle(n,r,s,l)}removeStyle(n,r,s){this.delegate.removeStyle(n,r,s)}setProperty(n,r,s){"@"==r.charAt(0)&&r==Pm?this.disableAnimations(n,!!s):this.delegate.setProperty(n,r,s)}setValue(n,r){this.delegate.setValue(n,r)}listen(n,r,s){return this.delegate.listen(n,r,s)}disableAnimations(n,r){this.engine.disableAnimations(n,r)}}class Fm extends Id{constructor(n,r,s,l){super(r,s,l),this.factory=n,this.namespaceId=r}setProperty(n,r,s){"@"==r.charAt(0)?"."==r.charAt(1)&&r==Pm?this.disableAnimations(n,s=void 0===s||!!s):this.engine.process(this.namespaceId,n,r.substr(1),s):this.delegate.setProperty(n,r,s)}listen(n,r,s){if("@"==r.charAt(0)){const l=function(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(n);let d=r.substr(1),f="";return"@"!=d.charAt(0)&&([d,f]=function(i){const n=i.indexOf(".");return[i.substring(0,n),i.substr(n+1)]}(d)),this.engine.listen(this.namespaceId,l,d,f,E=>{this.factory.scheduleListenerCallback(E._data||-1,s,E)})}return this.delegate.listen(n,r,s)}}let _=(()=>{class i extends Mf{constructor(r,s,l){super(r.body,s,l)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(r){return new(r||i)(m.LFG(Ee),m.LFG(co),m.LFG(Cf))},i.\u0275prov=m.Yz7({token:i,factory:i.\u0275fac}),i})();const z=new m.OlP("AnimationModuleType"),ge=[{provide:sd,useClass:us},{provide:Cf,useFactory:function(){return new _v}},{provide:Mf,useClass:_},{provide:m.FYo,useFactory:function(i,n,r){return new km(i,n,r)},deps:[Yo,Mf,m.R0b]}],Fe=[{provide:co,useFactory:function(){return"function"==typeof Om()?new Vf:new Vl}},{provide:z,useValue:"BrowserAnimations"},...ge],ze=[{provide:co,useClass:Il},{provide:z,useValue:"NoopAnimations"},...ge];let dt=(()=>{class i{static withConfig(r){return{ngModule:i,providers:r.disableAnimations?ze:Fe}}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=m.oAB({type:i}),i.\u0275inj=m.cJS({providers:Fe,imports:[Xo]}),i})();var Lt=F(8939),cn=F(3637),Xn=F(7574),Jt=F(4402),it=F(5917),Yt=F(9126),Dd=F(3282);function Sd(...i){return(0,Dd.J)(1)((0,it.of)(...i))}var Bl=F(4869);function lu(...i){const n=i[i.length-1];return(0,Bl.K)(n)?(i.pop(),r=>Sd(i,r,n)):r=>Sd(i,r)}var Gn=F(7393);function vi(){return i=>i.lift(new Lm)}class Lm{call(n,r){return r.subscribe(new Zb(n))}}class Zb extends Gn.L{constructor(n){super(n),this.hasPrev=!1}_next(n){let r;this.hasPrev?r=[this.prev,n]:this.hasPrev=!0,this.prev=n,r&&this.destination.next(r)}}var St=F(8002);function Vm(i,n){let r=!1;return arguments.length>=2&&(r=!0),function(l){return l.lift(new wo(i,n,r))}}class wo{constructor(n,r,s=!1){this.accumulator=n,this.seed=r,this.hasSeed=s}call(n,r){return r.subscribe(new Nv(n,this.accumulator,this.seed,this.hasSeed))}}class Nv extends Gn.L{constructor(n,r,s,l){super(n),this.accumulator=r,this._seed=s,this.hasSeed=l,this.index=0}get seed(){return this._seed}set seed(n){this.hasSeed=!0,this._seed=n}_next(n){if(this.hasSeed)return this._tryNext(n);this.seed=n,this.destination.next(n)}_tryNext(n){const r=this.index++;let s;try{s=this.accumulator(this.seed,n,r)}catch(l){this.destination.error(l)}this.seed=s,this.destination.next(s)}}class jS{constructor(n,r){this.compare=n,this.keySelector=r}call(n,r){return r.subscribe(new Kb(n,this.compare,this.keySelector))}}class Kb extends Gn.L{constructor(n,r,s){super(n),this.keySelector=s,this.hasKey=!1,"function"==typeof r&&(this.compare=r)}compare(n,r){return n===r}_next(n){let r;try{const{keySelector:l}=this;r=l?l(n):n}catch(l){return this.destination.error(l)}let s=!1;if(this.hasKey)try{const{compare:l}=this;s=l(this.key,r)}catch(l){return this.destination.error(l)}else this.hasKey=!0;s||(this.key=r,this.destination.next(n))}}function Ui(i,n){return function(s){return s.lift(new Yb(i,n))}}class Yb{constructor(n,r){this.predicate=n,this.thisArg=r}call(n,r){return r.subscribe(new Qb(n,this.predicate,this.thisArg))}}class Qb extends Gn.L{constructor(n,r,s){super(n),this.predicate=r,this.thisArg=s,this.count=0}_next(n){let r;try{r=this.predicate.call(this.thisArg,n,this.count++)}catch(s){return void this.destination.error(s)}r&&this.destination.next(n)}}F(670);var qe,Um=F(4486),ye=F(8239),jf=F(5452),fa=F(6034),pa=F(5601),bt=F(3854),$S="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ks={},Ov=Ov||{},_t=$S||self;function Bm(){}function Pv(i){var n=typeof i;return"array"==(n="object"!=n?n:i?Array.isArray(i)?"array":n:"null")||"object"==n&&"number"==typeof i.length}function $f(i){var n=typeof i;return"object"==n&&null!=i||"function"==n}var Hf="closure_uid_"+(1e9*Math.random()>>>0),eC=0;function kv(i,n,r){return i.call.apply(i.bind,arguments)}function HS(i,n,r){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var l=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(l,s),i.apply(n,l)}}return function(){return i.apply(n,arguments)}}function Dr(i,n,r){return(Dr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?kv:HS).apply(null,arguments)}function Gf(i,n){var r=Array.prototype.slice.call(arguments,1);return function(){var s=r.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function ur(i,n){function r(){}r.prototype=n.prototype,i.Z=n.prototype,i.prototype=new r,i.prototype.constructor=i,i.Vb=function(s,l,d){for(var f=Array(arguments.length-2),E=2;E<arguments.length;E++)f[E-2]=arguments[E];return n.prototype[l].apply(s,f)}}function Ei(){this.s=this.s,this.o=this.o}var nC={};Ei.prototype.s=!1,Ei.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function(i){return Object.prototype.hasOwnProperty.call(i,Hf)&&i[Hf]||(i[Hf]=++eC)}(this);delete nC[i]}},Ei.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const rC=Array.prototype.indexOf?function(i,n){return Array.prototype.indexOf.call(i,n,void 0)}:function(i,n){if("string"==typeof i)return"string"!=typeof n||1!=n.length?-1:i.indexOf(n,0);for(let r=0;r<i.length;r++)if(r in i&&i[r]===n)return r;return-1},qf=Array.prototype.forEach?function(i,n,r){Array.prototype.forEach.call(i,n,r)}:function(i,n,r){const s=i.length,l="string"==typeof i?i.split(""):i;for(let d=0;d<s;d++)d in l&&n.call(r,l[d],d,i)};function Fv(i){return Array.prototype.concat.apply([],arguments)}function jm(i){const n=i.length;if(0<n){const r=Array(n);for(let s=0;s<n;s++)r[s]=i[s];return r}return[]}function zf(i){return/^[\s\xa0]*$/.test(i)}var lr,$m=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function jr(i,n){return-1!=i.indexOf(n)}function Ad(i,n){return i<n?-1:i>n?1:0}e:{var Lv=_t.navigator;if(Lv){var Hm=Lv.userAgent;if(Hm){lr=Hm;break e}}lr=""}function Gm(i,n,r){for(const s in i)n.call(r,i[s],s,i)}function qm(i){const n={};for(const r in i)n[r]=i[r];return n}var Rd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function iC(i,n){let r,s;for(let l=1;l<arguments.length;l++){for(r in s=arguments[l],s)i[r]=s[r];for(let d=0;d<Rd.length;d++)r=Rd[d],Object.prototype.hasOwnProperty.call(s,r)&&(i[r]=s[r])}}function zm(i){return zm[" "](i),i}zm[" "]=Bm;var Wf,i,zS=jr(lr,"Opera"),jl=jr(lr,"Trident")||jr(lr,"MSIE"),Wm=jr(lr,"Edge"),Zm=Wm||jl,WS=jr(lr,"Gecko")&&!(jr(lr.toLowerCase(),"webkit")&&!jr(lr,"Edge"))&&!(jr(lr,"Trident")||jr(lr,"MSIE"))&&!jr(lr,"Edge"),sC=jr(lr.toLowerCase(),"webkit")&&!jr(lr,"Edge");function oC(){var i=_t.document;return i?i.documentMode:void 0}e:{var Vv="",Uv=(i=lr,WS?/rv:([^\);]+)(\)|;)/.exec(i):Wm?/Edge\/([\d\.]+)/.exec(i):jl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):sC?/WebKit\/(\S+)/.exec(i):zS?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Uv&&(Vv=Uv?Uv[1]:""),jl){var Bi=oC();if(null!=Bi&&Bi>parseFloat(Vv)){Wf=String(Bi);break e}}Wf=Vv}var ZS={};function aC(){return n=ZS,Object.prototype.hasOwnProperty.call(n,9)?n[9]:n[9]=function(){let i=0;const n=$m(String(Wf)).split("."),r=$m("9").split("."),s=Math.max(n.length,r.length);for(let f=0;0==i&&f<s;f++){var l=n[f]||"",d=r[f]||"";do{if(l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],0==l[0].length&&0==d[0].length)break;i=Ad(0==l[1].length?0:parseInt(l[1],10),0==d[1].length?0:parseInt(d[1],10))||Ad(0==l[2].length,0==d[2].length)||Ad(l[2],d[2]),l=l[3],d=d[3]}while(0==i)}return 0<=i}();var n}var KS=_t.document&&jl&&(oC()||parseInt(Wf,10))||void 0,YS=function(){if(!_t.addEventListener||!Object.defineProperty)return!1;var i=!1,n=Object.defineProperty({},"passive",{get:function(){i=!0}});try{_t.addEventListener("test",Bm,n),_t.removeEventListener("test",Bm,n)}catch(r){}return i}();function Tr(i,n){this.type=i,this.g=this.target=n,this.defaultPrevented=!1}function Zf(i,n){if(Tr.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var r=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=n,n=i.relatedTarget){if(WS){e:{try{zm(n.nodeName);var l=!0;break e}catch(d){}l=!1}l||(n=null)}}else"mouseover"==r?n=i.fromElement:"mouseout"==r&&(n=i.toElement);this.relatedTarget=n,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:QS[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Zf.Z.h.call(this)}}Tr.prototype.h=function(){this.defaultPrevented=!0},ur(Zf,Tr);var QS={2:"touch",3:"pen",4:"mouse"};Zf.prototype.h=function(){Zf.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Kf="closure_listenable_"+(1e6*Math.random()|0),vt=0;function lC(i,n,r,s,l){this.listener=i,this.proxy=null,this.src=n,this.type=r,this.capture=!!s,this.ia=l,this.key=++vt,this.ca=this.fa=!1}function Yf(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function $l(i){this.src=i,this.g={},this.h=0}function ji(i,n){var r=n.type;if(r in i.g){var d,s=i.g[r],l=rC(s,n);(d=0<=l)&&Array.prototype.splice.call(s,l,1),d&&(Yf(n),0==i.g[r].length&&(delete i.g[r],i.h--))}}function Km(i,n,r,s){for(var l=0;l<i.length;++l){var d=i[l];if(!d.ca&&d.listener==n&&d.capture==!!r&&d.ia==s)return l}return-1}$l.prototype.add=function(i,n,r,s,l){var d=i.toString();(i=this.g[d])||(i=this.g[d]=[],this.h++);var f=Km(i,n,s,l);return-1<f?(n=i[f],r||(n.fa=!1)):((n=new lC(n,this.src,d,!!s,l)).fa=r,i.push(n)),n};var jv="closure_lm_"+(1e6*Math.random()|0),Qf={};function bo(i,n,r,s,l){if(s&&s.once)return Qm(i,n,r,s,l);if(Array.isArray(n)){for(var d=0;d<n.length;d++)bo(i,n[d],r,s,l);return null}return r=Jf(r),i&&i[Kf]?i.N(n,r,$f(s)?!!s.capture:!!s,l):Ym(i,n,r,!1,s,l)}function Ym(i,n,r,s,l,d){if(!n)throw Error("Invalid event type");var f=$f(l)?!!l.capture:!!l,E=xd(i);if(E||(i[jv]=E=new $l(i)),(r=E.add(n,r,s,f,d)).proxy)return r;if(s=function(){var n=ga;return function i(r){return n.call(i.src,i.listener,r)}}(),r.proxy=s,s.src=i,s.listener=r,i.addEventListener)YS||(l=f),void 0===l&&(l=!1),i.addEventListener(n.toString(),s,l);else if(i.attachEvent)i.attachEvent(XS(n.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return r}function Qm(i,n,r,s,l){if(Array.isArray(n)){for(var d=0;d<n.length;d++)Qm(i,n[d],r,s,l);return null}return r=Jf(r),i&&i[Kf]?i.O(n,r,$f(s)?!!s.capture:!!s,l):Ym(i,n,r,!0,s,l)}function JS(i,n,r,s,l){if(Array.isArray(n))for(var d=0;d<n.length;d++)JS(i,n[d],r,s,l);else s=$f(s)?!!s.capture:!!s,r=Jf(r),i&&i[Kf]?(i=i.i,(n=String(n).toString())in i.g&&-1<(r=Km(d=i.g[n],r,s,l))&&(Yf(d[r]),Array.prototype.splice.call(d,r,1),0==d.length&&(delete i.g[n],i.h--))):i&&(i=xd(i))&&(n=i.g[n.toString()],i=-1,n&&(i=Km(n,r,s,l)),(r=-1<i?n[i]:null)&&Jm(r))}function Jm(i){if("number"!=typeof i&&i&&!i.ca){var n=i.src;if(n&&n[Kf])ji(n.i,i);else{var r=i.type,s=i.proxy;n.removeEventListener?n.removeEventListener(r,s,i.capture):n.detachEvent?n.detachEvent(XS(r),s):n.addListener&&n.removeListener&&n.removeListener(s),(r=xd(n))?(ji(r,i),0==r.h&&(r.src=null,n[jv]=null)):Yf(i)}}}function XS(i){return i in Qf?Qf[i]:Qf[i]="on"+i}function ga(i,n){if(i.ca)i=!0;else{n=new Zf(n,this);var r=i.listener,s=i.ia||i.src;i.fa&&Jm(i),i=r.call(s,n)}return i}function xd(i){return(i=i[jv])instanceof $l?i:null}var Nd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jf(i){return"function"==typeof i?i:(i[Nd]||(i[Nd]=function(n){return i.handleEvent(n)}),i[Nd])}function Sr(){Ei.call(this),this.i=new $l(this),this.P=this,this.I=null}function Ar(i,n){var r,s=i.I;if(s)for(r=[];s;s=s.I)r.push(s);if(i=i.P,s=n.type||n,"string"==typeof n)n=new Tr(n,i);else if(n instanceof Tr)n.target=n.target||i;else{var l=n;iC(n=new Tr(s,i),l)}if(l=!0,r)for(var d=r.length-1;0<=d;d--){var f=n.g=r[d];l=Xf(f,s,!0,n)&&l}if(l=Xf(f=n.g=i,s,!0,n)&&l,l=Xf(f,s,!1,n)&&l,r)for(d=0;d<r.length;d++)l=Xf(f=n.g=r[d],s,!1,n)&&l}function Xf(i,n,r,s){if(!(n=i.i.g[String(n)]))return!0;n=n.concat();for(var l=!0,d=0;d<n.length;++d){var f=n[d];if(f&&!f.ca&&f.capture==r){var E=f.listener,C=f.ia||f.src;f.fa&&ji(i.i,f),l=!1!==E.call(C,s)&&l}}return l&&!s.defaultPrevented}ur(Sr,Ei),Sr.prototype[Kf]=!0,Sr.prototype.removeEventListener=function(i,n,r,s){JS(this,i,n,r,s)},Sr.prototype.M=function(){if(Sr.Z.M.call(this),this.i){var n,i=this.i;for(n in i.g){for(var r=i.g[n],s=0;s<r.length;s++)Yf(r[s]);delete i.g[n],i.h--}}this.I=null},Sr.prototype.N=function(i,n,r,s){return this.i.add(String(i),n,!1,r,s)},Sr.prototype.O=function(i,n,r,s){return this.i.add(String(i),n,!0,r,s)};var dC=_t.JSON.stringify;function eA(){var i=nA;let n=null;return i.g&&(n=i.g,i.g=i.g.next,i.g||(i.h=null),n.next=null),n}var fC,$v=new class{constructor(i,n){this.i=i,this.j=n,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new hC,i=>i.reset());class hC{constructor(){this.next=this.g=this.h=null}set(n,r){this.h=n,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function tA(i){_t.setTimeout(()=>{throw i},0)}function ep(i,n){fC||function(){var i=_t.Promise.resolve(void 0);fC=function(){i.then(bN)}}(),pC||(fC(),pC=!0),nA.add(i,n)}var pC=!1,nA=new class{constructor(){this.h=this.g=null}add(n,r){const s=$v.get();s.set(n,r),this.h?this.h.next=s:this.g=s,this.h=s}};function bN(){for(var i;i=eA();){try{i.h.call(i.g)}catch(r){tA(r)}var n=$v;n.j(i),100>n.h&&(n.h++,i.next=n.g,n.g=i)}pC=!1}function Hv(i,n){Sr.call(this),this.h=i||1,this.g=n||_t,this.j=Dr(this.kb,this),this.l=Date.now()}function gC(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function mC(i,n,r){if("function"==typeof i)r&&(i=Dr(i,r));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Dr(i.handleEvent,i)}return 2147483647<Number(n)?-1:_t.setTimeout(i,n||0)}function rA(i){i.g=mC(()=>{i.g=null,i.i&&(i.i=!1,rA(i))},i.j);const n=i.h;i.h=null,i.m.apply(null,n)}ur(Hv,Sr),(qe=Hv.prototype).da=!1,qe.S=null,qe.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ar(this,"tick"),this.da&&(gC(this),this.start()))}},qe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},qe.M=function(){Hv.Z.M.call(this),gC(this),delete this.g};class CN extends Ei{constructor(n,r){super(),this.m=n,this.j=r,this.h=null,this.i=!1,this.g=null}l(n){this.h=arguments,this.g?this.i=!0:rA(this)}M(){super.M(),this.g&&(_t.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xm(i){Ei.call(this),this.h=i,this.g={}}ur(Xm,Ei);var ma=[];function ey(i,n,r,s){Array.isArray(r)||(r&&(ma[0]=r.toString()),r=ma);for(var l=0;l<r.length;l++){var d=bo(n,r[l],s||i.handleEvent,!1,i.h||i);if(!d)break;i.g[d.key]=d}}function yC(i){Gm(i.g,function(n,r){this.g.hasOwnProperty(r)&&Jm(n)},i),i.g={}}function tp(){this.g=!0}function cu(i,n,r,s){i.info(function(){return"XMLHTTP TEXT ("+n+"): "+function(i,n){if(!i.g)return n;if(!n)return null;try{var r=JSON.parse(n);if(r)for(i=0;i<r.length;i++)if(Array.isArray(r[i])){var s=r[i];if(!(2>s.length)){var l=s[1];if(Array.isArray(l)&&!(1>l.length)){var d=l[0];if("noop"!=d&&"stop"!=d&&"close"!=d)for(var f=1;f<l.length;f++)l[f]=""}}}return dC(r)}catch(E){return n}}(i,r)+(s?" "+s:"")})}Xm.prototype.M=function(){Xm.Z.M.call(this),yC(this)},Xm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},tp.prototype.Aa=function(){this.g=!1},tp.prototype.info=function(){};var hu={},vC=null;function qv(){return vC=vC||new Sr}function ty(i){Tr.call(this,hu.Ma,i)}function np(i){const n=qv();Ar(n,new ty(n,i))}function zv(i,n){Tr.call(this,hu.STAT_EVENT,i),this.stat=n}function ii(i){const n=qv();Ar(n,new zv(n,i))}function EC(i,n){Tr.call(this,hu.Na,i),this.size=n}function ya(i,n){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return _t.setTimeout(function(){i()},n)}hu.Ma="serverreachability",ur(ty,Tr),hu.STAT_EVENT="statevent",ur(zv,Tr),hu.Na="timingevent",ur(EC,Tr);var _a={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ny={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function fu(){}function Hl(){}fu.prototype.h=null;var ip,rp={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ry(){Tr.call(this,"d")}function iy(){Tr.call(this,"c")}function Od(){}function Pd(i,n,r,s){this.l=i,this.j=n,this.m=r,this.X=s||1,this.V=new Xm(this),this.P=sA,this.W=new Hv(i=Zm?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new sp}function sp(){this.i=null,this.g="",this.h=!1}ur(ry,Tr),ur(iy,Tr),ur(Od,fu),Od.prototype.g=function(){return new XMLHttpRequest},Od.prototype.i=function(){return{}},ip=new Od;var sA=45e3,sy={},Wv={};function oy(i,n,r){i.K=1,i.v=cp(Co(n)),i.s=r,i.U=!0,Zv(i,null)}function Zv(i,n){i.F=Date.now(),op(i),i.A=Co(i.v);var r=i.A,s=i.X;Array.isArray(s)||(s=[String(s)]),cy(r.h,"t",s),i.C=0,r=i.l.H,i.h=new sp,i.g=HC(i.l,r?n:null,!i.s),0<i.O&&(i.L=new CN(Dr(i.Ia,i,i.g),i.O)),ey(i.V,i.g,"readystatechange",i.gb),n=i.H?qm(i.H):{},i.s?(i.u||(i.u="POST"),n["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,n)):(i.u="GET",i.g.ea(i.A,i.u,null,n)),np(1),function(i,n,r,s,l,d){i.info(function(){if(i.g)if(d)for(var f="",E=d.split("&"),C=0;C<E.length;C++){var S=E[C].split("=");if(1<S.length){var x=S[0];S=S[1];var N=x.split("_");f=2<=N.length&&"type"==N[1]?f+(x+"=")+S+"&":f+(x+"=redacted&")}}else f=null;else f=d;return"XMLHTTP REQ ("+s+") [attempt "+l+"]: "+n+"\n"+r+"\n"+f})}(i.j,i.u,i.A,i.m,i.X,i.s)}function wC(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function Kv(i,n,r){let l,s=!0;for(;!i.I&&i.C<r.length;){if(l=oA(i,r),l==Wv){4==n&&(i.o=4,ii(14),s=!1),cu(i.j,i.m,null,"[Incomplete Response]");break}if(l==sy){i.o=4,ii(15),cu(i.j,i.m,r,"[Invalid Chunk]"),s=!1;break}cu(i.j,i.m,l,null),bC(i,l)}wC(i)&&l!=Wv&&l!=sy&&(i.h.g="",i.C=0),4!=n||0!=r.length||i.h.h||(i.o=1,ii(16),s=!1),i.i=i.i&&s,s?0<r.length&&!i.aa&&(i.aa=!0,(n=i.l).g==i&&n.$&&!n.L&&(n.h.info("Great, no buffering proxy detected. Bytes received: "+r.length),BC(n),n.L=!0,ii(11))):(cu(i.j,i.m,r,"[Invalid Chunked Response]"),kd(i),ap(i))}function oA(i,n){var r=i.C,s=n.indexOf("\n",r);return-1==s?Wv:(r=Number(n.substring(r,s)),isNaN(r)?sy:(s+=1)+r>n.length?Wv:(n=n.substr(s,r),i.C=s+r,n))}function op(i){i.Y=Date.now()+i.P,wi(i,i.P)}function wi(i,n){if(null!=i.B)throw Error("WatchDog timer not null");i.B=ya(Dr(i.eb,i),n)}function ay(i){i.B&&(_t.clearTimeout(i.B),i.B=null)}function ap(i){0==i.l.G||i.I||s0(i.l,i)}function kd(i){ay(i);var n=i.L;n&&"function"==typeof n.na&&n.na(),i.L=null,gC(i.W),yC(i.V),i.g&&(n=i.g,i.g=null,n.abort(),n.na())}function bC(i,n){try{var r=i.l;if(0!=r.G&&(r.g==i||xC(r.i,i)))if(r.I=i.N,!i.J&&xC(r.i,i)&&3==r.G){try{var s=r.Ca.g.parse(n)}catch(S){s=null}if(Array.isArray(s)&&3==s.length){var l=s;if(0==l[0])e:if(r.u)r.ta=l[1],0<r.ta-r.U&&37500>l[2]&&r.N&&0==r.A&&!r.v&&(r.v=ya(Dr(r.ab,r),6e3));else{if(r.g){if(!(r.g.F+3e3<i.F))break e;Ey(r),my(r)}_p(r),ii(18)}if(1>=dy(r.i)&&r.ka){try{r.ka()}catch(S){}r.ka=void 0}}else yu(r,11)}else if((i.J||r.g==i)&&Ey(r),!zf(n))for(l=r.Ca.g.parse(n),n=0;n<l.length;n++){let S=l[n];if(r.U=S[0],S=S[1],2==r.G)if("c"==S[0]){r.J=S[1],r.la=S[2];const x=S[3];null!=x&&(r.ma=x,r.h.info("VER="+r.ma));const N=S[4];null!=N&&(r.za=N,r.h.info("SVER="+r.za));const V=S[5];null!=V&&"number"==typeof V&&0<V&&(r.K=s=1.5*V,r.h.info("backChannelRequestTimeoutMs_="+s)),s=r;const B=i.g;if(B){const W=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(W){var d=s.i;!d.g&&(jr(W,"spdy")||jr(W,"quic")||jr(W,"h2"))&&(d.j=d.l,d.g=new Set,d.h&&(Xv(d,d.h),d.h=null))}if(s.D){const fe=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;fe&&(s.sa=fe,En(s.F,s.D,fe))}}r.G=3,r.j&&r.j.xa(),r.$&&(r.O=Date.now()-i.F,r.h.info("Handshake RTT: "+r.O+"ms"));var f=i;if((s=r).oa=$C(s,s.H?s.la:null,s.W),f.J){e0(s.i,f);var E=f,C=s.K;C&&E.setTimeout(C),E.B&&(ay(E),op(E)),s.g=f}else vy(s);0<r.l.length&&yp(r)}else"stop"!=S[0]&&"close"!=S[0]||yu(r,7);else 3==r.G&&("stop"==S[0]||"close"==S[0]?"stop"==S[0]?yu(r,7):n0(r):"noop"!=S[0]&&r.j&&r.j.wa(S),r.A=0)}np(4)}catch(S){}}function IC(i,n){if(i.forEach&&"function"==typeof i.forEach)i.forEach(n,void 0);else if(Pv(i)||"string"==typeof i)qf(i,n,void 0);else{if(i.T&&"function"==typeof i.T)var r=i.T();else if(i.R&&"function"==typeof i.R)r=void 0;else if(Pv(i)||"string"==typeof i){r=[];for(var s=i.length,l=0;l<s;l++)r.push(l)}else for(l in r=[],s=0,i)r[s++]=l;l=(s=function(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(Pv(i)){for(var n=[],r=i.length,s=0;s<r;s++)n.push(i[s]);return n}for(s in n=[],r=0,i)n[r++]=i[s];return n}(i)).length;for(var d=0;d<l;d++)n.call(void 0,s[d],r&&r[d],i)}}function Fd(i,n){this.h={},this.g=[],this.i=0;var r=arguments.length;if(1<r){if(r%2)throw Error("Uneven number of arguments");for(var s=0;s<r;s+=2)this.set(arguments[s],arguments[s+1])}else if(i)if(i instanceof Fd)for(r=i.T(),s=0;s<r.length;s++)this.set(r[s],i.get(r[s]));else for(s in i)this.set(s,i[s])}function up(i){if(i.i!=i.g.length){for(var n=0,r=0;n<i.g.length;){var s=i.g[n];pu(i.h,s)&&(i.g[r++]=s),n++}i.g.length=r}if(i.i!=i.g.length){var l={};for(r=n=0;n<i.g.length;)pu(l,s=i.g[n])||(i.g[r++]=s,l[s]=1),n++;i.g.length=r}}function pu(i,n){return Object.prototype.hasOwnProperty.call(i,n)}(qe=Pd.prototype).setTimeout=function(i){this.P=i},qe.gb=function(i){i=i.target;const n=this.L;n&&3==Do(i)?n.l():this.Ia(i)},qe.Ia=function(i){try{if(i==this.g)e:{const x=Do(this.g);var n=this.g.Da();const N=this.g.ba();if(!(3>x)&&(3!=x||Zm||this.g&&(this.h.h||this.g.ga()||VC(this.g)))){this.I||4!=x||7==n||np(8==n||0>=N?3:2),ay(this);var r=this.g.ba();this.N=r;t:if(wC(this)){var s=VC(this.g);i="";var l=s.length,d=4==Do(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){kd(this),ap(this);var f="";break t}this.h.i=new _t.TextDecoder}for(n=0;n<l;n++)this.h.h=!0,i+=this.h.i.decode(s[n],{stream:d&&n==l-1});s.splice(0,l),this.h.g+=i,this.C=0,f=this.h.g}else f=this.g.ga();if(this.i=200==r,function(i,n,r,s,l,d,f){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+l+"]: "+n+"\n"+r+"\n"+d+" "+f})}(this.j,this.u,this.A,this.m,this.X,x,r),this.i){if(this.$&&!this.J){t:{if(this.g){var E,C=this.g;if((E=C.g?C.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zf(E)){var S=E;break t}}S=null}if(!(r=S)){this.i=!1,this.o=3,ii(12),kd(this),ap(this);break e}cu(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,bC(this,r)}this.U?(Kv(this,x,f),Zm&&this.i&&3==x&&(ey(this.V,this.W,"tick",this.fb),this.W.start())):(cu(this.j,this.m,f,null),bC(this,f)),4==x&&kd(this),this.i&&!this.I&&(4==x?s0(this.l,this):(this.i=!1,op(this)))}else 400==r&&0<f.indexOf("Unknown SID")?(this.o=3,ii(12)):(this.o=0,ii(13)),kd(this),ap(this)}}}catch(x){}},qe.fb=function(){if(this.g){var i=Do(this.g),n=this.g.ga();this.C<n.length&&(ay(this),Kv(this,i,n),this.i&&4!=i&&op(this))}},qe.cancel=function(){this.I=!0,kd(this)},qe.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function(i,n){i.info(function(){return"TIMEOUT: "+n})}(this.j,this.A),2!=this.K&&(np(3),ii(17)),kd(this),this.o=2,ap(this)):wi(this,this.Y-i)},(qe=Fd.prototype).R=function(){up(this);for(var i=[],n=0;n<this.g.length;n++)i.push(this.h[this.g[n]]);return i},qe.T=function(){return up(this),this.g.concat()},qe.get=function(i,n){return pu(this.h,i)?this.h[i]:n},qe.set=function(i,n){pu(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=n},qe.forEach=function(i,n){for(var r=this.T(),s=0;s<r.length;s++){var l=r[s],d=this.get(l);i.call(n,d,l,this)}};var DC=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Gl(i,n){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof Gl){this.g=void 0!==n?n:i.g,uy(this,i.j),this.s=i.s,lp(this,i.i),ly(this,i.m),this.l=i.l,n=i.h;var r=new zl;r.i=n.i,n.g&&(r.g=new Fd(n.g),r.h=n.h),TC(this,r),this.o=i.o}else i&&(r=String(i).match(DC))?(this.g=!!n,uy(this,r[1]||"",!0),this.s=ql(r[2]||""),lp(this,r[3]||"",!0),ly(this,r[4]),this.l=ql(r[5]||"",!0),TC(this,r[6]||"",!0),this.o=ql(r[7]||"")):(this.g=!!n,this.h=new zl(null,this.g))}function Co(i){return new Gl(i)}function uy(i,n,r){i.j=r?ql(n,!0):n,i.j&&(i.j=i.j.replace(/:$/,""))}function lp(i,n,r){i.i=r?ql(n,!0):n}function ly(i,n){if(n){if(n=Number(n),isNaN(n)||0>n)throw Error("Bad port number "+n);i.m=n}else i.m=null}function TC(i,n,r){n instanceof zl?(i.h=n,function(i,n){n&&!i.j&&(gu(i),i.i=null,i.g.forEach(function(r,s){var l=s.toLowerCase();s!=l&&(AC(this,s),cy(this,l,r))},i)),i.j=n}(i.h,i.g)):(r||(n=dp(n,hA)),i.h=new zl(n,i.g))}function En(i,n,r){i.h.set(n,r)}function cp(i){return En(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function ql(i,n){return i?n?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function dp(i,n,r){return"string"==typeof i?(i=encodeURI(i).replace(n,lA),r&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function lA(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Gl.prototype.toString=function(){var i=[],n=this.j;n&&i.push(dp(n,cA,!0),":");var r=this.i;return(r||"file"==n)&&(i.push("//"),(n=this.s)&&i.push(dp(n,cA,!0),"@"),i.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&i.push(":",String(r))),(r=this.l)&&(this.i&&"/"!=r.charAt(0)&&i.push("/"),i.push(dp(r,"/"==r.charAt(0)?dA:SC,!0))),(r=this.h.toString())&&i.push("?",r),(r=this.o)&&i.push("#",dp(r,fA)),i.join("")};var cA=/[#\/\?@]/g,SC=/[#\?:]/g,dA=/[#\?]/g,hA=/[#\?@]/g,fA=/#/g;function zl(i,n){this.h=this.g=null,this.i=i||null,this.j=!!n}function gu(i){i.g||(i.g=new Fd,i.h=0,i.i&&function(i,n){if(i){i=i.split("&");for(var r=0;r<i.length;r++){var s=i[r].indexOf("="),l=null;if(0<=s){var d=i[r].substring(0,s);l=i[r].substring(s+1)}else d=i[r];n(d,l?decodeURIComponent(l.replace(/\+/g," ")):"")}}}(i.i,function(n,r){i.add(decodeURIComponent(n.replace(/\+/g," ")),r)}))}function AC(i,n){gu(i),n=Ld(i,n),pu(i.g.h,n)&&(i.i=null,i.h-=i.g.get(n).length,pu((i=i.g).h,n)&&(delete i.h[n],i.i--,i.g.length>2*i.i&&up(i)))}function hp(i,n){return gu(i),n=Ld(i,n),pu(i.g.h,n)}function cy(i,n,r){AC(i,n),0<r.length&&(i.i=null,i.g.set(Ld(i,n),jm(r)),i.h+=r.length)}function Ld(i,n){return n=String(n),i.j&&(n=n.toLowerCase()),n}function Jv(i){this.l=i||pA,i=_t.PerformanceNavigationTiming?0<(i=_t.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(_t.g&&_t.g.Ea&&_t.g.Ea()&&_t.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(qe=zl.prototype).add=function(i,n){gu(this),this.i=null,i=Ld(this,i);var r=this.g.get(i);return r||this.g.set(i,r=[]),r.push(n),this.h+=1,this},qe.forEach=function(i,n){gu(this),this.g.forEach(function(r,s){qf(r,function(l){i.call(n,l,s,this)},this)},this)},qe.T=function(){gu(this);for(var i=this.g.R(),n=this.g.T(),r=[],s=0;s<n.length;s++)for(var l=i[s],d=0;d<l.length;d++)r.push(n[s]);return r},qe.R=function(i){gu(this);var n=[];if("string"==typeof i)hp(this,i)&&(n=Fv(n,this.g.get(Ld(this,i))));else{i=this.g.R();for(var r=0;r<i.length;r++)n=Fv(n,i[r])}return n},qe.set=function(i,n){return gu(this),this.i=null,hp(this,i=Ld(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[n]),this.h+=1,this},qe.get=function(i,n){return i&&0<(i=this.R(i)).length?String(i[0]):n},qe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],n=this.g.T(),r=0;r<n.length;r++){var s=n[r],l=encodeURIComponent(String(s));s=this.R(s);for(var d=0;d<s.length;d++){var f=l;""!==s[d]&&(f+="="+encodeURIComponent(String(s[d]))),i.push(f)}}return this.i=i.join("&")};var pA=10;function RC(i){return!!i.h||!!i.g&&i.g.size>=i.j}function dy(i){return i.h?1:i.g?i.g.size:0}function xC(i,n){return i.h?i.h==n:!!i.g&&i.g.has(n)}function Xv(i,n){i.g?i.g.add(n):i.h=n}function e0(i,n){i.h&&i.h==n?i.h=null:i.g&&i.g.has(n)&&i.g.delete(n)}function t0(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let n=i.i;for(const r of i.g.values())n=n.concat(r.D);return n}return jm(i.i)}function hy(){}function NC(){this.g=new hy}function MC(i,n,r){const s=r||"";try{IC(i,function(l,d){let f=l;$f(l)&&(f=dC(l)),n.push(s+d+"="+encodeURIComponent(f))})}catch(l){throw n.push(s+"type="+encodeURIComponent("_badmap")),l}}function Wl(i,n,r,s,l){try{n.onload=null,n.onerror=null,n.onabort=null,n.ontimeout=null,l(s)}catch(d){}}function fp(i){this.l=i.$b||null,this.j=i.ib||!1}function fy(i,n){Sr.call(this),this.D=i,this.u=n,this.m=void 0,this.readyState=OC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Jv.prototype.cancel=function(){if(this.i=t0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},hy.prototype.stringify=function(i){return _t.JSON.stringify(i,void 0)},hy.prototype.parse=function(i){return _t.JSON.parse(i,void 0)},ur(fp,fu),fp.prototype.g=function(){return new fy(this.l,this.j)},fp.prototype.i=function(i){return function(){return i}}({}),ur(fy,Sr);var OC=0;function Zl(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function Vd(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Ea(i)}function Ea(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(qe=fy.prototype).open=function(i,n){if(this.readyState!=OC)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=n,this.readyState=1,Ea(this)},qe.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const n={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(n.body=i),(this.D||_t).fetch(new Request(this.B,n)).then(this.Va.bind(this),this.ha.bind(this))},qe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Vd(this)),this.readyState=OC},qe.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Ea(this)),this.g&&(this.readyState=3,Ea(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==_t.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Zl(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},qe.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var n=i.value?i.value:new Uint8Array(0);(n=this.A.decode(n,{stream:!i.done}))&&(this.response=this.responseText+=n)}i.done?Vd(this):Ea(this),3==this.readyState&&Zl(this)}},qe.Ua=function(i){this.g&&(this.response=this.responseText=i,Vd(this))},qe.Ta=function(i){this.g&&(this.response=i,Vd(this))},qe.ha=function(){this.g&&Vd(this)},qe.setRequestHeader=function(i,n){this.v.append(i,n)},qe.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},qe.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],n=this.h.entries();for(var r=n.next();!r.done;)i.push((r=r.value)[0]+": "+r[1]),r=n.next();return i.join("\r\n")},Object.defineProperty(fy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var pp=_t.JSON.parse;function qn(i){Sr.call(this),this.headers=new Fd,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=py,this.K=this.L=!1}ur(qn,Sr);var py="",PC=/^https?$/i,gA=["POST","PUT"];function mA(i){return"content-type"==i.toLowerCase()}function gy(i,n){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=n,i.m=5,FC(i),gp(i)}function FC(i){i.D||(i.D=!0,Ar(i,"complete"),Ar(i,"error"))}function LC(i){if(i.h&&void 0!==Ov&&(!i.C[1]||4!=Do(i)||2!=i.ba()))if(i.v&&4==Do(i))mC(i.Fa,0,i);else if(Ar(i,"readystatechange"),4==Do(i)){i.h=!1;try{const E=i.ba();e:switch(E){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var s;if(s=0===E){var l=String(i.H).match(DC)[1]||null;if(!l&&_t.self&&_t.self.location){var d=_t.self.location.protocol;l=d.substr(0,d.length-1)}s=!PC.test(l?l.toLowerCase():"")}r=s}if(r)Ar(i,"complete"),Ar(i,"success");else{i.m=6;try{var f=2<Do(i)?i.g.statusText:""}catch(C){f=""}i.j=f+" ["+i.ba()+"]",FC(i)}}finally{gp(i)}}}function gp(i,n){if(i.g){Kl(i);const r=i.g,s=i.C[0]?Bm:null;i.g=null,i.C=null,n||Ar(i,"ready");try{r.onreadystatechange=s}catch(l){}}}function Kl(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(_t.clearTimeout(i.A),i.A=null)}function Do(i){return i.g?i.g.readyState:0}function VC(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case py:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(n){return null}}function mu(i,n,r){e:{for(s in r){var s=!1;break e}s=!0}s||(r=function(i){let n="";return Gm(i,function(r,s){n+=s,n+=":",n+=r,n+="\r\n"}),n}(r),"string"==typeof i?null!=r&&encodeURIComponent(String(r)):En(i,n,r))}function mp(i,n,r){return r&&r.internalChannelParams&&r.internalChannelParams[i]||n}function UC(i){this.za=0,this.l=[],this.h=new tp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=mp("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=mp("baseRetryDelayMs",5e3,i),this.$a=mp("retryDelaySeedMs",1e4,i),this.Ya=mp("forwardChannelMaxRetries",2,i),this.ra=mp("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new Jv(i&&i.concurrentRequestLimit),this.Ca=new NC,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function n0(i){if(_A(i),3==i.G){var n=i.V++,r=Co(i.F);En(r,"SID",i.J),En(r,"RID",n),En(r,"TYPE","terminate"),_y(i,r),(n=new Pd(i,i.h,n,void 0)).K=2,n.v=cp(Co(r)),r=!1,_t.navigator&&_t.navigator.sendBeacon&&(r=_t.navigator.sendBeacon(n.v.toString(),"")),!r&&_t.Image&&((new Image).src=n.v,r=!0),r||(n.g=HC(n.l,null),n.g.ea(n.v)),n.F=Date.now(),op(n)}a0(i)}function my(i){i.g&&(BC(i),i.g.cancel(),i.g=null)}function _A(i){my(i),i.u&&(_t.clearTimeout(i.u),i.u=null),Ey(i),i.i.cancel(),i.m&&("number"==typeof i.m&&_t.clearTimeout(i.m),i.m=null)}function r0(i,n){i.l.push(new class{constructor(i,n){this.h=i,this.g=n}}(i.Za++,n)),3==i.G&&yp(i)}function yp(i){RC(i.i)||i.m||(i.m=!0,ep(i.Ha,i),i.C=0)}function yy(i,n){var r;r=n?n.m:i.V++;const s=Co(i.F);En(s,"SID",i.J),En(s,"RID",r),En(s,"AID",i.U),_y(i,s),i.o&&i.s&&mu(s,i.o,i.s),r=new Pd(i,i.h,r,i.C+1),null===i.o&&(r.H=i.s),n&&(i.l=n.D.concat(i.l)),n=To(i,r,1e3),r.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),Xv(i.i,r),oy(r,s,n)}function _y(i,n){i.j&&IC({},function(r,s){En(n,s,r)})}function To(i,n,r){r=Math.min(i.l.length,r);var s=i.j?Dr(i.j.Oa,i.j,i):null;e:{var l=i.l;let d=-1;for(;;){const f=["count="+r];-1==d?0<r?(d=l[0].h,f.push("ofs="+d)):d=0:f.push("ofs="+d);let E=!0;for(let C=0;C<r;C++){let S=l[C].h;const x=l[C].g;if(S-=d,0>S)d=Math.max(0,l[C].h-100),E=!1;else try{MC(x,f,"req"+S+"_")}catch(N){s&&s(x)}}if(E){s=f.join("&");break e}}}return i=i.l.splice(0,r),n.D=i,s}function vy(i){i.g||i.u||(i.Y=1,ep(i.Ga,i),i.A=0)}function _p(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=ya(Dr(i.Ga,i),o0(i,i.A)),i.A++,0))}function BC(i){null!=i.B&&(_t.clearTimeout(i.B),i.B=null)}function jC(i){i.g=new Pd(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var n=Co(i.oa);En(n,"RID","rpc"),En(n,"SID",i.J),En(n,"CI",i.N?"0":"1"),En(n,"AID",i.U),_y(i,n),En(n,"TYPE","xmlhttp"),i.o&&i.s&&mu(n,i.o,i.s),i.K&&i.g.setTimeout(i.K);var r=i.g;i=i.la,r.K=1,r.v=cp(Co(n)),r.s=null,r.U=!0,Zv(r,i)}function Ey(i){null!=i.v&&(_t.clearTimeout(i.v),i.v=null)}function s0(i,n){var r=null;if(i.g==n){Ey(i),BC(i),i.g=null;var s=2}else{if(!xC(i.i,n))return;r=n.D,e0(i.i,n),s=1}if(i.I=n.N,0!=i.G)if(n.i)if(1==s){r=n.s?n.s.length:0,n=Date.now()-n.F;var l=i.C;Ar(s=qv(),new EC(s,r,n,l)),yp(i)}else vy(i);else if(3==(l=n.o)||0==l&&0<i.I||!(1==s&&function(i,n){return!(dy(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=n.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=ya(Dr(i.Ha,i,n),o0(i,i.C)),i.C++,0)))}(i,n)||2==s&&_p(i)))switch(r&&0<r.length&&(n=i.i,n.i=n.i.concat(r)),l){case 1:yu(i,5);break;case 4:yu(i,10);break;case 3:yu(i,6);break;default:yu(i,2)}}function o0(i,n){let r=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(r*=2),r*n}function yu(i,n){if(i.h.info("Error code "+n),2==n){var r=null;i.j&&(r=null);var s=Dr(i.jb,i);r||(r=new Gl("//www.google.com/images/cleardot.gif"),_t.location&&"http"==_t.location.protocol||uy(r,"https"),cp(r)),function(i,n){const r=new tp;if(_t.Image){const s=new Image;s.onload=Gf(Wl,r,s,"TestLoadImage: loaded",!0,n),s.onerror=Gf(Wl,r,s,"TestLoadImage: error",!1,n),s.onabort=Gf(Wl,r,s,"TestLoadImage: abort",!1,n),s.ontimeout=Gf(Wl,r,s,"TestLoadImage: timeout",!1,n),_t.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else n(!1)}(r.toString(),s)}else ii(2);i.G=0,i.j&&i.j.va(n),a0(i),_A(i)}function a0(i){i.G=0,i.I=-1,i.j&&((0!=t0(i.i).length||0!=i.l.length)&&(i.i.i.length=0,jm(i.l),i.l.length=0),i.j.ua())}function $C(i,n,r){let s=function(i){return i instanceof Gl?Co(i):new Gl(i,void 0)}(r);if(""!=s.i)n&&lp(s,n+"."+s.i),ly(s,s.m);else{const l=_t.location;s=function(i,n,r,s){var l=new Gl(null,void 0);return i&&uy(l,i),n&&lp(l,n),r&&ly(l,r),s&&(l.l=s),l}(l.protocol,n?n+"."+l.hostname:l.hostname,+l.port,r)}return i.aa&&Gm(i.aa,function(l,d){En(s,d,l)}),r=i.sa,(n=i.D)&&r&&En(s,n,r),En(s,"VER",i.ma),_y(i,s),s}function HC(i,n,r){if(n&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(n=new qn(r&&i.Ba&&!i.qa?new fp({ib:!0}):i.qa)).L=i.H,n}function Ud(){}function Bd(){if(jl&&!(10<=Number(KS)))throw Error("Environmental error: no available transport.")}function bi(i,n){Sr.call(this),this.g=new UC(n),this.l=i,this.h=n&&n.messageUrlParams||null,i=n&&n.messageHeaders||null,n&&n.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=n&&n.initMessageHeaders||null,n&&n.messageContentType&&(i?i["X-WebChannel-Content-Type"]=n.messageContentType:i={"X-WebChannel-Content-Type":n.messageContentType}),n&&n.ya&&(i?i["X-WebChannel-Client-Profile"]=n.ya:i={"X-WebChannel-Client-Profile":n.ya}),this.g.P=i,(i=n&&n.httpHeadersOverwriteParam)&&!zf(i)&&(this.g.o=i),this.A=n&&n.supportsCrossDomainXhr||!1,this.v=n&&n.sendRawJson||!1,(n=n&&n.httpSessionIdParam)&&!zf(n)&&(this.g.D=n,null!==(i=this.h)&&n in i&&n in(i=this.h)&&delete i[n]),this.j=new Yl(this)}function u0(i){ry.call(this);var n=i.__sm__;if(n){e:{for(const r in n){i=r;break e}i=void 0}(this.i=i)&&(i=this.i,n=null!==n&&i in n?n[i]:void 0),this.data=n}else this.data=i}function l0(){iy.call(this),this.status=1}function Yl(i){this.g=i}(qe=qn.prototype).ea=function(i,n,r,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);n=n?n.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ip.g(),this.C=function(i){return i.h||(i.h=i.i())}(this.u?this.u:ip),this.g.onreadystatechange=Dr(this.Fa,this);try{this.F=!0,this.g.open(n,String(i),!0),this.F=!1}catch(d){return void gy(this,d)}i=r||"";const l=new Fd(this.headers);s&&IC(s,function(d,f){l.set(f,d)}),s=function(i){e:{var n=mA;const r=i.length,s="string"==typeof i?i.split(""):i;for(let l=0;l<r;l++)if(l in s&&n.call(void 0,s[l],l,i)){n=l;break e}n=-1}return 0>n?null:"string"==typeof i?i.charAt(n):i[n]}(l.T()),r=_t.FormData&&i instanceof _t.FormData,!(0<=rC(gA,n))||s||r||l.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),l.forEach(function(d,f){this.g.setRequestHeader(f,d)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Kl(this),0<this.B&&((this.K=function(i){return jl&&aC()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Dr(this.pa,this)):this.A=mC(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(d){gy(this,d)}},qe.pa=function(){void 0!==Ov&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ar(this,"timeout"),this.abort(8))},qe.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Ar(this,"complete"),Ar(this,"abort"),gp(this))},qe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),gp(this,!0)),qn.Z.M.call(this)},qe.Fa=function(){this.s||(this.F||this.v||this.l?LC(this):this.cb())},qe.cb=function(){LC(this)},qe.ba=function(){try{return 2<Do(this)?this.g.status:-1}catch(i){return-1}},qe.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},qe.Qa=function(i){if(this.g){var n=this.g.responseText;return i&&0==n.indexOf(i)&&(n=n.substring(i.length)),pp(n)}},qe.Da=function(){return this.m},qe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(qe=UC.prototype).ma=8,qe.G=1,qe.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(n){}},qe.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const l=new Pd(this,this.h,i,void 0);let d=this.s;if(this.P&&(d?(d=qm(d),iC(d,this.P)):d=this.P),null===this.o&&(l.H=d),this.ja)e:{for(var n=0,r=0;r<this.l.length;r++){var s=this.l[r];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(n+=s)){n=r;break e}if(4096===n||r===this.l.length-1){n=r+1;break e}}n=1e3}else n=1e3;n=To(this,l,n),En(r=Co(this.F),"RID",i),En(r,"CVER",22),this.D&&En(r,"X-HTTP-Session-Id",this.D),_y(this,r),this.o&&d&&mu(r,this.o,d),Xv(this.i,l),this.Ra&&En(r,"TYPE","init"),this.ja?(En(r,"$req",n),En(r,"SID","null"),l.$=!0,oy(l,r,null)):oy(l,r,n),this.G=2}}else 3==this.G&&(i?yy(this,i):0==this.l.length||RC(this.i)||yy(this))},qe.Ga=function(){if(this.u=null,jC(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=ya(Dr(this.bb,this),i)}},qe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ii(10),my(this),jC(this))},qe.ab=function(){null!=this.v&&(this.v=null,my(this),_p(this),ii(19))},qe.jb=function(i){i?(this.h.info("Successfully pinged google.com"),ii(2)):(this.h.info("Failed to ping google.com"),ii(1))},(qe=Ud.prototype).xa=function(){},qe.wa=function(){},qe.va=function(){},qe.ua=function(){},qe.Oa=function(){},Bd.prototype.g=function(i,n){return new bi(i,n)},ur(bi,Sr),bi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,n=this.l,r=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),ep(Dr(i.hb,i,n))),ii(0),i.W=n,i.aa=r||{},i.N=i.X,i.F=$C(i,null,i.W),yp(i)},bi.prototype.close=function(){n0(this.g)},bi.prototype.u=function(i){if("string"==typeof i){var n={};n.__data__=i,r0(this.g,n)}else this.v?((n={}).__data__=dC(i),r0(this.g,n)):r0(this.g,i)},bi.prototype.M=function(){this.g.j=null,delete this.j,n0(this.g),delete this.g,bi.Z.M.call(this)},ur(u0,ry),ur(l0,iy),ur(Yl,Ud),Yl.prototype.xa=function(){Ar(this.g,"a")},Yl.prototype.wa=function(i){Ar(this.g,new u0(i))},Yl.prototype.va=function(i){Ar(this.g,new l0(i))},Yl.prototype.ua=function(){Ar(this.g,"b")},Bd.prototype.createWebChannel=Bd.prototype.g,bi.prototype.send=bi.prototype.u,bi.prototype.open=bi.prototype.m,bi.prototype.close=bi.prototype.close,_a.NO_ERROR=0,_a.TIMEOUT=8,_a.HTTP_ERROR=6,ny.COMPLETE="complete",Hl.EventType=rp,rp.OPEN="a",rp.CLOSE="b",rp.ERROR="c",rp.MESSAGE="d",Sr.prototype.listen=Sr.prototype.N,qn.prototype.listenOnce=qn.prototype.O,qn.prototype.getLastError=qn.prototype.La,qn.prototype.getLastErrorCode=qn.prototype.Da,qn.prototype.getStatus=qn.prototype.ba,qn.prototype.getResponseJson=qn.prototype.Qa,qn.prototype.getResponseText=qn.prototype.ga,qn.prototype.send=qn.prototype.ea;var vA=ks.createWebChannelTransport=function(){return new Bd},EA=ks.getStatEventTarget=function(){return qv()},c0=ks.ErrorCode=_a,wA=ks.EventType=ny,GC=ks.Event=hu,bA=ks.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},qC=ks.FetchXmlHttpFactory=fp,wy=ks.WebChannel=Hl,CA=ks.XhrIo=qn;class $r{constructor(n){this.uid=n}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(n){return n.uid===this.uid}}$r.UNAUTHENTICATED=new $r(null),$r.GOOGLE_CREDENTIALS=new $r("google-credentials-uid"),$r.FIRST_PARTY=new $r("first-party-uid"),$r.MOCK_USER=new $r("mock-user");let vp="9.1.0";const So=new pa.Yd("@firebase/firestore");function d0(){return So.logLevel}function Oe(i,...n){if(So.logLevel<=pa.in.DEBUG){const r=n.map(WC);So.debug(`Firestore (${vp}): ${i}`,...r)}}function er(i,...n){if(So.logLevel<=pa.in.ERROR){const r=n.map(WC);So.error(`Firestore (${vp}): ${i}`,...r)}}function si(i,...n){if(So.logLevel<=pa.in.WARN){const r=n.map(WC);So.warn(`Firestore (${vp}): ${i}`,...r)}}function WC(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(r){return i}}function nt(i="Unexpected state"){const n=`FIRESTORE (${vp}) INTERNAL ASSERTION FAILED: `+i;throw er(n),new Error(n)}function gt(i,n){i||nt()}function Le(i,n){return i}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Error{constructor(n,r){super(r),this.code=n,this.message=r,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Rr{constructor(){this.promise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}}class h0{constructor(n,r){this.user=r,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${n}`}}class f0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(n,r){n.enqueueRetryable(()=>r($r.UNAUTHENTICATED))}shutdown(){}}class IA{constructor(n){this.token=n,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(n,r){this.changeListener=r,n.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class p0{constructor(n){this.t=n,this.currentUser=$r.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(n,r){var s=this;let l=this.i;const d=S=>this.i!==l?(l=this.i,r(S)):Promise.resolve();let f=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new Rr,n.enqueueRetryable(()=>d(this.currentUser))};const E=()=>{const S=f;n.enqueueRetryable((0,ye.Z)(function*(){yield S.promise,yield d(s.currentUser)}))},C=S=>{Oe("FirebaseCredentialsProvider","Auth detected"),this.auth=S,this.auth.addAuthTokenListener(this.o),E()};this.t.onInit(S=>C(S)),setTimeout(()=>{if(!this.auth){const S=this.t.getImmediate({optional:!0});S?C(S):(Oe("FirebaseCredentialsProvider","Auth not yet detected"),f.resolve(),f=new Rr)}},0),E()}getToken(){const n=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(s=>this.i!==n?(Oe("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(gt("string"==typeof s.accessToken),new h0(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const n=this.auth&&this.auth.getUid();return gt(null===n||"string"==typeof n),new $r(n)}}class DA{constructor(n,r,s){this.h=n,this.l=r,this.m=s,this.type="FirstParty",this.user=$r.FIRST_PARTY}get authHeaders(){const n={"X-Goog-AuthUser":this.l},r=this.h.auth.getAuthHeaderValueForFirstParty([]);return r&&(n.Authorization=r),this.m&&(n["X-Goog-Iam-Authorization-Token"]=this.m),n}}class TA{constructor(n,r,s){this.h=n,this.l=r,this.m=s}getToken(){return Promise.resolve(new DA(this.h,this.l,this.m))}start(n,r){n.enqueueRetryable(()=>r($r.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $i{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=s=>this.g(s),this.p=s=>r.writeSequenceNumber(s))}g(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.p&&this.p(n),n}}function SA(i){const n="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(i);if(n&&"function"==typeof n.getRandomValues)n.getRandomValues(r);else for(let s=0;s<i;s++)r[s]=Math.floor(256*Math.random());return r}$i.T=-1;class KC{static I(){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/n.length)*n.length;let s="";for(;s.length<20;){const l=SA(40);for(let d=0;d<l.length;++d)s.length<20&&l[d]<r&&(s+=n.charAt(l[d]%n.length))}return s}}function Ot(i,n){return i<n?-1:i>n?1:0}function wa(i,n,r){return i.length===n.length&&i.every((s,l)=>r(s,n[l]))}function Ql(i){return i+"\0"}class tr{constructor(n,r){if(this.seconds=n,this.nanoseconds=r,r<0)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(n<-62135596800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n);if(n>=253402300800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n)}static now(){return tr.fromMillis(Date.now())}static fromDate(n){return tr.fromMillis(n.getTime())}static fromMillis(n){const r=Math.floor(n/1e3),s=Math.floor(1e6*(n-1e3*r));return new tr(r,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(n){return this.seconds===n.seconds?Ot(this.nanoseconds,n.nanoseconds):Ot(this.seconds,n.seconds)}isEqual(n){return n.seconds===this.seconds&&n.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ut{constructor(n){this.timestamp=n}static fromTimestamp(n){return new ut(n)}static min(){return new ut(new tr(0,0))}compareTo(n){return this.timestamp._compareTo(n.timestamp)}isEqual(n){return this.timestamp.isEqual(n.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function jd(i){let n=0;for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&n++;return n}function Jl(i,n){for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&n(r,i[r])}function YC(i){for(const n in i)if(Object.prototype.hasOwnProperty.call(i,n))return!1;return!0}class Xl{constructor(n,r,s){void 0===r?r=0:r>n.length&&nt(),void 0===s?s=n.length-r:s>n.length-r&&nt(),this.segments=n,this.offset=r,this.len=s}get length(){return this.len}isEqual(n){return 0===Xl.comparator(this,n)}child(n){const r=this.segments.slice(this.offset,this.limit());return n instanceof Xl?n.forEach(s=>{r.push(s)}):r.push(n),this.construct(r)}limit(){return this.offset+this.length}popFirst(n){return this.construct(this.segments,this.offset+(n=void 0===n?1:n),this.length-n)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(n){return this.segments[this.offset+n]}isEmpty(){return 0===this.length}isPrefixOf(n){if(n.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==n.get(r))return!1;return!0}isImmediateParentOf(n){if(this.length+1!==n.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==n.get(r))return!1;return!0}forEach(n){for(let r=this.offset,s=this.limit();r<s;r++)n(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(n,r){const s=Math.min(n.length,r.length);for(let l=0;l<s;l++){const d=n.get(l),f=r.get(l);if(d<f)return-1;if(d>f)return 1}return n.length<r.length?-1:n.length>r.length?1:0}}class At extends Xl{construct(n,r,s){return new At(n,r,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...n){const r=[];for(const s of n){if(s.indexOf("//")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);r.push(...s.split("/").filter(l=>l.length>0))}return new At(r)}static emptyPath(){return new At([])}}const Ep=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends Xl{construct(n,r,s){return new $t(n,r,s)}static isValidIdentifier(n){return Ep.test(n)}canonicalString(){return this.toArray().map(n=>(n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(n)||(n="`"+n+"`"),n)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new $t(["__name__"])}static fromServerFormat(n){const r=[];let s="",l=0;const d=()=>{if(0===s.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(s),s=""};let f=!1;for(;l<n.length;){const E=n[l];if("\\"===E){if(l+1===n.length)throw new Re(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+n);const C=n[l+1];if("\\"!==C&&"."!==C&&"`"!==C)throw new Re(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);s+=C,l+=2}else"`"===E?(f=!f,l++):"."!==E||f?(s+=E,l++):(d(),l++)}if(d(),f)throw new Re(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new $t(r)}static emptyPath(){return new $t([])}}class ls{constructor(n){this.fields=n,n.sort($t.comparator)}covers(n){for(const r of this.fields)if(r.isPrefixOf(n))return!0;return!1}isEqual(n){return wa(this.fields,n.fields,(r,s)=>r.isEqual(s))}}class Qt{constructor(n){this.binaryString=n}static fromBase64String(n){const r=atob(n);return new Qt(r)}static fromUint8Array(n){const r=function(s){let l="";for(let d=0;d<s.length;++d)l+=String.fromCharCode(s[d]);return l}(n);return new Qt(r)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(n){return Ot(this.binaryString,n.binaryString)}isEqual(n){return this.binaryString===n.binaryString}}Qt.EMPTY_BYTE_STRING=new Qt("");const g0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hi(i){if(gt(!!i),"string"==typeof i){let n=0;const r=g0.exec(i);if(gt(!!r),r[1]){let l=r[1];l=(l+"000000000").substr(0,9),n=Number(l)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:n}}return{seconds:wn(i.seconds),nanos:wn(i.nanos)}}function wn(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Fs(i){return"string"==typeof i?Qt.fromBase64String(i):Qt.fromUint8Array(i)}function _u(i){var n,r;return"server_timestamp"===(null===(r=((null===(n=null==i?void 0:i.mapValue)||void 0===n?void 0:n.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function ec(i){const n=i.mapValue.fields.__previous_value__;return _u(n)?ec(n):n}function Ao(i){const n=Hi(i.mapValue.fields.__local_write_time__.timestampValue);return new tr(n.seconds,n.nanos)}function cs(i){return null==i}function ba(i){return 0===i&&1/i==-1/0}function tc(i){return"number"==typeof i&&Number.isInteger(i)&&!ba(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class Je{constructor(n){this.path=n}static fromPath(n){return new Je(At.fromString(n))}static fromName(n){return new Je(At.fromString(n).popFirst(5))}hasCollectionId(n){return this.path.length>=2&&this.path.get(this.path.length-2)===n}isEqual(n){return null!==n&&0===At.comparator(this.path,n.path)}toString(){return this.path.toString()}static comparator(n,r){return At.comparator(n.path,r.path)}static isDocumentKey(n){return n.length%2==0}static fromSegments(n){return new Je(new At(n.slice()))}}function vu(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?_u(i)?4:10:nt()}function Ls(i,n){const r=vu(i);if(r!==vu(n))return!1;switch(r){case 0:return!0;case 1:return i.booleanValue===n.booleanValue;case 4:return Ao(i).isEqual(Ao(n));case 3:return function(s,l){if("string"==typeof s.timestampValue&&"string"==typeof l.timestampValue&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const d=Hi(s.timestampValue),f=Hi(l.timestampValue);return d.seconds===f.seconds&&d.nanos===f.nanos}(i,n);case 5:return i.stringValue===n.stringValue;case 6:return l=n,Fs(i.bytesValue).isEqual(Fs(l.bytesValue));case 7:return i.referenceValue===n.referenceValue;case 8:return function(s,l){return wn(s.geoPointValue.latitude)===wn(l.geoPointValue.latitude)&&wn(s.geoPointValue.longitude)===wn(l.geoPointValue.longitude)}(i,n);case 2:return function(s,l){if("integerValue"in s&&"integerValue"in l)return wn(s.integerValue)===wn(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const d=wn(s.doubleValue),f=wn(l.doubleValue);return d===f?ba(d)===ba(f):isNaN(d)&&isNaN(f)}return!1}(i,n);case 9:return wa(i.arrayValue.values||[],n.arrayValue.values||[],Ls);case 10:return function(s,l){const d=s.mapValue.fields||{},f=l.mapValue.fields||{};if(jd(d)!==jd(f))return!1;for(const E in d)if(d.hasOwnProperty(E)&&(void 0===f[E]||!Ls(d[E],f[E])))return!1;return!0}(i,n);default:return nt()}var l}function $d(i,n){return void 0!==(i.values||[]).find(r=>Ls(r,n))}function nc(i,n){const r=vu(i),s=vu(n);if(r!==s)return Ot(r,s);switch(r){case 0:return 0;case 1:return Ot(i.booleanValue,n.booleanValue);case 2:return function(l,d){const f=wn(l.integerValue||l.doubleValue),E=wn(d.integerValue||d.doubleValue);return f<E?-1:f>E?1:f===E?0:isNaN(f)?isNaN(E)?0:-1:1}(i,n);case 3:return m0(i.timestampValue,n.timestampValue);case 4:return m0(Ao(i),Ao(n));case 5:return Ot(i.stringValue,n.stringValue);case 6:return function(l,d){const f=Fs(l),E=Fs(d);return f.compareTo(E)}(i.bytesValue,n.bytesValue);case 7:return function(l,d){const f=l.split("/"),E=d.split("/");for(let C=0;C<f.length&&C<E.length;C++){const S=Ot(f[C],E[C]);if(0!==S)return S}return Ot(f.length,E.length)}(i.referenceValue,n.referenceValue);case 8:return function(l,d){const f=Ot(wn(l.latitude),wn(d.latitude));return 0!==f?f:Ot(wn(l.longitude),wn(d.longitude))}(i.geoPointValue,n.geoPointValue);case 9:return function(l,d){const f=l.values||[],E=d.values||[];for(let C=0;C<f.length&&C<E.length;++C){const S=nc(f[C],E[C]);if(S)return S}return Ot(f.length,E.length)}(i.arrayValue,n.arrayValue);case 10:return function(l,d){const f=l.fields||{},E=Object.keys(f),C=d.fields||{},S=Object.keys(C);E.sort(),S.sort();for(let x=0;x<E.length&&x<S.length;++x){const N=Ot(E[x],S[x]);if(0!==N)return N;const V=nc(f[E[x]],C[S[x]]);if(0!==V)return V}return Ot(E.length,S.length)}(i.mapValue,n.mapValue);default:throw nt()}}function m0(i,n){if("string"==typeof i&&"string"==typeof n&&i.length===n.length)return Ot(i,n);const r=Hi(i),s=Hi(n),l=Ot(r.seconds,s.seconds);return 0!==l?l:Ot(r.nanos,s.nanos)}function Cy(i){return Iy(i)}function Iy(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const l=Hi(s);return`time(${l.seconds},${l.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Fs(i.bytesValue).toBase64():"referenceValue"in i?Je.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(n=i.geoPointValue).latitude},${n.longitude})`:"arrayValue"in i?function(s){let l="[",d=!0;for(const f of s.values||[])d?d=!1:l+=",",l+=Iy(f);return l+"]"}(i.arrayValue):"mapValue"in i?function(s){const l=Object.keys(s.fields||{}).sort();let d="{",f=!0;for(const E of l)f?f=!1:d+=",",d+=`${E}:${Iy(s.fields[E])}`;return d+"}"}(i.mapValue):nt();var n}function wp(i,n){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`}}function y0(i){return!!i&&"integerValue"in i}function Dy(i){return!!i&&"arrayValue"in i}function QC(i){return!!i&&"nullValue"in i}function _0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function bp(i){return!!i&&"mapValue"in i}function Cp(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const n={mapValue:{fields:{}}};return Jl(i.mapValue.fields,(r,s)=>n.mapValue.fields[r]=Cp(s)),n}if(i.arrayValue){const n={arrayValue:{values:[]}};for(let r=0;r<(i.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Cp(i.arrayValue.values[r]);return n}return Object.assign({},i)}class oi{constructor(n){this.value=n}static empty(){return new oi({mapValue:{}})}field(n){if(n.isEmpty())return this.value;{let r=this.value;for(let s=0;s<n.length-1;++s)if(r=(r.mapValue.fields||{})[n.get(s)],!bp(r))return null;return r=(r.mapValue.fields||{})[n.lastSegment()],r||null}}set(n,r){this.getFieldsMap(n.popLast())[n.lastSegment()]=Cp(r)}setAll(n){let r=$t.emptyPath(),s={},l=[];n.forEach((f,E)=>{if(!r.isImmediateParentOf(E)){const C=this.getFieldsMap(r);this.applyChanges(C,s,l),s={},l=[],r=E.popLast()}f?s[E.lastSegment()]=Cp(f):l.push(E.lastSegment())});const d=this.getFieldsMap(r);this.applyChanges(d,s,l)}delete(n){const r=this.field(n.popLast());bp(r)&&r.mapValue.fields&&delete r.mapValue.fields[n.lastSegment()]}isEqual(n){return Ls(this.value,n.value)}getFieldsMap(n){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let s=0;s<n.length;++s){let l=r.mapValue.fields[n.get(s)];bp(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},r.mapValue.fields[n.get(s)]=l),r=l}return r.mapValue.fields}applyChanges(n,r,s){Jl(r,(l,d)=>n[l]=d);for(const l of s)delete n[l]}clone(){return new oi(Cp(this.value))}}function JC(i){const n=[];return Jl(i.fields,(r,s)=>{const l=new $t([r]);if(bp(s)){const d=JC(s.mapValue).fields;if(0===d.length)n.push(l);else for(const f of d)n.push(l.child(f))}else n.push(l)}),new ls(n)}class bn{constructor(n,r,s,l,d){this.key=n,this.documentType=r,this.version=s,this.data=l,this.documentState=d}static newInvalidDocument(n){return new bn(n,0,ut.min(),oi.empty(),0)}static newFoundDocument(n,r,s){return new bn(n,1,r,s,0)}static newNoDocument(n,r){return new bn(n,2,r,oi.empty(),0)}static newUnknownDocument(n,r){return new bn(n,3,r,oi.empty(),2)}convertToFoundDocument(n,r){return this.version=n,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(n){return this.version=n,this.documentType=2,this.data=oi.empty(),this.documentState=0,this}convertToUnknownDocument(n){return this.version=n,this.documentType=3,this.data=oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(n){return n instanceof bn&&this.key.isEqual(n.key)&&this.version.isEqual(n.version)&&this.documentType===n.documentType&&this.documentState===n.documentState&&this.data.isEqual(n.data)}clone(){return new bn(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class AA{constructor(n,r=null,s=[],l=[],d=null,f=null,E=null){this.path=n,this.collectionGroup=r,this.orderBy=s,this.filters=l,this.limit=d,this.startAt=f,this.endAt=E,this.A=null}}function v0(i,n=null,r=[],s=[],l=null,d=null,f=null){return new AA(i,n,r,s,l,d,f)}function Ip(i){const n=Le(i);if(null===n.A){let r=n.path.canonicalString();null!==n.collectionGroup&&(r+="|cg:"+n.collectionGroup),r+="|f:",r+=n.filters.map(s=>function(i){return i.field.canonicalString()+i.op.toString()+Cy(i.value)}(s)).join(","),r+="|ob:",r+=n.orderBy.map(s=>{return(l=s).field.canonicalString()+l.dir;var l}).join(","),cs(n.limit)||(r+="|l:",r+=n.limit),n.startAt&&(r+="|lb:",r+=C0(n.startAt)),n.endAt&&(r+="|ub:",r+=C0(n.endAt)),n.A=r}return n.A}function E0(i,n){if(i.limit!==n.limit||i.orderBy.length!==n.orderBy.length)return!1;for(let l=0;l<i.orderBy.length;l++)if(!SN(i.orderBy[l],n.orderBy[l]))return!1;if(i.filters.length!==n.filters.length)return!1;for(let l=0;l<i.filters.length;l++)if((r=i.filters[l]).op!==(s=n.filters[l]).op||!r.field.isEqual(s.field)||!Ls(r.value,s.value))return!1;var r,s;return i.collectionGroup===n.collectionGroup&&!!i.path.isEqual(n.path)&&!!I0(i.startAt,n.startAt)&&I0(i.endAt,n.endAt)}function Ty(i){return Je.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}class Hr extends class{}{constructor(n,r,s){super(),this.field=n,this.op=r,this.value=s}static create(n,r,s){return n.isKeyField()?"in"===r||"not-in"===r?this.R(n,r,s):new DN(n,r,s):"array-contains"===r?new MA(n,s):"in"===r?new OA(n,s):"not-in"===r?new w0(n,s):"array-contains-any"===r?new b0(n,s):new Hr(n,r,s)}static R(n,r,s){return"in"===r?new TN(n,s):new xA(n,s)}matches(n){const r=n.data.field(this.field);return"!="===this.op?null!==r&&this.P(nc(r,this.value)):null!==r&&vu(this.value)===vu(r)&&this.P(nc(r,this.value))}P(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return 0===n;case"!=":return 0!==n;case">":return n>0;case">=":return n>=0;default:return nt()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class DN extends Hr{constructor(n,r,s){super(n,r,s),this.key=Je.fromName(s.referenceValue)}matches(n){const r=Je.comparator(n.key,this.key);return this.P(r)}}class TN extends Hr{constructor(n,r){super(n,"in",r),this.keys=NA(0,r)}matches(n){return this.keys.some(r=>r.isEqual(n.key))}}class xA extends Hr{constructor(n,r){super(n,"not-in",r),this.keys=NA(0,r)}matches(n){return!this.keys.some(r=>r.isEqual(n.key))}}function NA(i,n){var r;return((null===(r=n.arrayValue)||void 0===r?void 0:r.values)||[]).map(s=>Je.fromName(s.referenceValue))}class MA extends Hr{constructor(n,r){super(n,"array-contains",r)}matches(n){const r=n.data.field(this.field);return Dy(r)&&$d(r.arrayValue,this.value)}}class OA extends Hr{constructor(n,r){super(n,"in",r)}matches(n){const r=n.data.field(this.field);return null!==r&&$d(this.value.arrayValue,r)}}class w0 extends Hr{constructor(n,r){super(n,"not-in",r)}matches(n){if($d(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=n.data.field(this.field);return null!==r&&!$d(this.value.arrayValue,r)}}class b0 extends Hr{constructor(n,r){super(n,"array-contains-any",r)}matches(n){const r=n.data.field(this.field);return!(!Dy(r)||!r.arrayValue.values)&&r.arrayValue.values.some(s=>$d(this.value.arrayValue,s))}}class Dp{constructor(n,r){this.position=n,this.before=r}}function C0(i){return`${i.before?"b":"a"}:${i.position.map(n=>Cy(n)).join(",")}`}class Tp{constructor(n,r="asc"){this.field=n,this.dir=r}}function SN(i,n){return i.dir===n.dir&&i.field.isEqual(n.field)}function XC(i,n,r){let s=0;for(let l=0;l<i.position.length;l++){const d=n[l],f=i.position[l];if(s=d.field.isKeyField()?Je.comparator(Je.fromName(f.referenceValue),r.key):nc(f,r.data.field(d.field)),"desc"===d.dir&&(s*=-1),0!==s)break}return i.before?s<=0:s<0}function I0(i,n){if(null===i)return null===n;if(null===n||i.before!==n.before||i.position.length!==n.position.length)return!1;for(let r=0;r<i.position.length;r++)if(!Ls(i.position[r],n.position[r]))return!1;return!0}class Eu{constructor(n,r=null,s=[],l=[],d=null,f="F",E=null,C=null){this.path=n,this.collectionGroup=r,this.explicitOrderBy=s,this.filters=l,this.limit=d,this.limitType=f,this.startAt=E,this.endAt=C,this.V=null,this.S=null}}function eI(i,n,r,s,l,d,f,E){return new Eu(i,n,r,s,l,d,f,E)}function Vs(i){return new Eu(i)}function Sy(i){return!cs(i.limit)&&"F"===i.limitType}function Sp(i){return!cs(i.limit)&&"L"===i.limitType}function D0(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Ay(i){for(const n of i.filters)if(n.v())return n.field;return null}function Hd(i){return null!==i.collectionGroup}function Gd(i){const n=Le(i);if(null===n.V){n.V=[];const r=Ay(n),s=D0(n);if(null!==r&&null===s)r.isKeyField()||n.V.push(new Tp(r)),n.V.push(new Tp($t.keyField(),"asc"));else{let l=!1;for(const d of n.explicitOrderBy)n.V.push(d),d.field.isKeyField()&&(l=!0);if(!l){const d=n.explicitOrderBy.length>0?n.explicitOrderBy[n.explicitOrderBy.length-1].dir:"asc";n.V.push(new Tp($t.keyField(),d))}}}return n.V}function Gi(i){const n=Le(i);if(!n.S)if("F"===n.limitType)n.S=v0(n.path,n.collectionGroup,Gd(n),n.filters,n.limit,n.startAt,n.endAt);else{const r=[];for(const d of Gd(n))r.push(new Tp(d.field,"desc"===d.dir?"asc":"desc"));const s=n.endAt?new Dp(n.endAt.position,!n.endAt.before):null,l=n.startAt?new Dp(n.startAt.position,!n.startAt.before):null;n.S=v0(n.path,n.collectionGroup,r,n.filters,n.limit,s,l)}return n.S}function tI(i,n,r){return new Eu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),n,r,i.startAt,i.endAt)}function Ap(i,n){return E0(Gi(i),Gi(n))&&i.limitType===n.limitType}function nI(i){return`${Ip(Gi(i))}|lt:${i.limitType}`}function T0(i){return`Query(target=${function(i){let n=i.path.canonicalString();return null!==i.collectionGroup&&(n+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(n+=`, filters: [${i.filters.map(r=>{return`${(s=r).field.canonicalString()} ${s.op} ${Cy(s.value)}`;var s}).join(", ")}]`),cs(i.limit)||(n+=", limit: "+i.limit),i.orderBy.length>0&&(n+=`, orderBy: [${i.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),i.startAt&&(n+=", startAt: "+C0(i.startAt)),i.endAt&&(n+=", endAt: "+C0(i.endAt)),`Target(${n})`}(Gi(i))}; limitType=${i.limitType})`}function Rp(i,n){return n.isFoundDocument()&&function(r,s){const l=s.key.path;return null!==r.collectionGroup?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Je.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(i,n)&&function(r,s){for(const l of r.explicitOrderBy)if(!l.field.isKeyField()&&null===s.data.field(l.field))return!1;return!0}(i,n)&&function(r,s){for(const l of r.filters)if(!l.matches(s))return!1;return!0}(i,n)&&(s=n,!((r=i).startAt&&!XC(r.startAt,Gd(r),s)||r.endAt&&XC(r.endAt,Gd(r),s)));var r,s}function S0(i){return(n,r)=>{let s=!1;for(const l of Gd(i)){const d=PA(l,n,r);if(0!==d)return d;s=s||l.field.isKeyField()}return 0}}function PA(i,n,r){const s=i.field.isKeyField()?Je.comparator(n.key,r.key):function(l,d,f){const E=d.data.field(l),C=f.data.field(l);return null!==E&&null!==C?nc(E,C):nt()}(i.field,n,r);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return nt()}}function A0(i,n){if(i.D){if(isNaN(n))return{doubleValue:"NaN"};if(n===1/0)return{doubleValue:"Infinity"};if(n===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ba(n)?"-0":n}}function R0(i){return{integerValue:""+i}}function Ry(i,n){return tc(n)?R0(n):A0(i,n)}class x0{constructor(){this._=void 0}}function N0(i,n,r){return i instanceof Ro?function(s,l){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&(d.fields.__previous_value__=l),{mapValue:d}}(r,n):i instanceof rc?xy(i,n):i instanceof Ca?rI(i,n):function(s,l){const d=FA(s,l),f=Ny(d)+Ny(s.C);return y0(d)&&y0(s.C)?R0(f):A0(s.N,f)}(i,n)}function kA(i,n,r){return i instanceof rc?xy(i,n):i instanceof Ca?rI(i,n):r}function FA(i,n){return i instanceof wu?y0(r=n)||(s=r)&&"doubleValue"in s?n:{integerValue:0}:null;var s,r}class Ro extends x0{}class rc extends x0{constructor(n){super(),this.elements=n}}function xy(i,n){const r=M0(n);for(const s of i.elements)r.some(l=>Ls(l,s))||r.push(s);return{arrayValue:{values:r}}}class Ca extends x0{constructor(n){super(),this.elements=n}}function rI(i,n){let r=M0(n);for(const s of i.elements)r=r.filter(l=>!Ls(l,s));return{arrayValue:{values:r}}}class wu extends x0{constructor(n,r){super(),this.N=n,this.C=r}}function Ny(i){return wn(i.integerValue||i.doubleValue)}function M0(i){return Dy(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class My{constructor(n,r){this.field=n,this.transform=r}}class iI{constructor(n,r){this.version=n,this.transformResults=r}}class jn{constructor(n,r){this.updateTime=n,this.exists=r}static none(){return new jn}static exists(n){return new jn(void 0,n)}static updateTime(n){return new jn(n)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(n){return this.exists===n.exists&&(this.updateTime?!!n.updateTime&&this.updateTime.isEqual(n.updateTime):!n.updateTime)}}function Oy(i,n){return void 0!==i.updateTime?n.isFoundDocument()&&n.version.isEqual(i.updateTime):void 0===i.exists||i.exists===n.isFoundDocument()}class xp{}function O0(i,n,r){i instanceof Np?function(s,l,d){const f=s.value.clone(),E=Fy(s.fieldTransforms,l,d.transformResults);f.setAll(E),l.convertToFoundDocument(d.version,f).setHasCommittedMutations()}(i,n,r):i instanceof Ia?function(s,l,d){if(!Oy(s.precondition,l))return void l.convertToUnknownDocument(d.version);const f=Fy(s.fieldTransforms,l,d.transformResults),E=l.data;E.setAll(F0(s)),E.setAll(f),l.convertToFoundDocument(d.version,E).setHasCommittedMutations()}(i,n,r):n.convertToNoDocument(r.version).setHasCommittedMutations()}function Py(i,n,r){var l;i instanceof Np?function(s,l,d){if(!Oy(s.precondition,l))return;const f=s.value.clone(),E=L0(s.fieldTransforms,d,l);f.setAll(E),l.convertToFoundDocument(k0(l),f).setHasLocalMutations()}(i,n,r):i instanceof Ia?function(s,l,d){if(!Oy(s.precondition,l))return;const f=L0(s.fieldTransforms,d,l),E=l.data;E.setAll(F0(s)),E.setAll(f),l.convertToFoundDocument(k0(l),E).setHasLocalMutations()}(i,n,r):Oy(i.precondition,l=n)&&l.convertToNoDocument(ut.min())}function P0(i,n){let r=null;for(const s of i.fieldTransforms){const l=n.data.field(s.field),d=FA(s.transform,l||null);null!=d&&(null==r&&(r=oi.empty()),r.set(s.field,d))}return r||null}function ky(i,n){return i.type===n.type&&!!i.key.isEqual(n.key)&&!!i.precondition.isEqual(n.precondition)&&(s=n.fieldTransforms,!!(void 0===(r=i.fieldTransforms)&&void 0===s||r&&s&&wa(r,s,(l,d)=>function(i,n){return i.field.isEqual(n.field)&&(s=n.transform,(r=i.transform)instanceof rc&&s instanceof rc||r instanceof Ca&&s instanceof Ca?wa(r.elements,s.elements,Ls):r instanceof wu&&s instanceof wu?Ls(r.C,s.C):r instanceof Ro&&s instanceof Ro);var r,s}(l,d))))&&(0===i.type?i.value.isEqual(n.value):1!==i.type||i.data.isEqual(n.data)&&i.fieldMask.isEqual(n.fieldMask));var r,s}function k0(i){return i.isFoundDocument()?i.version:ut.min()}class Np extends xp{constructor(n,r,s,l=[]){super(),this.key=n,this.value=r,this.precondition=s,this.fieldTransforms=l,this.type=0}}class Ia extends xp{constructor(n,r,s,l,d=[]){super(),this.key=n,this.data=r,this.fieldMask=s,this.precondition=l,this.fieldTransforms=d,this.type=1}}function F0(i){const n=new Map;return i.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const s=i.data.field(r);n.set(r,s)}}),n}function Fy(i,n,r){const s=new Map;gt(i.length===r.length);for(let l=0;l<r.length;l++){const d=i[l],f=d.transform,E=n.data.field(d.field);s.set(d.field,kA(f,E,r[l]))}return s}function L0(i,n,r){const s=new Map;for(const l of i){const d=l.transform,f=r.data.field(l.field);s.set(l.field,N0(d,f,n))}return s}class Mp extends xp{constructor(n,r){super(),this.key=n,this.precondition=r,this.type=2,this.fieldTransforms=[]}}class V0 extends xp{constructor(n,r){super(),this.key=n,this.precondition=r,this.type=3,this.fieldTransforms=[]}}class VA{constructor(n){this.count=n}}var Fn,Pt;function U0(i){switch(i){case ce.OK:return nt();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return nt()}}function B0(i){if(void 0===i)return er("GRPC error has no .code"),ce.UNKNOWN;switch(i){case Fn.OK:return ce.OK;case Fn.CANCELLED:return ce.CANCELLED;case Fn.UNKNOWN:return ce.UNKNOWN;case Fn.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Fn.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Fn.INTERNAL:return ce.INTERNAL;case Fn.UNAVAILABLE:return ce.UNAVAILABLE;case Fn.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Fn.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Fn.NOT_FOUND:return ce.NOT_FOUND;case Fn.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Fn.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Fn.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Fn.ABORTED:return ce.ABORTED;case Fn.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Fn.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Fn.DATA_LOSS:return ce.DATA_LOSS;default:return nt()}}(Pt=Fn||(Fn={}))[Pt.OK=0]="OK",Pt[Pt.CANCELLED=1]="CANCELLED",Pt[Pt.UNKNOWN=2]="UNKNOWN",Pt[Pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pt[Pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pt[Pt.NOT_FOUND=5]="NOT_FOUND",Pt[Pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pt[Pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pt[Pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pt[Pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pt[Pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pt[Pt.ABORTED=10]="ABORTED",Pt[Pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pt[Pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pt[Pt.INTERNAL=13]="INTERNAL",Pt[Pt.UNAVAILABLE=14]="UNAVAILABLE",Pt[Pt.DATA_LOSS=15]="DATA_LOSS";class zn{constructor(n,r){this.comparator=n,this.root=r||cr.EMPTY}insert(n,r){return new zn(this.comparator,this.root.insert(n,r,this.comparator).copy(null,null,cr.BLACK,null,null))}remove(n){return new zn(this.comparator,this.root.remove(n,this.comparator).copy(null,null,cr.BLACK,null,null))}get(n){let r=this.root;for(;!r.isEmpty();){const s=this.comparator(n,r.key);if(0===s)return r.value;s<0?r=r.left:s>0&&(r=r.right)}return null}indexOf(n){let r=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(n,s.key);if(0===l)return r+s.left.size;l<0?s=s.left:(r+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(n){return this.root.inorderTraversal(n)}forEach(n){this.inorderTraversal((r,s)=>(n(r,s),!1))}toString(){const n=[];return this.inorderTraversal((r,s)=>(n.push(`${r}:${s}`),!1)),`{${n.join(", ")}}`}reverseTraversal(n){return this.root.reverseTraversal(n)}getIterator(){return new Op(this.root,null,this.comparator,!1)}getIteratorFrom(n){return new Op(this.root,n,this.comparator,!1)}getReverseIterator(){return new Op(this.root,null,this.comparator,!0)}getReverseIteratorFrom(n){return new Op(this.root,n,this.comparator,!0)}}class Op{constructor(n,r,s,l){this.isReverse=l,this.nodeStack=[];let d=1;for(;!n.isEmpty();)if(d=r?s(n.key,r):1,l&&(d*=-1),d<0)n=this.isReverse?n.left:n.right;else{if(0===d){this.nodeStack.push(n);break}this.nodeStack.push(n),n=this.isReverse?n.right:n.left}}getNext(){let n=this.nodeStack.pop();const r={key:n.key,value:n.value};if(this.isReverse)for(n=n.left;!n.isEmpty();)this.nodeStack.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack.push(n),n=n.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const n=this.nodeStack[this.nodeStack.length-1];return{key:n.key,value:n.value}}}class cr{constructor(n,r,s,l,d){this.key=n,this.value=r,this.color=null!=s?s:cr.RED,this.left=null!=l?l:cr.EMPTY,this.right=null!=d?d:cr.EMPTY,this.size=this.left.size+1+this.right.size}copy(n,r,s,l,d){return new cr(null!=n?n:this.key,null!=r?r:this.value,null!=s?s:this.color,null!=l?l:this.left,null!=d?d:this.right)}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,s){let l=this;const d=s(n,l.key);return l=d<0?l.copy(null,null,null,l.left.insert(n,r,s),null):0===d?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(n,r,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return cr.EMPTY;let n=this;return n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.removeMin(),null),n.fixUp()}remove(n,r){let s,l=this;if(r(n,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(n,r),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),0===r(n,l.key)){if(l.right.isEmpty())return cr.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(n,r))}return l.fixUp()}isRed(){return this.color}fixUp(){let n=this;return n.right.isRed()&&!n.left.isRed()&&(n=n.rotateLeft()),n.left.isRed()&&n.left.left.isRed()&&(n=n.rotateRight()),n.left.isRed()&&n.right.isRed()&&(n=n.colorFlip()),n}moveRedLeft(){let n=this.colorFlip();return n.right.left.isRed()&&(n=n.copy(null,null,null,null,n.right.rotateRight()),n=n.rotateLeft(),n=n.colorFlip()),n}moveRedRight(){let n=this.colorFlip();return n.left.left.isRed()&&(n=n.rotateRight(),n=n.colorFlip()),n}rotateLeft(){const n=this.copy(null,null,cr.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight(){const n=this.copy(null,null,cr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth(){const n=this.check();return Math.pow(2,n)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();const n=this.left.check();if(n!==this.right.check())throw nt();return n+(this.isRed()?0:1)}}cr.EMPTY=null,cr.RED=!0,cr.BLACK=!1,cr.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(i,n,r,s,l){return this}insert(i,n,r){return new cr(i,n)}remove(i,n){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Mn{constructor(n){this.comparator=n,this.data=new zn(this.comparator)}has(n){return null!==this.data.get(n)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(n){return this.data.indexOf(n)}forEach(n){this.data.inorderTraversal((r,s)=>(n(r),!1))}forEachInRange(n,r){const s=this.data.getIteratorFrom(n[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,n[1])>=0)return;r(l.key)}}forEachWhile(n,r){let s;for(s=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();s.hasNext();)if(!n(s.getNext().key))return}firstAfterOrEqual(n){const r=this.data.getIteratorFrom(n);return r.hasNext()?r.getNext().key:null}getIterator(){return new j0(this.data.getIterator())}getIteratorFrom(n){return new j0(this.data.getIteratorFrom(n))}add(n){return this.copy(this.data.remove(n).insert(n,!0))}delete(n){return this.has(n)?this.copy(this.data.remove(n)):this}isEmpty(){return this.data.isEmpty()}unionWith(n){let r=this;return r.size<n.size&&(r=n,n=this),n.forEach(s=>{r=r.add(s)}),r}isEqual(n){if(!(n instanceof Mn)||this.size!==n.size)return!1;const r=this.data.getIterator(),s=n.data.getIterator();for(;r.hasNext();){const l=r.getNext().key,d=s.getNext().key;if(0!==this.comparator(l,d))return!1}return!0}toArray(){const n=[];return this.forEach(r=>{n.push(r)}),n}toString(){const n=[];return this.forEach(r=>n.push(r)),"SortedSet("+n.toString()+")"}copy(n){const r=new Mn(this.comparator);return r.data=n,r}}class j0{constructor(n){this.iter=n}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const sI=new zn(Je.comparator);function Us(){return sI}const UA=new zn(Je.comparator);function $0(){return UA}const oI=new zn(Je.comparator);function aI(){return oI}const nr=new Mn(Je.comparator);function Wt(...i){let n=nr;for(const r of i)n=n.add(r);return n}const BA=new Mn(Ot);function Ly(){return BA}class qd{constructor(n,r,s,l,d){this.snapshotVersion=n,this.targetChanges=r,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(n,r){const s=new Map;return s.set(n,Pp.createSynthesizedTargetChangeForCurrentChange(n,r)),new qd(ut.min(),s,Ly(),Us(),Wt())}}class Pp{constructor(n,r,s,l,d){this.resumeToken=n,this.current=r,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(n,r){return new Pp(Qt.EMPTY_BYTE_STRING,r,Wt(),Wt(),Wt())}}class kp{constructor(n,r,s,l){this.k=n,this.removedTargetIds=r,this.key=s,this.$=l}}class H0{constructor(n,r){this.targetId=n,this.O=r}}class ic{constructor(n,r,s=Qt.EMPTY_BYTE_STRING,l=null){this.state=n,this.targetIds=r,this.resumeToken=s,this.cause=l}}class uI{constructor(){this.F=0,this.M=lI(),this.L=Qt.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(n){n.approximateByteSize()>0&&(this.U=!0,this.L=n)}W(){let n=Wt(),r=Wt(),s=Wt();return this.M.forEach((l,d)=>{switch(d){case 0:n=n.add(l);break;case 2:r=r.add(l);break;case 1:s=s.add(l);break;default:nt()}}),new Pp(this.L,this.B,n,r,s)}G(){this.U=!1,this.M=lI()}H(n,r){this.U=!0,this.M=this.M.insert(n,r)}J(n){this.U=!0,this.M=this.M.remove(n)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class jA{constructor(n){this.tt=n,this.et=new Map,this.nt=Us(),this.st=G0(),this.it=new Mn(Ot)}rt(n){for(const r of n.k)n.$&&n.$.isFoundDocument()?this.ot(r,n.$):this.at(r,n.key,n.$);for(const r of n.removedTargetIds)this.at(r,n.key,n.$)}ct(n){this.forEachTarget(n,r=>{const s=this.ut(r);switch(n.state){case 0:this.ht(r)&&s.j(n.resumeToken);break;case 1:s.X(),s.q||s.G(),s.j(n.resumeToken);break;case 2:s.X(),s.q||this.removeTarget(r);break;case 3:this.ht(r)&&(s.Z(),s.j(n.resumeToken));break;case 4:this.ht(r)&&(this.lt(r),s.j(n.resumeToken));break;default:nt()}})}forEachTarget(n,r){n.targetIds.length>0?n.targetIds.forEach(r):this.et.forEach((s,l)=>{this.ht(l)&&r(l)})}ft(n){const r=n.targetId,s=n.O.count,l=this.dt(r);if(l){const d=l.target;if(Ty(d))if(0===s){const f=new Je(d.path);this.at(r,f,bn.newNoDocument(f,ut.min()))}else gt(1===s);else this.wt(r)!==s&&(this.lt(r),this.it=this.it.add(r))}}_t(n){const r=new Map;this.et.forEach((d,f)=>{const E=this.dt(f);if(E){if(d.current&&Ty(E.target)){const C=new Je(E.target.path);null!==this.nt.get(C)||this.gt(f,C)||this.at(f,C,bn.newNoDocument(C,n))}d.K&&(r.set(f,d.W()),d.G())}});let s=Wt();this.st.forEach((d,f)=>{let E=!0;f.forEachWhile(C=>{const S=this.dt(C);return!S||2===S.purpose||(E=!1,!1)}),E&&(s=s.add(d))});const l=new qd(n,r,this.it,this.nt,s);return this.nt=Us(),this.st=G0(),this.it=new Mn(Ot),l}ot(n,r){if(!this.ht(n))return;const s=this.gt(n,r.key)?2:0;this.ut(n).H(r.key,s),this.nt=this.nt.insert(r.key,r),this.st=this.st.insert(r.key,this.yt(r.key).add(n))}at(n,r,s){if(!this.ht(n))return;const l=this.ut(n);this.gt(n,r)?l.H(r,1):l.J(r),this.st=this.st.insert(r,this.yt(r).delete(n)),s&&(this.nt=this.nt.insert(r,s))}removeTarget(n){this.et.delete(n)}wt(n){const r=this.ut(n).W();return this.tt.getRemoteKeysForTarget(n).size+r.addedDocuments.size-r.removedDocuments.size}Y(n){this.ut(n).Y()}ut(n){let r=this.et.get(n);return r||(r=new uI,this.et.set(n,r)),r}yt(n){let r=this.st.get(n);return r||(r=new Mn(Ot),this.st=this.st.insert(n,r)),r}ht(n){const r=null!==this.dt(n);return r||Oe("WatchChangeAggregator","Detected inactive target",n),r}dt(n){const r=this.et.get(n);return r&&r.q?null:this.tt.Et(n)}lt(n){this.et.set(n,new uI),this.tt.getRemoteKeysForTarget(n).forEach(r=>{this.at(n,r,null)})}gt(n,r){return this.tt.getRemoteKeysForTarget(n).has(r)}}function G0(){return new zn(Je.comparator)}function lI(){return new zn(Je.comparator)}const cI={asc:"ASCENDING",desc:"DESCENDING"},AN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class dI{constructor(n,r){this.databaseId=n,this.D=r}}function sc(i,n){return i.D?`${new Date(1e3*n.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+n.nanoseconds).slice(-9)}Z`:{seconds:""+n.seconds,nanos:n.nanoseconds}}function Bs(i,n){return i.D?n.toBase64():n.toUint8Array()}function $A(i,n){return sc(i,n.toTimestamp())}function dr(i){return gt(!!i),ut.fromTimestamp(function(n){const r=Hi(n);return new tr(r.seconds,r.nanos)}(i))}function ds(i,n){return(r=i,new At(["projects",r.projectId,"databases",r.database])).child("documents").child(n).canonicalString();var r}function hs(i){const n=At.fromString(i);return gt(W0(n)),n}function ai(i,n){return ds(i.databaseId,n.path)}function js(i,n){const r=hs(n);if(r.get(1)!==i.databaseId.projectId)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+i.databaseId.projectId);if(r.get(3)!==i.databaseId.database)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+i.databaseId.database);return new Je(fI(r))}function Vy(i,n){return ds(i.databaseId,n)}function hI(i){const n=hs(i);return 4===n.length?At.emptyPath():fI(n)}function Fp(i){return new At(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function fI(i){return gt(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function pI(i,n,r){return{name:ai(i,n),fields:r.value.mapValue.fields}}function Uy(i,n,r){const s=js(i,n.name),l=dr(n.updateTime),d=new oi({mapValue:{fields:n.fields}}),f=bn.newFoundDocument(s,l,d);return r&&f.setHasCommittedMutations(),r?f.setHasCommittedMutations():f}function Vp(i,n){let r;if(n instanceof Np)r={update:pI(i,n.key,n.value)};else if(n instanceof Mp)r={delete:ai(i,n.key)};else if(n instanceof Ia)r={update:pI(i,n.key,n.data),updateMask:CI(n.fieldMask)};else{if(!(n instanceof V0))return nt();r={verify:ai(i,n.key)}}return n.fieldTransforms.length>0&&(r.updateTransforms=n.fieldTransforms.map(s=>function(l,d){const f=d.transform;if(f instanceof Ro)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof rc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Ca)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof wu)return{fieldPath:d.field.canonicalString(),increment:f.C};throw nt()}(0,s))),n.precondition.isNone||(r.currentDocument=void 0!==(l=n.precondition).updateTime?{updateTime:$A(i,l.updateTime)}:void 0!==l.exists?{exists:l.exists}:nt()),r;var l}function gI(i,n){const r=n.currentDocument?void 0!==(l=n.currentDocument).updateTime?jn.updateTime(dr(l.updateTime)):void 0!==l.exists?jn.exists(l.exists):jn.none():jn.none(),s=n.updateTransforms?n.updateTransforms.map(l=>function(d,f){let E=null;"setToServerValue"in f?(gt("REQUEST_TIME"===f.setToServerValue),E=new Ro):"appendMissingElements"in f?E=new rc(f.appendMissingElements.values||[]):"removeAllFromArray"in f?E=new Ca(f.removeAllFromArray.values||[]):"increment"in f?E=new wu(d,f.increment):nt();const C=$t.fromServerFormat(f.fieldPath);return new My(C,E)}(i,l)):[];var l;if(n.update){const l=js(i,n.update.name),d=new oi({mapValue:{fields:n.update.fields}});if(n.updateMask){const f=new ls((n.updateMask.fieldPaths||[]).map(S=>$t.fromServerFormat(S)));return new Ia(l,d,f,r,s)}return new Np(l,d,r,s)}if(n.delete){const l=js(i,n.delete);return new Mp(l,r)}if(n.verify){const l=js(i,n.verify);return new V0(l,r)}return nt()}function q0(i,n){return{documents:[Vy(i,n.path)]}}function Up(i,n){const r={structuredQuery:{}},s=n.path;null!==n.collectionGroup?(r.parent=Vy(i,s),r.structuredQuery.from=[{collectionId:n.collectionGroup,allDescendants:!0}]):(r.parent=Vy(i,s.popLast()),r.structuredQuery.from=[{collectionId:s.lastSegment()}]);const l=function(E){if(0===E.length)return;const C=E.map(S=>function(x){if("=="===x.op){if(_0(x.value))return{unaryFilter:{field:oc(x.field),op:"IS_NAN"}};if(QC(x.value))return{unaryFilter:{field:oc(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(_0(x.value))return{unaryFilter:{field:oc(x.field),op:"IS_NOT_NAN"}};if(QC(x.value))return{unaryFilter:{field:oc(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oc(x.field),op:EI(x.op),value:x.value}}}(S));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(n.filters);l&&(r.structuredQuery.where=l);const d=function(E){if(0!==E.length)return E.map(C=>{return{field:oc((S=C).field),direction:vI(S.dir)};var S})}(n.orderBy);d&&(r.structuredQuery.orderBy=d);const f=(C=n.limit,i.D||cs(C)?C:{value:C});var C;return null!==f&&(r.structuredQuery.limit=f),n.startAt&&(r.structuredQuery.startAt=By(n.startAt)),n.endAt&&(r.structuredQuery.endAt=By(n.endAt)),r}function yI(i){let n=hI(i.parent);const r=i.structuredQuery,s=r.from?r.from.length:0;let l=null;if(s>0){gt(1===s);const x=r.from[0];x.allDescendants?l=x.collectionId:n=n.child(x.collectionId)}let d=[];r.where&&(d=z0(r.where));let f=[];r.orderBy&&(f=r.orderBy.map(x=>{return new Tp(ac((N=x).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let E=null;r.limit&&(E=function(x){let N;return N="object"==typeof x?x.value:x,cs(N)?null:N}(r.limit));let C=null;r.startAt&&(C=Bp(r.startAt));let S=null;return r.endAt&&(S=Bp(r.endAt)),eI(n,l,f,d,E,"F",C,S)}function z0(i){return i?void 0!==i.unaryFilter?[bI(i)]:void 0!==i.fieldFilter?[wI(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(n=>z0(n)).reduce((n,r)=>n.concat(r)):nt():[]}function By(i){return{before:i.before,values:i.position}}function Bp(i){return new Dp(i.values||[],!!i.before)}function vI(i){return cI[i]}function EI(i){return AN[i]}function oc(i){return{fieldPath:i.canonicalString()}}function ac(i){return $t.fromServerFormat(i.fieldPath)}function wI(i){return Hr.create(ac(i.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return nt()}}(i.fieldFilter.op),i.fieldFilter.value)}function bI(i){switch(i.unaryFilter.op){case"IS_NAN":const n=ac(i.unaryFilter.field);return Hr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=ac(i.unaryFilter.field);return Hr.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ac(i.unaryFilter.field);return Hr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=ac(i.unaryFilter.field);return Hr.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return nt()}}function CI(i){const n=[];return i.fields.forEach(r=>n.push(r.canonicalString())),{fieldPaths:n}}function W0(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function $s(i){let n="";for(let r=0;r<i.length;r++)n.length>0&&(n=II(n)),n=GA(i.get(r),n);return II(n)}function GA(i,n){let r=n;const s=i.length;for(let l=0;l<s;l++){const d=i.charAt(l);switch(d){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=d}}return r}function II(i){return i+"\x01\x01"}function Da(i){const n=i.length;if(gt(n>=2),2===n)return gt("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),At.emptyPath();const r=n-2,s=[];let l="";for(let d=0;d<n;){const f=i.indexOf("\x01",d);switch((f<0||f>r)&&nt(),i.charAt(f+1)){case"\x01":const E=i.substring(d,f);let C;0===l.length?C=E:(l+=E,C=l,l=""),s.push(C);break;case"\x10":l+=i.substring(d,f),l+="\0";break;case"\x11":l+=i.substring(d,f+1);break;default:nt()}d=f+2}return new At(s)}class qA{constructor(n,r){this.seconds=n,this.nanoseconds=r}}class qi{constructor(n,r,s){this.ownerId=n,this.allowTabSynchronization=r,this.leaseTimestampMs=s}}qi.store="owner",qi.key="owner";class bu{constructor(n,r,s){this.userId=n,this.lastAcknowledgedBatchId=r,this.lastStreamToken=s}}bu.store="mutationQueues",bu.keyPath="userId";class Cn{constructor(n,r,s,l,d){this.userId=n,this.batchId=r,this.localWriteTimeMs=s,this.baseMutations=l,this.mutations=d}}Cn.store="mutations",Cn.keyPath="batchId",Cn.userMutationsIndex="userMutationsIndex",Cn.userMutationsKeyPath=["userId","batchId"];class Gr{constructor(){}static prefixForUser(n){return[n]}static prefixForPath(n,r){return[n,$s(r)]}static key(n,r,s){return[n,$s(r),s]}}Gr.store="documentMutations",Gr.PLACEHOLDER=new Gr;class zA{constructor(n,r){this.path=n,this.readTime=r}}class WA{constructor(n,r){this.path=n,this.version=r}}class Ln{constructor(n,r,s,l,d,f){this.unknownDocument=n,this.noDocument=r,this.document=s,this.hasCommittedMutations=l,this.readTime=d,this.parentPath=f}}Ln.store="remoteDocuments",Ln.readTimeIndex="readTimeIndex",Ln.readTimeIndexPath="readTime",Ln.collectionReadTimeIndex="collectionReadTimeIndex",Ln.collectionReadTimeIndexPath=["parentPath","readTime"];class xo{constructor(n){this.byteSize=n}}xo.store="remoteDocumentGlobal",xo.key="remoteDocumentGlobalKey";class Ci{constructor(n,r,s,l,d,f,E){this.targetId=n,this.canonicalId=r,this.readTime=s,this.resumeToken=l,this.lastListenSequenceNumber=d,this.lastLimboFreeSnapshotVersion=f,this.query=E}}Ci.store="targets",Ci.keyPath="targetId",Ci.queryTargetsIndexName="queryTargetsIndex",Ci.queryTargetsKeyPath=["canonicalId","targetId"];class xr{constructor(n,r,s){this.targetId=n,this.path=r,this.sequenceNumber=s}}xr.store="targetDocuments",xr.keyPath=["targetId","path"],xr.documentTargetsIndex="documentTargetsIndex",xr.documentTargetsKeyPath=["path","targetId"];class zi{constructor(n,r,s,l){this.highestTargetId=n,this.highestListenSequenceNumber=r,this.lastRemoteSnapshotVersion=s,this.targetCount=l}}zi.key="targetGlobalKey",zi.store="targetGlobal";class uc{constructor(n,r){this.collectionId=n,this.parent=r}}uc.store="collectionParents",uc.keyPath=["collectionId","parent"];class Ta{constructor(n,r,s,l){this.clientId=n,this.updateTimeMs=r,this.networkEnabled=s,this.inForeground=l}}Ta.store="clientMetadata",Ta.keyPath="clientId";class lc{constructor(n,r,s){this.bundleId=n,this.createTime=r,this.version=s}}lc.store="bundles",lc.keyPath="bundleId";class cc{constructor(n,r,s){this.name=n,this.readTime=r,this.bundledQuery=s}}cc.store="namedQueries",cc.keyPath="name";const DI=[bu.store,Cn.store,Gr.store,Ln.store,Ci.store,qi.store,zi.store,xr.store,Ta.store,xo.store,uc.store,lc.store,cc.store],Z0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class K0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(n){this.onCommittedListeners.push(n)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(n=>n())}}class Se{constructor(n){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,n(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(n){return this.next(void 0,n)}next(n,r){return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(n,this.result):new Se((s,l)=>{this.nextCallback=d=>{this.wrapSuccess(n,d).next(s,l)},this.catchCallback=d=>{this.wrapFailure(r,d).next(s,l)}})}toPromise(){return new Promise((n,r)=>{this.next(n,r)})}wrapUserFunction(n){try{const r=n();return r instanceof Se?r:Se.resolve(r)}catch(r){return Se.reject(r)}}wrapSuccess(n,r){return n?this.wrapUserFunction(()=>n(r)):Se.resolve(r)}wrapFailure(n,r){return n?this.wrapUserFunction(()=>n(r)):Se.reject(r)}static resolve(n){return new Se((r,s)=>{r(n)})}static reject(n){return new Se((r,s)=>{s(n)})}static waitFor(n){return new Se((r,s)=>{let l=0,d=0,f=!1;n.forEach(E=>{++l,E.next(()=>{++d,f&&d===l&&r()},C=>s(C))}),f=!0,d===l&&r()})}static or(n){let r=Se.resolve(!1);for(const s of n)r=r.next(l=>l?Se.resolve(l):s());return r}static forEach(n,r){const s=[];return n.forEach((l,d)=>{s.push(r.call(this,l,d))}),this.waitFor(s)}}class jp{constructor(n,r){this.action=n,this.transaction=r,this.aborted=!1,this.Tt=new Rr,this.transaction.oncomplete=()=>{this.Tt.resolve()},this.transaction.onabort=()=>{r.error?this.Tt.reject(new dc(n,r.error)):this.Tt.resolve()},this.transaction.onerror=s=>{const l=Iu(s.target.error);this.Tt.reject(new dc(n,l))}}static open(n,r,s,l){try{return new jp(r,n.transaction(l,s))}catch(d){throw new dc(r,d)}}get It(){return this.Tt.promise}abort(n){n&&this.Tt.reject(n),this.aborted||(Oe("SimpleDb","Aborting transaction:",n?n.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(n){const r=this.transaction.objectStore(n);return new hc(r)}}class fs{constructor(n,r,s){this.name=n,this.version=r,this.At=s,12.2===fs.Rt((0,bt.z$)())&&er("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(n){return Oe("SimpleDb","Removing database:",n),fc(window.indexedDB.deleteDatabase(n)).toPromise()}static bt(){if(!(0,bt.hl)())return!1;if(fs.Pt())return!0;const n=(0,bt.z$)(),r=fs.Rt(n),s=0<r&&r<10,l=fs.vt(n),d=0<l&&l<4.5;return!(n.indexOf("MSIE ")>0||n.indexOf("Trident/")>0||n.indexOf("Edge/")>0||s||d)}static Pt(){var n;return"undefined"!=typeof process&&"YES"===(null===(n=process.env)||void 0===n?void 0:n.Vt)}static St(n,r){return n.store(r)}static Rt(n){const r=n.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static vt(n){const r=n.match(/Android ([\d.]+)/i),s=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(s)}Dt(n){var r=this;return(0,ye.Z)(function*(){return r.db||(Oe("SimpleDb","Opening database:",r.name),r.db=yield new Promise((s,l)=>{const d=indexedDB.open(r.name,r.version);d.onsuccess=f=>{s(f.target.result)},d.onblocked=()=>{l(new dc(n,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=f=>{const E=f.target.error;l("VersionError"===E.name?new Re(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===E.name?new Re(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+E):new dc(n,E))},d.onupgradeneeded=f=>{Oe("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',f.oldVersion),r.At.Ct(f.target.result,d.transaction,f.oldVersion,r.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.Nt&&(r.db.onversionchange=s=>r.Nt(s)),r.db})()}xt(n){this.Nt=n,this.db&&(this.db.onversionchange=r=>n(r))}runTransaction(n,r,s,l){var d=this;return(0,ye.Z)(function*(){const f="readonly"===r;let E=0;for(;;){++E;try{d.db=yield d.Dt(n);const C=jp.open(d.db,n,f?"readonly":"readwrite",s),S=l(C).catch(x=>(C.abort(x),Se.reject(x))).toPromise();return S.catch(()=>{}),yield C.It,S}catch(C){const S="FirebaseError"!==C.name&&E<3;if(Oe("SimpleDb","Transaction failed with error:",C.message,"Retrying:",S),d.close(),!S)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class TI{constructor(n){this.kt=n,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(n){this.kt=n}done(){this.$t=!0}Mt(n){this.Ot=n}delete(){return fc(this.kt.delete())}}class dc extends Re{constructor(n,r){super(ce.UNAVAILABLE,`IndexedDB transaction '${n}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Cu(i){return"IndexedDbTransactionError"===i.name}class hc{constructor(n){this.store=n}put(n,r){let s;return void 0!==r?(Oe("SimpleDb","PUT",this.store.name,n,r),s=this.store.put(r,n)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",n),s=this.store.put(n)),fc(s)}add(n){return Oe("SimpleDb","ADD",this.store.name,n,n),fc(this.store.add(n))}get(n){return fc(this.store.get(n)).next(r=>(void 0===r&&(r=null),Oe("SimpleDb","GET",this.store.name,n,r),r))}delete(n){return Oe("SimpleDb","DELETE",this.store.name,n),fc(this.store.delete(n))}count(){return Oe("SimpleDb","COUNT",this.store.name),fc(this.store.count())}Lt(n,r){const s=this.cursor(this.options(n,r)),l=[];return this.Bt(s,(d,f)=>{l.push(f)}).next(()=>l)}Ut(n,r){Oe("SimpleDb","DELETE ALL",this.store.name);const s=this.options(n,r);s.qt=!1;const l=this.cursor(s);return this.Bt(l,(d,f,E)=>E.delete())}Kt(n,r){let s;r?s=n:(s={},r=n);const l=this.cursor(s);return this.Bt(l,r)}jt(n){const r=this.cursor({});return new Se((s,l)=>{r.onerror=d=>{const f=Iu(d.target.error);l(f)},r.onsuccess=d=>{const f=d.target.result;f?n(f.primaryKey,f.value).next(E=>{E?f.continue():s()}):s()}})}Bt(n,r){const s=[];return new Se((l,d)=>{n.onerror=f=>{d(f.target.error)},n.onsuccess=f=>{const E=f.target.result;if(!E)return void l();const C=new TI(E),S=r(E.primaryKey,E.value,C);if(S instanceof Se){const x=S.catch(N=>(C.done(),Se.reject(N)));s.push(x)}C.isDone?l():null===C.Ft?E.continue():E.continue(C.Ft)}}).next(()=>Se.waitFor(s))}options(n,r){let s;return void 0!==n&&("string"==typeof n?s=n:r=n),{index:s,range:r}}cursor(n){let r="next";if(n.reverse&&(r="prev"),n.index){const s=this.store.index(n.index);return n.qt?s.openKeyCursor(n.range,r):s.openCursor(n.range,r)}return this.store.openCursor(n.range,r)}}function fc(i){return new Se((n,r)=>{i.onsuccess=s=>{n(s.target.result)},i.onerror=s=>{const l=Iu(s.target.error);r(l)}})}let SI=!1;function Iu(i){const n=fs.Rt((0,bt.z$)());if(n>=12.2&&n<13){const r="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(r)>=0){const s=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return SI||(SI=!0,setTimeout(()=>{throw s},0)),s}}return i}class ZA extends K0{constructor(n,r){super(),this.Qt=n,this.currentSequenceNumber=r}}function qr(i,n){const r=Le(i);return fs.St(r.Qt,n)}class AI{constructor(n,r,s,l){this.batchId=n,this.localWriteTime=r,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(n,r){const s=r.mutationResults;for(let l=0;l<this.mutations.length;l++){const d=this.mutations[l];d.key.isEqual(n.key)&&O0(d,n,s[l])}}applyToLocalView(n){for(const r of this.baseMutations)r.key.isEqual(n.key)&&Py(r,n,this.localWriteTime);for(const r of this.mutations)r.key.isEqual(n.key)&&Py(r,n,this.localWriteTime)}applyToLocalDocumentSet(n){this.mutations.forEach(r=>{const s=n.get(r.key),l=s;this.applyToLocalView(l),s.isValidDocument()||l.convertToNoDocument(ut.min())})}keys(){return this.mutations.reduce((n,r)=>n.add(r.key),Wt())}isEqual(n){return this.batchId===n.batchId&&wa(this.mutations,n.mutations,(r,s)=>ky(r,s))&&wa(this.baseMutations,n.baseMutations,(r,s)=>ky(r,s))}}class jy{constructor(n,r,s,l){this.batch=n,this.commitVersion=r,this.mutationResults=s,this.docVersions=l}static from(n,r,s){gt(n.mutations.length===s.length);let l=aI();const d=n.mutations;for(let f=0;f<d.length;f++)l=l.insert(d[f].key,s[f].version);return new jy(n,r,s,l)}}class Sa{constructor(n,r,s,l,d=ut.min(),f=ut.min(),E=Qt.EMPTY_BYTE_STRING){this.target=n,this.targetId=r,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=E}withSequenceNumber(n){return new Sa(this.target,this.targetId,this.purpose,n,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(n,r){return new Sa(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,n)}withLastLimboFreeSnapshotVersion(n){return new Sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,n,this.resumeToken)}}class KA{constructor(n){this.Wt=n}}function st(i,n){if(n.document)return Uy(i.Wt,n.document,!!n.hasCommittedMutations);if(n.noDocument){const r=Je.fromSegments(n.noDocument.path),s=zd(n.noDocument.readTime),l=bn.newNoDocument(r,s);return n.hasCommittedMutations?l.setHasCommittedMutations():l}if(n.unknownDocument){const r=Je.fromSegments(n.unknownDocument.path),s=zd(n.unknownDocument.version);return bn.newUnknownDocument(r,s)}return nt()}function RI(i,n,r){const s=Y0(r),l=n.key.path.popLast().toArray();if(n.isFoundDocument()){const d={name:ai(E=i.Wt,(C=n).key),fields:C.data.value.mapValue.fields,updateTime:sc(E,C.version.toTimestamp())};return new Ln(null,null,d,n.hasCommittedMutations,s,l)}var E,C;if(n.isNoDocument()){const d=n.key.path.toArray(),f=Aa(n.version),E=n.hasCommittedMutations;return new Ln(null,new zA(d,f),null,E,s,l)}if(n.isUnknownDocument()){const d=n.key.path.toArray(),f=Aa(n.version);return new Ln(new WA(d,f),null,null,!0,s,l)}return nt()}function Y0(i){const n=i.toTimestamp();return[n.seconds,n.nanoseconds]}function xI(i){const n=new tr(i[0],i[1]);return ut.fromTimestamp(n)}function Aa(i){const n=i.toTimestamp();return new qA(n.seconds,n.nanoseconds)}function zd(i){const n=new tr(i.seconds,i.nanoseconds);return ut.fromTimestamp(n)}function Ra(i,n){const r=(n.baseMutations||[]).map(d=>gI(i.Wt,d));for(let d=0;d<n.mutations.length-1;++d){const f=n.mutations[d];d+1<n.mutations.length&&void 0!==n.mutations[d+1].transform&&(f.updateTransforms=n.mutations[d+1].transform.fieldTransforms,n.mutations.splice(d+1,1),++d)}const s=n.mutations.map(d=>gI(i.Wt,d)),l=tr.fromMillis(n.localWriteTimeMs);return new AI(n.batchId,l,r,s)}function Du(i){const n=zd(i.readTime),r=void 0!==i.lastLimboFreeSnapshotVersion?zd(i.lastLimboFreeSnapshotVersion):ut.min();let s;var l;return void 0!==i.query.documents?(gt(1===(l=i.query).documents.length),s=Gi(Vs(hI(l.documents[0])))):s=Gi(yI(i.query)),new Sa(s,i.targetId,0,i.lastListenSequenceNumber,n,r,Qt.fromBase64String(i.resumeToken))}function On(i,n){const r=Aa(n.snapshotVersion),s=Aa(n.lastLimboFreeSnapshotVersion);let l;l=Ty(n.target)?q0(i.Wt,n.target):Up(i.Wt,n.target);const d=n.resumeToken.toBase64();return new Ci(n.targetId,Ip(n.target),r,d,n.sequenceNumber,s,l)}function NI(i){const n=yI({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?tI(n,n.limit,"L"):n}class MI{getBundleMetadata(n,r){return $y(n).get(r).next(s=>{if(s)return{id:(l=s).bundleId,createTime:zd(l.createTime),version:l.version};var l})}saveBundleMetadata(n,r){return $y(n).put({bundleId:(s=r).id,createTime:Aa(dr(s.createTime)),version:s.version});var s}getNamedQuery(n,r){return OI(n).get(r).next(s=>{if(s)return{name:(l=s).name,query:NI(l.bundledQuery),readTime:zd(l.readTime)};var l})}saveNamedQuery(n,r){return OI(n).put({name:(s=r).name,readTime:Aa(dr(s.readTime)),bundledQuery:s.bundledQuery});var s}}function $y(i){return qr(i,lc.store)}function OI(i){return qr(i,cc.store)}class PI{constructor(){this.Gt=new Hy}addToCollectionParentIndex(n,r){return this.Gt.add(r),Se.resolve()}getCollectionParents(n,r){return Se.resolve(this.Gt.getEntries(r))}}class Hy{constructor(){this.index={}}add(n){const r=n.lastSegment(),s=n.popLast(),l=this.index[r]||new Mn(At.comparator),d=!l.has(s);return this.index[r]=l.add(s),d}has(n){const r=n.lastSegment(),s=n.popLast(),l=this.index[r];return l&&l.has(s)}getEntries(n){return(this.index[n]||new Mn(At.comparator)).toArray()}}class kI{constructor(){this.zt=new Hy}addToCollectionParentIndex(n,r){if(!this.zt.has(r)){const s=r.lastSegment(),l=r.popLast();n.addOnCommittedListener(()=>{this.zt.add(r)});const d={collectionId:s,parent:$s(l)};return Q0(n).put(d)}return Se.resolve()}getCollectionParents(n,r){const s=[],l=IDBKeyRange.bound([r,""],[Ql(r),""],!1,!0);return Q0(n).Lt(l).next(d=>{for(const f of d){if(f.collectionId!==r)break;s.push(Da(f.parent))}return s})}}function Q0(i){return qr(i,uc.store)}const FI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ii{constructor(n,r,s){this.cacheSizeCollectionThreshold=n,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=s}static withCacheSize(n){return new Ii(n,Ii.DEFAULT_COLLECTION_PERCENTILE,Ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function LI(i,n,r){const s=i.store(Cn.store),l=i.store(Gr.store),d=[],f=IDBKeyRange.only(r.batchId);let E=0;const C=s.Kt({range:f},(x,N,V)=>(E++,V.delete()));d.push(C.next(()=>{gt(1===E)}));const S=[];for(const x of r.mutations){const N=Gr.key(n,x.key.path,r.batchId);d.push(l.delete(N)),S.push(x.key)}return Se.waitFor(d).next(()=>S)}function Tu(i){if(!i)return 0;let n;if(i.document)n=i.document;else if(i.unknownDocument)n=i.unknownDocument;else{if(!i.noDocument)throw nt();n=i.noDocument}return JSON.stringify(n).length}Ii.DEFAULT_COLLECTION_PERCENTILE=10,Ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ii.DEFAULT=new Ii(41943040,Ii.DEFAULT_COLLECTION_PERCENTILE,Ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ii.DISABLED=new Ii(-1,0,0);class J0{constructor(n,r,s,l){this.userId=n,this.N=r,this.Ht=s,this.referenceDelegate=l,this.Jt={}}static Yt(n,r,s,l){gt(""!==n.uid);const d=n.isAuthenticated()?n.uid:"";return new J0(d,r,s,l)}checkEmpty(n){let r=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Su(n).Kt({index:Cn.userMutationsIndex,range:s},(l,d,f)=>{r=!1,f.done()}).next(()=>r)}addMutationBatch(n,r,s,l){const d=xa(n),f=Su(n);return f.add({}).next(E=>{gt("number"==typeof E);const C=new AI(E,r,s,l),S=function(V,B,W){const fe=W.baseMutations.map($e=>Vp(V.Wt,$e)),De=W.mutations.map($e=>Vp(V.Wt,$e));return new Cn(B,W.batchId,W.localWriteTime.toMillis(),fe,De)}(this.N,this.userId,C),x=[];let N=new Mn((V,B)=>Ot(V.canonicalString(),B.canonicalString()));for(const V of l){const B=Gr.key(this.userId,V.key.path,E);N=N.add(V.key.path.popLast()),x.push(f.put(S)),x.push(d.put(B,Gr.PLACEHOLDER))}return N.forEach(V=>{x.push(this.Ht.addToCollectionParentIndex(n,V))}),n.addOnCommittedListener(()=>{this.Jt[E]=C.keys()}),Se.waitFor(x).next(()=>C)})}lookupMutationBatch(n,r){return Su(n).get(r).next(s=>s?(gt(s.userId===this.userId),Ra(this.N,s)):null)}Xt(n,r){return this.Jt[r]?Se.resolve(this.Jt[r]):this.lookupMutationBatch(n,r).next(s=>{if(s){const l=s.keys();return this.Jt[r]=l,l}return null})}getNextMutationBatchAfterBatchId(n,r){const s=r+1,l=IDBKeyRange.lowerBound([this.userId,s]);let d=null;return Su(n).Kt({index:Cn.userMutationsIndex,range:l},(f,E,C)=>{E.userId===this.userId&&(gt(E.batchId>=s),d=Ra(this.N,E)),C.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(n){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return Su(n).Kt({index:Cn.userMutationsIndex,range:r,reverse:!0},(l,d,f)=>{s=d.batchId,f.done()}).next(()=>s)}getAllMutationBatches(n){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Su(n).Lt(Cn.userMutationsIndex,r).next(s=>s.map(l=>Ra(this.N,l)))}getAllMutationBatchesAffectingDocumentKey(n,r){const s=Gr.prefixForPath(this.userId,r.path),l=IDBKeyRange.lowerBound(s),d=[];return xa(n).Kt({range:l},(f,E,C)=>{const[S,x,N]=f,V=Da(x);if(S===this.userId&&r.path.isEqual(V))return Su(n).get(N).next(B=>{if(!B)throw nt();gt(B.userId===this.userId),d.push(Ra(this.N,B))});C.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(n,r){let s=new Mn(Ot);const l=[];return r.forEach(d=>{const f=Gr.prefixForPath(this.userId,d.path),E=IDBKeyRange.lowerBound(f),C=xa(n).Kt({range:E},(S,x,N)=>{const[V,B,W]=S,fe=Da(B);V===this.userId&&d.path.isEqual(fe)?s=s.add(W):N.done()});l.push(C)}),Se.waitFor(l).next(()=>this.Zt(n,s))}getAllMutationBatchesAffectingQuery(n,r){const s=r.path,l=s.length+1,d=Gr.prefixForPath(this.userId,s),f=IDBKeyRange.lowerBound(d);let E=new Mn(Ot);return xa(n).Kt({range:f},(C,S,x)=>{const[N,V,B]=C,W=Da(V);N===this.userId&&s.isPrefixOf(W)?W.length===l&&(E=E.add(B)):x.done()}).next(()=>this.Zt(n,E))}Zt(n,r){const s=[],l=[];return r.forEach(d=>{l.push(Su(n).get(d).next(f=>{if(null===f)throw nt();gt(f.userId===this.userId),s.push(Ra(this.N,f))}))}),Se.waitFor(l).next(()=>s)}removeMutationBatch(n,r){return LI(n.Qt,this.userId,r).next(s=>(n.addOnCommittedListener(()=>{this.te(r.batchId)}),Se.forEach(s,l=>this.referenceDelegate.markPotentiallyOrphaned(n,l))))}te(n){delete this.Jt[n]}performConsistencyCheck(n){return this.checkEmpty(n).next(r=>{if(!r)return Se.resolve();const s=IDBKeyRange.lowerBound(Gr.prefixForUser(this.userId)),l=[];return xa(n).Kt({range:s},(d,f,E)=>{if(d[0]===this.userId){const C=Da(d[1]);l.push(C)}else E.done()}).next(()=>{gt(0===l.length)})})}containsKey(n,r){return VI(n,this.userId,r)}ee(n){return X0(n).get(this.userId).next(r=>r||new bu(this.userId,-1,""))}}function VI(i,n,r){const s=Gr.prefixForPath(n,r.path),l=s[1],d=IDBKeyRange.lowerBound(s);let f=!1;return xa(i).Kt({range:d,qt:!0},(E,C,S)=>{const[x,N,V]=E;x===n&&N===l&&(f=!0),S.done()}).next(()=>f)}function Su(i){return qr(i,Cn.store)}function xa(i){return qr(i,Gr.store)}function X0(i){return qr(i,bu.store)}class Au{constructor(n){this.ne=n}next(){return this.ne+=2,this.ne}static se(){return new Au(0)}static ie(){return new Au(-1)}}class UI{constructor(n,r){this.referenceDelegate=n,this.N=r}allocateTargetId(n){return this.re(n).next(r=>{const s=new Au(r.highestTargetId);return r.highestTargetId=s.next(),this.oe(n,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(n){return this.re(n).next(r=>ut.fromTimestamp(new tr(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(n){return this.re(n).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(n,r,s){return this.re(n).next(l=>(l.highestListenSequenceNumber=r,s&&(l.lastRemoteSnapshotVersion=s.toTimestamp()),r>l.highestListenSequenceNumber&&(l.highestListenSequenceNumber=r),this.oe(n,l)))}addTargetData(n,r){return this.ae(n,r).next(()=>this.re(n).next(s=>(s.targetCount+=1,this.ce(r,s),this.oe(n,s))))}updateTargetData(n,r){return this.ae(n,r)}removeTargetData(n,r){return this.removeMatchingKeysForTargetId(n,r.targetId).next(()=>Wd(n).delete(r.targetId)).next(()=>this.re(n)).next(s=>(gt(s.targetCount>0),s.targetCount-=1,this.oe(n,s)))}removeTargets(n,r,s){let l=0;const d=[];return Wd(n).Kt((f,E)=>{const C=Du(E);C.sequenceNumber<=r&&null===s.get(C.targetId)&&(l++,d.push(this.removeTargetData(n,C)))}).next(()=>Se.waitFor(d)).next(()=>l)}forEachTarget(n,r){return Wd(n).Kt((s,l)=>{const d=Du(l);r(d)})}re(n){return Zd(n).get(zi.key).next(r=>(gt(null!==r),r))}oe(n,r){return Zd(n).put(zi.key,r)}ae(n,r){return Wd(n).put(On(this.N,r))}ce(n,r){let s=!1;return n.targetId>r.highestTargetId&&(r.highestTargetId=n.targetId,s=!0),n.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n.sequenceNumber,s=!0),s}getTargetCount(n){return this.re(n).next(r=>r.targetCount)}getTargetData(n,r){const s=Ip(r),l=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let d=null;return Wd(n).Kt({range:l,index:Ci.queryTargetsIndexName},(f,E,C)=>{const S=Du(E);E0(r,S.target)&&(d=S,C.done())}).next(()=>d)}addMatchingKeys(n,r,s){const l=[],d=ps(n);return r.forEach(f=>{const E=$s(f.path);l.push(d.put(new xr(s,E))),l.push(this.referenceDelegate.addReference(n,s,f))}),Se.waitFor(l)}removeMatchingKeys(n,r,s){const l=ps(n);return Se.forEach(r,d=>{const f=$s(d.path);return Se.waitFor([l.delete([s,f]),this.referenceDelegate.removeReference(n,s,d)])})}removeMatchingKeysForTargetId(n,r){const s=ps(n),l=IDBKeyRange.bound([r],[r+1],!1,!0);return s.delete(l)}getMatchingKeysForTargetId(n,r){const s=IDBKeyRange.bound([r],[r+1],!1,!0),l=ps(n);let d=Wt();return l.Kt({range:s,qt:!0},(f,E,C)=>{const S=Da(f[1]),x=new Je(S);d=d.add(x)}).next(()=>d)}containsKey(n,r){const s=$s(r.path),l=IDBKeyRange.bound([s],[Ql(s)],!1,!0);let d=0;return ps(n).Kt({index:xr.documentTargetsIndex,qt:!0,range:l},([f,E],C,S)=>{0!==f&&(d++,S.done())}).next(()=>d>0)}Et(n,r){return Wd(n).get(r).next(s=>s?Du(s):null)}}function Wd(i){return qr(i,Ci.store)}function Zd(i){return qr(i,zi.store)}function ps(i){return qr(i,xr.store)}function pc(i){return eE.apply(this,arguments)}function eE(){return(eE=(0,ye.Z)(function*(i){if(i.code!==ce.FAILED_PRECONDITION||i.message!==Z0)throw i;Oe("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function BI([i,n],[r,s]){const l=Ot(i,r);return 0===l?Ot(n,s):l}class jI{constructor(n){this.ue=n,this.buffer=new Mn(BI),this.he=0}le(){return++this.he}fe(n){const r=[n,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(r);else{const s=this.buffer.last();BI(r,s)<0&&(this.buffer=this.buffer.delete(s).add(r))}}get maxValue(){return this.buffer.last()[0]}}class $I{constructor(n,r){this.garbageCollector=n,this.asyncQueue=r,this.de=!1,this.we=null}start(n){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(n)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(n){var r=this;const s=this.de?3e5:6e4;Oe("LruGarbageCollector",`Garbage collection scheduled in ${s}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",s,(0,ye.Z)(function*(){r.we=null,r.de=!0;try{yield n.collectGarbage(r.garbageCollector)}catch(l){Cu(l)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",l):yield pc(l)}yield r._e(n)}))}}class HI{constructor(n,r){this.me=n,this.params=r}calculateTargetCount(n,r){return this.me.ge(n).next(s=>Math.floor(r/100*s))}nthSequenceNumber(n,r){if(0===r)return Se.resolve($i.T);const s=new jI(r);return this.me.forEachTarget(n,l=>s.fe(l.sequenceNumber)).next(()=>this.me.ye(n,l=>s.fe(l))).next(()=>s.maxValue)}removeTargets(n,r,s){return this.me.removeTargets(n,r,s)}removeOrphanedDocuments(n,r){return this.me.removeOrphanedDocuments(n,r)}collect(n,r){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),Se.resolve(FI)):this.getCacheSize(n).next(s=>s<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),FI):this.pe(n,r))}getCacheSize(n){return this.me.getCacheSize(n)}pe(n,r){let s,l,d,f,E,C,S;const x=Date.now();return this.calculateTargetCount(n,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),l=this.params.maximumSequenceNumbersToCollect):l=N,f=Date.now(),this.nthSequenceNumber(n,l))).next(N=>(s=N,E=Date.now(),this.removeTargets(n,s,r))).next(N=>(d=N,C=Date.now(),this.removeOrphanedDocuments(n,s))).next(N=>(S=Date.now(),d0()<=pa.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${f-x}ms\n\tDetermined least recently used ${l} in `+(E-f)+`ms\n\tRemoved ${d} targets in `+(C-E)+`ms\n\tRemoved ${N} documents in `+(S-C)+`ms\nTotal Duration: ${S-x}ms`),Se.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:d,documentsRemoved:N})))}}class YA{constructor(n,r){this.db=n,this.garbageCollector=new HI(this,r)}ge(n){const r=this.Ee(n);return this.db.getTargetCache().getTargetCount(n).next(s=>r.next(l=>s+l))}Ee(n){let r=0;return this.ye(n,s=>{r++}).next(()=>r)}forEachTarget(n,r){return this.db.getTargetCache().forEachTarget(n,r)}ye(n,r){return this.Te(n,(s,l)=>r(l))}addReference(n,r,s){return $p(n,s)}removeReference(n,r,s){return $p(n,s)}removeTargets(n,r,s){return this.db.getTargetCache().removeTargets(n,r,s)}markPotentiallyOrphaned(n,r){return $p(n,r)}Ie(n,r){return function(s,l){let d=!1;return X0(s).jt(f=>VI(s,f,l).next(E=>(E&&(d=!0),Se.resolve(!E)))).next(()=>d)}(n,r)}removeOrphanedDocuments(n,r){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),l=[];let d=0;return this.Te(n,(f,E)=>{if(E<=r){const C=this.Ie(n,f).next(S=>{if(!S)return d++,s.getEntry(n,f).next(()=>(s.removeEntry(f),ps(n).delete([0,$s(f.path)])))});l.push(C)}}).next(()=>Se.waitFor(l)).next(()=>s.apply(n)).next(()=>d)}removeTarget(n,r){const s=r.withSequenceNumber(n.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(n,s)}updateLimboDocument(n,r){return $p(n,r)}Te(n,r){const s=ps(n);let l,d=$i.T;return s.Kt({index:xr.documentTargetsIndex},([f,E],{path:C,sequenceNumber:S})=>{0===f?(d!==$i.T&&r(new Je(Da(l)),d),d=S,l=C):d=$i.T}).next(()=>{d!==$i.T&&r(new Je(Da(l)),d)})}getCacheSize(n){return this.db.getRemoteDocumentCache().getSize(n)}}function $p(i,n){return ps(i).put((s=i.currentSequenceNumber,new xr(0,$s(n.path),s)));var s}class Kd{constructor(n,r){this.mapKeyFn=n,this.equalsFn=r,this.inner={}}get(n){const r=this.mapKeyFn(n),s=this.inner[r];if(void 0!==s)for(const[l,d]of s)if(this.equalsFn(l,n))return d}has(n){return void 0!==this.get(n)}set(n,r){const s=this.mapKeyFn(n),l=this.inner[s];if(void 0!==l){for(let d=0;d<l.length;d++)if(this.equalsFn(l[d][0],n))return void(l[d]=[n,r]);l.push([n,r])}else this.inner[s]=[[n,r]]}delete(n){const r=this.mapKeyFn(n),s=this.inner[r];if(void 0===s)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],n))return 1===s.length?delete this.inner[r]:s.splice(l,1),!0;return!1}forEach(n){Jl(this.inner,(r,s)=>{for(const[l,d]of s)n(l,d)})}isEmpty(){return YC(this.inner)}}class GI{constructor(){this.changes=new Kd(n=>n.toString(),(n,r)=>n.isEqual(r)),this.changesApplied=!1}getReadTime(n){const r=this.changes.get(n);return r?r.readTime:ut.min()}addEntry(n,r){this.assertNotApplied(),this.changes.set(n.key,{document:n,readTime:r})}removeEntry(n,r=null){this.assertNotApplied(),this.changes.set(n,{document:bn.newInvalidDocument(n),readTime:r})}getEntry(n,r){this.assertNotApplied();const s=this.changes.get(r);return void 0!==s?Se.resolve(s.document):this.getFromCache(n,r)}getEntries(n,r){return this.getAllFromCache(n,r)}apply(n){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(n)}assertNotApplied(){}}class RN{constructor(n,r){this.N=n,this.Ht=r}addEntry(n,r,s){return gc(n).put(Hp(r),s)}removeEntry(n,r){const s=gc(n),l=Hp(r);return s.delete(l)}updateMetadata(n,r){return this.getMetadata(n).next(s=>(s.byteSize+=r,this.Ae(n,s)))}getEntry(n,r){return gc(n).get(Hp(r)).next(s=>this.Re(r,s))}be(n,r){return gc(n).get(Hp(r)).next(s=>({document:this.Re(r,s),size:Tu(s)}))}getEntries(n,r){let s=Us();return this.Pe(n,r,(l,d)=>{const f=this.Re(l,d);s=s.insert(l,f)}).next(()=>s)}ve(n,r){let s=Us(),l=new zn(Je.comparator);return this.Pe(n,r,(d,f)=>{const E=this.Re(d,f);s=s.insert(d,E),l=l.insert(d,Tu(f))}).next(()=>({documents:s,Ve:l}))}Pe(n,r,s){if(r.isEmpty())return Se.resolve();const l=IDBKeyRange.bound(r.first().path.toArray(),r.last().path.toArray()),d=r.getIterator();let f=d.getNext();return gc(n).Kt({range:l},(E,C,S)=>{const x=Je.fromSegments(E);for(;f&&Je.comparator(f,x)<0;)s(f,null),f=d.getNext();f&&f.isEqual(x)&&(s(f,C),f=d.hasNext()?d.getNext():null),f?S.Mt(f.path.toArray()):S.done()}).next(()=>{for(;f;)s(f,null),f=d.hasNext()?d.getNext():null})}getDocumentsMatchingQuery(n,r,s){let l=Us();const d=r.path.length+1,f={};if(s.isEqual(ut.min())){const E=r.path.toArray();f.range=IDBKeyRange.lowerBound(E)}else{const E=r.path.toArray(),C=Y0(s);f.range=IDBKeyRange.lowerBound([E,C],!0),f.index=Ln.collectionReadTimeIndex}return gc(n).Kt(f,(E,C,S)=>{if(E.length!==d)return;const x=st(this.N,C);r.path.isPrefixOf(x.key.path)?Rp(r,x)&&(l=l.insert(x.key,x)):S.done()}).next(()=>l)}newChangeBuffer(n){return new xN(this,!!n&&n.trackRemovals)}getSize(n){return this.getMetadata(n).next(r=>r.byteSize)}getMetadata(n){return QA(n).get(xo.key).next(r=>(gt(!!r),r))}Ae(n,r){return QA(n).put(xo.key,r)}Re(n,r){if(r){const s=st(this.N,r);if(!s.isNoDocument()||!s.version.isEqual(ut.min()))return s}return bn.newInvalidDocument(n)}}class xN extends GI{constructor(n,r){super(),this.Se=n,this.trackRemovals=r,this.De=new Kd(s=>s.toString(),(s,l)=>s.isEqual(l))}applyChanges(n){const r=[];let s=0,l=new Mn((d,f)=>Ot(d.canonicalString(),f.canonicalString()));return this.changes.forEach((d,f)=>{const E=this.De.get(d);if(f.document.isValidDocument()){const C=RI(this.Se.N,f.document,this.getReadTime(d));l=l.add(d.path.popLast()),s+=Tu(C)-E,r.push(this.Se.addEntry(n,d,C))}else if(s-=E,this.trackRemovals){const C=RI(this.Se.N,bn.newNoDocument(d,ut.min()),this.getReadTime(d));r.push(this.Se.addEntry(n,d,C))}else r.push(this.Se.removeEntry(n,d))}),l.forEach(d=>{r.push(this.Se.Ht.addToCollectionParentIndex(n,d))}),r.push(this.Se.updateMetadata(n,s)),Se.waitFor(r)}getFromCache(n,r){return this.Se.be(n,r).next(s=>(this.De.set(r,s.size),s.document))}getAllFromCache(n,r){return this.Se.ve(n,r).next(({documents:s,Ve:l})=>(l.forEach((d,f)=>{this.De.set(d,f)}),s))}}function QA(i){return qr(i,xo.store)}function gc(i){return qr(i,Ln.store)}function Hp(i){return i.path.toArray()}class Gy{constructor(n){this.N=n}Ct(n,r,s,l){gt(s<l&&s>=0&&l<=11);const d=new jp("createOrUpgrade",r);var E;s<1&&l>=1&&(n.createObjectStore(qi.store),(E=n).createObjectStore(bu.store,{keyPath:bu.keyPath}),E.createObjectStore(Cn.store,{keyPath:Cn.keyPath,autoIncrement:!0}).createIndex(Cn.userMutationsIndex,Cn.userMutationsKeyPath,{unique:!0}),E.createObjectStore(Gr.store),qI(n),function(E){E.createObjectStore(Ln.store)}(n));let f=Se.resolve();return s<3&&l>=3&&(0!==s&&(function(E){E.deleteObjectStore(xr.store),E.deleteObjectStore(Ci.store),E.deleteObjectStore(zi.store)}(n),qI(n)),f=f.next(()=>function(E){const C=E.store(zi.store),S=new zi(0,0,ut.min().toTimestamp(),0);return C.put(zi.key,S)}(d))),s<4&&l>=4&&(0!==s&&(f=f.next(()=>function(E,C){return C.store(Cn.store).Lt().next(S=>{E.deleteObjectStore(Cn.store),E.createObjectStore(Cn.store,{keyPath:Cn.keyPath,autoIncrement:!0}).createIndex(Cn.userMutationsIndex,Cn.userMutationsKeyPath,{unique:!0});const x=C.store(Cn.store),N=S.map(V=>x.put(V));return Se.waitFor(N)})}(n,d))),f=f.next(()=>{!function(E){E.createObjectStore(Ta.store,{keyPath:Ta.keyPath})}(n)})),s<5&&l>=5&&(f=f.next(()=>this.Ce(d))),s<6&&l>=6&&(f=f.next(()=>(function(E){E.createObjectStore(xo.store)}(n),this.Ne(d)))),s<7&&l>=7&&(f=f.next(()=>this.xe(d))),s<8&&l>=8&&(f=f.next(()=>this.ke(n,d))),s<9&&l>=9&&(f=f.next(()=>{(function(E){E.objectStoreNames.contains("remoteDocumentChanges")&&E.deleteObjectStore("remoteDocumentChanges")})(n),function(E){const C=E.objectStore(Ln.store);C.createIndex(Ln.readTimeIndex,Ln.readTimeIndexPath,{unique:!1}),C.createIndex(Ln.collectionReadTimeIndex,Ln.collectionReadTimeIndexPath,{unique:!1})}(r)})),s<10&&l>=10&&(f=f.next(()=>this.$e(d))),s<11&&l>=11&&(f=f.next(()=>{(function(E){E.createObjectStore(lc.store,{keyPath:lc.keyPath})})(n),function(E){E.createObjectStore(cc.store,{keyPath:cc.keyPath})}(n)})),f}Ne(n){let r=0;return n.store(Ln.store).Kt((s,l)=>{r+=Tu(l)}).next(()=>{const s=new xo(r);return n.store(xo.store).put(xo.key,s)})}Ce(n){const r=n.store(bu.store),s=n.store(Cn.store);return r.Lt().next(l=>Se.forEach(l,d=>{const f=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return s.Lt(Cn.userMutationsIndex,f).next(E=>Se.forEach(E,C=>{gt(C.userId===d.userId);const S=Ra(this.N,C);return LI(n,d.userId,S).next(()=>{})}))}))}xe(n){const r=n.store(xr.store),s=n.store(Ln.store);return n.store(zi.store).get(zi.key).next(l=>{const d=[];return s.Kt((f,E)=>{const C=new At(f),S=[0,$s(C)];d.push(r.get(S).next(x=>x?Se.resolve():r.put(new xr(0,$s(C),l.highestListenSequenceNumber))))}).next(()=>Se.waitFor(d))})}ke(n,r){n.createObjectStore(uc.store,{keyPath:uc.keyPath});const s=r.store(uc.store),l=new Hy,d=f=>{if(l.add(f)){const E=f.lastSegment(),C=f.popLast();return s.put({collectionId:E,parent:$s(C)})}};return r.store(Ln.store).Kt({qt:!0},(f,E)=>{const C=new At(f);return d(C.popLast())}).next(()=>r.store(Gr.store).Kt({qt:!0},([f,E,C],S)=>{const x=Da(E);return d(x.popLast())}))}$e(n){const r=n.store(Ci.store);return r.Kt((s,l)=>{const d=Du(l),f=On(this.N,d);return r.put(f)})}}function qI(i){i.createObjectStore(xr.store,{keyPath:xr.keyPath}).createIndex(xr.documentTargetsIndex,xr.documentTargetsKeyPath,{unique:!0}),i.createObjectStore(Ci.store,{keyPath:Ci.keyPath}).createIndex(Ci.queryTargetsIndexName,Ci.queryTargetsKeyPath,{unique:!0}),i.createObjectStore(zi.store)}const tE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class qy{constructor(n,r,s,l,d,f,E,C,S,x){if(this.allowTabSynchronization=n,this.persistenceKey=r,this.clientId=s,this.Oe=d,this.window=f,this.document=E,this.Fe=S,this.Me=x,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=N=>Promise.resolve(),!qy.bt())throw new Re(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new YA(this,l),this.We=r+"main",this.N=new KA(C),this.Ge=new fs(this.We,11,new Gy(this.N)),this.ze=new UI(this.referenceDelegate,this.N),this.Ht=new kI,this.He=new RN(this.N,this.Ht),this.Je=new MI,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===x&&er("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,tE);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",n=>this.ze.getHighestSequenceNumber(n))}).then(n=>{this.Le=new $i(n,this.Fe)}).then(()=>{this.Be=!0}).catch(n=>(this.Ge&&this.Ge.close(),Promise.reject(n)))}nn(n){var r=this;return this.Qe=function(){var s=(0,ye.Z)(function*(l){if(r.started)return n(l)});return function(l){return s.apply(this,arguments)}}(),n(this.isPrimary)}setDatabaseDeletedListener(n){this.Ge.xt(function(){var r=(0,ye.Z)(function*(s){null===s.newVersion&&(yield n())});return function(s){return r.apply(this,arguments)}}())}setNetworkEnabled(n){var r=this;this.networkEnabled!==n&&(this.networkEnabled=n,this.Oe.enqueueAndForget((0,ye.Z)(function*(){r.started&&(yield r.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",n=>zy(n).put(new Ta(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(n).next(r=>{r||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(n)).next(r=>this.isPrimary&&!r?this.on(n).next(()=>!1):!!r&&this.an(n).next(()=>!0))).catch(n=>{if(Cu(n))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",n),this.isPrimary;if(!this.allowTabSynchronization)throw n;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(n=>{this.isPrimary!==n&&this.Oe.enqueueRetryable(()=>this.Qe(n)),this.isPrimary=n})}sn(n){return Na(n).get(qi.key).next(r=>Se.resolve(this.cn(r)))}un(n){return zy(n).delete(this.clientId)}hn(){var n=this;return(0,ye.Z)(function*(){if(n.isPrimary&&!n.ln(n.je,18e5)){n.je=Date.now();const r=yield n.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const l=qr(s,Ta.store);return l.Lt().next(d=>{const f=n.fn(d,18e5),E=d.filter(C=>-1===f.indexOf(C));return Se.forEach(E,C=>l.delete(C.clientId)).next(()=>E)})}).catch(()=>[]);if(n.Ye)for(const s of r)n.Ye.removeItem(n.dn(s.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(n){return!!n&&n.ownerId===this.clientId}rn(n){return this.Me?Se.resolve(!0):Na(n).get(qi.key).next(r=>{if(null!==r&&this.ln(r.leaseTimestampMs,5e3)&&!this.wn(r.ownerId)){if(this.cn(r)&&this.networkEnabled)return!0;if(!this.cn(r)){if(!r.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,tE);return!1}}return!(!this.networkEnabled||!this.inForeground)||zy(n).Lt().next(s=>void 0===this.fn(s,5e3).find(l=>{if(this.clientId!==l.clientId){const f=!this.inForeground&&l.inForeground,E=this.networkEnabled===l.networkEnabled;if(!this.networkEnabled&&l.networkEnabled||f&&E)return!0}return!1}))}).next(r=>(this.isPrimary!==r&&Oe("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var n=this;return(0,ye.Z)(function*(){n.Be=!1,n._n(),n.Ke&&(n.Ke.cancel(),n.Ke=null),n.mn(),n.gn(),yield n.Ge.runTransaction("shutdown","readwrite",[qi.store,Ta.store],r=>{const s=new ZA(r,$i.T);return n.on(s).next(()=>n.un(s))}),n.Ge.close(),n.yn()})()}fn(n,r){return n.filter(s=>this.ln(s.updateTimeMs,r)&&!this.wn(s.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",n=>zy(n).Lt().next(r=>this.fn(r,18e5).map(s=>s.clientId)))}get started(){return this.Be}getMutationQueue(n){return J0.Yt(n,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(n,r,s){let d;return Oe("IndexedDbPersistence","Starting transaction:",n),this.Ge.runTransaction(n,"readonly"===r?"readonly":"readwrite",DI,f=>(d=new ZA(f,this.Le?this.Le.next():$i.T),"readwrite-primary"===r?this.sn(d).next(E=>!!E||this.rn(d)).next(E=>{if(!E)throw er(`Failed to obtain primary lease for action '${n}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new Re(ce.FAILED_PRECONDITION,Z0);return s(d)}).next(E=>this.an(d).next(()=>E)):this.En(d).next(()=>s(d)))).then(f=>(d.raiseOnCommittedEvent(),f))}En(n){return Na(n).get(qi.key).next(r=>{if(null!==r&&this.ln(r.leaseTimestampMs,5e3)&&!this.wn(r.ownerId)&&!this.cn(r)&&!(this.Me||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Re(ce.FAILED_PRECONDITION,tE)})}an(n){const r=new qi(this.clientId,this.allowTabSynchronization,Date.now());return Na(n).put(qi.key,r)}static bt(){return fs.bt()}on(n){const r=Na(n);return r.get(qi.key).next(s=>this.cn(s)?(Oe("IndexedDbPersistence","Releasing primary lease."),r.delete(qi.key)):Se.resolve())}ln(n,r){const s=Date.now();return!(n<s-r||n>s&&(er(`Detected an update time that is in the future: ${n} > ${s}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var n;"function"==typeof(null===(n=this.window)||void 0===n?void 0:n.addEventListener)&&(this.Ue=()=>{this._n(),(0,bt.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(n){var r;try{const s=null!==(null===(r=this.Ye)||void 0===r?void 0:r.getItem(this.dn(n)));return Oe("IndexedDbPersistence",`Client '${n}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return er("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(n){er("Failed to set zombie client id.",n)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(n){}}dn(n){return`firestore_zombie_${this.persistenceKey}_${n}`}}function Na(i){return qr(i,qi.store)}function zy(i){return qr(i,Ta.store)}function nE(i,n){let r=i.projectId;return i.isDefaultDatabase||(r+="."+i.database),"firestore/"+n+"/"+r+"/"}class JA{constructor(n,r){this.progress=n,this.Tn=r}}class zI{constructor(n,r,s){this.He=n,this.In=r,this.Ht=s}An(n,r){return this.In.getAllMutationBatchesAffectingDocumentKey(n,r).next(s=>this.Rn(n,r,s))}Rn(n,r,s){return this.He.getEntry(n,r).next(l=>{for(const d of s)d.applyToLocalView(l);return l})}bn(n,r){n.forEach((s,l)=>{for(const d of r)d.applyToLocalView(l)})}Pn(n,r){return this.He.getEntries(n,r).next(s=>this.vn(n,s).next(()=>s))}vn(n,r){return this.In.getAllMutationBatchesAffectingDocumentKeys(n,r).next(s=>this.bn(r,s))}getDocumentsMatchingQuery(n,r,s){return Je.isDocumentKey((l=r).path)&&null===l.collectionGroup&&0===l.filters.length?this.Vn(n,r.path):Hd(r)?this.Sn(n,r,s):this.Dn(n,r,s);var l}Vn(n,r){return this.An(n,new Je(r)).next(s=>{let l=$0();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l})}Sn(n,r,s){const l=r.collectionGroup;let d=$0();return this.Ht.getCollectionParents(n,l).next(f=>Se.forEach(f,E=>{const C=(S=r,x=E.child(l),new Eu(x,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt));var S,x;return this.Dn(n,C,s).next(S=>{S.forEach((x,N)=>{d=d.insert(x,N)})})}).next(()=>d))}Dn(n,r,s){let l,d;return this.He.getDocumentsMatchingQuery(n,r,s).next(f=>(l=f,this.In.getAllMutationBatchesAffectingQuery(n,r))).next(f=>(d=f,this.Cn(n,d,l).next(E=>{l=E;for(const C of d)for(const S of C.mutations){const x=S.key;let N=l.get(x);null==N&&(N=bn.newInvalidDocument(x),l=l.insert(x,N)),Py(S,N,C.localWriteTime),N.isFoundDocument()||(l=l.remove(x))}}))).next(()=>(l.forEach((f,E)=>{Rp(r,E)||(l=l.remove(f))}),l))}Cn(n,r,s){let l=Wt();for(const f of r)for(const E of f.mutations)E instanceof Ia&&null===s.get(E.key)&&(l=l.add(E.key));let d=s;return this.He.getEntries(n,l).next(f=>(f.forEach((E,C)=>{C.isFoundDocument()&&(d=d.insert(E,C))}),d))}}class rE{constructor(n,r,s,l){this.targetId=n,this.fromCache=r,this.Nn=s,this.xn=l}static kn(n,r){let s=Wt(),l=Wt();for(const d of r.docChanges)switch(d.type){case 0:s=s.add(d.doc.key);break;case 1:l=l.add(d.doc.key)}return new rE(n,r.fromCache,s,l)}}class iE{$n(n){this.On=n}getDocumentsMatchingQuery(n,r,s,l){return 0===(d=r).filters.length&&null===d.limit&&null==d.startAt&&null==d.endAt&&(0===d.explicitOrderBy.length||1===d.explicitOrderBy.length&&d.explicitOrderBy[0].field.isKeyField())||s.isEqual(ut.min())?this.Fn(n,r):this.On.Pn(n,l).next(d=>{const f=this.Mn(r,d);return(Sy(r)||Sp(r))&&this.Ln(r.limitType,f,l,s)?this.Fn(n,r):(d0()<=pa.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),T0(r)),this.On.getDocumentsMatchingQuery(n,r,s).next(E=>(f.forEach(C=>{E=E.insert(C.key,C)}),E)))});var d}Mn(n,r){let s=new Mn(S0(n));return r.forEach((l,d)=>{Rp(n,d)&&(s=s.add(d))}),s}Ln(n,r,s,l){if(s.size!==r.size)return!0;const d="F"===n?r.last():r.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(l)>0)}Fn(n,r){return d0()<=pa.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",T0(r)),this.On.getDocumentsMatchingQuery(n,r,ut.min())}}class XA{constructor(n,r,s,l){this.persistence=n,this.Bn=r,this.N=l,this.Un=new zn(Ot),this.qn=new Kd(d=>Ip(d),E0),this.Kn=ut.min(),this.In=n.getMutationQueue(s),this.jn=n.getRemoteDocumentCache(),this.ze=n.getTargetCache(),this.Qn=new zI(this.jn,this.In,this.persistence.getIndexManager()),this.Je=n.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(n){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>n.collect(r,this.Un))}}function WI(i,n,r,s){return new XA(i,n,r,s)}function mc(i,n){return sE.apply(this,arguments)}function sE(){return(sE=(0,ye.Z)(function*(i,n){const r=Le(i);let s=r.In,l=r.Qn;const d=yield r.persistence.runTransaction("Handle user change","readonly",f=>{let E;return r.In.getAllMutationBatches(f).next(C=>(E=C,s=r.persistence.getMutationQueue(n),l=new zI(r.jn,s,r.persistence.getIndexManager()),s.getAllMutationBatches(f))).next(C=>{const S=[],x=[];let N=Wt();for(const V of E){S.push(V.batchId);for(const B of V.mutations)N=N.add(B.key)}for(const V of C){x.push(V.batchId);for(const B of V.mutations)N=N.add(B.key)}return l.Pn(f,N).next(V=>({Wn:V,removedBatchIds:S,addedBatchIds:x}))})});return r.In=s,r.Qn=l,r.Bn.$n(r.Qn),d})).apply(this,arguments)}function ZI(i,n){const r=Le(i);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const l=n.batch.keys(),d=r.jn.newChangeBuffer({trackRemovals:!0});return function(f,E,C,S){const x=C.batch,N=x.keys();let V=Se.resolve();return N.forEach(B=>{V=V.next(()=>S.getEntry(E,B)).next(W=>{const fe=C.docVersions.get(B);gt(null!==fe),W.version.compareTo(fe)<0&&(x.applyToRemoteDocument(W,C),W.isValidDocument()&&S.addEntry(W,C.commitVersion))})}),V.next(()=>f.In.removeMutationBatch(E,x))}(r,s,n,d).next(()=>d.apply(s)).next(()=>r.In.performConsistencyCheck(s)).next(()=>r.Qn.Pn(s,l))})}function KI(i){const n=Le(i);return n.persistence.runTransaction("Get last remote snapshot version","readonly",r=>n.ze.getLastRemoteSnapshotVersion(r))}function YI(i,n){const r=Le(i),s=n.snapshotVersion;let l=r.Un;return r.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const f=r.jn.newChangeBuffer({trackRemovals:!0});l=r.Un;const E=[];n.targetChanges.forEach((S,x)=>{const N=l.get(x);if(!N)return;E.push(r.ze.removeMatchingKeys(d,S.removedDocuments,x).next(()=>r.ze.addMatchingKeys(d,S.addedDocuments,x)));const V=S.resumeToken;if(V.approximateByteSize()>0){const B=N.withResumeToken(V,s).withSequenceNumber(d.currentSequenceNumber);l=l.insert(x,B),W=N,De=S,gt((fe=B).resumeToken.approximateByteSize()>0),(0===W.resumeToken.approximateByteSize()||fe.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8||De.addedDocuments.size+De.modifiedDocuments.size+De.removedDocuments.size>0)&&E.push(r.ze.updateTargetData(d,B))}var W,fe,De});let C=Us();if(n.documentUpdates.forEach((S,x)=>{n.resolvedLimboDocuments.has(S)&&E.push(r.persistence.referenceDelegate.updateLimboDocument(d,S))}),E.push(QI(d,f,n.documentUpdates,s,void 0).next(S=>{C=S})),!s.isEqual(ut.min())){const S=r.ze.getLastRemoteSnapshotVersion(d).next(x=>r.ze.setTargetsMetadata(d,d.currentSequenceNumber,s));E.push(S)}return Se.waitFor(E).next(()=>f.apply(d)).next(()=>r.Qn.vn(d,C)).next(()=>C)}).then(d=>(r.Un=l,d))}function QI(i,n,r,s,l){let d=Wt();return r.forEach(f=>d=d.add(f)),n.getEntries(i,d).next(f=>{let E=Us();return r.forEach((C,S)=>{const x=f.get(C),N=(null==l?void 0:l.get(C))||s;S.isNoDocument()&&S.version.isEqual(ut.min())?(n.removeEntry(C,N),E=E.insert(C,S)):!x.isValidDocument()||S.version.compareTo(x.version)>0||0===S.version.compareTo(x.version)&&x.hasPendingWrites?(n.addEntry(S,N),E=E.insert(C,S)):Oe("LocalStore","Ignoring outdated watch update for ",C,". Current version:",x.version," Watch version:",S.version)}),E})}function JI(i,n){const r=Le(i);return r.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===n&&(n=-1),r.In.getNextMutationBatchAfterBatchId(s,n)))}function Yd(i,n){const r=Le(i);return r.persistence.runTransaction("Allocate target","readwrite",s=>{let l;return r.ze.getTargetData(s,n).next(d=>d?(l=d,Se.resolve(l)):r.ze.allocateTargetId(s).next(f=>(l=new Sa(n,f,0,s.currentSequenceNumber),r.ze.addTargetData(s,l).next(()=>l))))}).then(s=>{const l=r.Un.get(s.targetId);return(null===l||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(r.Un=r.Un.insert(s.targetId,s),r.qn.set(n,s.targetId)),s})}function Ru(i,n,r){return oE.apply(this,arguments)}function oE(){return(oE=(0,ye.Z)(function*(i,n,r){const s=Le(i),l=s.Un.get(n),d=r?"readwrite":"readwrite-primary";try{r||(yield s.persistence.runTransaction("Release target",d,f=>s.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!Cu(f))throw f;Oe("LocalStore",`Failed to update sequence numbers for target ${n}: ${f}`)}s.Un=s.Un.remove(n),s.qn.delete(l.target)})).apply(this,arguments)}function Gp(i,n,r){const s=Le(i);let l=ut.min(),d=Wt();return s.persistence.runTransaction("Execute query","readonly",f=>function(E,C,S){const x=Le(E),N=x.qn.get(S);return void 0!==N?Se.resolve(x.Un.get(N)):x.ze.getTargetData(C,S)}(s,f,Gi(n)).next(E=>{if(E)return l=E.lastLimboFreeSnapshotVersion,s.ze.getMatchingKeysForTargetId(f,E.targetId).next(C=>{d=C})}).next(()=>s.Bn.getDocumentsMatchingQuery(f,n,r?l:ut.min(),r?d:Wt())).next(E=>({documents:E,Gn:d})))}function aE(i,n){const r=Le(i),s=Le(r.ze),l=r.Un.get(n);return l?Promise.resolve(l.target):r.persistence.runTransaction("Get target data","readonly",d=>s.Et(d,n).next(f=>f?f.target:null))}function XI(i){const n=Le(i);return n.persistence.runTransaction("Get new document changes","readonly",r=>function(s,l,d){const f=Le(s);let E=Us(),C=Y0(d);const S=gc(l),x=IDBKeyRange.lowerBound(C,!0);return S.Kt({index:Ln.readTimeIndex,range:x},(N,V)=>{const B=st(f.N,V);E=E.insert(B.key,B),C=V.readTime}).next(()=>({Tn:E,readTime:xI(C)}))}(n.jn,r,n.Kn)).then(({Tn:r,readTime:s})=>(n.Kn=s,r))}function uE(){return(uE=(0,ye.Z)(function*(i){const n=Le(i);return n.persistence.runTransaction("Synchronize last document change read time","readonly",r=>function(s){const l=gc(s);let d=ut.min();return l.Kt({index:Ln.readTimeIndex,reverse:!0},(f,E,C)=>{E.readTime&&(d=xI(E.readTime)),C.done()}).next(()=>d)}(r)).then(r=>{n.Kn=r})})).apply(this,arguments)}function cE(){return(cE=(0,ye.Z)(function*(i,n,r,s){const l=Le(i);let d=Wt(),f=Us(),E=aI();for(const x of r){const N=n.zn(x.metadata.name);x.document&&(d=d.add(N)),f=f.insert(N,n.Hn(x)),E=E.insert(N,n.Jn(x.metadata.readTime))}const C=l.jn.newChangeBuffer({trackRemovals:!0}),S=yield Yd(l,(x=s,Gi(Vs(At.fromString(`__bundle__/docs/${x}`)))));var x;return l.persistence.runTransaction("Apply bundle documents","readwrite",x=>QI(x,C,f,ut.min(),E).next(N=>(C.apply(x),N)).next(N=>l.ze.removeMatchingKeysForTargetId(x,S.targetId).next(()=>l.ze.addMatchingKeys(x,d,S.targetId)).next(()=>l.Qn.vn(x,N)).next(()=>N)))})).apply(this,arguments)}function eD(i,n){return dE.apply(this,arguments)}function dE(){return(dE=(0,ye.Z)(function*(i,n,r=Wt()){const s=yield Yd(i,Gi(NI(n.bundledQuery))),l=Le(i);return l.persistence.runTransaction("Save named query","readwrite",d=>{const f=dr(n.readTime);if(s.snapshotVersion.compareTo(f)>=0)return l.Je.saveNamedQuery(d,n);const E=s.withResumeToken(Qt.EMPTY_BYTE_STRING,f);return l.Un=l.Un.insert(E.targetId,E),l.ze.updateTargetData(d,E).next(()=>l.ze.removeMatchingKeysForTargetId(d,s.targetId)).next(()=>l.ze.addMatchingKeys(d,r,s.targetId)).next(()=>l.Je.saveNamedQuery(d,n))})})).apply(this,arguments)}class tR{constructor(n){this.N=n,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(n,r){return Se.resolve(this.Yn.get(r))}saveBundleMetadata(n,r){var s;return this.Yn.set(r.id,{id:(s=r).id,version:s.version,createTime:dr(s.createTime)}),Se.resolve()}getNamedQuery(n,r){return Se.resolve(this.Xn.get(r))}saveNamedQuery(n,r){return this.Xn.set(r.name,{name:(s=r).name,query:NI(s.bundledQuery),readTime:dr(s.readTime)}),Se.resolve();var s}}class hE{constructor(){this.Zn=new Mn(hr.ts),this.es=new Mn(hr.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(n,r){const s=new hr(n,r);this.Zn=this.Zn.add(s),this.es=this.es.add(s)}ss(n,r){n.forEach(s=>this.addReference(s,r))}removeReference(n,r){this.rs(new hr(n,r))}os(n,r){n.forEach(s=>this.removeReference(s,r))}cs(n){const r=new Je(new At([])),s=new hr(r,n),l=new hr(r,n+1),d=[];return this.es.forEachInRange([s,l],f=>{this.rs(f),d.push(f.key)}),d}us(){this.Zn.forEach(n=>this.rs(n))}rs(n){this.Zn=this.Zn.delete(n),this.es=this.es.delete(n)}hs(n){const r=new Je(new At([])),s=new hr(r,n),l=new hr(r,n+1);let d=Wt();return this.es.forEachInRange([s,l],f=>{d=d.add(f.key)}),d}containsKey(n){const r=new hr(n,0),s=this.Zn.firstAfterOrEqual(r);return null!==s&&n.isEqual(s.key)}}class hr{constructor(n,r){this.key=n,this.ls=r}static ts(n,r){return Je.comparator(n.key,r.key)||Ot(n.ls,r.ls)}static ns(n,r){return Ot(n.ls,r.ls)||Je.comparator(n.key,r.key)}}class nR{constructor(n,r){this.Ht=n,this.referenceDelegate=r,this.In=[],this.fs=1,this.ds=new Mn(hr.ts)}checkEmpty(n){return Se.resolve(0===this.In.length)}addMutationBatch(n,r,s,l){const d=this.fs;this.fs++;const f=new AI(d,r,s,l);this.In.push(f);for(const E of l)this.ds=this.ds.add(new hr(E.key,d)),this.Ht.addToCollectionParentIndex(n,E.key.path.popLast());return Se.resolve(f)}lookupMutationBatch(n,r){return Se.resolve(this.ws(r))}getNextMutationBatchAfterBatchId(n,r){const l=this._s(r+1),d=l<0?0:l;return Se.resolve(this.In.length>d?this.In[d]:null)}getHighestUnacknowledgedBatchId(){return Se.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(n){return Se.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(n,r){const s=new hr(r,0),l=new hr(r,Number.POSITIVE_INFINITY),d=[];return this.ds.forEachInRange([s,l],f=>{const E=this.ws(f.ls);d.push(E)}),Se.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(n,r){let s=new Mn(Ot);return r.forEach(l=>{const d=new hr(l,0),f=new hr(l,Number.POSITIVE_INFINITY);this.ds.forEachInRange([d,f],E=>{s=s.add(E.ls)})}),Se.resolve(this.gs(s))}getAllMutationBatchesAffectingQuery(n,r){const s=r.path,l=s.length+1;let d=s;Je.isDocumentKey(d)||(d=d.child(""));const f=new hr(new Je(d),0);let E=new Mn(Ot);return this.ds.forEachWhile(C=>{const S=C.key.path;return!!s.isPrefixOf(S)&&(S.length===l&&(E=E.add(C.ls)),!0)},f),Se.resolve(this.gs(E))}gs(n){const r=[];return n.forEach(s=>{const l=this.ws(s);null!==l&&r.push(l)}),r}removeMutationBatch(n,r){gt(0===this.ys(r.batchId,"removed")),this.In.shift();let s=this.ds;return Se.forEach(r.mutations,l=>{const d=new hr(l.key,r.batchId);return s=s.delete(d),this.referenceDelegate.markPotentiallyOrphaned(n,l.key)}).next(()=>{this.ds=s})}te(n){}containsKey(n,r){const s=new hr(r,0),l=this.ds.firstAfterOrEqual(s);return Se.resolve(r.isEqual(l&&l.key))}performConsistencyCheck(n){return Se.resolve()}ys(n,r){return this._s(n)}_s(n){return 0===this.In.length?0:n-this.In[0].batchId}ws(n){const r=this._s(n);return r<0||r>=this.In.length?null:this.In[r]}}class rR{constructor(n,r){this.Ht=n,this.ps=r,this.docs=new zn(Je.comparator),this.size=0}addEntry(n,r,s){const l=r.key,d=this.docs.get(l),f=d?d.size:0,E=this.ps(r);return this.docs=this.docs.insert(l,{document:r.clone(),size:E,readTime:s}),this.size+=E-f,this.Ht.addToCollectionParentIndex(n,l.path.popLast())}removeEntry(n){const r=this.docs.get(n);r&&(this.docs=this.docs.remove(n),this.size-=r.size)}getEntry(n,r){const s=this.docs.get(r);return Se.resolve(s?s.document.clone():bn.newInvalidDocument(r))}getEntries(n,r){let s=Us();return r.forEach(l=>{const d=this.docs.get(l);s=s.insert(l,d?d.document.clone():bn.newInvalidDocument(l))}),Se.resolve(s)}getDocumentsMatchingQuery(n,r,s){let l=Us();const d=new Je(r.path.child("")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:E,value:{document:C,readTime:S}}=f.getNext();if(!r.path.isPrefixOf(E.path))break;S.compareTo(s)<=0||Rp(r,C)&&(l=l.insert(C.key,C.clone()))}return Se.resolve(l)}Es(n,r){return Se.forEach(this.docs,s=>r(s))}newChangeBuffer(n){return new iR(this)}getSize(n){return Se.resolve(this.size)}}class iR extends GI{constructor(n){super(),this.Se=n}applyChanges(n){const r=[];return this.changes.forEach((s,l)=>{l.document.isValidDocument()?r.push(this.Se.addEntry(n,l.document,this.getReadTime(s))):this.Se.removeEntry(s)}),Se.waitFor(r)}getFromCache(n,r){return this.Se.getEntry(n,r)}getAllFromCache(n,r){return this.Se.getEntries(n,r)}}class sR{constructor(n){this.persistence=n,this.Ts=new Kd(r=>Ip(r),E0),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.Is=0,this.As=new hE,this.targetCount=0,this.Rs=Au.se()}forEachTarget(n,r){return this.Ts.forEach((s,l)=>r(l)),Se.resolve()}getLastRemoteSnapshotVersion(n){return Se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(n){return Se.resolve(this.Is)}allocateTargetId(n){return this.highestTargetId=this.Rs.next(),Se.resolve(this.highestTargetId)}setTargetsMetadata(n,r,s){return s&&(this.lastRemoteSnapshotVersion=s),r>this.Is&&(this.Is=r),Se.resolve()}ae(n){this.Ts.set(n.target,n);const r=n.targetId;r>this.highestTargetId&&(this.Rs=new Au(r),this.highestTargetId=r),n.sequenceNumber>this.Is&&(this.Is=n.sequenceNumber)}addTargetData(n,r){return this.ae(r),this.targetCount+=1,Se.resolve()}updateTargetData(n,r){return this.ae(r),Se.resolve()}removeTargetData(n,r){return this.Ts.delete(r.target),this.As.cs(r.targetId),this.targetCount-=1,Se.resolve()}removeTargets(n,r,s){let l=0;const d=[];return this.Ts.forEach((f,E)=>{E.sequenceNumber<=r&&null===s.get(E.targetId)&&(this.Ts.delete(f),d.push(this.removeMatchingKeysForTargetId(n,E.targetId)),l++)}),Se.waitFor(d).next(()=>l)}getTargetCount(n){return Se.resolve(this.targetCount)}getTargetData(n,r){const s=this.Ts.get(r)||null;return Se.resolve(s)}addMatchingKeys(n,r,s){return this.As.ss(r,s),Se.resolve()}removeMatchingKeys(n,r,s){this.As.os(r,s);const l=this.persistence.referenceDelegate,d=[];return l&&r.forEach(f=>{d.push(l.markPotentiallyOrphaned(n,f))}),Se.waitFor(d)}removeMatchingKeysForTargetId(n,r){return this.As.cs(r),Se.resolve()}getMatchingKeysForTargetId(n,r){const s=this.As.hs(r);return Se.resolve(s)}containsKey(n,r){return Se.resolve(this.As.containsKey(r))}}class tD{constructor(n,r){this.bs={},this.Le=new $i(0),this.Be=!1,this.Be=!0,this.referenceDelegate=n(this),this.ze=new sR(this),this.Ht=new PI,this.He=new rR(this.Ht,s=>this.referenceDelegate.Ps(s)),this.N=new KA(r),this.Je=new tR(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(n){let r=this.bs[n.toKey()];return r||(r=new nR(this.Ht,this.referenceDelegate),this.bs[n.toKey()]=r),r}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(n,r,s){Oe("MemoryPersistence","Starting transaction:",n);const l=new nD(this.Le.next());return this.referenceDelegate.vs(),s(l).next(d=>this.referenceDelegate.Vs(l).next(()=>d)).toPromise().then(d=>(l.raiseOnCommittedEvent(),d))}Ss(n,r){return Se.or(Object.values(this.bs).map(s=>()=>s.containsKey(n,r)))}}class nD extends K0{constructor(n){super(),this.currentSequenceNumber=n}}class fE{constructor(n){this.persistence=n,this.Ds=new hE,this.Cs=null}static Ns(n){return new fE(n)}get xs(){if(this.Cs)return this.Cs;throw nt()}addReference(n,r,s){return this.Ds.addReference(s,r),this.xs.delete(s.toString()),Se.resolve()}removeReference(n,r,s){return this.Ds.removeReference(s,r),this.xs.add(s.toString()),Se.resolve()}markPotentiallyOrphaned(n,r){return this.xs.add(r.toString()),Se.resolve()}removeTarget(n,r){this.Ds.cs(r.targetId).forEach(l=>this.xs.add(l.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(n,r.targetId).next(l=>{l.forEach(d=>this.xs.add(d.toString()))}).next(()=>s.removeTargetData(n,r))}vs(){this.Cs=new Set}Vs(n){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Se.forEach(this.xs,s=>{const l=Je.fromPath(s);return this.ks(n,l).next(d=>{d||r.removeEntry(l)})}).next(()=>(this.Cs=null,r.apply(n)))}updateLimboDocument(n,r){return this.ks(n,r).next(s=>{s?this.xs.delete(r.toString()):this.xs.add(r.toString())})}Ps(n){return 0}ks(n,r){return Se.or([()=>Se.resolve(this.Ds.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(n,r),()=>this.persistence.Ss(n,r)])}}function rD(i,n){return`firestore_clients_${i}_${n}`}function pE(i,n,r){let s=`firestore_mutations_${i}_${r}`;return n.isAuthenticated()&&(s+=`_${n.uid}`),s}function gE(i,n){return`firestore_targets_${i}_${n}`}class Wy{constructor(n,r,s,l){this.user=n,this.batchId=r,this.state=s,this.error=l}static $s(n,r,s){const l=JSON.parse(s);let d,f="object"==typeof l&&-1!==["pending","acknowledged","rejected"].indexOf(l.state)&&(void 0===l.error||"object"==typeof l.error);return f&&l.error&&(f="string"==typeof l.error.message&&"string"==typeof l.error.code,f&&(d=new Re(l.error.code,l.error.message))),f?new Wy(n,r,l.state,d):(er("SharedClientState",`Failed to parse mutation state for ID '${r}': ${s}`),null)}Os(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class qp{constructor(n,r,s){this.targetId=n,this.state=r,this.error=s}static $s(n,r){const s=JSON.parse(r);let l,d="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return d&&s.error&&(d="string"==typeof s.error.message&&"string"==typeof s.error.code,d&&(l=new Re(s.error.code,s.error.message))),d?new qp(n,s.state,l):(er("SharedClientState",`Failed to parse target state for ID '${n}': ${r}`),null)}Os(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class Qd{constructor(n,r){this.clientId=n,this.activeTargetIds=r}static $s(n,r){const s=JSON.parse(r);let l="object"==typeof s&&s.activeTargetIds instanceof Array,d=Ly();for(let f=0;l&&f<s.activeTargetIds.length;++f)l=tc(s.activeTargetIds[f]),d=d.add(s.activeTargetIds[f]);return l?new Qd(n,d):(er("SharedClientState",`Failed to parse client data for instance '${n}': ${r}`),null)}}class zp{constructor(n,r){this.clientId=n,this.onlineState=r}static $s(n){const r=JSON.parse(n);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new zp(r.clientId,r.onlineState):(er("SharedClientState",`Failed to parse online state: ${n}`),null)}}class Zy{constructor(){this.activeTargetIds=Ly()}Fs(n){this.activeTargetIds=this.activeTargetIds.add(n)}Ms(n){this.activeTargetIds=this.activeTargetIds.delete(n)}Os(){const n={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(n)}}class Wp{constructor(n,r,s,l,d){this.window=n,this.Oe=r,this.persistenceKey=s,this.Ls=l,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new zn(Ot),this.started=!1,this.Ks=[];const f=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.js=rD(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new Zy),this.Ws=new RegExp(`^firestore_clients_${f}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${f}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${f}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(E){return`firestore_bundle_loaded_${E}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(n){return!(!n||!n.localStorage)}start(){var n=this;return(0,ye.Z)(function*(){const r=yield n.syncEngine.pn();for(const l of r){if(l===n.Ls)continue;const d=n.getItem(rD(n.persistenceKey,l));if(d){const f=Qd.$s(l,d);f&&(n.qs=n.qs.insert(f.clientId,f))}}n.Ys();const s=n.storage.getItem(n.Hs);if(s){const l=n.Xs(s);l&&n.Zs(l)}for(const l of n.Ks)n.Us(l);n.Ks=[],n.window.addEventListener("pagehide",()=>n.shutdown()),n.started=!0})()}writeSequenceNumber(n){this.setItem(this.Qs,JSON.stringify(n))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(n){let r=!1;return this.qs.forEach((s,l)=>{l.activeTargetIds.has(n)&&(r=!0)}),r}addPendingMutation(n){this.ei(n,"pending")}updateMutationState(n,r,s){this.ei(n,r,s),this.ni(n)}addLocalQueryTarget(n){let r="not-current";if(this.isActiveQueryTarget(n)){const s=this.storage.getItem(gE(this.persistenceKey,n));if(s){const l=qp.$s(n,s);l&&(r=l.state)}}return this.si.Fs(n),this.Ys(),r}removeLocalQueryTarget(n){this.si.Ms(n),this.Ys()}isLocalQueryTarget(n){return this.si.activeTargetIds.has(n)}clearQueryState(n){this.removeItem(gE(this.persistenceKey,n))}updateQueryState(n,r,s){this.ii(n,r,s)}handleUserChange(n,r,s){r.forEach(l=>{this.ni(l)}),this.currentUser=n,s.forEach(l=>{this.addPendingMutation(l)})}setOnlineState(n){this.ri(n)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(n){const r=this.storage.getItem(n);return Oe("SharedClientState","READ",n,r),r}setItem(n,r){Oe("SharedClientState","SET",n,r),this.storage.setItem(n,r)}removeItem(n){Oe("SharedClientState","REMOVE",n),this.storage.removeItem(n)}Us(n){var r=this;const s=n;if(s.storageArea===this.storage){if(Oe("SharedClientState","EVENT",s.key,s.newValue),s.key===this.js)return void er("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,ye.Z)(function*(){if(r.started){if(null!==s.key)if(r.Ws.test(s.key)){if(null==s.newValue){const l=r.ai(s.key);return r.ci(l,null)}{const l=r.ui(s.key,s.newValue);if(l)return r.ci(l.clientId,l)}}else if(r.Gs.test(s.key)){if(null!==s.newValue){const l=r.hi(s.key,s.newValue);if(l)return r.li(l)}}else if(r.zs.test(s.key)){if(null!==s.newValue){const l=r.fi(s.key,s.newValue);if(l)return r.di(l)}}else if(s.key===r.Hs){if(null!==s.newValue){const l=r.Xs(s.newValue);if(l)return r.Zs(l)}}else if(s.key===r.Qs){const l=function(d){let f=$i.T;if(null!=d)try{const E=JSON.parse(d);gt("number"==typeof E),f=E}catch(E){er("SharedClientState","Failed to read sequence number from WebStorage",E)}return f}(s.newValue);l!==$i.T&&r.sequenceNumberHandler(l)}else if(s.key===r.Js)return r.syncEngine.wi()}else r.Ks.push(s)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(n,r,s){const l=new Wy(this.currentUser,n,r,s),d=pE(this.persistenceKey,this.currentUser,n);this.setItem(d,l.Os())}ni(n){const r=pE(this.persistenceKey,this.currentUser,n);this.removeItem(r)}ri(n){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:n}))}ii(n,r,s){const l=gE(this.persistenceKey,n),d=new qp(n,r,s);this.setItem(l,d.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(n){const r=this.Ws.exec(n);return r?r[1]:null}ui(n,r){const s=this.ai(n);return Qd.$s(s,r)}hi(n,r){const s=this.Gs.exec(n),l=Number(s[1]);return Wy.$s(new $r(void 0!==s[2]?s[2]:null),l,r)}fi(n,r){const s=this.zs.exec(n),l=Number(s[1]);return qp.$s(l,r)}Xs(n){return zp.$s(n)}li(n){var r=this;return(0,ye.Z)(function*(){if(n.user.uid===r.currentUser.uid)return r.syncEngine._i(n.batchId,n.state,n.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${n.user.uid}`)})()}di(n){return this.syncEngine.mi(n.targetId,n.state,n.error)}ci(n,r){const s=r?this.qs.insert(n,r):this.qs.remove(n),l=this.ti(this.qs),d=this.ti(s),f=[],E=[];return d.forEach(C=>{l.has(C)||f.push(C)}),l.forEach(C=>{d.has(C)||E.push(C)}),this.syncEngine.gi(f,E).then(()=>{this.qs=s})}Zs(n){this.qs.get(n.clientId)&&this.onlineStateHandler(n.onlineState)}ti(n){let r=Ly();return n.forEach((s,l)=>{r=r.unionWith(l.activeTargetIds)}),r}}class iD{constructor(){this.yi=new Zy,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(n){}updateMutationState(n,r,s){}addLocalQueryTarget(n){return this.yi.Fs(n),this.pi[n]||"not-current"}updateQueryState(n,r,s){this.pi[n]=r}removeLocalQueryTarget(n){this.yi.Ms(n)}isLocalQueryTarget(n){return this.yi.activeTargetIds.has(n)}clearQueryState(n){delete this.pi[n]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(n){return this.yi.activeTargetIds.has(n)}start(){return this.yi=new Zy,Promise.resolve()}handleUserChange(n,r,s){}setOnlineState(n){}shutdown(){}writeSequenceNumber(n){}notifyBundleLoaded(){}}class oR{Ei(n){}shutdown(){}}class Ky{constructor(){this.Ti=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ei(n){this.bi.push(n)}shutdown(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}Ii(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const n of this.bi)n(0)}Ri(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const n of this.bi)n(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const aR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class sD{constructor(n){this.vi=n.vi,this.Vi=n.Vi}Si(n){this.Di=n}Ci(n){this.Ni=n}onMessage(n){this.xi=n}close(){this.Vi()}send(n){this.vi(n)}ki(){this.Di()}$i(n){this.Ni(n)}Oi(n){this.xi(n)}}class uR extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId,this.Fi=(n.ssl?"https":"http")+"://"+n.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(n,r,s,l){const d=this.Bi(n,r);Oe("RestConnection","Sending: ",d,s);const f={};return this.Ui(f,l),this.qi(n,d,f,s).then(E=>(Oe("RestConnection","Received: ",E),E),E=>{throw si("RestConnection",`${n} failed with error: `,E,"url: ",d,"request:",s),E})}Ki(n,r,s,l){return this.Li(n,r,s,l)}Ui(n,r){if(n["X-Goog-Api-Client"]="gl-js/ fire/"+vp,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r)for(const s in r.authHeaders)r.authHeaders.hasOwnProperty(s)&&(n[s]=r.authHeaders[s])}Bi(n,r){return`${this.Fi}/v1/${r}:${aR[n]}`}}{constructor(n){super(n),this.forceLongPolling=n.forceLongPolling,this.autoDetectLongPolling=n.autoDetectLongPolling,this.useFetchStreams=n.useFetchStreams}qi(n,r,s,l){return new Promise((d,f)=>{const E=new CA;E.listenOnce(wA.COMPLETE,()=>{try{switch(E.getLastErrorCode()){case c0.NO_ERROR:const S=E.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(S)),d(S);break;case c0.TIMEOUT:Oe("Connection",'RPC "'+n+'" timed out'),f(new Re(ce.DEADLINE_EXCEEDED,"Request time out"));break;case c0.HTTP_ERROR:const x=E.getStatus();if(Oe("Connection",'RPC "'+n+'" failed with status:',x,"response text:",E.getResponseText()),x>0){const N=E.getResponseJson().error;if(N&&N.status&&N.message){const V=function(B){const W=B.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(W)>=0?W:ce.UNKNOWN}(N.status);f(new Re(V,N.message))}else f(new Re(ce.UNKNOWN,"Server responded with status "+E.getStatus()))}else f(new Re(ce.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{Oe("Connection",'RPC "'+n+'" completed.')}});const C=JSON.stringify(l);E.send(r,"POST",C,s,15)})}ji(n,r){const s=[this.Fi,"/","google.firestore.v1.Firestore","/",n,"/channel"],l=vA(),d=EA(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new qC({})),this.Ui(f.initMessageHeaders,r),(0,bt.uI)()||(0,bt.b$)()||(0,bt.d)()||(0,bt.w1)()||(0,bt.Mn)()||(0,bt.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const E=s.join("");Oe("Connection","Creating WebChannel: "+E,f);const C=l.createWebChannel(E,f);let S=!1,x=!1;const N=new sD({vi:B=>{x?Oe("Connection","Not sending because WebChannel is closed:",B):(S||(Oe("Connection","Opening WebChannel transport."),C.open(),S=!0),Oe("Connection","WebChannel sending:",B),C.send(B))},Vi:()=>C.close()}),V=(B,W,fe)=>{B.listen(W,De=>{try{fe(De)}catch($e){setTimeout(()=>{throw $e},0)}})};return V(C,wy.EventType.OPEN,()=>{x||Oe("Connection","WebChannel transport opened.")}),V(C,wy.EventType.CLOSE,()=>{x||(x=!0,Oe("Connection","WebChannel transport closed"),N.$i())}),V(C,wy.EventType.ERROR,B=>{x||(x=!0,si("Connection","WebChannel transport errored:",B),N.$i(new Re(ce.UNAVAILABLE,"The operation could not be completed")))}),V(C,wy.EventType.MESSAGE,B=>{var W;if(!x){const fe=B.data[0];gt(!!fe);const De=fe,$e=De.error||(null===(W=De[0])||void 0===W?void 0:W.error);if($e){Oe("Connection","WebChannel received error:",$e);const We=$e.status;let Ge=function(Xt){const Zn=Fn[Xt];if(void 0!==Zn)return B0(Zn)}(We),Ze=$e.message;void 0===Ge&&(Ge=ce.INTERNAL,Ze="Unknown error status: "+We+" with message "+$e.message),x=!0,N.$i(new Re(Ge,Ze)),C.close()}else Oe("Connection","WebChannel received:",fe),N.Oi(fe)}}),V(d,GC.STAT_EVENT,B=>{B.stat===bA.PROXY?Oe("Connection","Detected buffering proxy"):B.stat===bA.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.ki()},0),N}}function mE(){return"undefined"!=typeof window?window:null}function Zp(){return"undefined"!=typeof document?document:null}function Jd(i){return new dI(i,!0)}class oD{constructor(n,r,s=1e3,l=1.5,d=6e4){this.Oe=n,this.timerId=r,this.Qi=s,this.Wi=l,this.Gi=d,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(n){this.cancel();const r=Math.floor(this.zi+this.Zi()),s=Math.max(0,Date.now()-this.Ji),l=Math.max(0,r-s);l>0&&Oe("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.zi} ms, delay with jitter: ${r} ms, last attempt: ${s} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,l,()=>(this.Ji=Date.now(),n())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class aD{constructor(n,r,s,l,d,f){this.Oe=n,this.er=s,this.nr=l,this.credentialsProvider=d,this.listener=f,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new oD(n,r)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var n=this;return(0,ye.Z)(function*(){n.ar()&&(yield n.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(n){this._r(),this.stream.send(n)}dr(){var n=this;return(0,ye.Z)(function*(){if(n.cr())return n.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(n,r){var s=this;return(0,ye.Z)(function*(){s._r(),s.rr.cancel(),s.sr++,3!==n?s.rr.reset():r&&r.code===ce.RESOURCE_EXHAUSTED?(er(r.toString()),er("Using maximum backoff delay to prevent overloading the backend."),s.rr.Yi()):r&&r.code===ce.UNAUTHENTICATED&&s.credentialsProvider.invalidateToken(),null!==s.stream&&(s.mr(),s.stream.close(),s.stream=null),s.state=n,yield s.listener.Ci(r)})()}mr(){}auth(){this.state=1;const n=this.gr(this.sr),r=this.sr;this.credentialsProvider.getToken().then(s=>{this.sr===r&&this.yr(s)},s=>{n(()=>{const l=new Re(ce.UNKNOWN,"Fetching auth token failed: "+s.message);return this.pr(l)})})}yr(n){const r=this.gr(this.sr);this.stream=this.Er(n),this.stream.Si(()=>{r(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(s=>{r(()=>this.pr(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}ur(){var n=this;this.state=4,this.rr.Xi((0,ye.Z)(function*(){n.state=0,n.start()}))}pr(n){return Oe("PersistentStream",`close with error: ${n}`),this.stream=null,this.close(3,n)}gr(n){return r=>{this.Oe.enqueueAndForget(()=>this.sr===n?r():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Xd extends aD{constructor(n,r,s,l,d){super(n,"listen_stream_connection_backoff","listen_stream_idle",r,s,d),this.N=l}Er(n){return this.nr.ji("Listen",n)}onMessage(n){this.rr.reset();const r=function(i,n){let r;if("targetChange"in n){const s="NO_CHANGE"===(C=n.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===C?1:"REMOVE"===C?2:"CURRENT"===C?3:"RESET"===C?4:nt(),l=n.targetChange.targetIds||[],d=function(C,S){return C.D?(gt(void 0===S||"string"==typeof S),Qt.fromBase64String(S||"")):(gt(void 0===S||S instanceof Uint8Array),Qt.fromUint8Array(S||new Uint8Array))}(i,n.targetChange.resumeToken),f=n.targetChange.cause,E=f&&function(C){const S=void 0===C.code?ce.UNKNOWN:B0(C.code);return new Re(S,C.message||"")}(f);r=new ic(s,l,d,E||null)}else if("documentChange"in n){const s=n.documentChange,l=js(i,s.document.name),d=dr(s.document.updateTime),f=new oi({mapValue:{fields:s.document.fields}}),E=bn.newFoundDocument(l,d,f);r=new kp(s.targetIds||[],s.removedTargetIds||[],E.key,E)}else if("documentDelete"in n){const s=n.documentDelete,l=js(i,s.document),d=s.readTime?dr(s.readTime):ut.min(),f=bn.newNoDocument(l,d);r=new kp([],s.removedTargetIds||[],f.key,f)}else if("documentRemove"in n){const s=n.documentRemove,l=js(i,s.document);r=new kp([],s.removedTargetIds||[],l,null)}else{if(!("filter"in n))return nt();{const s=n.filter,d=new VA(s.count||0);r=new H0(s.targetId,d)}}var C;return r}(this.N,n),s=function(l){if(!("targetChange"in l))return ut.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?ut.min():d.readTime?dr(d.readTime):ut.min()}(n);return this.listener.Tr(r,s)}Ir(n){const r={};r.database=Fp(this.N),r.addTarget=function(l,d){let f;const E=d.target;return f=Ty(E)?{documents:q0(l,E)}:{query:Up(l,E)},f.targetId=d.targetId,d.resumeToken.approximateByteSize()>0?f.resumeToken=Bs(l,d.resumeToken):d.snapshotVersion.compareTo(ut.min())>0&&(f.readTime=sc(l,d.snapshotVersion.toTimestamp())),f}(this.N,n);const s=function(i,n){const r=function(s,l){switch(l){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return nt()}}(0,n.purpose);return null==r?null:{"goog-listen-tags":r}}(0,n);s&&(r.labels=s),this.wr(r)}Ar(n){const r={};r.database=Fp(this.N),r.removeTarget=n,this.wr(r)}}class NN extends aD{constructor(n,r,s,l,d){super(n,"write_stream_connection_backoff","write_stream_idle",r,s,d),this.N=l,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Er(n){return this.nr.ji("Write",n)}onMessage(n){if(gt(!!n.streamToken),this.lastStreamToken=n.streamToken,this.Rr){this.rr.reset();const r=function(i,n){return i&&i.length>0?(gt(void 0!==n),i.map(r=>function(s,l){let d=dr(s.updateTime?s.updateTime:l);return d.isEqual(ut.min())&&(d=dr(l)),new iI(d,s.transformResults||[])}(r,n))):[]}(n.writeResults,n.commitTime),s=dr(n.commitTime);return this.listener.vr(s,r)}return gt(!n.writeResults||0===n.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const n={};n.database=Fp(this.N),this.wr(n)}Pr(n){const r={streamToken:this.lastStreamToken,writes:n.map(s=>Vp(this.N,s))};this.wr(r)}}class yE extends class{}{constructor(n,r,s){super(),this.credentials=n,this.nr=r,this.N=s,this.Dr=!1}Cr(){if(this.Dr)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Li(n,r,s){return this.Cr(),this.credentials.getToken().then(l=>this.nr.Li(n,r,s,l)).catch(l=>{throw"FirebaseError"===l.name?(l.code===ce.UNAUTHENTICATED&&this.credentials.invalidateToken(),l):new Re(ce.UNKNOWN,l.toString())})}Ki(n,r,s){return this.Cr(),this.credentials.getToken().then(l=>this.nr.Ki(n,r,s,l)).catch(l=>{throw"FirebaseError"===l.name?(l.code===ce.UNAUTHENTICATED&&this.credentials.invalidateToken(),l):new Re(ce.UNKNOWN,l.toString())})}terminate(){this.Dr=!0}}class Yy{constructor(n,r){this.asyncQueue=n,this.onlineStateHandler=r,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(n){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${n.toString()}`),this.Fr("Offline")))}set(n){this.Br(),this.Nr=0,"Online"===n&&(this.$r=!1),this.Fr(n)}Fr(n){n!==this.state&&(this.state=n,this.onlineStateHandler(n))}Mr(n){const r=`Could not reach Cloud Firestore backend. ${n}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(er(r),this.$r=!1):Oe("OnlineStateTracker",r)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class lR{constructor(n,r,s,l,d){var f=this;this.localStore=n,this.datastore=r,this.asyncQueue=s,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=d,this.Qr.Ei(E=>{s.enqueueAndForget((0,ye.Z)(function*(){var C;yc(f)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(C=(0,ye.Z)(function*(S){const x=Le(S);x.Kr.add(4),yield Kp(x),x.Wr.set("Unknown"),x.Kr.delete(4),yield No(x)}),function(S){return C.apply(this,arguments)})(f))}))}),this.Wr=new Yy(s,l)}}function No(i){return _E.apply(this,arguments)}function _E(){return(_E=(0,ye.Z)(function*(i){if(yc(i))for(const n of i.jr)yield n(!0)})).apply(this,arguments)}function Kp(i){return vE.apply(this,arguments)}function vE(){return(vE=(0,ye.Z)(function*(i){for(const n of i.jr)yield n(!1)})).apply(this,arguments)}function Wi(i,n){const r=Le(i);r.qr.has(n.targetId)||(r.qr.set(n.targetId,n),wE(r)?EE(r):Qp(r).cr()&&uD(r,n))}function eh(i,n){const r=Le(i),s=Qp(r);r.qr.delete(n),s.cr()&&Yp(r,n),0===r.qr.size&&(s.cr()?s.lr():yc(r)&&r.Wr.set("Unknown"))}function uD(i,n){i.Gr.Y(n.targetId),Qp(i).Ir(n)}function Yp(i,n){i.Gr.Y(n),Qp(i).Ar(n)}function EE(i){i.Gr=new jA({getRemoteKeysForTarget:n=>i.remoteSyncer.getRemoteKeysForTarget(n),Et:n=>i.qr.get(n)||null}),Qp(i).start(),i.Wr.Or()}function wE(i){return yc(i)&&!Qp(i).ar()&&i.qr.size>0}function yc(i){return 0===Le(i).Kr.size}function lD(i){i.Gr=void 0}function cR(i){return bE.apply(this,arguments)}function bE(){return(bE=(0,ye.Z)(function*(i){i.qr.forEach((n,r)=>{uD(i,n)})})).apply(this,arguments)}function CE(i,n){return Qy.apply(this,arguments)}function Qy(){return(Qy=(0,ye.Z)(function*(i,n){lD(i),wE(i)?(i.Wr.Lr(n),EE(i)):i.Wr.set("Unknown")})).apply(this,arguments)}function IE(i,n,r){return Jy.apply(this,arguments)}function Jy(){return(Jy=(0,ye.Z)(function*(i,n,r){if(i.Wr.set("Online"),n instanceof ic&&2===n.state&&n.cause)try{yield(s=(0,ye.Z)(function*(l,d){const f=d.cause;for(const E of d.targetIds)l.qr.has(E)&&(yield l.remoteSyncer.rejectListen(E,f),l.qr.delete(E),l.Gr.removeTarget(E))}),function(l,d){return s.apply(this,arguments)})(i,n)}catch(s){Oe("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),s),yield Xy(i,s)}else if(n instanceof kp?i.Gr.rt(n):n instanceof H0?i.Gr.ft(n):i.Gr.ct(n),!r.isEqual(ut.min()))try{const s=yield KI(i.localStore);r.compareTo(s)>=0&&(yield function(l,d){const f=l.Gr._t(d);return f.targetChanges.forEach((E,C)=>{if(E.resumeToken.approximateByteSize()>0){const S=l.qr.get(C);S&&l.qr.set(C,S.withResumeToken(E.resumeToken,d))}}),f.targetMismatches.forEach(E=>{const C=l.qr.get(E);if(!C)return;l.qr.set(E,C.withResumeToken(Qt.EMPTY_BYTE_STRING,C.snapshotVersion)),Yp(l,E);const S=new Sa(C.target,E,1,C.sequenceNumber);uD(l,S)}),l.remoteSyncer.applyRemoteEvent(f)}(i,r))}catch(s){Oe("RemoteStore","Failed to raise snapshot:",s),yield Xy(i,s)}var s})).apply(this,arguments)}function Xy(i,n,r){return cD.apply(this,arguments)}function cD(){return(cD=(0,ye.Z)(function*(i,n,r){if(!Cu(n))throw n;i.Kr.add(1),yield Kp(i),i.Wr.set("Offline"),r||(r=()=>KI(i.localStore)),i.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield r(),i.Kr.delete(1),yield No(i)}))})).apply(this,arguments)}function dD(i,n){return n().catch(r=>Xy(i,r,n))}function th(i){return DE.apply(this,arguments)}function DE(){return(DE=(0,ye.Z)(function*(i){const n=Le(i),r=xu(n);let s=n.Ur.length>0?n.Ur[n.Ur.length-1].batchId:-1;for(;hD(n);)try{const l=yield JI(n.localStore,s);if(null===l){0===n.Ur.length&&r.lr();break}s=l.batchId,fD(n,l)}catch(l){yield Xy(n,l)}TE(n)&&pD(n)})).apply(this,arguments)}function hD(i){return yc(i)&&i.Ur.length<10}function fD(i,n){i.Ur.push(n);const r=xu(i);r.cr()&&r.br&&r.Pr(n.mutations)}function TE(i){return yc(i)&&!xu(i).ar()&&i.Ur.length>0}function pD(i){xu(i).start()}function dR(i){return e_.apply(this,arguments)}function e_(){return(e_=(0,ye.Z)(function*(i){xu(i).Sr()})).apply(this,arguments)}function t_(i){return SE.apply(this,arguments)}function SE(){return(SE=(0,ye.Z)(function*(i){const n=xu(i);for(const r of i.Ur)n.Pr(r.mutations)})).apply(this,arguments)}function gD(i,n,r){return nh.apply(this,arguments)}function nh(){return(nh=(0,ye.Z)(function*(i,n,r){const s=i.Ur.shift(),l=jy.from(s,n,r);yield dD(i,()=>i.remoteSyncer.applySuccessfulWrite(l)),yield th(i)})).apply(this,arguments)}function n_(i,n){return _c.apply(this,arguments)}function _c(){return(_c=(0,ye.Z)(function*(i,n){var r;n&&xu(i).br&&(yield(r=(0,ye.Z)(function*(s,l){if(U0(d=l.code)&&d!==ce.ABORTED){const f=s.Ur.shift();xu(s).hr(),yield dD(s,()=>s.remoteSyncer.rejectFailedWrite(f.batchId,l)),yield th(s)}var d}),function(s,l){return r.apply(this,arguments)})(i,n)),TE(i)&&pD(i)})).apply(this,arguments)}function AE(i,n){return RE.apply(this,arguments)}function RE(){return(RE=(0,ye.Z)(function*(i,n){const r=Le(i);n?(r.Kr.delete(2),yield No(r)):n||(r.Kr.add(2),yield Kp(r),r.Wr.set("Unknown"))})).apply(this,arguments)}function Qp(i){return i.zr||(i.zr=function(n,r,s){const l=Le(n);return l.Cr(),new Xd(r,l.nr,l.credentials,l.N,s)}(i.datastore,i.asyncQueue,{Si:cR.bind(null,i),Ci:CE.bind(null,i),Tr:IE.bind(null,i)}),i.jr.push(function(){var n=(0,ye.Z)(function*(r){r?(i.zr.hr(),wE(i)?EE(i):i.Wr.set("Unknown")):(yield i.zr.stop(),lD(i))});return function(r){return n.apply(this,arguments)}}())),i.zr}function xu(i){return i.Hr||(i.Hr=function(n,r,s){const l=Le(n);return l.Cr(),new NN(r,l.nr,l.credentials,l.N,s)}(i.datastore,i.asyncQueue,{Si:dR.bind(null,i),Ci:n_.bind(null,i),Vr:t_.bind(null,i),vr:gD.bind(null,i)}),i.jr.push(function(){var n=(0,ye.Z)(function*(r){r?(i.Hr.hr(),yield th(i)):(yield i.Hr.stop(),i.Ur.length>0&&(Oe("RemoteStore",`Stopping write stream with ${i.Ur.length} pending writes`),i.Ur=[]))});return function(r){return n.apply(this,arguments)}}())),i.Hr}class xE{constructor(n,r,s,l,d){this.asyncQueue=n,this.timerId=r,this.targetTimeMs=s,this.op=l,this.removalCallback=d,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}static createAndSchedule(n,r,s,l,d){const f=Date.now()+s,E=new xE(n,r,f,l,d);return E.start(s),E}start(n){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),n)}skipDelay(){return this.handleDelayElapsed()}cancel(n){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ce.CANCELLED,"Operation cancelled"+(n?": "+n:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(n=>this.deferred.resolve(n))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rh(i,n){if(er("AsyncQueue",`${n}: ${i}`),Cu(i))return new Re(ce.UNAVAILABLE,`${n}: ${i}`);throw i}class ih{constructor(n){this.comparator=n?(r,s)=>n(r,s)||Je.comparator(r.key,s.key):(r,s)=>Je.comparator(r.key,s.key),this.keyedMap=$0(),this.sortedSet=new zn(this.comparator)}static emptySet(n){return new ih(n.comparator)}has(n){return null!=this.keyedMap.get(n)}get(n){return this.keyedMap.get(n)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(n){const r=this.keyedMap.get(n);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(n){this.sortedSet.inorderTraversal((r,s)=>(n(r),!1))}add(n){const r=this.delete(n.key);return r.copy(r.keyedMap.insert(n.key,n),r.sortedSet.insert(n,null))}delete(n){const r=this.get(n);return r?this.copy(this.keyedMap.remove(n),this.sortedSet.remove(r)):this}isEqual(n){if(!(n instanceof ih)||this.size!==n.size)return!1;const r=this.sortedSet.getIterator(),s=n.sortedSet.getIterator();for(;r.hasNext();){const l=r.getNext().key,d=s.getNext().key;if(!l.isEqual(d))return!1}return!0}toString(){const n=[];return this.forEach(r=>{n.push(r.toString())}),0===n.length?"DocumentSet ()":"DocumentSet (\n  "+n.join("  \n")+"\n)"}copy(n,r){const s=new ih;return s.comparator=this.comparator,s.keyedMap=n,s.sortedSet=r,s}}class mD{constructor(){this.Jr=new zn(Je.comparator)}track(n){const r=n.doc.key,s=this.Jr.get(r);s?0!==n.type&&3===s.type?this.Jr=this.Jr.insert(r,n):3===n.type&&1!==s.type?this.Jr=this.Jr.insert(r,{type:s.type,doc:n.doc}):2===n.type&&2===s.type?this.Jr=this.Jr.insert(r,{type:2,doc:n.doc}):2===n.type&&0===s.type?this.Jr=this.Jr.insert(r,{type:0,doc:n.doc}):1===n.type&&0===s.type?this.Jr=this.Jr.remove(r):1===n.type&&2===s.type?this.Jr=this.Jr.insert(r,{type:1,doc:s.doc}):0===n.type&&1===s.type?this.Jr=this.Jr.insert(r,{type:2,doc:n.doc}):nt():this.Jr=this.Jr.insert(r,n)}Yr(){const n=[];return this.Jr.inorderTraversal((r,s)=>{n.push(s)}),n}}class sh{constructor(n,r,s,l,d,f,E,C){this.query=n,this.docs=r,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=d,this.fromCache=f,this.syncStateChanged=E,this.excludesMetadataChanges=C}static fromInitialDocuments(n,r,s,l){const d=[];return r.forEach(f=>{d.push({type:0,doc:f})}),new sh(n,r,ih.emptySet(r),d,s,l,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(n){if(!(this.fromCache===n.fromCache&&this.syncStateChanged===n.syncStateChanged&&this.mutatedKeys.isEqual(n.mutatedKeys)&&Ap(this.query,n.query)&&this.docs.isEqual(n.docs)&&this.oldDocs.isEqual(n.oldDocs)))return!1;const r=this.docChanges,s=n.docChanges;if(r.length!==s.length)return!1;for(let l=0;l<r.length;l++)if(r[l].type!==s[l].type||!r[l].doc.isEqual(s[l].doc))return!1;return!0}}class hR{constructor(){this.Xr=void 0,this.listeners=[]}}class fR{constructor(){this.queries=new Kd(n=>nI(n),Ap),this.onlineState="Unknown",this.Zr=new Set}}function NE(i,n){return yD.apply(this,arguments)}function yD(){return(yD=(0,ye.Z)(function*(i,n){const r=Le(i),s=n.query;let l=!1,d=r.queries.get(s);if(d||(l=!0,d=new hR),l)try{d.Xr=yield r.onListen(s)}catch(f){const E=rh(f,`Initialization of query '${T0(n.query)}' failed`);return void n.onError(E)}r.queries.set(s,d),d.listeners.push(n),n.eo(r.onlineState),d.Xr&&n.no(d.Xr)&&OE(r)})).apply(this,arguments)}function ME(i,n){return vc.apply(this,arguments)}function vc(){return(vc=(0,ye.Z)(function*(i,n){const r=Le(i),s=n.query;let l=!1;const d=r.queries.get(s);if(d){const f=d.listeners.indexOf(n);f>=0&&(d.listeners.splice(f,1),l=0===d.listeners.length)}if(l)return r.queries.delete(s),r.onUnlisten(s)})).apply(this,arguments)}function pR(i,n){const r=Le(i);let s=!1;for(const l of n){const f=r.queries.get(l.query);if(f){for(const E of f.listeners)E.no(l)&&(s=!0);f.Xr=l}}s&&OE(r)}function gR(i,n,r){const s=Le(i),l=s.queries.get(n);if(l)for(const d of l.listeners)d.onError(r);s.queries.delete(n)}function OE(i){i.Zr.forEach(n=>{n.next()})}class oh{constructor(n,r,s){this.query=n,this.so=r,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=s||{}}no(n){if(!this.options.includeMetadataChanges){const s=[];for(const l of n.docChanges)3!==l.type&&s.push(l);n=new sh(n.query,n.docs,n.oldDocs,s,n.mutatedKeys,n.fromCache,n.syncStateChanged,!0)}let r=!1;return this.io?this.oo(n)&&(this.so.next(n),r=!0):this.ao(n,this.onlineState)&&(this.co(n),r=!0),this.ro=n,r}onError(n){this.so.error(n)}eo(n){this.onlineState=n;let r=!1;return this.ro&&!this.io&&this.ao(this.ro,n)&&(this.co(this.ro),r=!0),r}ao(n,r){return!n.fromCache||!(this.options.uo&&"Offline"!==r||n.docs.isEmpty()&&"Offline"!==r)}oo(n){return n.docChanges.length>0||!!(n.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==n.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(n){n=sh.fromInitialDocuments(n.query,n.docs,n.mutatedKeys,n.fromCache),this.io=!0,this.so.next(n)}}class Ec{constructor(n,r){this.payload=n,this.byteLength=r}ho(){return"metadata"in this.payload}}class PE{constructor(n){this.N=n}zn(n){return js(this.N,n)}Hn(n){return n.metadata.exists?Uy(this.N,n.document,!1):bn.newNoDocument(this.zn(n.metadata.name),this.Jn(n.metadata.readTime))}Jn(n){return dr(n)}}class mR{constructor(n,r,s){this.lo=n,this.localStore=r,this.N=s,this.queries=[],this.documents=[],this.progress=yR(n)}fo(n){this.progress.bytesLoaded+=n.byteLength;let r=this.progress.documentsLoaded;return n.payload.namedQuery?this.queries.push(n.payload.namedQuery):n.payload.documentMetadata?(this.documents.push({metadata:n.payload.documentMetadata}),n.payload.documentMetadata.exists||++r):n.payload.document&&(this.documents[this.documents.length-1].document=n.payload.document,++r),r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}wo(n){const r=new Map,s=new PE(this.N);for(const l of n)if(l.metadata.queries){const d=s.zn(l.metadata.name);for(const f of l.metadata.queries){const E=(r.get(f)||Wt()).add(d);r.set(f,E)}}return r}complete(){var n=this;return(0,ye.Z)(function*(){const r=yield function(i,n,r,s){return cE.apply(this,arguments)}(n.localStore,new PE(n.N),n.documents,n.lo.id),s=n.wo(n.documents);for(const l of n.queries)yield eD(n.localStore,l,s.get(l.name));return n.progress.taskState="Success",new JA(Object.assign({},n.progress),r)})()}}function yR(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class _D{constructor(n){this.key=n}}class Jp{constructor(n){this.key=n}}class vD{constructor(n,r){this.query=n,this._o=r,this.mo=null,this.current=!1,this.yo=Wt(),this.mutatedKeys=Wt(),this.po=S0(n),this.Eo=new ih(this.po)}get To(){return this._o}Io(n,r){const s=r?r.Ao:new mD,l=r?r.Eo:this.Eo;let d=r?r.mutatedKeys:this.mutatedKeys,f=l,E=!1;const C=Sy(this.query)&&l.size===this.query.limit?l.last():null,S=Sp(this.query)&&l.size===this.query.limit?l.first():null;if(n.inorderTraversal((x,N)=>{const V=l.get(x),B=Rp(this.query,N)?N:null,W=!!V&&this.mutatedKeys.has(V.key),fe=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let De=!1;V&&B?V.data.isEqual(B.data)?W!==fe&&(s.track({type:3,doc:B}),De=!0):this.Ro(V,B)||(s.track({type:2,doc:B}),De=!0,(C&&this.po(B,C)>0||S&&this.po(B,S)<0)&&(E=!0)):!V&&B?(s.track({type:0,doc:B}),De=!0):V&&!B&&(s.track({type:1,doc:V}),De=!0,(C||S)&&(E=!0)),De&&(B?(f=f.add(B),d=fe?d.add(x):d.delete(x)):(f=f.delete(x),d=d.delete(x)))}),Sy(this.query)||Sp(this.query))for(;f.size>this.query.limit;){const x=Sy(this.query)?f.last():f.first();f=f.delete(x.key),d=d.delete(x.key),s.track({type:1,doc:x})}return{Eo:f,Ao:s,Ln:E,mutatedKeys:d}}Ro(n,r){return n.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(n,r,s){const l=this.Eo;this.Eo=n.Eo,this.mutatedKeys=n.mutatedKeys;const d=n.Ao.Yr();d.sort((S,x)=>function(N,V){const B=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}};return B(N)-B(V)}(S.type,x.type)||this.po(S.doc,x.doc)),this.bo(s);const f=r?this.Po():[],E=0===this.yo.size&&this.current?1:0,C=E!==this.mo;return this.mo=E,0!==d.length||C?{snapshot:new sh(this.query,n.Eo,l,d,n.mutatedKeys,0===E,C,!1),vo:f}:{vo:f}}eo(n){return this.current&&"Offline"===n?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new mD,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(n){return!this._o.has(n)&&!!this.Eo.has(n)&&!this.Eo.get(n).hasLocalMutations}bo(n){n&&(n.addedDocuments.forEach(r=>this._o=this._o.add(r)),n.modifiedDocuments.forEach(r=>{}),n.removedDocuments.forEach(r=>this._o=this._o.delete(r)),this.current=n.current)}Po(){if(!this.current)return[];const n=this.yo;this.yo=Wt(),this.Eo.forEach(s=>{this.Vo(s.key)&&(this.yo=this.yo.add(s.key))});const r=[];return n.forEach(s=>{this.yo.has(s)||r.push(new Jp(s))}),this.yo.forEach(s=>{n.has(s)||r.push(new _D(s))}),r}So(n){this._o=n.Gn,this.yo=Wt();const r=this.Io(n.documents);return this.applyChanges(r,!0)}Do(){return sh.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}class _R{constructor(n,r,s){this.query=n,this.targetId=r,this.view=s}}class ED{constructor(n){this.key=n,this.Co=!1}}class wD{constructor(n,r,s,l,d,f){this.localStore=n,this.remoteStore=r,this.eventManager=s,this.sharedClientState=l,this.currentUser=d,this.maxConcurrentLimboResolutions=f,this.No={},this.xo=new Kd(E=>nI(E),Ap),this.ko=new Map,this.$o=new Set,this.Oo=new zn(Je.comparator),this.Fo=new Map,this.Mo=new hE,this.Lo={},this.Bo=new Map,this.Uo=Au.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function kE(i,n){return r_.apply(this,arguments)}function r_(){return(r_=(0,ye.Z)(function*(i,n){const r=l_(i);let s,l;const d=r.xo.get(n);if(d)s=d.targetId,r.sharedClientState.addLocalQueryTarget(s),l=d.view.Do();else{const f=yield Yd(r.localStore,Gi(n)),E=r.sharedClientState.addLocalQueryTarget(f.targetId);s=f.targetId,l=yield i_(r,n,s,"current"===E),r.isPrimaryClient&&Wi(r.remoteStore,f)}return l})).apply(this,arguments)}function i_(i,n,r,s){return FE.apply(this,arguments)}function FE(){return(FE=(0,ye.Z)(function*(i,n,r,s){i.Ko=(x,N,V)=>{return(B=(0,ye.Z)(function*(W,fe,De,$e){let We=fe.view.Io(De);We.Ln&&(We=yield Gp(W.localStore,fe.query,!1).then(({documents:Xt})=>fe.view.Io(Xt,We)));const Ge=$e&&$e.targetChanges.get(fe.targetId),Ze=fe.view.applyChanges(We,W.isPrimaryClient,Ge);return a_(W,fe.targetId,Ze.vo),Ze.snapshot}),function(W,fe,De,$e){return B.apply(this,arguments)})(i,x,N,V);var B};const l=yield Gp(i.localStore,n,!0),d=new vD(n,l.Gn),f=d.Io(l.documents),E=Pp.createSynthesizedTargetChangeForCurrentChange(r,s&&"Offline"!==i.onlineState),C=d.applyChanges(f,i.isPrimaryClient,E);a_(i,r,C.vo);const S=new _R(n,r,d);return i.xo.set(n,S),i.ko.has(r)?i.ko.get(r).push(n):i.ko.set(r,[n]),C.snapshot})).apply(this,arguments)}function vR(i,n){return s_.apply(this,arguments)}function s_(){return(s_=(0,ye.Z)(function*(i,n){const r=Le(i),s=r.xo.get(n),l=r.ko.get(s.targetId);if(l.length>1)return r.ko.set(s.targetId,l.filter(d=>!Ap(d,n))),void r.xo.delete(n);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Ru(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),eh(r.remoteStore,s.targetId),rg(r,s.targetId)}).catch(pc))):(rg(r,s.targetId),yield Ru(r.localStore,s.targetId,!0))})).apply(this,arguments)}function o_(){return(o_=(0,ye.Z)(function*(i,n,r){const s=c_(i);try{const l=yield function(d,f){const E=Le(d),C=tr.now(),S=f.reduce((N,V)=>N.add(V.key),Wt());let x;return E.persistence.runTransaction("Locally write mutations","readwrite",N=>E.Qn.Pn(N,S).next(V=>{x=V;const B=[];for(const W of f){const fe=P0(W,x.get(W.key));null!=fe&&B.push(new Ia(W.key,fe,JC(fe.value.mapValue),jn.exists(!0)))}return E.In.addMutationBatch(N,C,B,f)})).then(N=>(N.applyToLocalDocumentSet(x),{batchId:N.batchId,changes:x}))}(s.localStore,n);s.sharedClientState.addPendingMutation(l.batchId),function(d,f,E){let C=d.Lo[d.currentUser.toKey()];C||(C=new zn(Ot)),C=C.insert(f,E),d.Lo[d.currentUser.toKey()]=C}(s,l.batchId,r),yield Oa(s,l.changes),yield th(s.remoteStore)}catch(l){const d=rh(l,"Failed to persist write");r.reject(d)}})).apply(this,arguments)}function Xp(i,n){return ah.apply(this,arguments)}function ah(){return(ah=(0,ye.Z)(function*(i,n){const r=Le(i);try{const s=yield YI(r.localStore,n);n.targetChanges.forEach((l,d)=>{const f=r.Fo.get(d);f&&(gt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1),l.addedDocuments.size>0?f.Co=!0:l.modifiedDocuments.size>0?gt(f.Co):l.removedDocuments.size>0&&(gt(f.Co),f.Co=!1))}),yield Oa(r,s,n)}catch(s){yield pc(s)}})).apply(this,arguments)}function wR(i,n,r){const s=Le(i);if(s.isPrimaryClient&&0===r||!s.isPrimaryClient&&1===r){const l=[];s.xo.forEach((d,f)=>{const E=f.view.eo(n);E.snapshot&&l.push(E.snapshot)}),function(d,f){const E=Le(d);E.onlineState=f;let C=!1;E.queries.forEach((S,x)=>{for(const N of x.listeners)N.eo(f)&&(C=!0)}),C&&OE(E)}(s.eventManager,n),l.length&&s.No.Tr(l),s.onlineState=n,s.isPrimaryClient&&s.sharedClientState.setOnlineState(n)}}function eg(i,n,r){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,ye.Z)(function*(i,n,r){const s=Le(i);s.sharedClientState.updateQueryState(n,"rejected",r);const l=s.Fo.get(n),d=l&&l.key;if(d){let f=new zn(Je.comparator);f=f.insert(d,bn.newNoDocument(d,ut.min()));const E=Wt().add(d),C=new qd(ut.min(),new Map,new Mn(Ot),f,E);yield Xp(s,C),s.Oo=s.Oo.remove(d),s.Fo.delete(n),VE(s)}else yield Ru(s.localStore,n,!1).then(()=>rg(s,n,r)).catch(pc)})).apply(this,arguments)}function Nu(i,n){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,ye.Z)(function*(i,n){const r=Le(i),s=n.batch.batchId;try{const l=yield ZI(r.localStore,n);Ma(r,s,null),ng(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),yield Oa(r,l)}catch(l){yield pc(l)}})).apply(this,arguments)}function tg(i,n,r){return bD.apply(this,arguments)}function bD(){return(bD=(0,ye.Z)(function*(i,n,r){const s=Le(i);try{const l=yield function(d,f){const E=Le(d);return E.persistence.runTransaction("Reject batch","readwrite-primary",C=>{let S;return E.In.lookupMutationBatch(C,f).next(x=>(gt(null!==x),S=x.keys(),E.In.removeMutationBatch(C,x))).next(()=>E.In.performConsistencyCheck(C)).next(()=>E.Qn.Pn(C,S))})}(s.localStore,n);Ma(s,n,r),ng(s,n),s.sharedClientState.updateMutationState(n,"rejected",r),yield Oa(s,l)}catch(l){yield pc(l)}})).apply(this,arguments)}function Di(){return(Di=(0,ye.Z)(function*(i,n){const r=Le(i);yc(r.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(d){const f=Le(d);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",E=>f.In.getHighestUnacknowledgedBatchId(E))}(r.localStore);if(-1===s)return void n.resolve();const l=r.Bo.get(s)||[];l.push(n),r.Bo.set(s,l)}catch(s){const l=rh(s,"Initialization of waitForPendingWrites() operation failed");n.reject(l)}})).apply(this,arguments)}function ng(i,n){(i.Bo.get(n)||[]).forEach(r=>{r.resolve()}),i.Bo.delete(n)}function Ma(i,n,r){const s=Le(i);let l=s.Lo[s.currentUser.toKey()];if(l){const d=l.get(n);d&&(r?d.reject(r):d.resolve(),l=l.remove(n)),s.Lo[s.currentUser.toKey()]=l}}function rg(i,n,r=null){i.sharedClientState.removeLocalQueryTarget(n);for(const s of i.ko.get(n))i.xo.delete(s),r&&i.No.jo(s,r);i.ko.delete(n),i.isPrimaryClient&&i.Mo.cs(n).forEach(s=>{i.Mo.containsKey(s)||LE(i,s)})}function LE(i,n){i.$o.delete(n.path.canonicalString());const r=i.Oo.get(n);null!==r&&(eh(i.remoteStore,r),i.Oo=i.Oo.remove(n),i.Fo.delete(r),VE(i))}function a_(i,n,r){for(const s of r)s instanceof _D?(i.Mo.addReference(s.key,n),MN(i,s)):s instanceof Jp?(Oe("SyncEngine","Document no longer in limbo: "+s.key),i.Mo.removeReference(s.key,n),i.Mo.containsKey(s.key)||LE(i,s.key)):nt()}function MN(i,n){const r=n.key,s=r.path.canonicalString();i.Oo.get(r)||i.$o.has(s)||(Oe("SyncEngine","New document in limbo: "+r),i.$o.add(s),VE(i))}function VE(i){for(;i.$o.size>0&&i.Oo.size<i.maxConcurrentLimboResolutions;){const n=i.$o.values().next().value;i.$o.delete(n);const r=new Je(At.fromString(n)),s=i.Uo.next();i.Fo.set(s,new ED(r)),i.Oo=i.Oo.insert(r,s),Wi(i.remoteStore,new Sa(Gi(Vs(r.path)),s,2,$i.T))}}function Oa(i,n,r){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,ye.Z)(function*(i,n,r){const s=Le(i),l=[],d=[],f=[];var E;s.xo.isEmpty()||(s.xo.forEach((E,C)=>{f.push(s.Ko(C,n,r).then(S=>{if(S){s.isPrimaryClient&&s.sharedClientState.updateQueryState(C.targetId,S.fromCache?"not-current":"current"),l.push(S);const x=rE.kn(C.targetId,S);d.push(x)}}))}),yield Promise.all(f),s.No.Tr(l),yield(E=(0,ye.Z)(function*(C,S){const x=Le(C);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>Se.forEach(S,V=>Se.forEach(V.Nn,B=>x.persistence.referenceDelegate.addReference(N,V.targetId,B)).next(()=>Se.forEach(V.xn,B=>x.persistence.referenceDelegate.removeReference(N,V.targetId,B)))))}catch(N){if(!Cu(N))throw N;Oe("LocalStore","Failed to update sequence numbers: "+N)}for(const N of S){const V=N.targetId;if(!N.fromCache){const B=x.Un.get(V),fe=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);x.Un=x.Un.insert(V,fe)}}}),function(C,S){return E.apply(this,arguments)})(s.localStore,d))})).apply(this,arguments)}function Pn(i,n){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,ye.Z)(function*(i,n){const r=Le(i);if(!r.currentUser.isEqual(n)){Oe("SyncEngine","User change. New user:",n.toKey());const s=yield mc(r.localStore,n);r.currentUser=n,(l=r).Bo.forEach(f=>{f.forEach(E=>{E.reject(new Re(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),l.Bo.clear(),r.sharedClientState.handleUserChange(n,s.removedBatchIds,s.addedBatchIds),yield Oa(r,s.Wn)}var l})).apply(this,arguments)}function CD(i,n){const r=Le(i),s=r.Fo.get(n);if(s&&s.Co)return Wt().add(s.key);{let l=Wt();const d=r.ko.get(n);if(!d)return l;for(const f of d){const E=r.xo.get(f);l=l.unionWith(E.view.To)}return l}}function bR(i,n){return u_.apply(this,arguments)}function u_(){return(u_=(0,ye.Z)(function*(i,n){const r=Le(i),s=yield Gp(r.localStore,n.query,!0),l=n.view.So(s);return r.isPrimaryClient&&a_(r,n.targetId,l.vo),l})).apply(this,arguments)}function UE(i){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,ye.Z)(function*(i){const n=Le(i);return XI(n.localStore).then(r=>Oa(n,r))})).apply(this,arguments)}function ig(i,n,r,s){return BE.apply(this,arguments)}function BE(){return(BE=(0,ye.Z)(function*(i,n,r,s){const l=Le(i),d=yield function(f,E){const C=Le(f),S=Le(C.In);return C.persistence.runTransaction("Lookup mutation documents","readonly",x=>S.Xt(x,E).next(N=>N?C.Qn.Pn(x,N):Se.resolve(null)))}(l.localStore,n);var E;null!==d?("pending"===r?yield th(l.remoteStore):"acknowledged"===r||"rejected"===r?(Ma(l,n,s||null),ng(l,n),E=n,Le(Le(l.localStore).In).te(E)):nt(),yield Oa(l,d)):Oe("SyncEngine","Cannot apply mutation batch with id: "+n)})).apply(this,arguments)}function jE(){return(jE=(0,ye.Z)(function*(i,n){const r=Le(i);if(l_(r),c_(r),!0===n&&!0!==r.qo){const s=r.sharedClientState.getAllActiveQueryTargets(),l=yield $E(r,s.toArray());r.qo=!0,yield AE(r.remoteStore,!0);for(const d of l)Wi(r.remoteStore,d)}else if(!1===n&&!1!==r.qo){const s=[];let l=Promise.resolve();r.ko.forEach((d,f)=>{r.sharedClientState.isLocalQueryTarget(f)?s.push(f):l=l.then(()=>(rg(r,f),Ru(r.localStore,f,!0))),eh(r.remoteStore,f)}),yield l,yield $E(r,s),function(d){const f=Le(d);f.Fo.forEach((E,C)=>{eh(f.remoteStore,C)}),f.Mo.us(),f.Fo=new Map,f.Oo=new zn(Je.comparator)}(r),r.qo=!1,yield AE(r.remoteStore,!1)}})).apply(this,arguments)}function $E(i,n,r){return sg.apply(this,arguments)}function sg(){return(sg=(0,ye.Z)(function*(i,n,r){const s=Le(i),l=[],d=[];for(const f of n){let E;const C=s.ko.get(f);if(C&&0!==C.length){E=yield Yd(s.localStore,Gi(C[0]));for(const S of C){const x=s.xo.get(S),N=yield bR(s,x);N.snapshot&&d.push(N.snapshot)}}else{const S=yield aE(s.localStore,f);E=yield Yd(s.localStore,S),yield i_(s,uh(S),f,!1)}l.push(E)}return s.No.Tr(d),l})).apply(this,arguments)}function uh(i){return eI(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function HE(i){const n=Le(i);return Le(Le(n.localStore).persistence).pn()}function ID(i,n,r,s){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,ye.Z)(function*(i,n,r,s){const l=Le(i);if(l.qo)Oe("SyncEngine","Ignoring unexpected query state notification.");else if(l.ko.has(n))switch(r){case"current":case"not-current":{const d=yield XI(l.localStore),f=qd.createSynthesizedRemoteEventForCurrentChange(n,"current"===r);yield Oa(l,d,f);break}case"rejected":yield Ru(l.localStore,n,!0),rg(l,n,s);break;default:nt()}})).apply(this,arguments)}function CR(i,n,r){return lh.apply(this,arguments)}function lh(){return(lh=(0,ye.Z)(function*(i,n,r){const s=l_(i);if(s.qo){for(const l of n){if(s.ko.has(l)){Oe("SyncEngine","Adding an already active target "+l);continue}const d=yield aE(s.localStore,l),f=yield Yd(s.localStore,d);yield i_(s,uh(d),f.targetId,!1),Wi(s.remoteStore,f)}for(const l of r)s.ko.has(l)&&(yield Ru(s.localStore,l,!1).then(()=>{eh(s.remoteStore,l),rg(s,l)}).catch(pc))}})).apply(this,arguments)}function l_(i){const n=Le(i);return n.remoteStore.remoteSyncer.applyRemoteEvent=Xp.bind(null,n),n.remoteStore.remoteSyncer.getRemoteKeysForTarget=CD.bind(null,n),n.remoteStore.remoteSyncer.rejectListen=eg.bind(null,n),n.No.Tr=pR.bind(null,n.eventManager),n.No.jo=gR.bind(null,n.eventManager),n}function c_(i){const n=Le(i);return n.remoteStore.remoteSyncer.applySuccessfulWrite=Nu.bind(null,n),n.remoteStore.remoteSyncer.rejectFailedWrite=tg.bind(null,n),n}class og{constructor(){this.synchronizeTabs=!1}initialize(n){var r=this;return(0,ye.Z)(function*(){r.N=Jd(n.databaseInfo.databaseId),r.sharedClientState=r.Wo(n),r.persistence=r.Go(n),yield r.persistence.start(),r.gcScheduler=r.zo(n),r.localStore=r.Ho(n)})()}zo(n){return null}Ho(n){return WI(this.persistence,new iE,n.initialUser,this.N)}Go(n){return new tD(fE.Ns,this.N)}Wo(n){return new iD}terminate(){var n=this;return(0,ye.Z)(function*(){n.gcScheduler&&n.gcScheduler.stop(),yield n.sharedClientState.shutdown(),yield n.persistence.shutdown()})()}}class TD extends og{constructor(n,r,s){super(),this.Jo=n,this.cacheSizeBytes=r,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(n){var r=()=>super.initialize,s=this;return(0,ye.Z)(function*(){yield r().call(s,n),yield function(i){return uE.apply(this,arguments)}(s.localStore),yield s.Jo.initialize(s,n),yield c_(s.Jo.syncEngine),yield th(s.Jo.remoteStore),yield s.persistence.nn(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(s.localStore),Promise.resolve()))})()}Ho(n){return WI(this.persistence,new iE,n.initialUser,this.N)}zo(n){return new $I(this.persistence.referenceDelegate.garbageCollector,n.asyncQueue)}Go(n){const r=nE(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?Ii.withCacheSize(this.cacheSizeBytes):Ii.DEFAULT;return new qy(this.synchronizeTabs,r,n.clientId,s,n.asyncQueue,mE(),Zp(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(n){return new iD}}class GE extends TD{constructor(n,r){super(n,r,!1),this.Jo=n,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(n){var r=()=>super.initialize,s=this;return(0,ye.Z)(function*(){yield r().call(s,n);const l=s.Jo.syncEngine;s.sharedClientState instanceof Wp&&(s.sharedClientState.syncEngine={_i:ig.bind(null,l),mi:ID.bind(null,l),gi:CR.bind(null,l),pn:HE.bind(null,l),wi:UE.bind(null,l)},yield s.sharedClientState.start()),yield s.persistence.nn(function(){var d=(0,ye.Z)(function*(f){yield function(i,n){return jE.apply(this,arguments)}(s.Jo.syncEngine,f),s.gcScheduler&&(f&&!s.gcScheduler.started?s.gcScheduler.start(s.localStore):f||s.gcScheduler.stop())});return function(f){return d.apply(this,arguments)}}())})()}Wo(n){const r=mE();if(!Wp.bt(r))throw new Re(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=nE(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new Wp(r,n.asyncQueue,s,n.clientId,n.initialUser)}}class ag{initialize(n,r){var s=this;return(0,ye.Z)(function*(){s.localStore||(s.localStore=n.localStore,s.sharedClientState=n.sharedClientState,s.datastore=s.createDatastore(r),s.remoteStore=s.createRemoteStore(r),s.eventManager=s.createEventManager(r),s.syncEngine=s.createSyncEngine(r,!n.synchronizeTabs),s.sharedClientState.onlineStateHandler=l=>wR(s.syncEngine,l,1),s.remoteStore.remoteSyncer.handleCredentialChange=Pn.bind(null,s.syncEngine),yield AE(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(n){return new fR}createDatastore(n){const r=Jd(n.databaseInfo.databaseId),s=new uR(n.databaseInfo);return new yE(n.credentials,s,r)}createRemoteStore(n){return r=this.localStore,s=this.datastore,l=n.asyncQueue,d=E=>wR(this.syncEngine,E,0),f=Ky.bt()?new Ky:new oR,new lR(r,s,l,d,f);var r,s,l,d,f}createSyncEngine(n,r){return function(s,l,d,f,E,C,S){const x=new wD(s,l,d,f,E,C);return S&&(x.qo=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return(n=(0,ye.Z)(function*(r){const s=Le(r);Oe("RemoteStore","RemoteStore shutting down."),s.Kr.add(5),yield Kp(s),s.Qr.shutdown(),s.Wr.set("Unknown")}),function(r){return n.apply(this,arguments)})(this.remoteStore);var n}}function IR(i,n=10240){let r=0;return{read:()=>(0,ye.Z)(function*(){if(r<i.byteLength){const s={value:i.slice(r,r+n),done:!1};return r+=n,s}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class qE{constructor(n){this.observer=n,this.muted=!1}next(n){this.observer.next&&this.Yo(this.observer.next,n)}error(n){this.observer.error?this.Yo(this.observer.error,n):console.error("Uncaught Error in snapshot listener:",n)}Xo(){this.muted=!0}Yo(n,r){this.muted||setTimeout(()=>{this.muted||n(r)},0)}}class mt{constructor(n,r){this.Zo=n,this.N=r,this.metadata=new Rr,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(s=>{s&&s.ho()?this.metadata.resolve(s.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.payload)}`))},s=>this.metadata.reject(s))}close(){return this.Zo.cancel()}getMetadata(){var n=this;return(0,ye.Z)(function*(){return n.metadata.promise})()}Qo(){var n=this;return(0,ye.Z)(function*(){return yield n.getMetadata(),n.ea()})()}ea(){var n=this;return(0,ye.Z)(function*(){const r=yield n.na();if(null===r)return null;const s=n.ta.decode(r),l=Number(s);isNaN(l)&&n.sa(`length string (${s}) is not valid number`);const d=yield n.ia(l);return new Ec(JSON.parse(d),r.length+l)})()}ra(){return this.buffer.findIndex(n=>n==="{".charCodeAt(0))}na(){var n=this;return(0,ye.Z)(function*(){for(;n.ra()<0&&!(yield n.oa()););if(0===n.buffer.length)return null;const r=n.ra();r<0&&n.sa("Reached the end of bundle when a length string is expected.");const s=n.buffer.slice(0,r);return n.buffer=n.buffer.slice(r),s})()}ia(n){var r=this;return(0,ye.Z)(function*(){for(;r.buffer.length<n;)(yield r.oa())&&r.sa("Reached the end of bundle when more is expected.");const s=r.ta.decode(r.buffer.slice(0,n));return r.buffer=r.buffer.slice(n),s})()}sa(n){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${n}`)}oa(){var n=this;return(0,ye.Z)(function*(){const r=yield n.Zo.read();if(!r.done){const s=new Uint8Array(n.buffer.length+r.value.length);s.set(n.buffer),s.set(r.value,n.buffer.length),n.buffer=s}return r.done})()}}class ON{constructor(n){this.datastore=n,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(n){var r=this;return(0,ye.Z)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw new Re(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(l=(0,ye.Z)(function*(d,f){const E=Le(d),C=Fp(E.N)+"/documents",S={documents:f.map(B=>ai(E.N,B))},x=yield E.Ki("BatchGetDocuments",C,S),N=new Map;x.forEach(B=>{const W=function(i,n){return"found"in n?function(r,s){gt(!!s.found);const l=js(r,s.found.name),d=dr(s.found.updateTime),f=new oi({mapValue:{fields:s.found.fields}});return bn.newFoundDocument(l,d,f)}(i,n):"missing"in n?function(r,s){gt(!!s.missing),gt(!!s.readTime);const l=js(r,s.missing),d=dr(s.readTime);return bn.newNoDocument(l,d)}(i,n):nt()}(E.N,B);N.set(W.key.toString(),W)});const V=[];return f.forEach(B=>{const W=N.get(B.toString());gt(!!W),V.push(W)}),V}),function(d,f){return l.apply(this,arguments)})(r.datastore,n);var l;return s.forEach(l=>r.recordVersion(l)),s})()}set(n,r){this.write(r.toMutation(n,this.precondition(n))),this.writtenDocs.add(n.toString())}update(n,r){try{this.write(r.toMutation(n,this.preconditionForUpdate(n)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(n.toString())}delete(n){this.write(new Mp(n,this.precondition(n))),this.writtenDocs.add(n.toString())}commit(){var n=this;return(0,ye.Z)(function*(){if(n.ensureCommitNotCalled(),n.lastWriteError)throw n.lastWriteError;const r=n.readVersions;var s;n.mutations.forEach(s=>{r.delete(s.key.toString())}),r.forEach((s,l)=>{const d=Je.fromPath(l);n.mutations.push(new V0(d,n.precondition(d)))}),yield(s=(0,ye.Z)(function*(l,d){const f=Le(l),E=Fp(f.N)+"/documents",C={writes:d.map(S=>Vp(f.N,S))};yield f.Li("Commit",E,C)}),function(l,d){return s.apply(this,arguments)})(n.datastore,n.mutations),n.committed=!0})()}recordVersion(n){let r;if(n.isFoundDocument())r=n.version;else{if(!n.isNoDocument())throw nt();r=ut.min()}const s=this.readVersions.get(n.key.toString());if(s){if(!r.isEqual(s))throw new Re(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(n.key.toString(),r)}precondition(n){const r=this.readVersions.get(n.toString());return!this.writtenDocs.has(n.toString())&&r?jn.updateTime(r):jn.none()}preconditionForUpdate(n){const r=this.readVersions.get(n.toString());if(!this.writtenDocs.has(n.toString())&&r){if(r.isEqual(ut.min()))throw new Re(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jn.updateTime(r)}return jn.exists(!0)}write(n){this.ensureCommitNotCalled(),this.mutations.push(n)}ensureCommitNotCalled(){}}class ug{constructor(n,r,s,l){this.asyncQueue=n,this.datastore=r,this.updateFunction=s,this.deferred=l,this.aa=5,this.rr=new oD(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var n=this;this.rr.Xi((0,ye.Z)(function*(){const r=new ON(n.datastore),s=n.ua(r);s&&s.then(l=>{n.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{n.deferred.resolve(l)}).catch(d=>{n.ha(d)}))}).catch(l=>{n.ha(l)})}))}ua(n){try{const r=this.updateFunction(n);return!cs(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}ha(n){this.aa>0&&this.la(n)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(n)}la(n){if("FirebaseError"===n.name){const r=n.code;return"aborted"===r||"failed-precondition"===r||!U0(r)}return!1}}class DR{constructor(n,r,s){var l=this;this.credentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=$r.UNAUTHENTICATED,this.clientId=KC.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(r,function(){var d=(0,ye.Z)(function*(f){Oe("FirestoreClient","Received user=",f.uid),yield l.credentialListener(f),l.user=f});return function(f){return d.apply(this,arguments)}}())}getConfiguration(){var n=this;return(0,ye.Z)(function*(){return{asyncQueue:n.asyncQueue,databaseInfo:n.databaseInfo,clientId:n.clientId,credentials:n.credentials,initialUser:n.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(n){this.credentialListener=n}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var n=this;this.asyncQueue.enterRestrictedMode();const r=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{n.onlineComponents&&(yield n.onlineComponents.terminate()),n.offlineComponents&&(yield n.offlineComponents.terminate()),n.credentials.shutdown(),r.resolve()}catch(s){const l=rh(s,"Failed to shutdown persistence");r.reject(l)}})),r.promise}}function SD(i,n){return zE.apply(this,arguments)}function zE(){return(zE=(0,ye.Z)(function*(i,n){i.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const r=yield i.getConfiguration();yield n.initialize(r);let s=r.initialUser;i.setCredentialChangeListener(function(){var l=(0,ye.Z)(function*(d){s.isEqual(d)||(yield mc(n.localStore,d),s=d)});return function(d){return l.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=n})).apply(this,arguments)}function TR(i,n){return AD.apply(this,arguments)}function AD(){return(AD=(0,ye.Z)(function*(i,n){i.asyncQueue.verifyOperationInProgress();const r=yield WE(i);Oe("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield n.initialize(r,s),i.setCredentialChangeListener(l=>{return(d=(0,ye.Z)(function*(f,E){const C=Le(f);C.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const S=yc(C);C.Kr.add(3),yield Kp(C),S&&C.Wr.set("Unknown"),yield C.remoteSyncer.handleCredentialChange(E),C.Kr.delete(3),yield No(C)}),function(f,E){return d.apply(this,arguments)})(n.remoteStore,l);var d}),i.onlineComponents=n})).apply(this,arguments)}function WE(i){return fr.apply(this,arguments)}function fr(){return(fr=(0,ye.Z)(function*(i){return i.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield SD(i,new og)),i.offlineComponents})).apply(this,arguments)}function d_(i){return ZE.apply(this,arguments)}function ZE(){return(ZE=(0,ye.Z)(function*(i){return i.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield TR(i,new ag)),i.onlineComponents})).apply(this,arguments)}function h_(i){return WE(i).then(n=>n.persistence)}function KE(i){return WE(i).then(n=>n.localStore)}function RD(i){return d_(i).then(n=>n.remoteStore)}function YE(i){return d_(i).then(n=>n.syncEngine)}function ch(i){return QE.apply(this,arguments)}function QE(){return(QE=(0,ye.Z)(function*(i){const n=yield d_(i),r=n.eventManager;return r.onListen=kE.bind(null,n.syncEngine),r.onUnlisten=vR.bind(null,n.syncEngine),r})).apply(this,arguments)}function xD(i,n,r={}){const s=new Rr;return i.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(l,d,f,E,C){const S=new qE({next:N=>{d.enqueueAndForget(()=>ME(l,x));const V=N.docs.has(f);!V&&N.fromCache?C.reject(new Re(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&N.fromCache&&E&&"server"===E.source?C.reject(new Re(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):C.resolve(N)},error:N=>C.reject(N)}),x=new oh(Vs(f.path),S,{includeMetadataChanges:!0,uo:!0});return NE(l,x)}(yield ch(i),i.asyncQueue,n,r,s)})),s.promise}function f_(i,n,r={}){const s=new Rr;return i.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(l,d,f,E,C){const S=new qE({next:N=>{d.enqueueAndForget(()=>ME(l,x)),N.fromCache&&"server"===E.source?C.reject(new Re(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):C.resolve(N)},error:N=>C.reject(N)}),x=new oh(f,S,{includeMetadataChanges:!0,uo:!0});return NE(l,x)}(yield ch(i),i.asyncQueue,n,r,s)})),s.promise}class MR{constructor(n,r,s,l,d,f,E,C){this.databaseId=n,this.appId=r,this.persistenceKey=s,this.host=l,this.ssl=d,this.forceLongPolling=f,this.autoDetectLongPolling=E,this.useFetchStreams=C}}class dh{constructor(n,r){this.projectId=n,this.database=r||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(n){return n instanceof dh&&n.projectId===this.projectId&&n.database===this.database}}const MD=new Map;function XE(i,n,r){if(!r)throw new Re(ce.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${n}.`)}function hh(i,n,r,s){if(!0===n&&!0===s)throw new Re(ce.INVALID_ARGUMENT,`${i} and ${r} cannot be used together.`)}function OD(i){if(!Je.isDocumentKey(i))throw new Re(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function PD(i){if(Je.isDocumentKey(i))throw new Re(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function lg(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const n=(r=i).constructor?r.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var r;return"function"==typeof i?"a function":nt()}function Mt(i,n){if("_delegate"in i&&(i=i._delegate),!(i instanceof n)){if(n.name===i.constructor.name)throw new Re(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=lg(i);throw new Re(ce.INVALID_ARGUMENT,`Expected type '${n.name}', but it was: ${r}`)}}return i}function OR(i,n){if(n<=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${n}.`)}class ew{constructor(n){var r;if(void 0===n.host){if(void 0!==n.ssl)throw new Re(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=n.host,this.ssl=null===(r=n.ssl)||void 0===r||r;if(this.credentials=n.credentials,this.ignoreUndefinedProperties=!!n.ignoreUndefinedProperties,void 0===n.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==n.cacheSizeBytes&&n.cacheSizeBytes<1048576)throw new Re(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=n.cacheSizeBytes}this.experimentalForceLongPolling=!!n.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!n.experimentalAutoDetectLongPolling,this.useFetchStreams=!!n.useFetchStreams,hh("experimentalForceLongPolling",n.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",n.experimentalAutoDetectLongPolling)}isEqual(n){return this.host===n.host&&this.ssl===n.ssl&&this.credentials===n.credentials&&this.cacheSizeBytes===n.cacheSizeBytes&&this.experimentalForceLongPolling===n.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===n.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===n.ignoreUndefinedProperties&&this.useFetchStreams===n.useFetchStreams}}class cg{constructor(n,r){this._credentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ew({}),this._settingsFrozen=!1,n instanceof dh?this._databaseId=n:(this._app=n,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Re(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dh(s.options.projectId)}(n))}get app(){if(!this._app)throw new Re(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(n){if(this._settingsFrozen)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ew(n),void 0!==n.credentials&&(this._credentials=function(r){if(!r)return new f0;switch(r.type){case"gapi":const s=r.client;return gt(!("object"!=typeof s||null===s||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new TA(s,r.sessionIndex||"0",r.iamToken||null);case"provider":return r.client;default:throw new Re(ce.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(n.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=MD.get(n);r&&(Oe("ComponentProvider","Removing Datastore"),MD.delete(n),r.terminate())}(this),Promise.resolve()}}class In{constructor(n,r,s){this.converter=r,this._key=s,this.type="document",this.firestore=n}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mo(this.firestore,this.converter,this._key.path.popLast())}withConverter(n){return new In(this.firestore,n,this._key)}}class zr{constructor(n,r,s){this.converter=r,this._query=s,this.type="query",this.firestore=n}withConverter(n){return new zr(this.firestore,n,this._query)}}class Mo extends zr{constructor(n,r,s){super(n,r,Vs(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const n=this._path.popLast();return n.isEmpty()?null:new In(this.firestore,null,new Je(n))}withConverter(n){return new Mo(this.firestore,n,this._path)}}function tw(i,n,...r){if(i=(0,bt.m9)(i),XE("collection","path",n),i instanceof cg){const s=At.fromString(n,...r);return PD(s),new Mo(i,null,s)}{if(!(i instanceof In||i instanceof Mo))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(At.fromString(n,...r));return PD(s),new Mo(i.firestore,null,s)}}function p_(i,n,...r){if(i=(0,bt.m9)(i),1===arguments.length&&(n=KC.I()),XE("doc","path",n),i instanceof cg){const s=At.fromString(n,...r);return OD(s),new In(i,null,new Je(s))}{if(!(i instanceof In||i instanceof Mo))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(At.fromString(n,...r));return OD(s),new In(i.firestore,i instanceof Mo?i.converter:null,new Je(s))}}function FR(i,n){return i=(0,bt.m9)(i),n=(0,bt.m9)(n),(i instanceof In||i instanceof Mo)&&(n instanceof In||n instanceof Mo)&&i.firestore===n.firestore&&i.path===n.path&&i.converter===n.converter}function LR(i,n){return i=(0,bt.m9)(i),n=(0,bt.m9)(n),i instanceof zr&&n instanceof zr&&i.firestore===n.firestore&&Ap(i._query,n._query)&&i.converter===n.converter}class kN{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new oD(this,"async_queue_retry"),this.Ea=()=>{const r=Zp();r&&Oe("AsyncQueue","Visibility state changed to "+r.visibilityState),this.rr.tr()};const n=Zp();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(n){this.enqueue(n)}enqueueAndForgetEvenWhileRestricted(n){this.Ta(),this.Ia(n)}enterRestrictedMode(n){if(!this.wa){this.wa=!0,this.ya=n||!1;const r=Zp();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Ea)}}enqueue(n){if(this.Ta(),this.wa)return new Promise(()=>{});const r=new Rr;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(n().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(n){this.enqueueAndForget(()=>(this.da.push(n),this.Aa()))}Aa(){var n=this;return(0,ye.Z)(function*(){if(0!==n.da.length){try{yield n.da[0](),n.da.shift(),n.rr.reset()}catch(r){if(!Cu(r))throw r;Oe("AsyncQueue","Operation failed with retryable error: "+r)}n.da.length>0&&n.rr.Xi(()=>n.Aa())}})()}Ia(n){const r=this.fa.then(()=>(this.ga=!0,n().catch(s=>{throw this.ma=s,this.ga=!1,er("INTERNAL UNHANDLED ERROR: ",function(l){let d=l.message||"";return l.stack&&(d=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),d}(s)),s}).then(s=>(this.ga=!1,s))));return this.fa=r,r}enqueueAfterDelay(n,r,s){this.Ta(),this.pa.indexOf(n)>-1&&(r=0);const l=xE.createAndSchedule(this,n,r,s,d=>this.Ra(d));return this._a.push(l),l}Ta(){this.ma&&nt()}verifyOperationInProgress(){}ba(){var n=this;return(0,ye.Z)(function*(){let r;do{r=n.fa,yield r}while(r!==n.fa)})()}Pa(n){for(const r of this._a)if(r.timerId===n)return!0;return!1}va(n){return this.ba().then(()=>{this._a.sort((r,s)=>r.targetTimeMs-s.targetTimeMs);for(const r of this._a)if(r.skipDelay(),"all"!==n&&r.timerId===n)break;return this.ba()})}Va(n){this.pa.push(n)}Ra(n){const r=this._a.indexOf(n);this._a.splice(r,1)}}function dg(i){return function(n,r){if("object"!=typeof n||null===n)return!1;const s=n;for(const l of["next","error","complete"])if(l in s&&"function"==typeof s[l])return!0;return!1}(i)}class VR{constructor(){this._progressObserver={},this._taskCompletionResolver=new Rr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(n,r,s){this._progressObserver={next:n,error:r,complete:s}}catch(n){return this._taskCompletionResolver.promise.catch(n)}then(n,r){return this._taskCompletionResolver.promise.then(n,r)}_completeWith(n){this._updateProgress(n),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(n)}_failWith(n){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(n),this._taskCompletionResolver.reject(n)}_updateProgress(n){this._lastProgress=n,this._progressObserver.next&&this._progressObserver.next(n)}}class Vn extends cg{constructor(n,r){super(n,r),this.type="firestore",this._queue=new kN,this._persistenceKey="name"in n?n.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||nw(this),this._firestoreClient.terminate()}}function rr(i){return i._firestoreClient||nw(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function nw(i){var n;const r=i._freezeSettings(),s=(d=(null===(n=i._app)||void 0===n?void 0:n.options.appId)||"",new MR(i._databaseId,d,i._persistenceKey,(E=r).host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,E.useFetchStreams));var d,E;i._firestoreClient=new DR(i._credentials,i._queue,s)}function bc(i,n,r){const s=new Rr;return i.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield SD(i,r),yield TR(i,n),s.resolve()}catch(l){if(!("FirebaseError"===(d=l).name?d.code===ce.FAILED_PRECONDITION||d.code===ce.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw l;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+l),s.reject(l)}var d})).then(()=>s.promise)}function sw(i){if(i._initialized||i._terminated)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Pa{constructor(...n){for(let r=0;r<n.length;++r)if(0===n[r].length)throw new Re(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(n)}isEqual(n){return this._internalPath.isEqual(n._internalPath)}}class Oo{constructor(n){this._byteString=n}static fromBase64String(n){try{return new Oo(Qt.fromBase64String(n))}catch(r){throw new Re(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(n){return new Oo(Qt.fromUint8Array(n))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(n){return this._byteString.isEqual(n._byteString)}}class ku{constructor(n){this._methodName=n}}class g_{constructor(n,r){if(!isFinite(n)||n<-90||n>90)throw new Re(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+n);if(!isFinite(r)||r<-180||r>180)throw new Re(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=n,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(n){return this._lat===n._lat&&this._long===n._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(n){return Ot(this._lat,n._lat)||Ot(this._long,n._long)}}const BN=/^__.*__$/;class jR{constructor(n,r,s){this.data=n,this.fieldMask=r,this.fieldTransforms=s}toMutation(n,r){return null!==this.fieldMask?new Ia(n,this.data,this.fieldMask,r,this.fieldTransforms):new Np(n,this.data,r,this.fieldTransforms)}}class VD{constructor(n,r,s){this.data=n,this.fieldMask=r,this.fieldTransforms=s}toMutation(n,r){return new Ia(n,this.data,this.fieldMask,r,this.fieldTransforms)}}function Cc(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}class ow{constructor(n,r,s,l,d,f){this.settings=n,this.databaseId=r,this.N=s,this.ignoreUndefinedProperties=l,void 0===d&&this.Sa(),this.fieldTransforms=d||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(n){return new ow(Object.assign(Object.assign({},this.settings),n),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(n){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(n),l=this.Ca({path:s,xa:!1});return l.ka(n),l}$a(n){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(n),l=this.Ca({path:s,xa:!1});return l.Sa(),l}Oa(n){return this.Ca({path:void 0,xa:!0})}Fa(n){return fg(n,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(n){return void 0!==this.fieldMask.find(r=>n.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>n.isPrefixOf(r.field))}Sa(){if(this.path)for(let n=0;n<this.path.length;n++)this.ka(this.path.get(n))}ka(n){if(0===n.length)throw this.Fa("Document fields must not be empty");if(Cc(this.Da)&&BN.test(n))throw this.Fa('Document fields cannot begin and end with "__"')}}class UD{constructor(n,r,s){this.databaseId=n,this.ignoreUndefinedProperties=r,this.N=s||Jd(n)}Ba(n,r,s,l=!1){return new ow({Da:n,methodName:r,La:s,path:$t.emptyPath(),xa:!1,Ma:l},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function Ic(i){const n=i._freezeSettings(),r=Jd(i._databaseId);return new UD(i._databaseId,!!n.ignoreUndefinedProperties,r)}function aw(i,n,r,s,l,d={}){const f=i.Ba(d.merge||d.mergeFields?2:0,n,r,l);cw("Data must be an object, but it was:",f,s);const E=qD(s,f);let C,S;if(d.merge)C=new ls(f.fieldMask),S=f.fieldTransforms;else if(d.mergeFields){const x=[];for(const N of d.mergeFields){const V=Tc(n,N,r);if(!f.contains(V))throw new Re(ce.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);dw(x,V)||x.push(V)}C=new ls(x),S=f.fieldTransforms.filter(N=>C.covers(N.field))}else C=null,S=f.fieldTransforms;return new jR(new oi(E),C,S)}class fh extends ku{_toFieldTransform(n){if(2!==n.Da)throw n.Fa(1===n.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return n.fieldMask.push(n.path),null}isEqual(n){return n instanceof fh}}function BD(i,n,r){return new ow({Da:3,La:n.settings.La,methodName:i._methodName,xa:r},n.databaseId,n.N,n.ignoreUndefinedProperties)}class hg extends ku{_toFieldTransform(n){return new My(n.path,new Ro)}isEqual(n){return n instanceof hg}}class jD extends ku{constructor(n,r){super(n),this.Ua=r}_toFieldTransform(n){const r=BD(this,n,!0),s=this.Ua.map(d=>Dc(d,r)),l=new rc(s);return new My(n.path,l)}isEqual(n){return this===n}}class $D extends ku{constructor(n,r){super(n),this.Ua=r}_toFieldTransform(n){const r=BD(this,n,!0),s=this.Ua.map(d=>Dc(d,r)),l=new Ca(s);return new My(n.path,l)}isEqual(n){return this===n}}class HD extends ku{constructor(n,r){super(n),this.qa=r}_toFieldTransform(n){const r=new wu(n.N,Ry(n.N,this.qa));return new My(n.path,r)}isEqual(n){return this===n}}function uw(i,n,r,s){const l=i.Ba(1,n,r);cw("Data must be an object, but it was:",l,s);const d=[],f=oi.empty();Jl(s,(C,S)=>{const x=m_(n,C,r);S=(0,bt.m9)(S);const N=l.$a(x);if(S instanceof fh)d.push(x);else{const V=Dc(S,N);null!=V&&(d.push(x),f.set(x,V))}});const E=new ls(d);return new VD(f,E,l.fieldTransforms)}function lw(i,n,r,s,l,d){const f=i.Ba(1,n,r),E=[Tc(n,s,r)],C=[l];if(d.length%2!=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${n}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<d.length;V+=2)E.push(Tc(n,d[V])),C.push(d[V+1]);const S=[],x=oi.empty();for(let V=E.length-1;V>=0;--V)if(!dw(S,E[V])){const B=E[V];let W=C[V];W=(0,bt.m9)(W);const fe=f.$a(B);if(W instanceof fh)S.push(B);else{const De=Dc(W,fe);null!=De&&(S.push(B),x.set(B,De))}}const N=new ls(S);return new VD(x,N,f.fieldTransforms)}function GD(i,n,r,s=!1){return Dc(r,i.Ba(s?4:3,n))}function Dc(i,n){if(zD(i=(0,bt.m9)(i)))return cw("Unsupported field value:",n,i),qD(i,n);if(i instanceof ku)return function(r,s){if(!Cc(s.Da))throw s.Fa(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Fa(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(s);l&&s.fieldTransforms.push(l)}(i,n),null;if(void 0===i&&n.ignoreUndefinedProperties)return null;if(n.path&&n.fieldMask.push(n.path),i instanceof Array){if(n.settings.xa&&4!==n.Da)throw n.Fa("Nested arrays are not supported");return function(r,s){const l=[];let d=0;for(const f of r){let E=Dc(f,s.Oa(d));null==E&&(E={nullValue:"NULL_VALUE"}),l.push(E),d++}return{arrayValue:{values:l}}}(i,n)}return function(r,s){if(null===(r=(0,bt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return Ry(s.N,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const l=tr.fromDate(r);return{timestampValue:sc(s.N,l)}}if(r instanceof tr){const l=new tr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sc(s.N,l)}}if(r instanceof g_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Oo)return{bytesValue:Bs(s.N,r._byteString)};if(r instanceof In){const l=s.databaseId,d=r.firestore._databaseId;if(!d.isEqual(l))throw s.Fa(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:ds(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Fa(`Unsupported field value: ${lg(r)}`)}(i,n)}function qD(i,n){const r={};return YC(i)?n.path&&n.path.length>0&&n.fieldMask.push(n.path):Jl(i,(s,l)=>{const d=Dc(l,n.Na(s));null!=d&&(r[s]=d)}),{mapValue:{fields:r}}}function zD(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof tr||i instanceof g_||i instanceof Oo||i instanceof In||i instanceof ku)}function cw(i,n,r){if(!zD(r)||"object"!=typeof(s=r)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=lg(r);throw n.Fa("an object"===s?i+" a custom object":i+" "+s)}var s}function Tc(i,n,r){if((n=(0,bt.m9)(n))instanceof Pa)return n._internalPath;if("string"==typeof n)return m_(i,n);throw fg("Field path arguments must be of type string or FieldPath.",i,!1,void 0,r)}const WD=new RegExp("[~\\*/\\[\\]]");function m_(i,n,r){if(n.search(WD)>=0)throw fg(`Invalid field path (${n}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,r);try{return new Pa(...n.split("."))._internalPath}catch(s){throw fg(`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,r)}}function fg(i,n,r,s,l){const d=s&&!s.isEmpty(),f=void 0!==l;let E=`Function ${n}() called with invalid data`;r&&(E+=" (via `toFirestore()`)"),E+=". ";let C="";return(d||f)&&(C+=" (found",d&&(C+=` in field ${s}`),f&&(C+=` in document ${l}`),C+=")"),new Re(ce.INVALID_ARGUMENT,E+i+C)}function dw(i,n){return i.some(r=>r.isEqual(n))}class ph{constructor(n,r,s,l,d){this._firestore=n,this._userDataWriter=r,this._key=s,this._document=l,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new In(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const n=new $R(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(n)}return this._userDataWriter.convertValue(this._document.data.value)}}get(n){if(this._document){const r=this._document.data.field(y_("DocumentSnapshot.get",n));if(null!==r)return this._userDataWriter.convertValue(r)}}}class $R extends ph{data(){return super.data()}}function y_(i,n){return"string"==typeof n?m_(i,n):n instanceof Pa?n._internalPath:n._delegate._internalPath}class Sc{constructor(n,r){this.hasPendingWrites=n,this.fromCache=r}isEqual(n){return this.hasPendingWrites===n.hasPendingWrites&&this.fromCache===n.fromCache}}class ka extends ph{constructor(n,r,s,l,d,f){super(n,r,s,l,f),this._firestore=n,this._firestoreImpl=n,this.metadata=d}exists(){return super.exists()}data(n={}){if(this._document){if(this._converter){const r=new pg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}}get(n,r={}){if(this._document){const s=this._document.data.field(y_("DocumentSnapshot.get",n));if(null!==s)return this._userDataWriter.convertValue(s,r.serverTimestamps)}}}class pg extends ka{data(n={}){return super.data(n)}}class Fu{constructor(n,r,s,l){this._firestore=n,this._userDataWriter=r,this._snapshot=l,this.metadata=new Sc(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const n=[];return this.forEach(r=>n.push(r)),n}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(n,r){this._snapshot.docs.forEach(s=>{n.call(r,new pg(this._firestore,this._userDataWriter,s.key,s,new Sc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(n={}){const r=!!n.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Re(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,l){if(s._snapshot.oldDocs.isEmpty()){let d=0;return s._snapshot.docChanges.map(f=>({type:"added",doc:new pg(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Sc(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:d++}))}{let d=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(f=>l||3!==f.type).map(f=>{const E=new pg(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Sc(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let C=-1,S=-1;return 0!==f.type&&(C=d.indexOf(f.doc.key),d=d.delete(f.doc.key)),1!==f.type&&(d=d.add(f.doc),S=d.indexOf(f.doc.key)),{type:HR(f.type),doc:E,oldIndex:C,newIndex:S}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function HR(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}function gh(i,n){return i instanceof ka&&n instanceof ka?i._firestore===n._firestore&&i._key.isEqual(n._key)&&(null===i._document?null===n._document:i._document.isEqual(n._document))&&i._converter===n._converter:i instanceof Fu&&n instanceof Fu&&i._firestore===n._firestore&&LR(i.query,n.query)&&i.metadata.isEqual(n.metadata)&&i._snapshot.isEqual(n._snapshot)}function mh(i){if(Sp(i)&&0===i.explicitOrderBy.length)throw new Re(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gg{}function Po(i,...n){for(const r of n)i=r._apply(i);return i}class ko extends gg{constructor(n,r,s){super(),this.Ka=n,this.ja=r,this.Qa=s,this.type="where"}_apply(n){const r=Ic(n.firestore),s=function(l,d,f,E,C,S,x){let N;if(C.isKeyField()){if("array-contains"===S||"array-contains-any"===S)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on FieldPath.documentId().`);if("in"===S||"not-in"===S){pw(x,S);const B=[];for(const W of x)B.push(QD(E,l,W));N={arrayValue:{values:B}}}else N=QD(E,l,x)}else"in"!==S&&"not-in"!==S&&"array-contains-any"!==S||pw(x,S),N=GD(f,"where",x,"in"===S||"not-in"===S);const V=Hr.create(C,S,N);return function(B,W){if(W.v()){const De=Ay(B);if(null!==De&&!De.isEqual(W.field))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${De.toString()}' and '${W.field.toString()}'`);const $e=D0(B);null!==$e&&w_(0,W.field,$e)}const fe=function(De,$e){for(const We of De.filters)if($e.indexOf(We.op)>=0)return We.op;return null}(B,function(De){switch(De){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(W.op));if(null!==fe)throw new Re(ce.INVALID_ARGUMENT,fe===W.op?`Invalid query. You cannot use more than one '${W.op.toString()}' filter.`:`Invalid query. You cannot use '${W.op.toString()}' filters with '${fe.toString()}' filters.`)}(l,V),V}(n._query,0,r,n.firestore._databaseId,this.Ka,this.ja,this.Qa);return new zr(n.firestore,n.converter,function(l,d){const f=l.filters.concat([d]);return new Eu(l.path,l.collectionGroup,l.explicitOrderBy.slice(),f,l.limit,l.limitType,l.startAt,l.endAt)}(n._query,s))}}class __ extends gg{constructor(n,r){super(),this.Ka=n,this.Wa=r,this.type="orderBy"}_apply(n){const r=function(s,l,d){if(null!==s.startAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const f=new Tp(l,d);return function(E,C){if(null===D0(E)){const S=Ay(E);null!==S&&w_(0,S,C.field)}}(s,f),f}(n._query,this.Ka,this.Wa);return new zr(n.firestore,n.converter,function(s,l){const d=s.explicitOrderBy.concat([l]);return new Eu(s.path,s.collectionGroup,d,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(n._query,r))}}class ZD extends gg{constructor(n,r,s){super(),this.type=n,this.Ga=r,this.za=s}_apply(n){return new zr(n.firestore,n.converter,tI(n._query,this.Ga,this.za))}}class v_ extends gg{constructor(n,r,s){super(),this.type=n,this.Ha=r,this.Ja=s}_apply(n){const r=YD(n,this.type,this.Ha,this.Ja);return new zr(n.firestore,n.converter,(l=r,new Eu((s=n._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,l,s.endAt)));var s,l}}class E_ extends gg{constructor(n,r,s){super(),this.type=n,this.Ha=r,this.Ja=s}_apply(n){const r=YD(n,this.type,this.Ha,this.Ja);return new zr(n.firestore,n.converter,(l=r,new Eu((s=n._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,l)));var s,l}}function YD(i,n,r,s){if(r[0]=(0,bt.m9)(r[0]),r[0]instanceof ph)return function(l,d,f,E,C){if(!E)throw new Re(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const S=[];for(const x of Gd(l))if(x.field.isKeyField())S.push(wp(d,E.key));else{const N=E.data.field(x.field);if(_u(N))throw new Re(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const V=x.field.canonicalString();throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}S.push(N)}return new Dp(S,C)}(i._query,i.firestore._databaseId,n,r[0]._document,s);{const l=Ic(i.firestore);return function(d,f,E,C,S,x){const N=d.explicitOrderBy;if(S.length>N.length)throw new Re(ce.INVALID_ARGUMENT,`Too many arguments provided to ${C}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let B=0;B<S.length;B++){const W=S[B];if(N[B].field.isKeyField()){if("string"!=typeof W)throw new Re(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${C}(), but got a ${typeof W}`);if(!Hd(d)&&-1!==W.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${C}() must be a plain document ID, but '${W}' contains a slash.`);const fe=d.path.child(At.fromString(W));if(!Je.isDocumentKey(fe))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${C}() must result in a valid document path, but '${fe}' is not because it contains an odd number of segments.`);const De=new Je(fe);V.push(wp(f,De))}else{const fe=GD(E,C,W);V.push(fe)}}return new Dp(V,x)}(i._query,i.firestore._databaseId,l,n,r,s)}}function QD(i,n,r){if("string"==typeof(r=(0,bt.m9)(r))){if(""===r)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Hd(n)&&-1!==r.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const s=n.path.child(At.fromString(r));if(!Je.isDocumentKey(s))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return wp(i,new Je(s))}if(r instanceof In)return wp(i,r._key);throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${lg(r)}.`)}function pw(i,n){if(!Array.isArray(i)||0===i.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${n.toString()}' filters.`);if(i.length>10)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. '${n.toString()}' filters support a maximum of 10 elements in the value array.`)}function w_(i,n,r){if(!r.isEqual(n))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${n.toString()}' and so you must also use '${n.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}class b_{convertValue(n,r="none"){switch(vu(n)){case 0:return null;case 1:return n.booleanValue;case 2:return wn(n.integerValue||n.doubleValue);case 3:return this.convertTimestamp(n.timestampValue);case 4:return this.convertServerTimestamp(n,r);case 5:return n.stringValue;case 6:return this.convertBytes(Fs(n.bytesValue));case 7:return this.convertReference(n.referenceValue);case 8:return this.convertGeoPoint(n.geoPointValue);case 9:return this.convertArray(n.arrayValue,r);case 10:return this.convertObject(n.mapValue,r);default:throw nt()}}convertObject(n,r){const s={};return Jl(n.fields,(l,d)=>{s[l]=this.convertValue(d,r)}),s}convertGeoPoint(n){return new g_(wn(n.latitude),wn(n.longitude))}convertArray(n,r){return(n.values||[]).map(s=>this.convertValue(s,r))}convertServerTimestamp(n,r){switch(r){case"previous":const s=ec(n);return null==s?null:this.convertValue(s,r);case"estimate":return this.convertTimestamp(Ao(n));default:return null}}convertTimestamp(n){const r=Hi(n);return new tr(r.seconds,r.nanos)}convertDocumentKey(n,r){const s=At.fromString(n);gt(W0(s));const l=new dh(s.get(1),s.get(3)),d=new Je(s.popFirst(5));return l.isEqual(r)||er(`Document ${d} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),d}}function mg(i,n,r){let s;return s=i?r&&(r.merge||r.mergeFields)?i.toFirestore(n,r):i.toFirestore(n):n,s}class JD extends b_{constructor(n){super(),this.firestore=n}convertBytes(n){return new Oo(n)}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return new In(this.firestore,null,r)}}class gw{constructor(n,r){this._firestore=n,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Ic(n)}set(n,r,s){this._verifyNotCommitted();const l=Lu(n,this._firestore),d=mg(l.converter,r,s),f=aw(this._dataReader,"WriteBatch.set",l._key,d,null!==l.converter,s);return this._mutations.push(f.toMutation(l._key,jn.none())),this}update(n,r,s,...l){this._verifyNotCommitted();const d=Lu(n,this._firestore);let f;return f="string"==typeof(r=(0,bt.m9)(r))||r instanceof Pa?lw(this._dataReader,"WriteBatch.update",d._key,r,s,l):uw(this._dataReader,"WriteBatch.update",d._key,r),this._mutations.push(f.toMutation(d._key,jn.exists(!0))),this}delete(n){this._verifyNotCommitted();const r=Lu(n,this._firestore);return this._mutations=this._mutations.concat(new Mp(r._key,jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Lu(i,n){if((i=(0,bt.m9)(i)).firestore!==n)throw new Re(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Vu extends b_{constructor(n){super(),this.firestore=n}convertBytes(n){return new Oo(n)}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return new In(this.firestore,null,r)}}function Ac(i,n,r){i=Mt(i,In);const s=Mt(i.firestore,Vn),l=mg(i.converter,n,r);return Uu(s,[aw(Ic(s),"setDoc",i._key,l,null!==i.converter,r).toMutation(i._key,jn.none())])}function nT(i,n,r,...s){i=Mt(i,In);const l=Mt(i.firestore,Vn),d=Ic(l);let f;return f="string"==typeof(n=(0,bt.m9)(n))||n instanceof Pa?lw(d,"updateDoc",i._key,n,r,s):uw(d,"updateDoc",i._key,n),Uu(l,[f.toMutation(i._key,jn.exists(!0))])}function yh(i,...n){var r,s,l;i=(0,bt.m9)(i);let d={includeMetadataChanges:!1},f=0;"object"!=typeof n[f]||dg(n[f])||(d=n[f],f++);const E={includeMetadataChanges:d.includeMetadataChanges};if(dg(n[f])){const N=n[f];n[f]=null===(r=N.next)||void 0===r?void 0:r.bind(N),n[f+1]=null===(s=N.error)||void 0===s?void 0:s.bind(N),n[f+2]=null===(l=N.complete)||void 0===l?void 0:l.bind(N)}let C,S,x;if(i instanceof In)S=Mt(i.firestore,Vn),x=Vs(i._key.path),C={next:N=>{n[f]&&n[f](mw(S,i,N))},error:n[f+1],complete:n[f+2]};else{const N=Mt(i,zr);S=Mt(N.firestore,Vn),x=N._query;const V=new Vu(S);C={next:B=>{n[f]&&n[f](new Fu(S,V,N,B))},error:n[f+1],complete:n[f+2]},mh(i._query)}return function(N,V,B,W){const fe=new qE(W),De=new oh(V,fe,B);return N.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return NE(yield ch(N),De)})),()=>{fe.Xo(),N.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return ME(yield ch(N),De)}))}}(rr(S),x,E,C)}function Uu(i,n){return function(r,s){const l=new Rr;return r.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,n,r){return o_.apply(this,arguments)}(yield YE(r),s,l)})),l.promise}(rr(i),n)}function mw(i,n,r){const s=r.docs.get(n._key),l=new Vu(i);return new ka(i,l,n._key,s,new Sc(r.hasPendingWrites,r.fromCache),n.converter)}class rT extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Ic(n)}get(n){const r=Lu(n,this._firestore),s=new JD(this._firestore);return this._transaction.lookup([r._key]).then(l=>{if(!l||1!==l.length)return nt();const d=l[0];if(d.isFoundDocument())return new ph(this._firestore,s,d.key,d,r.converter);if(d.isNoDocument())return new ph(this._firestore,s,r._key,null,r.converter);throw nt()})}set(n,r,s){const l=Lu(n,this._firestore),d=mg(l.converter,r,s),f=aw(this._dataReader,"Transaction.set",l._key,d,null!==l.converter,s);return this._transaction.set(l._key,f),this}update(n,r,s,...l){const d=Lu(n,this._firestore);let f;return f="string"==typeof(r=(0,bt.m9)(r))||r instanceof Pa?lw(this._dataReader,"Transaction.update",d._key,r,s,l):uw(this._dataReader,"Transaction.update",d._key,r),this._transaction.update(d._key,f),this}delete(n){const r=Lu(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(n,r){super(n,r),this._firestore=n}get(n){const r=Lu(n,this._firestore),s=new Vu(this._firestore);return super.get(n).then(l=>new ka(this._firestore,s,r._key,l._document,new Sc(!1,!1),r.converter))}}function I_(i,n){if(void 0===n)return{merge:!1};if(void 0!==n.mergeFields&&void 0!==n.merge)throw new Re("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return n}function yg(){if("undefined"==typeof Uint8Array)throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function _w(){if("undefined"==typeof atob)throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(i){vp=i})(jf.SDK_VERSION),(0,jf._registerComponent)(new fa.wA("firestore",(i,{options:n})=>{const r=i.getProvider("app").getImmediate(),s=new Vn(r,new p0(i.getProvider("auth-internal")));return n=Object.assign({useFetchStreams:!0},n),s._setSettings(n),s},"PUBLIC")),(0,jf.registerVersion)("@firebase/firestore","3.1.0",void 0);class _g{constructor(n){this._delegate=n}static fromBase64String(n){return _w(),new _g(Oo.fromBase64String(n))}static fromUint8Array(n){return yg(),new _g(Oo.fromUint8Array(n))}toBase64(){return _w(),this._delegate.toBase64()}toUint8Array(){return yg(),this._delegate.toUint8Array()}isEqual(n){return this._delegate.isEqual(n._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function vg(i){return function(i,n){if("object"!=typeof i||null===i)return!1;const r=i;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(i)}class e1{enableIndexedDbPersistence(n,r){return function(i,n){sw(i=Mt(i,Vn));const r=rr(i),s=i._freezeSettings(),l=new ag;return bc(r,l,new TD(l,s.cacheSizeBytes,null==n?void 0:n.forceOwnership))}(n._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(n){return function(i){sw(i=Mt(i,Vn));const n=rr(i),r=i._freezeSettings(),s=new ag;return bc(n,s,new GE(s,r.cacheSizeBytes))}(n._delegate)}clearIndexedDbPersistence(n){return function(i){if(i._initialized&&!i._terminated)throw new Re(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const n=new Rr;return i._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(r=(0,ye.Z)(function*(s){if(!fs.bt())return Promise.resolve();const l=s+"main";yield fs.delete(l)}),function(s){return r.apply(this,arguments)})(nE(i._databaseId,i._persistenceKey)),n.resolve()}catch(r){n.reject(r)}var r})),n.promise}(n._delegate)}}class uT{constructor(n,r,s){this._delegate=r,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},n instanceof dh||(this._appCompat=n)}get _databaseId(){return this._delegate._databaseId}settings(n){const r=this._delegate._getSettings();!n.merge&&r.host!==n.host&&si("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),n.merge&&delete(n=Object.assign(Object.assign({},r),n)).merge,this._delegate._setSettings(n)}useEmulator(n,r,s={}){!function(i,n,r,s={}){var l;const d=(i=Mt(i,cg))._getSettings();if("firestore.googleapis.com"!==d.host&&d.host!==n&&si("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},d),{host:`${n}:${r}`,ssl:!1})),s.mockUserToken){let f,E;if("string"==typeof s.mockUserToken)f=s.mockUserToken,E=$r.MOCK_USER;else{f=(0,bt.Sg)(s.mockUserToken,null===(l=i._app)||void 0===l?void 0:l.options.projectId);const C=s.mockUserToken.sub||s.mockUserToken.user_id;if(!C)throw new Re(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new $r(C)}i._credentials=new IA(new h0(f,E))}}(this._delegate,n,r,s)}enableNetwork(){return function(i){return function(i){return i.asyncQueue.enqueue((0,ye.Z)(function*(){const n=yield h_(i),r=yield RD(i);return n.setNetworkEnabled(!0),function(s){const l=Le(s);return l.Kr.delete(0),No(l)}(r)}))}(rr(i=Mt(i,Vn)))}(this._delegate)}disableNetwork(){return function(i){return function(i){return i.asyncQueue.enqueue((0,ye.Z)(function*(){const n=yield h_(i),r=yield RD(i);return n.setNetworkEnabled(!1),(s=(0,ye.Z)(function*(l){const d=Le(l);d.Kr.add(0),yield Kp(d),d.Wr.set("Offline")}),function(l){return s.apply(this,arguments)})(r);var s}))}(rr(i=Mt(i,Vn)))}(this._delegate)}enablePersistence(n){let r=!1,s=!1;return n&&(r=!!n.synchronizeTabs,s=!!n.experimentalForceOwningTab,hh("synchronizeTabs",r,"experimentalForceOwningTab",s)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(i){return function(n){const r=new Rr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,n){return Di.apply(this,arguments)}(yield YE(n),r)})),r.promise}(rr(i=Mt(i,Vn)))}(this._delegate)}onSnapshotsInSync(n){return function(i,n){return function(i,n){const r=new qE(n);return i.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return s=yield ch(i),l=r,Le(s).Zr.add(l),void l.next();var s,l})),()=>{r.Xo(),i.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return s=yield ch(i),l=r,void Le(s).Zr.delete(l);var s,l}))}}(rr(i=Mt(i,Vn)),dg(n)?n:{next:n})}(this._delegate,n)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(n){try{return new vh(this,tw(this._delegate,n))}catch(r){throw li(r,"collection()","Firestore.collection()")}}doc(n){try{return new Ki(this,p_(this._delegate,n))}catch(r){throw li(r,"doc()","Firestore.doc()")}}collectionGroup(n){try{return new Zr(this,function(i,n){if(i=Mt(i,cg),XE("collectionGroup","collection id",n),n.indexOf("/")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid collection ID '${n}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new zr(i,null,(r=n,new Eu(At.emptyPath(),r)));var r}(this._delegate,n))}catch(r){throw li(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(n){return function(i,n){return function(i,n){const r=new Rr;return i.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const s=yield(l=i,d_(l).then(d=>d.datastore));var l;new ug(i.asyncQueue,s,n,r).run()})),r.promise}(rr(i),r=>n(new rT(i,r)))}(this._delegate,r=>n(new Ew(this,r)))}batch(){return rr(this._delegate),new cT(new gw(this._delegate,n=>Uu(this._delegate,n)))}loadBundle(n){return function(i,n){const r=rr(i=Mt(i,Vn)),s=new VR;return function(i,n,r,s){const l=function(d,f){let E;return E="string"==typeof d?(new TextEncoder).encode(d):d,C=function(C,S){if(C instanceof Uint8Array)return IR(C,S);if(C instanceof ArrayBuffer)return IR(new Uint8Array(C),S);if(C instanceof ReadableStream)return C.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(E),new mt(C,f);var C}(r,Jd(n));i.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function(i,n,r){const s=Le(i);var l;(l=(0,ye.Z)(function*(d,f,E){try{const C=yield f.getMetadata();if(yield function(V,B){const W=Le(V),fe=dr(B.createTime);return W.persistence.runTransaction("hasNewerBundle","readonly",De=>W.Je.getBundleMetadata(De,B.id)).then(De=>!!De&&De.createTime.compareTo(fe)>=0)}(d.localStore,C))return yield f.close(),void E._completeWith((V=C,{taskState:"Success",documentsLoaded:V.totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}));E._updateProgress(yR(C));const S=new mR(C,d.localStore,f.N);let x=yield f.Qo();for(;x;){const V=yield S.fo(x);V&&E._updateProgress(V),x=yield f.Qo()}const N=yield S.complete();yield Oa(d,N.Tn,void 0),yield function(V,B){const W=Le(V);return W.persistence.runTransaction("Save bundle","readwrite",fe=>W.Je.saveBundleMetadata(fe,B))}(d.localStore,C),E._completeWith(N.progress)}catch(C){si("SyncEngine",`Loading bundle failed with ${C}`),E._failWith(C)}var V}),function(d,f,E){return l.apply(this,arguments)})(s,n,r).then(()=>{s.sharedClientState.notifyBundleLoaded()})}(yield YE(i),l,s)}))}(r,i._databaseId,n,s),s}(this._delegate,n)}namedQuery(n){return function(i,n){return function(i,n){return i.asyncQueue.enqueue((0,ye.Z)(function*(){return function(r,s){const l=Le(r);return l.persistence.runTransaction("Get named query","readonly",d=>l.Je.getNamedQuery(d,s))}(yield KE(i),n)}))}(rr(i=Mt(i,Vn)),n).then(r=>r?new zr(i,null,r.query):null)}(this._delegate,n).then(r=>r?new Zr(this,r):null)}}class Eg extends b_{constructor(n){super(),this.firestore=n}convertBytes(n){return new _g(new Oo(n))}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return Ki.forKey(r,this.firestore,null)}}class Ew{constructor(n,r){this._firestore=n,this._delegate=r,this._userDataWriter=new Eg(n)}get(n){const r=Rc(n);return this._delegate.get(r).then(s=>new wg(this._firestore,new ka(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,r.converter)))}set(n,r,s){const l=Rc(n);return s?(I_("Transaction.set",s),this._delegate.set(l,r,s)):this._delegate.set(l,r),this}update(n,r,s,...l){const d=Rc(n);return 2===arguments.length?this._delegate.update(d,r):this._delegate.update(d,r,s,...l),this}delete(n){const r=Rc(n);return this._delegate.delete(r),this}}class cT{constructor(n){this._delegate=n}set(n,r,s){const l=Rc(n);return s?(I_("WriteBatch.set",s),this._delegate.set(l,r,s)):this._delegate.set(l,r),this}update(n,r,s,...l){const d=Rc(n);return 2===arguments.length?this._delegate.update(d,r):this._delegate.update(d,r,s,...l),this}delete(n){const r=Rc(n);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class Bu{constructor(n,r,s){this._firestore=n,this._userDataWriter=r,this._delegate=s}fromFirestore(n,r){const s=new pg(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,null);return this._delegate.fromFirestore(new _h(this._firestore,s),null!=r?r:{})}toFirestore(n,r){return r?this._delegate.toFirestore(n,r):this._delegate.toFirestore(n)}static getInstance(n,r){const s=Bu.INSTANCES;let l=s.get(n);l||(l=new WeakMap,s.set(n,l));let d=l.get(r);return d||(d=new Bu(n,new Eg(n),r),l.set(r,d)),d}}Bu.INSTANCES=new WeakMap;class Ki{constructor(n,r){this.firestore=n,this._delegate=r,this._userDataWriter=new Eg(n)}static forPath(n,r,s){if(n.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${n.canonicalString()} has ${n.length}`);return new Ki(r,new In(r._delegate,s,new Je(n)))}static forKey(n,r,s){return new Ki(r,new In(r._delegate,s,n))}get id(){return this._delegate.id}get parent(){return new vh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(n){try{return new vh(this.firestore,tw(this._delegate,n))}catch(r){throw li(r,"collection()","DocumentReference.collection()")}}isEqual(n){return(n=(0,bt.m9)(n))instanceof In&&FR(this._delegate,n)}set(n,r){r=I_("DocumentReference.set",r);try{return r?Ac(this._delegate,n,r):Ac(this._delegate,n)}catch(s){throw li(s,"setDoc()","DocumentReference.set()")}}update(n,r,...s){try{return 1===arguments.length?nT(this._delegate,n):nT(this._delegate,n,r,...s)}catch(l){throw li(l,"updateDoc()","DocumentReference.update()")}}delete(){return function(i){return Uu(Mt(i.firestore,Vn),[new Mp(i._key,jn.none())])}(this._delegate)}onSnapshot(...n){const r=dT(n),s=ww(n,l=>new wg(this.firestore,new ka(this.firestore._delegate,this._userDataWriter,l._key,l._document,l.metadata,this._delegate.converter)));return yh(this._delegate,r,s)}get(n){let r;return r="cache"===(null==n?void 0:n.source)?function(i){i=Mt(i,In);const n=Mt(i.firestore,Vn),r=rr(n),s=new Vu(n);return function(i,n){const r=new Rr;return i.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(s=(0,ye.Z)(function*(l,d,f){try{const E=yield function(C,S){const x=Le(C);return x.persistence.runTransaction("read document","readonly",N=>x.Qn.An(N,S))}(l,d);E.isFoundDocument()?f.resolve(E):E.isNoDocument()?f.resolve(null):f.reject(new Re(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(E){const C=rh(E,`Failed to get document '${d} from cache`);f.reject(C)}}),function(l,d,f){return s.apply(this,arguments)})(yield KE(i),n,r);var s})),r.promise}(r,i._key).then(l=>new ka(n,s,i._key,l,new Sc(null!==l&&l.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==n?void 0:n.source)?function(i){i=Mt(i,In);const n=Mt(i.firestore,Vn);return xD(rr(n),i._key,{source:"server"}).then(r=>mw(n,i,r))}(this._delegate):function(i){i=Mt(i,In);const n=Mt(i.firestore,Vn);return xD(rr(n),i._key).then(r=>mw(n,i,r))}(this._delegate),r.then(s=>new wg(this.firestore,new ka(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(n){return new Ki(this.firestore,this._delegate.withConverter(n?Bu.getInstance(this.firestore,n):null))}}function li(i,n,r){return i.message=i.message.replace(n,r),i}function dT(i){for(const n of i)if("object"==typeof n&&!vg(n))return n;return{}}function ww(i,n){var r,s;let l;return l=vg(i[0])?i[0]:vg(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:d=>{l.next&&l.next(n(d))},error:null===(r=l.error)||void 0===r?void 0:r.bind(l),complete:null===(s=l.complete)||void 0===s?void 0:s.bind(l)}}class wg{constructor(n,r){this._firestore=n,this._delegate=r}get ref(){return new Ki(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(n){return this._delegate.data(n)}get(n,r){return this._delegate.get(n,r)}isEqual(n){return gh(this._delegate,n._delegate)}}class _h extends wg{data(n){const r=this._delegate.data(n);return function(i,n){i||nt()}(void 0!==r),r}}class Zr{constructor(n,r){this.firestore=n,this._delegate=r,this._userDataWriter=new Eg(n)}where(n,r,s){try{return new Zr(this.firestore,Po(this._delegate,function(i,n,r){const s=n,l=y_("where",i);return new ko(l,s,r)}(n,r,s)))}catch(l){throw li(l,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(n,r){try{return new Zr(this.firestore,Po(this._delegate,function(i,n="asc"){const r=n,s=y_("orderBy",i);return new __(s,r)}(n,r)))}catch(s){throw li(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(n){try{return new Zr(this.firestore,Po(this._delegate,function(i){return OR("limit",i),new ZD("limit",i,"F")}(n)))}catch(r){throw li(r,"limit()","Query.limit()")}}limitToLast(n){try{return new Zr(this.firestore,Po(this._delegate,function(i){return OR("limitToLast",i),new ZD("limitToLast",i,"L")}(n)))}catch(r){throw li(r,"limitToLast()","Query.limitToLast()")}}startAt(...n){try{return new Zr(this.firestore,Po(this._delegate,function(...i){return new v_("startAt",i,!0)}(...n)))}catch(r){throw li(r,"startAt()","Query.startAt()")}}startAfter(...n){try{return new Zr(this.firestore,Po(this._delegate,function(...i){return new v_("startAfter",i,!1)}(...n)))}catch(r){throw li(r,"startAfter()","Query.startAfter()")}}endBefore(...n){try{return new Zr(this.firestore,Po(this._delegate,function(...i){return new E_("endBefore",i,!0)}(...n)))}catch(r){throw li(r,"endBefore()","Query.endBefore()")}}endAt(...n){try{return new Zr(this.firestore,Po(this._delegate,function(...i){return new E_("endAt",i,!1)}(...n)))}catch(r){throw li(r,"endAt()","Query.endAt()")}}isEqual(n){return LR(this._delegate,n._delegate)}get(n){let r;return r="cache"===(null==n?void 0:n.source)?function(i){i=Mt(i,zr);const n=Mt(i.firestore,Vn),r=rr(n),s=new Vu(n);return function(i,n){const r=new Rr;return i.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(s=(0,ye.Z)(function*(l,d,f){try{const E=yield Gp(l,d,!0),C=new vD(d,E.Gn),S=C.Io(E.documents),x=C.applyChanges(S,!1);f.resolve(x.snapshot)}catch(E){const C=rh(E,`Failed to execute query '${d} against cache`);f.reject(C)}}),function(l,d,f){return s.apply(this,arguments)})(yield KE(i),n,r);var s})),r.promise}(r,i._query).then(l=>new Fu(n,s,i,l))}(this._delegate):"server"===(null==n?void 0:n.source)?function(i){i=Mt(i,zr);const n=Mt(i.firestore,Vn),r=rr(n),s=new Vu(n);return f_(r,i._query,{source:"server"}).then(l=>new Fu(n,s,i,l))}(this._delegate):function(i){i=Mt(i,zr);const n=Mt(i.firestore,Vn),r=rr(n),s=new Vu(n);return mh(i._query),f_(r,i._query).then(l=>new Fu(n,s,i,l))}(this._delegate),r.then(s=>new D_(this.firestore,new Fu(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...n){const r=dT(n),s=ww(n,l=>new D_(this.firestore,new Fu(this.firestore._delegate,this._userDataWriter,this._delegate,l._snapshot)));return yh(this._delegate,r,s)}withConverter(n){return new Zr(this.firestore,this._delegate.withConverter(n?Bu.getInstance(this.firestore,n):null))}}class hT{constructor(n,r){this._firestore=n,this._delegate=r}get type(){return this._delegate.type}get doc(){return new _h(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class D_{constructor(n,r){this._firestore=n,this._delegate=r}get query(){return new Zr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(n=>new _h(this._firestore,n))}docChanges(n){return this._delegate.docChanges(n).map(r=>new hT(this._firestore,r))}forEach(n,r){this._delegate.forEach(s=>{n.call(r,new _h(this._firestore,s))})}isEqual(n){return gh(this._delegate,n._delegate)}}class vh extends Zr{constructor(n,r){super(n,r),this.firestore=n,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const n=this._delegate.parent;return n?new Ki(this.firestore,n):null}doc(n){try{return new Ki(this.firestore,void 0===n?p_(this._delegate):p_(this._delegate,n))}catch(r){throw li(r,"doc()","CollectionReference.doc()")}}add(n){return function(i,n){const r=Mt(i.firestore,Vn),s=p_(i),l=mg(i.converter,n);return Uu(r,[aw(Ic(i.firestore),"addDoc",s._key,l,null!==i.converter,{}).toMutation(s._key,jn.exists(!1))]).then(()=>s)}(this._delegate,n).then(r=>new Ki(this.firestore,r))}isEqual(n){return FR(this._delegate,n._delegate)}withConverter(n){return new vh(this.firestore,this._delegate.withConverter(n?Bu.getInstance(this.firestore,n):null))}}function Rc(i){return Mt(i,In)}class bw{constructor(...n){this._delegate=new Pa(...n)}static documentId(){return new bw($t.keyField().canonicalString())}isEqual(n){return(n=(0,bt.m9)(n))instanceof Pa&&this._delegate._internalPath.isEqual(n._internalPath)}}class ju{constructor(n){this._delegate=n}static serverTimestamp(){const n=new hg("serverTimestamp");return n._methodName="FieldValue.serverTimestamp",new ju(n)}static delete(){const n=new fh("deleteField");return n._methodName="FieldValue.delete",new ju(n)}static arrayUnion(...n){const r=function(...i){return new jD("arrayUnion",i)}(...n);return r._methodName="FieldValue.arrayUnion",new ju(r)}static arrayRemove(...n){const r=function(...i){return new $D("arrayRemove",i)}(...n);return r._methodName="FieldValue.arrayRemove",new ju(r)}static increment(n){const r=function(i){return new HD("increment",i)}(n);return r._methodName="FieldValue.increment",new ju(r)}isEqual(n){return this._delegate.isEqual(n._delegate)}}const qN={Firestore:uT,GeoPoint:g_,Timestamp:tr,Blob:_g,Transaction:Ew,WriteBatch:cT,DocumentReference:Ki,DocumentSnapshot:wg,Query:Zr,QueryDocumentSnapshot:_h,QuerySnapshot:D_,CollectionReference:vh,FieldPath:bw,FieldValue:ju,setLogLevel:function(i){!function(i){So.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function(i){(function(i,n){i.INTERNAL.registerComponent(new fa.wA("firestore-compat",r=>((n,r)=>new uT(n,r,new e1))(r.getProvider("app-compat").getImmediate(),r.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},qN)))})(i),i.registerVersion("@firebase/firestore-compat","0.1.3")}(Um.Z);var xc=F(9765),ZN=F(6682),T_=F(309),bg=F(5345);function Nr(i,n){return"function"==typeof n?r=>r.pipe(Nr((s,l)=>(0,Jt.D)(i(s,l)).pipe((0,St.U)((d,f)=>n(s,d,l,f))))):r=>r.lift(new KN(i))}class KN{constructor(n){this.project=n}call(n,r){return r.subscribe(new YN(n,this.project))}}class YN extends bg.Ds{constructor(n,r){super(n),this.project=r,this.index=0}_next(n){let r;const s=this.index++;try{r=this.project(n,s)}catch(l){return void this.destination.error(l)}this._innerSub(r)}_innerSub(n){const r=this.innerSubscription;r&&r.unsubscribe();const s=new bg.IY(this),l=this.destination;l.add(s),this.innerSubscription=(0,bg.ft)(n,s),this.innerSubscription!==s&&l.add(this.innerSubscription)}_complete(){const{innerSubscription:n}=this;(!n||n.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(n){this.destination.next(n)}}var QN=F(7771),t1=F(5319),n1=F(7971),JN=F(8858);class XN extends xc.xQ{constructor(n=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,s){super(),this.scheduler=s,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=n<1?1:n,this._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(n){if(!this.isStopped){const r=this._events;r.push(n),r.length>this._bufferSize&&r.shift()}super.next(n)}nextTimeWindow(n){this.isStopped||(this._events.push(new eM(this._getNow(),n)),this._trimBufferThenGetEvents()),super.next(n)}_subscribe(n){const r=this._infiniteTimeWindow,s=r?this._events:this._trimBufferThenGetEvents(),l=this.scheduler,d=s.length;let f;if(this.closed)throw new n1.N;if(this.isStopped||this.hasError?f=t1.w.EMPTY:(this.observers.push(n),f=new JN.W(this,n)),l&&n.add(n=new T_.ht(n,l)),r)for(let E=0;E<d&&!n.closed;E++)n.next(s[E]);else for(let E=0;E<d&&!n.closed;E++)n.next(s[E].value);return this.hasError?n.error(this.thrownError):this.isStopped&&n.complete(),f}_getNow(){return(this.scheduler||QN.c).now()}_trimBufferThenGetEvents(){const n=this._getNow(),r=this._bufferSize,s=this._windowTime,l=this._events,d=l.length;let f=0;for(;f<d&&!(n-l[f].time<s);)f++;return d>r&&(f=Math.max(f,d-r)),f>0&&l.splice(0,f),l}}class eM{constructor(n,r){this.time=n,this.value=r}}function r1(i,n,r){let s;return s=i&&"object"==typeof i?i:{bufferSize:i,windowTime:n,refCount:!1,scheduler:r},l=>l.lift(function({bufferSize:i=Number.POSITIVE_INFINITY,windowTime:n=Number.POSITIVE_INFINITY,refCount:r,scheduler:s}){let l,f,d=0,E=!1,C=!1;return function(x){let N;d++,!l||E?(E=!1,l=new XN(i,n,s),N=l.subscribe(this),f=x.subscribe({next(V){l.next(V)},error(V){E=!0,l.error(V)},complete(){C=!0,f=void 0,l.complete()}}),C&&(f=void 0)):N=l.subscribe(this),this.add(()=>{d--,N.unsubscribe(),N=void 0,f&&!C&&r&&0===d&&(f.unsubscribe(),f=void 0,l=void 0)})}}(s))}const S_=(()=>{function i(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return i.prototype=Object.create(Error.prototype),i})(),s1=(()=>{function i(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return i.prototype=Object.create(Error.prototype),i})();var Nc=F(9193);function Cw(i){return n=>0===i?(0,Nc.c)():n.lift(new o1(i))}class o1{constructor(n){if(this.total=n,this.total<0)throw new s1}call(n,r){return r.subscribe(new a1(n,this.total))}}class a1 extends Gn.L{constructor(n,r){super(n),this.total=r,this.count=0}_next(n){const r=this.total,s=++this.count;s<=r&&(this.destination.next(n),s===r&&(this.destination.complete(),this.unsubscribe()))}}function u1(i=null){return n=>n.lift(new nM(i))}class nM{constructor(n){this.defaultValue=n}call(n,r){return r.subscribe(new rM(n,this.defaultValue))}}class rM extends Gn.L{constructor(n,r){super(n),this.defaultValue=r,this.isEmpty=!0}_next(n){this.isEmpty=!1,this.destination.next(n)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function l1(i=d1){return n=>n.lift(new c1(i))}class c1{constructor(n){this.errorFactory=n}call(n,r){return r.subscribe(new iM(n,this.errorFactory))}}class iM extends Gn.L{constructor(n,r){super(n),this.errorFactory=r,this.hasValue=!1}_next(n){this.hasValue=!0,this.destination.next(n)}_complete(){if(this.hasValue)return this.destination.complete();{let n;try{n=this.errorFactory()}catch(r){n=r}this.destination.error(n)}}}function d1(){return new S_}var A_=F(4487);function gs(i,n){const r=arguments.length>=2;return s=>s.pipe(i?Ui((l,d)=>i(l,d,s)):A_.y,Cw(1),r?u1(n):l1(()=>new S_))}function Iw(i,n){return n?Nr(()=>i,n):Nr(()=>i)}var Dw=F(2639),Tw=F(7841);const Aw=new m.OlP("angularfire2.auth.use-emulator"),Rw=new m.OlP("angularfire2.auth.settings"),xw=new m.OlP("angularfire2.auth.tenant-id"),h1=new m.OlP("angularfire2.auth.langugage-code"),Nw=new m.OlP("angularfire2.auth.use-device-language"),Cg=new m.OlP("angularfire.auth.persistence"),Mw=(i,n,r,s,l,d,f,E)=>(0,Yt.cc)(`${i.name}.auth`,"AngularFireAuth",i.name,()=>{const C=n.runOutsideAngular(()=>i.auth());if(r&&C.useEmulator(...r),s&&(C.tenantId=s),C.languageCode=l,d&&C.useDeviceLanguage(),f)for(const[S,x]of Object.entries(f))C.settings[S]=x;return E&&C.setPersistence(E),C},[r,s,l,d,f,E]);let fT=(()=>{class i{constructor(r,s,l,d,f,E,C,S,x,N,V){const B=new xc.xQ,W=(0,it.of)(void 0).pipe((0,T_.QV)(f.outsideAngular),Nr(()=>d.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,670)))),(0,St.U)(()=>(0,Lt.on)(r,d,s)),(0,St.U)(fe=>Mw(fe,d,E,S,x,N,C,V)),r1({bufferSize:1,refCount:!1}));if(il(l))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,it.of)(null);else{W.pipe(gs()).subscribe();const De=W.pipe(Nr(Ge=>Ge.getRedirectResult().then(Ze=>Ze,()=>null)),Yt.iC,r1({bufferSize:1,refCount:!1})),$e=W.pipe(Nr(Ge=>new Xn.y(Ze=>({unsubscribe:d.runOutsideAngular(()=>Ge.onAuthStateChanged(Xt=>Ze.next(Xt),Xt=>Ze.error(Xt),()=>Ze.complete()))})))),We=W.pipe(Nr(Ge=>new Xn.y(Ze=>({unsubscribe:d.runOutsideAngular(()=>Ge.onIdTokenChanged(Xt=>Ze.next(Xt),Xt=>Ze.error(Xt),()=>Ze.complete()))}))));this.authState=De.pipe(Iw($e),(0,Dw.R)(f.outsideAngular),(0,T_.QV)(f.insideAngular)),this.user=De.pipe(Iw(We),(0,Dw.R)(f.outsideAngular),(0,T_.QV)(f.insideAngular)),this.idToken=this.user.pipe(Nr(Ge=>Ge?(0,Jt.D)(Ge.getIdToken()):(0,it.of)(null))),this.idTokenResult=this.user.pipe(Nr(Ge=>Ge?(0,Jt.D)(Ge.getIdTokenResult()):(0,it.of)(null))),this.credential=(0,ZN.T)(De,B,this.authState.pipe(Ui(Ge=>!Ge))).pipe((0,St.U)(Ge=>(null==Ge?void 0:Ge.user)?Ge:null),(0,Dw.R)(f.outsideAngular),(0,T_.QV)(f.insideAngular))}return(0,Lt.pX)(this,W,d,{spy:{apply:(fe,De,$e)=>{(fe.startsWith("signIn")||fe.startsWith("createUser"))&&$e.then(We=>B.next(We))}}})}}return i.\u0275fac=function(r){return new(r||i)(m.LFG(Lt.Dh),m.LFG(Lt.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Yt.HU),m.LFG(Aw,8),m.LFG(Rw,8),m.LFG(xw,8),m.LFG(h1,8),m.LFG(Nw,8),m.LFG(Cg,8))},i.\u0275prov=m.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),sM=(()=>{class i{constructor(){Tw.Z.registerVersion("angularfire",Yt.q4.full,"auth-compat")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=m.oAB({type:i}),i.\u0275inj=m.cJS({providers:[fT]}),i})();function pT(i,n){return function(i,n=cn.z){return new Xn.y(r=>{let s;return null!=n?n.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},r)}):s=i.onSnapshot({includeMetadataChanges:!0},r),()=>{null!=s&&s()}})}(i,n)}function Eh(i,n){return pT(i,n).pipe((0,St.U)(r=>({payload:r,type:"query"})))}function R_(i,n){return Eh(i,n).pipe(lu(void 0),vi(),(0,St.U)(([r,s])=>{const l=s.payload.docChanges(),d=l.map(f=>({type:f.type,payload:f}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((f,E)=>{const C=l.find(x=>x.doc.ref.isEqual(f.ref)),S=null==r?void 0:r.payload.docs.find(x=>x.ref.isEqual(f.ref));C&&JSON.stringify(C.doc.metadata)===JSON.stringify(f.metadata)||!C&&S&&JSON.stringify(S.metadata)===JSON.stringify(f.metadata)||d.push({type:"modified",payload:{oldIndex:E,newIndex:E,type:"modified",doc:f}})}),d}))}function f1(i,n,r){return R_(i,r).pipe(Vm((s,l)=>function(i,n,r){return n.forEach(s=>{r.indexOf(s.type)>-1&&(i=function(i,n){switch(n.type){case"added":if(!i[n.newIndex]||!i[n.newIndex].doc.ref.isEqual(n.doc.ref))return Ig(i,n.newIndex,0,n);break;case"modified":if(null==i[n.oldIndex]||i[n.oldIndex].doc.ref.isEqual(n.doc.ref)){if(n.oldIndex!==n.newIndex){const r=i.slice();return r.splice(n.oldIndex,1),r.splice(n.newIndex,0,n),r}return Ig(i,n.newIndex,1,n)}break;case"removed":if(i[n.oldIndex]&&i[n.oldIndex].doc.ref.isEqual(n.doc.ref))return Ig(i,n.oldIndex,1)}return i}(i,s))}),i}(s,l.map(d=>d.payload),n),[]),r=>r.lift(new jS(void 0,void 0)),(0,St.U)(s=>s.map(l=>({type:l.type,payload:l}))))}function Ig(i,n,r,...s){const l=i.slice();return l.splice(n,r,...s),l}function g1(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class m1{constructor(n,r,s){this.ref=n,this.query=r,this.afs=s}stateChanges(n){let r=R_(this.query,this.afs.schedulers.outsideAngular);return n&&n.length>0&&(r=r.pipe((0,St.U)(s=>s.filter(l=>n.indexOf(l.type)>-1)))),r.pipe(lu(void 0),vi(),Ui(([s,l])=>l.length>0||!s),(0,St.U)(([s,l])=>l),Yt.iC)}auditTrail(n){return this.stateChanges(n).pipe(Vm((r,s)=>[...r,...s],[]))}snapshotChanges(n){const r=g1(n);return f1(this.query,r,this.afs.schedulers.outsideAngular).pipe(Yt.iC)}valueChanges(n={}){return Eh(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(r=>r.payload.docs.map(s=>n.idField?Object.assign(Object.assign({},s.data()),{[n.idField]:s.id}):s.data())),Yt.iC)}get(n){return(0,Jt.D)(this.query.get(n)).pipe(Yt.iC)}add(n){return this.ref.add(n)}doc(n){return new gT(this.ref.doc(n),this.afs)}}class gT{constructor(n,r){this.ref=n,this.afs=r}set(n,r){return this.ref.set(n,r)}update(n){return this.ref.update(n)}delete(){return this.ref.delete()}collection(n,r){const s=this.ref.collection(n),{ref:l,query:d}=yT(s,r);return new m1(l,d,this.afs)}snapshotChanges(){return function(i,n){return pT(i,n).pipe(lu(void 0),vi(),(0,St.U)(([r,s])=>s.exists?(null==r?void 0:r.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Yt.iC)}valueChanges(n={}){return this.snapshotChanges().pipe((0,St.U)(({payload:r})=>n.idField?Object.assign(Object.assign({},r.data()),{[n.idField]:r.id}):r.data()))}get(n){return(0,Jt.D)(this.ref.get(n)).pipe(Yt.iC)}}class lM{constructor(n,r){this.query=n,this.afs=r}stateChanges(n){return n&&0!==n.length?R_(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(r=>r.filter(s=>n.indexOf(s.type)>-1)),Ui(r=>r.length>0),Yt.iC):R_(this.query,this.afs.schedulers.outsideAngular).pipe(Yt.iC)}auditTrail(n){return this.stateChanges(n).pipe(Vm((r,s)=>[...r,...s],[]))}snapshotChanges(n){const r=g1(n);return f1(this.query,r,this.afs.schedulers.outsideAngular).pipe(Yt.iC)}valueChanges(n={}){return Eh(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(s=>s.payload.docs.map(l=>n.idField?Object.assign({[n.idField]:l.id},l.data()):l.data())),Yt.iC)}get(n){return(0,Jt.D)(this.query.get(n)).pipe(Yt.iC)}}const Ow=new m.OlP("angularfire2.enableFirestorePersistence"),mT=new m.OlP("angularfire2.firestore.persistenceSettings"),cM=new m.OlP("angularfire2.firestore.settings"),dM=new m.OlP("angularfire2.firestore.use-emulator");function yT(i,n=(r=>r)){return{query:n(i),ref:i}}let Mc=(()=>{class i{constructor(r,s,l,d,f,E,C,S,x,N,V,B,W,fe,De,$e){this.schedulers=C;const We=(0,Lt.on)(r,E,s),Ge=x;N&&Mw(We,E,V,W,fe,De,B,$e),[this.firestore,this.persistenceEnabled$]=(0,Yt.cc)(`${We.name}.firestore`,"AngularFirestore",We.name,()=>{const Ze=E.runOutsideAngular(()=>We.firestore());if(d&&Ze.settings(d),Ge&&Ze.useEmulator(...Ge),l&&!il(f)){const Xt=()=>{try{return(0,Jt.D)(Ze.enablePersistence(S||void 0).then(()=>!0,()=>!1))}catch(Zn){return"undefined"!=typeof console&&console.warn(Zn),(0,it.of)(!1)}};return[Ze,E.runOutsideAngular(Xt)]}return[Ze,(0,it.of)(!1)]},[d,Ge,l])}collection(r,s){let l;l="string"==typeof r?this.firestore.collection(r):r;const{ref:d,query:f}=yT(l,s),E=this.schedulers.ngZone.run(()=>d);return new m1(E,f,this)}collectionGroup(r,s){const l=s||(f=>f),d=this.firestore.collectionGroup(r);return new lM(l(d),this)}doc(r){let s;s="string"==typeof r?this.firestore.doc(r):r;const l=this.schedulers.ngZone.run(()=>s);return new gT(l,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(r){return new(r||i)(m.LFG(Lt.Dh),m.LFG(Lt.xv,8),m.LFG(Ow,8),m.LFG(cM,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Yt.HU),m.LFG(mT,8),m.LFG(dM,8),m.LFG(fT,8),m.LFG(Aw,8),m.LFG(Rw,8),m.LFG(xw,8),m.LFG(h1,8),m.LFG(Nw,8),m.LFG(Cg,8))},i.\u0275prov=m.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),y1=(()=>{class i{constructor(){Tw.Z.registerVersion("angularfire",Yt.q4.full,"fst-compat")}static enablePersistence(r){return{ngModule:i,providers:[{provide:Ow,useValue:!0},{provide:mT,useValue:r}]}}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=m.oAB({type:i}),i.\u0275inj=m.cJS({providers:[Mc]}),i})();class v1{constructor(n,r){this.dueTime=n,this.scheduler=r}call(n,r){return r.subscribe(new Pw(n,this.dueTime,this.scheduler))}}class Pw extends Gn.L{constructor(n,r,s){super(n),this.dueTime=r,this.scheduler=s,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(n){this.clearDebounce(),this.lastValue=n,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(E1,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:n}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(n)}}clearDebounce(){const n=this.debouncedSubscription;null!==n&&(this.remove(n),n.unsubscribe(),this.debouncedSubscription=null)}}function E1(i){i.debouncedNext()}var Wn=(()=>(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"}(Wn||(Wn={})),Wn))();const _T="firebasestorage.googleapis.com",x_="storageBucket";class xn extends bt.ZR{constructor(n,r){super(N_(n),`Firebase Storage: ${r} (${N_(n)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,xn.prototype)}_codeEquals(n){return N_(n)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(n){this.customData.serverResponse=n,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function N_(i){return"storage/"+i}function M_(){return new xn("unknown","An unknown error occurred, please check the error payload for server response.")}function Fw(){return new xn("canceled","User canceled the upload/download.")}function ms(){return new xn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function hM(){return new xn("no-download-url","The given file does not have any download URLs.")}function wh(i){return new xn("invalid-argument",i)}function A1(){return new xn("app-deleted","The Firebase app was deleted.")}function bT(i){return new xn("invalid-root-operation","The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Dg(i,n){return new xn("invalid-format","String does not match format '"+i+"': "+n)}function O_(i){throw new xn("internal-error","Internal error: "+i)}class fM{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Wn.NO_ERROR,this.sendPromise_=new Promise(n=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Wn.ABORT,n()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Wn.NETWORK_ERROR,n()}),this.xhr_.addEventListener("load",()=>{n()})})}send(n,r,s,l){if(this.sent_)throw O_("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,n,!0),void 0!==l)for(const d in l)l.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,l[d].toString());return void 0!==s?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw O_("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw O_("cannot .getStatus() before sending");try{return this.xhr_.status}catch(n){return-1}}getResponseText(){if(!this.sent_)throw O_("cannot .getResponseText() before sending");return this.xhr_.responseText}abort(){this.xhr_.abort()}getResponseHeader(n){return this.xhr_.getResponseHeader(n)}addUploadProgressListener(n){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",n)}removeUploadProgressListener(n){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",n)}}class CT{createConnection(){return new fM}}class Kr{constructor(n,r){this.bucket=n,this.path_=r}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const n=encodeURIComponent;return"/b/"+n(this.bucket)+"/o/"+n(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(n,r){let s;try{s=Kr.makeFromUrl(n,r)}catch(l){return new Kr(n,"")}if(""===s.path)return s;throw function(i){return new xn("invalid-default-bucket","Invalid default bucket '"+i+"'.")}(n)}static makeFromUrl(n,r){let s=null;const l="([A-Za-z0-9.\\-_]+)",E=new RegExp("^gs://"+l+"(/(.*))?$","i");function S(Ze){Ze.path_=decodeURIComponent(Ze.path)}const N=r.replace(/[.]/g,"\\."),Ge=[{regex:E,indices:{bucket:1,path:3},postModify:function(Ze){"/"===Ze.path.charAt(Ze.path.length-1)&&(Ze.path_=Ze.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${N}/v[A-Za-z0-9_]+/b/${l}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:S},{regex:new RegExp(`^https?://${r===_T?"(?:storage.googleapis.com|storage.cloud.google.com)":r}/${l}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:S}];for(let Ze=0;Ze<Ge.length;Ze++){const Xt=Ge[Ze],Zn=Xt.regex.exec(n);if(Zn){let Xi=Zn[Xt.indices.path];Xi||(Xi=""),s=new Kr(Zn[Xt.indices.bucket],Xi),Xt.postModify(s);break}}if(null==s)throw function(i){return new xn("invalid-url","Invalid URL '"+i+"'.")}(n);return s}}class x1{constructor(n){this.promise_=Promise.reject(n)}getPromise(){return this.promise_}cancel(n=!1){}}function P_(i){return"string"==typeof i||i instanceof String}function ST(i){return k_()&&i instanceof Blob}function k_(){return"undefined"!=typeof Blob}function Oc(i,n,r,s){if(s<n)throw wh(`Invalid value for '${i}'. Expected ${n} or greater.`);if(s>r)throw wh(`Invalid value for '${i}'. Expected ${r} or less.`)}function Fo(i,n,r){let s=n;return null==r&&(s=`https://${n}`),`${r}://${s}/v0${i}`}function Vw(i){const n=encodeURIComponent;let r="?";for(const s in i)i.hasOwnProperty(s)&&(r=r+(n(s)+"=")+n(i[s])+"&");return r=r.slice(0,-1),r}class M1{constructor(n,r,s,l,d,f,E,C,S,x,N){this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=n,this.method_=r,this.headers_=s,this.body_=l,this.successCodes_=d.slice(),this.additionalRetryCodes_=f.slice(),this.callback_=E,this.errorCallback_=C,this.progressCallback_=x,this.timeout_=S,this.pool_=N,this.promise_=new Promise((V,B)=>{this.resolve_=V,this.reject_=B,this.start_()})}start_(){const n=this;function s(l,d){const f=n.resolve_,E=n.reject_,C=d.connection;if(d.wasSuccessCode)try{const S=n.callback_(C,C.getResponseText());!function(i){return void 0!==i}(S)?f():f(S)}catch(S){E(S)}else if(null!==C){const S=M_();S.serverResponse=C.getResponseText(),E(n.errorCallback_?n.errorCallback_(C,S):S)}else E(d.canceled?n.appDelete_?A1():Fw():new xn("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?s(0,new F_(!1,null,!0)):this.backoffId_=function(i,n,r){let s=1,l=null,d=!1,f=0;function E(){return 2===f}let C=!1;function S(...W){C||(C=!0,n.apply(null,W))}function x(W){l=setTimeout(()=>{l=null,i(N,E())},W)}function N(W,...fe){if(C)return;if(W)return void S.call(null,W,...fe);if(E()||d)return void S.call(null,W,...fe);let $e;s<64&&(s*=2),1===f?(f=2,$e=0):$e=1e3*(s+Math.random()),x($e)}let V=!1;function B(W){V||(V=!0,!C&&(null!==l?(W||(f=2),clearTimeout(l),x(0)):W||(f=1)))}return x(0),setTimeout(()=>{d=!0,B(!0)},r),B}(function(l,d){if(d)return void l(!1,new F_(!1,null,!0));const f=n.pool_.createConnection();function E(C){null!==n.progressCallback_&&n.progressCallback_(C.loaded,C.lengthComputable?C.total:-1)}n.pendingConnection_=f,null!==n.progressCallback_&&f.addUploadProgressListener(E),f.send(n.url_,n.method_,n.body_,n.headers_).then(()=>{null!==n.progressCallback_&&f.removeUploadProgressListener(E),n.pendingConnection_=null;const C=f.getErrorCode()===Wn.NO_ERROR,S=f.getStatus();if(!C||n.isRetryStatusCode_(S)){const N=f.getErrorCode()===Wn.ABORT;return void l(!1,new F_(!1,null,N))}const x=-1!==n.successCodes_.indexOf(S);l(!0,new F_(x,f))})},s,this.timeout_)}getPromise(){return this.promise_}cancel(n){this.canceled_=!0,this.appDelete_=n||!1,null!==this.backoffId_&&function(i){i(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(n){const r=n>=500&&n<600,l=-1!==[408,429].indexOf(n),d=-1!==this.additionalRetryCodes_.indexOf(n);return r||l||d}}class F_{constructor(n,r,s){this.wasSuccessCode=n,this.connection=r,this.canceled=!!s}}function P1(...i){const n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){const r=new n;for(let s=0;s<i.length;s++)r.append(i[s]);return r.getBlob()}if(k_())return new Blob(i);throw new xn("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Si={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class xT{constructor(n,r){this.data=n,this.contentType=r||null}}function NT(i,n){switch(i){case Si.RAW:return new xT(MT(n));case Si.BASE64:case Si.BASE64URL:return new xT(ir(i,n));case Si.DATA_URL:return new xT(function(i){const n=new L1(i);return n.base64?ir(Si.BASE64,n.rest):function(i){let n;try{n=decodeURIComponent(i)}catch(r){throw Dg(Si.DATA_URL,"Malformed data URL.")}return MT(n)}(n.rest)}(n),function(i){return new L1(i).contentType}(n))}throw M_()}function MT(i){const n=[];for(let r=0;r<i.length;r++){let s=i.charCodeAt(r);s<=127?n.push(s):s<=2047?n.push(192|s>>6,128|63&s):55296==(64512&s)?r<i.length-1&&56320==(64512&i.charCodeAt(r+1))?(s=65536|(1023&s)<<10|1023&i.charCodeAt(++r),n.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|63&s)):n.push(239,191,189):56320==(64512&s)?n.push(239,191,189):n.push(224|s>>12,128|s>>6&63,128|63&s)}return new Uint8Array(n)}function ir(i,n){switch(i){case Si.BASE64:{const l=-1!==n.indexOf("-"),d=-1!==n.indexOf("_");if(l||d)throw Dg(i,"Invalid character '"+(l?"-":"_")+"' found: is it base64url encoded?");break}case Si.BASE64URL:{const l=-1!==n.indexOf("+"),d=-1!==n.indexOf("/");if(l||d)throw Dg(i,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");n=n.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=function(i){return atob(i)}(n)}catch(l){throw Dg(i,"Invalid character found")}const s=new Uint8Array(r.length);for(let l=0;l<r.length;l++)s[l]=r.charCodeAt(l);return s}class L1{constructor(n){this.base64=!1,this.contentType=null;const r=n.match(/^data:([^,]+)?,/);if(null===r)throw Dg(Si.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=r[1]||null;null!=s&&(this.base64=function(i,n){return i.length>=n.length&&i.substring(i.length-n.length)===n}(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-";base64".length):s),this.rest=n.substring(n.indexOf(",")+1)}}class Yi{constructor(n,r){let s=0,l="";ST(n)?(this.data_=n,s=n.size,l=n.type):n instanceof ArrayBuffer?(r?this.data_=new Uint8Array(n):(this.data_=new Uint8Array(n.byteLength),this.data_.set(new Uint8Array(n))),s=this.data_.length):n instanceof Uint8Array&&(r?this.data_=n:(this.data_=new Uint8Array(n.length),this.data_.set(n)),s=n.length),this.size_=s,this.type_=l}size(){return this.size_}type(){return this.type_}slice(n,r){if(ST(this.data_)){const l=function(i,n,r){return i.webkitSlice?i.webkitSlice(n,r):i.mozSlice?i.mozSlice(n,r):i.slice?i.slice(n,r):null}(this.data_,n,r);return null===l?null:new Yi(l)}{const s=new Uint8Array(this.data_.buffer,n,r-n);return new Yi(s,!0)}}static getBlob(...n){if(k_()){const r=n.map(s=>s instanceof Yi?s.data_:s);return new Yi(P1.apply(null,r))}{const r=n.map(f=>P_(f)?NT(Si.RAW,f).data:f.data_);let s=0;r.forEach(f=>{s+=f.byteLength});const l=new Uint8Array(s);let d=0;return r.forEach(f=>{for(let E=0;E<f.length;E++)l[d++]=f[E]}),new Yi(l,!0)}}uploadData(){return this.data_}}function Bw(i){let n;try{n=JSON.parse(i)}catch(r){return null}return function(i){return"object"==typeof i&&!Array.isArray(i)}(n)?n:null}function $u(i){const n=i.lastIndexOf("/",i.length-2);return-1===n?i:i.slice(n+1)}function FT(i,n){return n}class Mr{constructor(n,r,s,l){this.server=n,this.local=r||n,this.writable=!!s,this.xform=l||FT}}let bh=null;function Hu(){if(bh)return bh;const i=[];i.push(new Mr("bucket")),i.push(new Mr("generation")),i.push(new Mr("metageneration")),i.push(new Mr("name","fullPath",!0));const r=new Mr("name");r.xform=function(d,f){return function(i){return!P_(i)||i.length<2?i:$u(i)}(f)},i.push(r);const l=new Mr("size");return l.xform=function(d,f){return void 0!==f?Number(f):f},i.push(l),i.push(new Mr("timeCreated")),i.push(new Mr("updated")),i.push(new Mr("md5Hash",null,!0)),i.push(new Mr("cacheControl",null,!0)),i.push(new Mr("contentDisposition",null,!0)),i.push(new Mr("contentEncoding",null,!0)),i.push(new Mr("contentLanguage",null,!0)),i.push(new Mr("contentType",null,!0)),i.push(new Mr("metadata","customMetadata",!0)),bh=i,bh}function $w(i,n,r){const s=Bw(n);return null===s?null:function(i,n,r){const s={type:"file"},l=r.length;for(let d=0;d<l;d++){const f=r[d];s[f.local]=f.xform(s,n[f.server])}return function(i,n){Object.defineProperty(i,"ref",{get:function(){const d=new Kr(i.bucket,i.fullPath);return n._makeStorageReference(d)}})}(s,i),s}(i,s,r)}function LT(i,n){const r={},s=n.length;for(let l=0;l<s;l++){const d=n[l];d.writable&&(r[d.server]=i[d.local])}return JSON.stringify(r)}const VT="prefixes";class Fa{constructor(n,r,s,l){this.url=n,this.method=r,this.handler=s,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function La(i){if(!i)throw M_()}function Hw(i,n){return function(s,l){const d=$w(i,l,n);return La(null!==d),d}}function Ch(i){return function(r,s){let l;return l=401===r.getStatus()?r.getResponseText().includes("Firebase App Check token is invalid")?new xn("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new xn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===r.getStatus()?function(i){return new xn("quota-exceeded","Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(i.bucket):403===r.getStatus()?function(i){return new xn("unauthorized","User does not have permission to access '"+i+"'.")}(i.path):s,l.serverResponse=s.serverResponse,l}}function V_(i){const n=Ch(i);return function(s,l){let d=n(s,l);return 404===s.getStatus()&&(d=function(i){return new xn("object-not-found","Object '"+i+"' does not exist.")}(i.path)),d.serverResponse=l.serverResponse,d}}function BT(i,n,r){const l=Fo(n.fullServerUrl(),i.host,i._protocol),f=i.maxOperationRetryTime,E=new Fa(l,"GET",Hw(i,r),f);return E.errorHandler=V_(n),E}function H1(i,n,r,s,l){const d={};d.prefix=n.isRoot?"":n.path+"/",r&&r.length>0&&(d.delimiter=r),s&&(d.pageToken=s),l&&(d.maxResults=l);const E=Fo(n.bucketOnlyServerUrl(),i.host,i._protocol),S=i.maxOperationRetryTime,x=new Fa(E,"GET",function(i,n){return function(s,l){const d=function(i,n,r){const s=Bw(r);return null===s?null:function(i,n,r){const s={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[VT])for(const l of r[VT]){const d=l.replace(/\/$/,""),f=i._makeStorageReference(new Kr(n,d));s.prefixes.push(f)}if(r.items)for(const l of r.items){const d=i._makeStorageReference(new Kr(n,l.name));s.items.push(d)}return s}(i,n,s)}(i,n,l);return La(null!==d),d}}(i,n.bucket),S);return x.urlParams=d,x.errorHandler=Ch(n),x}function EM(i,n,r){const l=Fo(n.fullServerUrl(),i.host,i._protocol),f=i.maxOperationRetryTime,E=new Fa(l,"GET",function(i,n){return function(s,l){const d=$w(i,l,n);return La(null!==d),function(i,n,r,s){const l=Bw(n);if(null===l||!P_(l.downloadTokens))return null;const d=l.downloadTokens;if(0===d.length)return null;const f=encodeURIComponent;return d.split(",").map(S=>{const N=i.fullPath;return Fo("/b/"+f(i.bucket)+"/o/"+f(N),r,s)+Vw({alt:"media",token:S})})[0]}(d,l,i.host,i._protocol)}}(i,r),f);return E.errorHandler=V_(n),E}function G1(i,n,r,s){const d=Fo(n.fullServerUrl(),i.host,i._protocol),E=LT(r,s),S=i.maxOperationRetryTime,x=new Fa(d,"PATCH",Hw(i,s),S);return x.headers={"Content-Type":"application/json; charset=utf-8"},x.body=E,x.errorHandler=V_(n),x}function q1(i,n){const s=Fo(n.fullServerUrl(),i.host,i._protocol),E=new Fa(s,"DELETE",function(C,S){},i.maxOperationRetryTime);return E.successCodes=[200,204],E.errorHandler=V_(n),E}function W1(i,n,r){const s=Object.assign({},r);return s.fullPath=i.path,s.size=n.size(),s.contentType||(s.contentType=function(i,n){return n&&n.type()||"application/octet-stream"}(0,n)),s}class U_{constructor(n,r,s,l){this.current=n,this.total=r,this.finalized=!!s,this.metadata=l||null}}function Gw(i,n){let r=null;try{r=i.getResponseHeader("X-Goog-Upload-Status")}catch(l){La(!1)}return La(!!r&&-1!==(n||["active"]).indexOf(r)),r}const Q1={STATE_CHANGED:"state_changed"},ci={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function qw(i){switch(i){case"running":case"pausing":case"canceling":return ci.RUNNING;case"paused":return ci.PAUSED;case"success":return ci.SUCCESS;case"canceled":return ci.CANCELED;case"error":default:return ci.ERROR}}class J1{constructor(n,r,s){if(function(i){return"function"==typeof i}(n)||null!=r||null!=s)this.next=n,this.error=null!=r?r:void 0,this.complete=null!=s?s:void 0;else{const d=n;this.next=d.next,this.error=d.error,this.complete=d.complete}}}function Tg(i){return(...n)=>{Promise.resolve().then(()=>i(...n))}}class $T{constructor(n,r,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=n,this._blob=r,this._metadata=s,this._mappings=Hu(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=l=>{this._request=void 0,this._chunkMultiplier=1,l._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=l,this._transition("error"))},this._metadataErrorHandler=l=>{this._request=void 0,l._codeEquals("canceled")?this.completeTransitions_():(this._error=l,this._transition("error"))},this._promise=new Promise((l,d)=>{this._resolve=l,this._reject=d,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const n=this._transferred;return r=>this._updateProgress(n+r)}_shouldDoResumable(n){return n.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(n){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,s])=>{switch(this._state){case"running":n(r,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((n,r)=>{const s=function(i,n,r,s,l){const d=n.bucketOnlyServerUrl(),f=W1(n,s,l),E={name:f.fullPath},C=Fo(d,i.host,i._protocol),x={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s.size()}`,"X-Goog-Upload-Header-Content-Type":f.contentType,"Content-Type":"application/json; charset=utf-8"},N=LT(f,r),W=new Fa(C,"POST",function(fe){let De;Gw(fe);try{De=fe.getResponseHeader("X-Goog-Upload-URL")}catch($e){La(!1)}return La(P_(De)),De},i.maxUploadRetryTime);return W.urlParams=E,W.headers=x,W.body=N,W.errorHandler=Ch(n),W}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),l=this._ref.storage._makeRequest(s,n,r);this._request=l,l.getPromise().then(d=>{this._request=void 0,this._uploadUrl=d,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const n=this._uploadUrl;this._resolveToken((r,s)=>{const l=function(i,n,r,s){const C=new Fa(r,"POST",function(S){const x=Gw(S,["active","final"]);let N=null;try{N=S.getResponseHeader("X-Goog-Upload-Size-Received")}catch(B){La(!1)}N||La(!1);const V=Number(N);return La(!isNaN(V)),new U_(V,s.size(),"final"===x)},i.maxUploadRetryTime);return C.headers={"X-Goog-Upload-Command":"query"},C.errorHandler=Ch(n),C}(this._ref.storage,this._ref._location,n,this._blob),d=this._ref.storage._makeRequest(l,r,s);this._request=d,d.getPromise().then(f=>{f=f,this._request=void 0,this._updateProgress(f.current),this._needToFetchStatus=!1,f.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const n=262144*this._chunkMultiplier,r=new U_(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken((l,d)=>{let f;try{f=function(i,n,r,s,l,d,f,E){const C=new U_(0,0);if(f?(C.current=f.current,C.total=f.total):(C.current=0,C.total=s.size()),s.size()!==C.total)throw new xn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const S=C.total-C.current;let x=S;l>0&&(x=Math.min(x,l));const N=C.current,W={"X-Goog-Upload-Command":x===S?"upload, finalize":"upload","X-Goog-Upload-Offset":`${C.current}`},fe=s.slice(N,N+x);if(null===fe)throw ms();const Ge=new Fa(r,"POST",function(Ze,Xt){const Zn=Gw(Ze,["active","final"]),Or=C.current+x,Xi=s.size();let Ws;return Ws="final"===Zn?Hw(n,d)(Ze,Xt):null,new U_(Or,Xi,"final"===Zn,Ws)},n.maxUploadRetryTime);return Ge.headers=W,Ge.body=fe.uploadData(),Ge.progressCallback=E||null,Ge.errorHandler=Ch(i),Ge}(this._ref._location,this._ref.storage,s,this._blob,n,this._mappings,r,this._makeProgressCallback())}catch(C){return this._error=C,void this._transition("error")}const E=this._ref.storage._makeRequest(f,l,d);this._request=E,E.getPromise().then(C=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(C.current),C.finalized?(this._metadata=C.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((n,r)=>{const s=BT(this._ref.storage,this._ref._location,this._mappings),l=this._ref.storage._makeRequest(s,n,r);this._request=l,l.getPromise().then(d=>{this._request=void 0,this._metadata=d,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((n,r)=>{const s=function(i,n,r,s,l){const d=n.bucketOnlyServerUrl(),f={"X-Goog-Upload-Protocol":"multipart"},C=function(){let Ge="";for(let Ze=0;Ze<2;Ze++)Ge+=Math.random().toString().slice(2);return Ge}();f["Content-Type"]="multipart/related; boundary="+C;const S=W1(n,s,l),x=LT(S,r),B=Yi.getBlob("--"+C+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+x+"\r\n--"+C+"\r\nContent-Type: "+S.contentType+"\r\n\r\n",s,"\r\n--"+C+"--");if(null===B)throw ms();const W={name:S.fullPath},fe=Fo(d,i.host,i._protocol),$e=i.maxUploadRetryTime,We=new Fa(fe,"POST",Hw(i,r),$e);return We.urlParams=W,We.headers=f,We.body=B.uploadData(),We.errorHandler=Ch(n),We}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),l=this._ref.storage._makeRequest(s,n,r);this._request=l,l.getPromise().then(d=>{this._request=void 0,this._metadata=d,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(n){const r=this._transferred;this._transferred=n,this._transferred!==r&&this._notifyObservers()}_transition(n){if(this._state!==n)switch(n){case"canceling":case"pausing":this._state=n,void 0!==this._request&&this._request.cancel();break;case"running":const r="paused"===this._state;this._state=n,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=n,this._notifyObservers();break;case"canceled":this._error=Fw(),this._state=n,this._notifyObservers();break;case"error":case"success":this._state=n,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const n=qw(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:n,metadata:this._metadata,task:this,ref:this._ref}}on(n,r,s,l){const d=new J1(r||void 0,s||void 0,l||void 0);return this._addObserver(d),()=>{this._removeObserver(d)}}then(n,r){return this._promise.then(n,r)}catch(n){return this.then(null,n)}_addObserver(n){this._observers.push(n),this._notifyObserver(n)}_removeObserver(n){const r=this._observers.indexOf(n);-1!==r&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(void 0!==this._resolve){let n=!0;switch(qw(this._state)){case ci.SUCCESS:Tg(this._resolve.bind(null,this.snapshot))();break;case ci.CANCELED:case ci.ERROR:Tg(this._reject.bind(null,this._error))();break;default:n=!1}n&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(n){switch(qw(this._state)){case ci.RUNNING:case ci.PAUSED:n.next&&Tg(n.next.bind(n,this.snapshot))();break;case ci.SUCCESS:n.complete&&Tg(n.complete.bind(n))();break;case ci.CANCELED:case ci.ERROR:n.error&&Tg(n.error.bind(n,this._error))();break;default:n.error&&Tg(n.error.bind(n,this._error))()}}resume(){const n="paused"===this._state||"pausing"===this._state;return n&&this._transition("running"),n}pause(){const n="running"===this._state;return n&&this._transition("pausing"),n}cancel(){const n="running"===this._state||"pausing"===this._state;return n&&this._transition("canceling"),n}}class Pc{constructor(n,r){this._service=n,this._location=r instanceof Kr?r:Kr.makeFromUrl(r,n.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(n,r){return new Pc(n,r)}get root(){const n=new Kr(this._location.bucket,"");return this._newRef(this._service,n)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $u(this._location.path)}get storage(){return this._service}get parent(){const n=function(i){if(0===i.length)return null;const n=i.lastIndexOf("/");return-1===n?"":i.slice(0,n)}(this._location.path);if(null===n)return null;const r=new Kr(this._location.bucket,n);return new Pc(this._service,r)}_throwIfRoot(n){if(""===this._location.path)throw bT(n)}}function qT(i,n,r){return zT.apply(this,arguments)}function zT(){return(zT=(0,ye.Z)(function*(i,n,r){const l=yield X1(i,{pageToken:r});n.prefixes.push(...l.prefixes),n.items.push(...l.items),null!=l.nextPageToken&&(yield qT(i,n,l.nextPageToken))})).apply(this,arguments)}function X1(i,n){return WT.apply(this,arguments)}function WT(){return(WT=(0,ye.Z)(function*(i,n){null!=n&&"number"==typeof n.maxResults&&Oc("options.maxResults",1,1e3,n.maxResults);const r=n||{},s=H1(i.storage,i._location,"/",r.pageToken,r.maxResults);return(yield i.storage.makeRequestWithTokens(s)).getPromise()})).apply(this,arguments)}function Ww(){return(Ww=(0,ye.Z)(function*(i){i._throwIfRoot("getMetadata");const n=BT(i.storage,i._location,Hu());return(yield i.storage.makeRequestWithTokens(n)).getPromise()})).apply(this,arguments)}function Zw(){return(Zw=(0,ye.Z)(function*(i,n){i._throwIfRoot("updateMetadata");const r=G1(i.storage,i._location,n,Hu());return(yield i.storage.makeRequestWithTokens(r)).getPromise()})).apply(this,arguments)}function Kw(){return(Kw=(0,ye.Z)(function*(i){i._throwIfRoot("getDownloadURL");const n=EM(i.storage,i._location,Hu());return(yield i.storage.makeRequestWithTokens(n)).getPromise().then(r=>{if(null===r)throw hM();return r})})).apply(this,arguments)}function Yw(){return(Yw=(0,ye.Z)(function*(i){i._throwIfRoot("deleteObject");const n=q1(i.storage,i._location);return(yield i.storage.makeRequestWithTokens(n)).getPromise()})).apply(this,arguments)}function ys(i,n){const r=function(i,n){const r=n.split("/").filter(s=>s.length>0).join("/");return 0===i.length?r:i+"/"+r}(i._location.path,n),s=new Kr(i._location.bucket,r);return new Pc(i.storage,s)}function KT(i,n){if(i instanceof Ag){const r=i;if(null==r._bucket)throw new xn("no-default-bucket","No default bucket found. Did you set the '"+x_+"' property when initializing the app?");const s=new Pc(r,r._bucket);return null!=n?KT(s,n):s}return void 0!==n?ys(i,n):i}function YT(i,n){if(n&&function(i){return/^[A-Za-z]+:\/\//.test(i)}(n)){if(i instanceof Ag)return function(i,n){return new Pc(i,n)}(i,n);throw wh("To use ref(service, url), the first argument must be a Storage instance.")}return KT(i,n)}function Qw(i,n){const r=null==n?void 0:n[x_];return null==r?null:Kr.makeFromBucketSpec(r,i)}class Ag{constructor(n,r,s,l,d,f){this.app=n,this._authProvider=r,this._appCheckProvider=s,this._pool=l,this._url=d,this._firebaseVersion=f,this._bucket=null,this._host=_T,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=d?Kr.makeFromBucketSpec(d,this._host):Qw(this._host,this.app.options)}get host(){return this._host}set host(n){this._host=n,this._bucket=null!=this._url?Kr.makeFromBucketSpec(this._url,n):Qw(n,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(n){Oc("time",0,Number.POSITIVE_INFINITY,n),this._maxUploadRetryTime=n}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(n){Oc("time",0,Number.POSITIVE_INFINITY,n),this._maxOperationRetryTime=n}_getAuthToken(){var n=this;return(0,ye.Z)(function*(){if(n._overrideAuthToken)return n._overrideAuthToken;const r=n._authProvider.getImmediate({optional:!0});if(r){const s=yield r.getToken();if(null!==s)return s.accessToken}return null})()}_getAppCheckToken(){var n=this;return(0,ye.Z)(function*(){const r=n._appCheckProvider.getImmediate({optional:!0});return r?(yield r.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(n=>n.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(n){return new Pc(this,n)}_makeRequest(n,r,s){if(this._deleted)return new x1(A1());{const l=function(i,n,r,s,l,d){const f=Vw(i.urlParams),E=i.url+f,C=Object.assign({},i.headers);return function(i,n){n&&(i["X-Firebase-GMPID"]=n)}(C,n),function(i,n){null!==n&&n.length>0&&(i.Authorization="Firebase "+n)}(C,r),function(i,n){i["X-Firebase-Storage-Version"]="webjs/"+(null!=n?n:"AppManager")}(C,d),function(i,n){null!==n&&(i["X-Firebase-AppCheck"]=n)}(C,s),new M1(E,i.method,C,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,l)}(n,this._appId,r,s,this._pool,this._firebaseVersion);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(n){var r=this;return(0,ye.Z)(function*(){const[s,l]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(n,s,l)})()}}function B_(i,n){return YT(i=(0,bt.m9)(i),n)}(0,jf._registerComponent)(new fa.wA("storage",function(i,{instanceIdentifier:n}){const r=i.getProvider("app").getImmediate(),s=i.getProvider("auth-internal"),l=i.getProvider("app-check-internal");return new Ag(r,s,l,new CT,n,jf.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,jf.registerVersion)("@firebase/storage","0.8.3");class kc{constructor(n,r,s){this._delegate=n,this.task=r,this.ref=s}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class $_{constructor(n,r){this._delegate=n,this._ref=r,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new kc(this._delegate.snapshot,this,this._ref)}then(n,r){return this._delegate.then(s=>{if(n)return n(new kc(s,this,this._ref))},r)}on(n,r,s,l){let d;return r&&(d="function"==typeof r?f=>r(new kc(f,this,this._ref)):{next:r.next?f=>r.next(new kc(f,this,this._ref)):void 0,complete:r.complete||void 0,error:r.error||void 0}),this._delegate.on(n,d,s||void 0,l||void 0)}}class tb{constructor(n,r){this._delegate=n,this._service=r}get prefixes(){return this._delegate.prefixes.map(n=>new _s(n,this._service))}get items(){return this._delegate.items.map(n=>new _s(n,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class _s{constructor(n,r){this._delegate=n,this.storage=r}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(n){const r=function(i,n){return ys(i,n)}(this._delegate,n);return new _s(r,this.storage)}get root(){return new _s(this._delegate.root,this.storage)}get parent(){const n=this._delegate.parent;return null==n?null:new _s(n,this.storage)}put(n,r){return this._throwIfRoot("put"),new $_(function(i,n,r){return function(i,n,r){return i._throwIfRoot("uploadBytesResumable"),new $T(i,new Yi(n),r)}(i=(0,bt.m9)(i),n,r)}(this._delegate,n,r),this)}putString(n,r=Si.RAW,s){this._throwIfRoot("putString");const l=NT(r,n),d=Object.assign({},s);return null==d.contentType&&null!=l.contentType&&(d.contentType=l.contentType),new $_(new $T(this._delegate,new Yi(l.data,!0),d),this)}listAll(){return function(i){return function(i){const n={prefixes:[],items:[]};return qT(i,n).then(()=>n)}(i=(0,bt.m9)(i))}(this._delegate).then(n=>new tb(n,this.storage))}list(n){return function(i,n){return X1(i=(0,bt.m9)(i),n)}(this._delegate,n||void 0).then(r=>new tb(r,this.storage))}getMetadata(){return function(i){return function(i){return Ww.apply(this,arguments)}(i=(0,bt.m9)(i))}(this._delegate)}updateMetadata(n){return function(i,n){return function(i,n){return Zw.apply(this,arguments)}(i=(0,bt.m9)(i),n)}(this._delegate,n)}getDownloadURL(){return function(i){return function(i){return Kw.apply(this,arguments)}(i=(0,bt.m9)(i))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(i){return function(i){return Yw.apply(this,arguments)}(i=(0,bt.m9)(i))}(this._delegate)}_throwIfRoot(n){if(""===this._delegate._location.path)throw bT(n)}}class tS{constructor(n,r){this.app=n,this._delegate=r}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(n){if(nS(n))throw wh("ref() expected a child path but got a URL, use refFromURL instead.");return new _s(B_(this._delegate,n),this)}refFromURL(n){if(!nS(n))throw wh("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Kr.makeFromUrl(n,this._delegate.host)}catch(r){throw wh("refFromUrl() expected a valid full URL but got an invalid one.")}return new _s(B_(this._delegate,n),this)}setMaxUploadRetryTime(n){this._delegate.maxUploadRetryTime=n}setMaxOperationRetryTime(n){this._delegate.maxOperationRetryTime=n}useEmulator(n,r,s={}){!function(i,n,r,s={}){!function(i,n,r,s={}){i.host=`${n}:${r}`,i._protocol="http";const{mockUserToken:l}=s;l&&(i._overrideAuthToken="string"==typeof l?l:(0,bt.Sg)(l,i.app.options.projectId))}(i,n,r,s)}(this._delegate,n,r,s)}}function nS(i){return/^[A-Za-z]+:\/\//.test(i)}function dx(i,{instanceIdentifier:n}){const r=i.getProvider("app-compat").getImmediate(),s=i.getProvider("storage").getImmediate({identifier:n});return new tS(r,s)}function Va(i){const n=function(i){return new Xn.y(n=>{const r=f=>n.next(f);r(i.snapshot);const d=i.on("state_changed",r);return i.then(f=>{r(f),n.complete()},f=>{r(i.snapshot),(f=>{n.error(f)})(f)}),function(){d()}}).pipe(function(i,n=cn.P){return r=>r.lift(new v1(i,n))}(0))}(i);return{task:i,then:i.then.bind(i),catch:i.catch.bind(i),pause:i.pause.bind(i),cancel:i.cancel.bind(i),resume:i.resume.bind(i),snapshotChanges:()=>n,percentageChanges:()=>n.pipe((0,St.U)(r=>r.bytesTransferred/r.totalBytes*100))}}function Gu(i){return{getDownloadURL:()=>(0,it.of)(void 0).pipe(Yt.fc,Nr(()=>i.getDownloadURL()),Yt.iC),getMetadata:()=>(0,it.of)(void 0).pipe(Yt.fc,Nr(()=>i.getMetadata()),Yt.iC),delete:()=>(0,Jt.D)(i.delete()),child:n=>Gu(i.child(n)),updateMetadata:n=>(0,Jt.D)(i.updateMetadata(n)),put:(n,r)=>Va(i.put(n,r)),putString:(n,r,s)=>Va(i.putString(n,r,s)),listAll:()=>(0,Jt.D)(i.listAll())}}!function(i){const n={TaskState:ci,TaskEvent:Q1,StringFormat:Si,Storage:tS,Reference:_s};i.INTERNAL.registerComponent(new fa.wA("storage-compat",dx,"PUBLIC").setServiceProps(n).setMultipleInstances(!0)),i.registerVersion("@firebase/storage-compat","0.1.3")}(Um.Z);const nb=new m.OlP("angularfire2.storageBucket"),px=new m.OlP("angularfire2.storage.maxUploadRetryTime"),gx=new m.OlP("angularfire2.storage.maxOperationRetryTime"),mx=new m.OlP("angularfire2.storage.use-emulator");let rb=(()=>{class i{constructor(r,s,l,d,f,E,C,S,x){const N=(0,Lt.on)(r,f,s);this.storage=(0,Yt.cc)(`${N.name}.storage.${l}`,"AngularFireStorage",N.name,()=>{const V=f.runOutsideAngular(()=>N.storage(l||void 0)),B=x;return B&&V.useEmulator(...B),C&&V.setMaxUploadRetryTime(C),S&&V.setMaxOperationRetryTime(S),V},[C,S])}ref(r){return Gu(this.storage.ref(r))}refFromURL(r){return Gu(this.storage.refFromURL(r))}upload(r,s,l){return Gu(this.storage.ref(r)).put(s,l)}}return i.\u0275fac=function(r){return new(r||i)(m.LFG(Lt.Dh),m.LFG(Lt.xv,8),m.LFG(nb,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Yt.HU),m.LFG(px,8),m.LFG(gx,8),m.LFG(mx,8))},i.\u0275prov=m.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),iS=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=m.oAB({type:i}),i.\u0275inj=m.cJS({}),i})(),sS=(()=>{class i{constructor(){Tw.Z.registerVersion("angularfire",Yt.q4.full,"gcs-compat")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=m.oAB({type:i}),i.\u0275inj=m.cJS({providers:[rb],imports:[iS]}),i})();var ib=F(9796),yx=F(1555);function vs(i,n){return new Xn.y(r=>{const s=i.length;if(0===s)return void r.complete();const l=new Array(s);let d=0,f=0;for(let E=0;E<s;E++){const C=(0,Jt.D)(i[E]);let S=!1;r.add(C.subscribe({next:x=>{S||(S=!0,f++),l[E]=x},error:x=>r.error(x),complete:()=>{d++,(d===s||!S)&&(f===s&&r.next(n?n.reduce((x,N,V)=>(x[N]=l[V],x),{}):l),r.complete())}}))}})}let Ih=(()=>{class i{constructor(r,s){this._renderer=r,this._elementRef=s,this.onChange=l=>{},this.onTouched=()=>{}}setProperty(r,s){this._renderer.setProperty(this._elementRef.nativeElement,r,s)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}}return i.\u0275fac=function(r){return new(r||i)(m.Y36(m.Qsj),m.Y36(m.SBq))},i.\u0275dir=m.lG2({type:i}),i})(),Es=(()=>{class i extends Ih{}return i.\u0275fac=function(){let n;return function(s){return(n||(n=m.n5z(i)))(s||i)}}(),i.\u0275dir=m.lG2({type:i,features:[m.qOj]}),i})();const Qi=new m.OlP("NgValueAccessor"),vx={provide:Qi,useExisting:(0,m.Gpc)(()=>Ng),multi:!0},aS=new m.OlP("CompositionEventMode");let Ng=(()=>{class i extends Ih{constructor(r,s,l){super(r,s),this._compositionMode=l,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const i=j()?j().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(r){this.setProperty("value",null==r?"":r)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}}return i.\u0275fac=function(r){return new(r||i)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(aS,8))},i.\u0275dir=m.lG2({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){1&r&&m.NdJ("input",function(d){return s._handleInput(d.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(d){return s._compositionEnd(d.target.value)})},features:[m._Bn([vx]),m.qOj]}),i})();const gr=new m.OlP("NgValidators"),qu=new m.OlP("NgAsyncValidators");function cS(i){return null!=i}function Sx(i){const n=(0,m.QGY)(i)?(0,Jt.D)(i):i;return(0,m.CqO)(n),n}function Ax(i){let n={};return i.forEach(r=>{n=null!=r?Object.assign(Object.assign({},n),r):n}),0===Object.keys(n).length?null:n}function Rx(i,n){return n.map(r=>r(i))}function dS(i){return i.map(n=>function(i){return!i.validate}(n)?n:r=>n.validate(r))}function hS(i){return null!=i?function(i){if(!i)return null;const n=i.filter(cS);return 0==n.length?null:function(r){return Ax(Rx(r,n))}}(dS(i)):null}function fS(i){return null!=i?function(i){if(!i)return null;const n=i.filter(cS);return 0==n.length?null:function(r){return function(...i){if(1===i.length){const n=i[0];if((0,ib.k)(n))return vs(n,null);if((0,yx.K)(n)&&Object.getPrototypeOf(n)===Object.prototype){const r=Object.keys(n);return vs(r.map(s=>n[s]),r)}}if("function"==typeof i[i.length-1]){const n=i.pop();return vs(i=1===i.length&&(0,ib.k)(i[0])?i[0]:i,null).pipe((0,St.U)(r=>n(...r)))}return vs(i,null)}(Rx(r,n).map(Sx)).pipe((0,St.U)(Ax))}}(dS(i)):null}function o(i,n){return null===i?[n]:Array.isArray(i)?[...i,n]:[i,n]}function c(i){return i?Array.isArray(i)?i:[i]:[]}function h(i,n){return Array.isArray(i)?i.includes(n):i===n}function g(i,n){const r=c(n);return c(i).forEach(l=>{h(r,l)||r.push(l)}),r}function v(i,n){return c(n).filter(r=>!h(i,r))}let w=(()=>{class i{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(r){this._rawValidators=r||[],this._composedValidatorFn=hS(this._rawValidators)}_setAsyncValidators(r){this._rawAsyncValidators=r||[],this._composedAsyncValidatorFn=fS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(r){this._onDestroyCallbacks.push(r)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(r=>r()),this._onDestroyCallbacks=[]}reset(r){this.control&&this.control.reset(r)}hasError(r,s){return!!this.control&&this.control.hasError(r,s)}getError(r,s){return this.control?this.control.getError(r,s):null}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275dir=m.lG2({type:i}),i})(),D=(()=>{class i extends w{get formDirective(){return null}get path(){return null}}return i.\u0275fac=function(){let n;return function(s){return(n||(n=m.n5z(i)))(s||i)}}(),i.\u0275dir=m.lG2({type:i,features:[m.qOj]}),i})();class T extends w{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class A{constructor(n){this._cd=n}is(n){var r,s,l;return"submitted"===n?!!(null===(r=this._cd)||void 0===r?void 0:r.submitted):!!(null===(l=null===(s=this._cd)||void 0===s?void 0:s.control)||void 0===l?void 0:l[n])}}let U=(()=>{class i extends A{constructor(r){super(r)}}return i.\u0275fac=function(r){return new(r||i)(m.Y36(T,2))},i.\u0275dir=m.lG2({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){2&r&&m.ekj("ng-untouched",s.is("untouched"))("ng-touched",s.is("touched"))("ng-pristine",s.is("pristine"))("ng-dirty",s.is("dirty"))("ng-valid",s.is("valid"))("ng-invalid",s.is("invalid"))("ng-pending",s.is("pending"))},features:[m.qOj]}),i})(),q=(()=>{class i extends A{constructor(r){super(r)}}return i.\u0275fac=function(r){return new(r||i)(m.Y36(D,10))},i.\u0275dir=m.lG2({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){2&r&&m.ekj("ng-untouched",s.is("untouched"))("ng-touched",s.is("touched"))("ng-pristine",s.is("pristine"))("ng-dirty",s.is("dirty"))("ng-valid",s.is("valid"))("ng-invalid",s.is("invalid"))("ng-pending",s.is("pending"))("ng-submitted",s.is("submitted"))},features:[m.qOj]}),i})();function Fc(i,n){Og(i,n),n.valueAccessor.writeValue(i.value),function(i,n){n.valueAccessor.registerOnChange(r=>{i._pendingValue=r,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&TM(i,n)})}(i,n),function(i,n){const r=(s,l)=>{n.valueAccessor.writeValue(s),l&&n.viewToModelUpdate(s)};i.registerOnChange(r),n._registerOnDestroy(()=>{i._unregisterOnChange(r)})}(i,n),function(i,n){n.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&TM(i,n),"submit"!==i.updateOn&&i.markAsTouched()})}(i,n),function(i,n){if(n.valueAccessor.setDisabledState){const r=s=>{n.valueAccessor.setDisabledState(s)};i.registerOnDisabledChange(r),n._registerOnDestroy(()=>{i._unregisterOnDisabledChange(r)})}}(i,n)}function Ah(i,n){i.forEach(r=>{r.registerOnValidatorChange&&r.registerOnValidatorChange(n)})}function Og(i,n){const r=function(i){return i._rawValidators}(i);null!==n.validator?i.setValidators(o(r,n.validator)):"function"==typeof r&&i.setValidators([r]);const s=function(i){return i._rawAsyncValidators}(i);null!==n.asyncValidator?i.setAsyncValidators(o(s,n.asyncValidator)):"function"==typeof s&&i.setAsyncValidators([s]);const l=()=>i.updateValueAndValidity();Ah(n._rawValidators,l),Ah(n._rawAsyncValidators,l)}function TM(i,n){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function gS(i,n){const r=i.indexOf(n);r>-1&&i.splice(r,1)}const ab="VALID",mS="INVALID",q_="PENDING",ub="DISABLED";function Px(i){return(Fx(i)?i.validators:i)||null}function RM(i){return Array.isArray(i)?hS(i):i||null}function kx(i,n){return(Fx(n)?n.asyncValidators:i)||null}function xM(i){return Array.isArray(i)?fS(i):i||null}function Fx(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}class Lx{constructor(n,r){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=r,this._composedValidatorFn=RM(this._rawValidators),this._composedAsyncValidatorFn=xM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===ab}get invalid(){return this.status===mS}get pending(){return this.status==q_}get disabled(){return this.status===ub}get enabled(){return this.status!==ub}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=RM(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=xM(n)}addValidators(n){this.setValidators(g(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(g(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(v(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(v(n,this._rawAsyncValidators))}hasValidator(n){return h(this._rawValidators,n)}hasAsyncValidator(n){return h(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(r=>{r.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=q_,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const r=this._parentMarkedDirty(n.onlySelf);this.status=ub,this.errors=null,this._forEachChild(s=>{s.disable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:r})),this._onDisabledChange.forEach(s=>s(!0))}enable(n={}){const r=this._parentMarkedDirty(n.onlySelf);this.status=ab,this._forEachChild(s=>{s.enable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:r})),this._onDisabledChange.forEach(s=>s(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ab||this.status===q_)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(r=>r._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ub:ab}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=q_,this._hasOwnPendingAsyncValidator=!0;const r=Sx(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(s=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(s,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,r={}){this.errors=n,this._updateControlsErrors(!1!==r.emitEvent)}get(n){return function(i,n,r){if(null==n||(Array.isArray(n)||(n=n.split(".")),Array.isArray(n)&&0===n.length))return null;let s=i;return n.forEach(l=>{s=s instanceof Vx?s.controls.hasOwnProperty(l)?s.controls[l]:null:s instanceof _P&&s.at(l)||null}),s}(this,n)}getError(n,r){const s=r?this.get(r):this;return s&&s.errors?s.errors[n]:null}hasError(n,r){return!!this.getError(n,r)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new m.vpe,this.statusChanges=new m.vpe}_calculateStatus(){return this._allControlsDisabled()?ub:this.errors?mS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(q_)?q_:this._anyControlsHaveStatus(mS)?mS:ab}_anyControlsHaveStatus(n){return this._anyControls(r=>r.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_isBoxedValue(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){Fx(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class yS extends Lx{constructor(n=null,r,s){super(Px(r),kx(s,r)),this._onChange=[],this._applyFormState(n),this._setUpdateStrategy(r),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(n,r={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==r.emitModelToViewChange&&this._onChange.forEach(s=>s(this.value,!1!==r.emitViewToModelChange)),this.updateValueAndValidity(r)}patchValue(n,r={}){this.setValue(n,r)}reset(n=null,r={}){this._applyFormState(n),this.markAsPristine(r),this.markAsUntouched(r),this.setValue(this.value,r),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){gS(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){gS(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){this._isBoxedValue(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}}class Vx extends Lx{constructor(n,r,s){super(Px(r),kx(s,r)),this.controls=n,this._initObservables(),this._setUpdateStrategy(r),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,r){return this.controls[n]?this.controls[n]:(this.controls[n]=r,r.setParent(this),r._registerOnCollectionChange(this._onCollectionChange),r)}addControl(n,r,s={}){this.registerControl(n,r),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}removeControl(n,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}setControl(n,r,s={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],r&&this.registerControl(n,r),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,r={}){this._checkAllValuesPresent(n),Object.keys(n).forEach(s=>{this._throwIfControlMissing(s),this.controls[s].setValue(n[s],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}patchValue(n,r={}){null!=n&&(Object.keys(n).forEach(s=>{this.controls[s]&&this.controls[s].patchValue(n[s],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r))}reset(n={},r={}){this._forEachChild((s,l)=>{s.reset(n[l],{onlySelf:!0,emitEvent:r.emitEvent})}),this._updatePristine(r),this._updateTouched(r),this.updateValueAndValidity(r)}getRawValue(){return this._reduceChildren({},(n,r,s)=>(n[s]=r instanceof yS?r.value:r.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(r,s)=>!!s._syncPendingControls()||r);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_throwIfControlMissing(n){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[n])throw new Error(`Cannot find form control with name: ${n}.`)}_forEachChild(n){Object.keys(this.controls).forEach(r=>{const s=this.controls[r];s&&n(s,r)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const r of Object.keys(this.controls)){const s=this.controls[r];if(this.contains(r)&&n(s))return!0}return!1}_reduceValue(){return this._reduceChildren({},(n,r,s)=>((r.enabled||this.disabled)&&(n[s]=r.value),n))}_reduceChildren(n,r){let s=n;return this._forEachChild((l,d)=>{s=r(s,l,d)}),s}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(n){this._forEachChild((r,s)=>{if(void 0===n[s])throw new Error(`Must supply a value for form control with name: '${s}'.`)})}}class _P extends Lx{constructor(n,r,s){super(Px(r),kx(s,r)),this.controls=n,this._initObservables(),this._setUpdateStrategy(r),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[n]}push(n,r={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}insert(n,r,s={}){this.controls.splice(n,0,r),this._registerControl(r),this.updateValueAndValidity({emitEvent:s.emitEvent})}removeAt(n,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:r.emitEvent})}setControl(n,r,s={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),r&&(this.controls.splice(n,0,r),this._registerControl(r)),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,r={}){this._checkAllValuesPresent(n),n.forEach((s,l)=>{this._throwIfControlMissing(l),this.at(l).setValue(s,{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}patchValue(n,r={}){null!=n&&(n.forEach((s,l)=>{this.at(l)&&this.at(l).patchValue(s,{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r))}reset(n=[],r={}){this._forEachChild((s,l)=>{s.reset(n[l],{onlySelf:!0,emitEvent:r.emitEvent})}),this._updatePristine(r),this._updateTouched(r),this.updateValueAndValidity(r)}getRawValue(){return this.controls.map(n=>n instanceof yS?n.value:n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(r=>r._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_syncPendingControls(){let n=this.controls.reduce((r,s)=>!!s._syncPendingControls()||r,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_throwIfControlMissing(n){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(n))throw new Error(`Cannot find form control at index ${n}`)}_forEachChild(n){this.controls.forEach((r,s)=>{n(r,s)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(r=>r.enabled&&n(r))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_checkAllValuesPresent(n){this._forEachChild((r,s)=>{if(void 0===n[s])throw new Error(`Must supply a value for form control at index: ${s}.`)})}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}}const vP={provide:D,useExisting:(0,m.Gpc)(()=>_S)},lb=(()=>Promise.resolve(null))();let _S=(()=>{class i extends D{constructor(r,s){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new m.vpe,this.form=new Vx({},hS(r),fS(s))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){lb.then(()=>{const s=this._findContainer(r.path);r.control=s.registerControl(r.name,r.control),Fc(r.control,r),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){lb.then(()=>{const s=this._findContainer(r.path);s&&s.removeControl(r.name),gS(this._directives,r)})}addFormGroup(r){lb.then(()=>{const s=this._findContainer(r.path),l=new Vx({});(function(i,n){Og(i,n)})(l,r),s.registerControl(r.name,l),l.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){lb.then(()=>{const s=this._findContainer(r.path);s&&s.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,s){lb.then(()=>{this.form.get(r.path).setValue(s)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,function(i,n){i._syncPendingControls(),n.forEach(r=>{const s=r.control;"submit"===s.updateOn&&s._pendingChange&&(r.viewToModelUpdate(s._pendingValue),s._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(r),!1}onReset(){this.resetForm()}resetForm(r){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}}return i.\u0275fac=function(r){return new(r||i)(m.Y36(gr,10),m.Y36(qu,10))},i.\u0275dir=m.lG2({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,s){1&r&&m.NdJ("submit",function(d){return s.onSubmit(d)})("reset",function(){return s.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[m._Bn([vP]),m.qOj]}),i})();const wP={provide:T,useExisting:(0,m.Gpc)(()=>Ux)},OM=(()=>Promise.resolve(null))();let Ux=(()=>{class i extends T{constructor(r,s,l,d){super(),this.control=new yS,this._registered=!1,this.update=new m.vpe,this._parent=r,this._setValidators(s),this._setAsyncValidators(l),this.valueAccessor=function(i,n){if(!n)return null;let r,s,l;return Array.isArray(n),n.forEach(d=>{d.constructor===Ng?r=d:function(i){return Object.getPrototypeOf(i.constructor)===Es}(d)?s=d:l=d}),l||s||r||null}(0,d)}ngOnChanges(r){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in r&&this._updateDisabled(r),function(i,n){if(!i.hasOwnProperty("model"))return!1;const r=i.model;return!!r.isFirstChange()||!Object.is(n,r.currentValue)}(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(i,n){return[...n.path,i]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Fc(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(r){OM.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1})})}_updateDisabled(r){const s=r.isDisabled.currentValue,l=""===s||s&&"false"!==s;OM.then(()=>{l&&!this.control.disabled?this.control.disable():!l&&this.control.disabled&&this.control.enable()})}}return i.\u0275fac=function(r){return new(r||i)(m.Y36(D,9),m.Y36(gr,10),m.Y36(qu,10),m.Y36(Qi,10))},i.\u0275dir=m.lG2({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[m._Bn([wP]),m.qOj,m.TTD]}),i})(),PM=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275dir=m.lG2({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),i})(),FM=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=m.oAB({type:i}),i.\u0275inj=m.cJS({}),i})(),XM=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=m.oAB({type:i}),i.\u0275inj=m.cJS({imports:[[FM]]}),i})(),qP=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=m.oAB({type:i}),i.\u0275inj=m.cJS({imports:[XM]}),i})();class ja extends xc.xQ{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const r=super._subscribe(n);return r&&!r.closed&&n.next(this._value),r}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new n1.N;return this._value}next(n){super.next(this._value=n)}}class zP extends Gn.L{notifyNext(n,r,s,l,d){this.destination.next(r)}notifyError(n,r){this.destination.error(n)}notifyComplete(n){this.destination.complete()}}class WP extends Gn.L{constructor(n,r,s){super(),this.parent=n,this.outerValue=r,this.outerIndex=s,this.index=0}_next(n){this.parent.notifyNext(this.outerValue,n,this.outerIndex,this.index++,this)}_error(n){this.parent.notifyError(n,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var ZP=F(7444);function KP(i,n,r,s,l=new WP(i,r,s)){if(!l.closed)return n instanceof Xn.y?n.subscribe(l):(0,ZP.s)(n)(l)}var YP=F(6693);const eO={};class JP{constructor(n){this.resultSelector=n}call(n,r){return r.subscribe(new XP(n,this.resultSelector))}}class XP extends zP{constructor(n,r){super(n),this.resultSelector=r,this.active=0,this.values=[],this.observables=[]}_next(n){this.values.push(eO),this.observables.push(n)}_complete(){const n=this.observables,r=n.length;if(0===r)this.destination.complete();else{this.active=r,this.toRespond=r;for(let s=0;s<r;s++)this.add(KP(this,n[s],void 0,s))}}notifyComplete(n){0==(this.active-=1)&&this.destination.complete()}notifyNext(n,r,s){const l=this.values,f=this.toRespond?l[s]===eO?--this.toRespond:this.toRespond:0;l[s]=r,0===f&&(this.resultSelector?this._tryResultSelector(l):this.destination.next(l.slice()))}_tryResultSelector(n){let r;try{r=this.resultSelector.apply(this,n)}catch(s){return void this.destination.error(s)}this.destination.next(r)}}function tO(i){return new Xn.y(n=>{let r;try{r=i()}catch(l){return void n.error(l)}return(r?(0,Jt.D)(r):(0,Nc.c)()).subscribe(n)})}var ek=F(2441);function Pg(i){return function(r){const s=new tk(i),l=r.lift(s);return s.caught=l}}class tk{constructor(n){this.selector=n}call(n,r){return r.subscribe(new nk(n,this.selector,this.caught))}}class nk extends bg.Ds{constructor(n,r,s){super(n),this.selector=r,this.caught=s}error(n){if(!this.isStopped){let r;try{r=this.selector(n,this.caught)}catch(d){return void super.error(d)}this._unsubscribeAndRecycle();const s=new bg.IY(this);this.add(s);const l=(0,bg.ft)(r,s);l!==s&&this.add(l)}}}var Ji=F(9773);function cb(i,n){return(0,Ji.zg)(i,n,1)}function Wx(i){return function(r){return 0===i?(0,Nc.c)():r.lift(new rk(i))}}class rk{constructor(n){if(this.total=n,this.total<0)throw new s1}call(n,r){return r.subscribe(new ik(n,this.total))}}class ik extends Gn.L{constructor(n,r){super(n),this.total=r,this.ring=new Array,this.count=0}_next(n){const r=this.ring,s=this.total,l=this.count++;r.length<s?r.push(n):r[l%s]=n}_complete(){const n=this.destination;let r=this.count;if(r>0){const s=this.count>=this.total?this.total:this.count,l=this.ring;for(let d=0;d<s;d++){const f=r++%s;n.next(l[f])}}n.complete()}}var zs=F(3342),ok=F(1307);class uk{constructor(n){this.callback=n}call(n,r){return r.subscribe(new lk(n,this.callback))}}class lk extends Gn.L{constructor(n,r){super(n),this.add(new t1.w(r))}}class Lc{constructor(n,r){this.id=n,this.url=r}}class Zx extends Lc{constructor(n,r,s="imperative",l=null){super(n,r),this.navigationTrigger=s,this.restoredState=l}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class db extends Lc{constructor(n,r,s){super(n,r),this.urlAfterRedirects=s}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class nO extends Lc{constructor(n,r,s){super(n,r),this.reason=s}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ck extends Lc{constructor(n,r,s){super(n,r),this.error=s}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class dk extends Lc{constructor(n,r,s,l){super(n,r),this.urlAfterRedirects=s,this.state=l}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hk extends Lc{constructor(n,r,s,l){super(n,r),this.urlAfterRedirects=s,this.state=l}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fk extends Lc{constructor(n,r,s,l,d){super(n,r),this.urlAfterRedirects=s,this.state=l,this.shouldActivate=d}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class pk extends Lc{constructor(n,r,s,l){super(n,r),this.urlAfterRedirects=s,this.state=l}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gk extends Lc{constructor(n,r,s,l){super(n,r),this.urlAfterRedirects=s,this.state=l}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rO{constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class iO{constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class mk{constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yk{constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _k{constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vk{constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sO{constructor(n,r,s){this.routerEvent=n,this.position=r,this.anchor=s}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ft="primary";class Ek{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const r=this.params[n];return Array.isArray(r)?r[0]:r}return null}getAll(n){if(this.has(n)){const r=this.params[n];return Array.isArray(r)?r:[r]}return[]}get keys(){return Object.keys(this.params)}}function z_(i){return new Ek(i)}const oO="ngNavigationCancelingError";function Kx(i){const n=Error("NavigationCancelingError: "+i);return n[oO]=!0,n}function bk(i,n,r){const s=r.path.split("/");if(s.length>i.length||"full"===r.pathMatch&&(n.hasChildren()||s.length<i.length))return null;const l={};for(let d=0;d<s.length;d++){const f=s[d],E=i[d];if(f.startsWith(":"))l[f.substring(1)]=E;else if(f!==E.path)return null}return{consumed:i.slice(0,s.length),posParams:l}}function Zu(i,n){const r=i?Object.keys(i):void 0,s=n?Object.keys(n):void 0;if(!r||!s||r.length!=s.length)return!1;let l;for(let d=0;d<r.length;d++)if(l=r[d],!aO(i[l],n[l]))return!1;return!0}function aO(i,n){if(Array.isArray(i)&&Array.isArray(n)){if(i.length!==n.length)return!1;const r=[...i].sort(),s=[...n].sort();return r.every((l,d)=>s[d]===l)}return i===n}function uO(i){return Array.prototype.concat.apply([],i)}function lO(i){return i.length>0?i[i.length-1]:null}function di(i,n){for(const r in i)i.hasOwnProperty(r)&&n(i[r],r)}function Ku(i){return(0,m.CqO)(i)?i:(0,m.QGY)(i)?(0,Jt.D)(Promise.resolve(i)):(0,it.of)(i)}const Dk={exact:function hO(i,n,r){if(!Fg(i.segments,n.segments)||!vS(i.segments,n.segments,r)||i.numberOfChildren!==n.numberOfChildren)return!1;for(const s in n.children)if(!i.children[s]||!hO(i.children[s],n.children[s],r))return!1;return!0},subset:fO},cO={exact:function(i,n){return Zu(i,n)},subset:function(i,n){return Object.keys(n).length<=Object.keys(i).length&&Object.keys(n).every(r=>aO(i[r],n[r]))},ignored:()=>!0};function dO(i,n,r){return Dk[r.paths](i.root,n.root,r.matrixParams)&&cO[r.queryParams](i.queryParams,n.queryParams)&&!("exact"===r.fragment&&i.fragment!==n.fragment)}function fO(i,n,r){return pO(i,n,n.segments,r)}function pO(i,n,r,s){if(i.segments.length>r.length){const l=i.segments.slice(0,r.length);return!(!Fg(l,r)||n.hasChildren()||!vS(l,r,s))}if(i.segments.length===r.length){if(!Fg(i.segments,r)||!vS(i.segments,r,s))return!1;for(const l in n.children)if(!i.children[l]||!fO(i.children[l],n.children[l],s))return!1;return!0}{const l=r.slice(0,i.segments.length),d=r.slice(i.segments.length);return!!(Fg(i.segments,l)&&vS(i.segments,l,s)&&i.children[Ft])&&pO(i.children[Ft],n,d,s)}}function vS(i,n,r){return n.every((s,l)=>cO[r](i[l].parameters,s.parameters))}class kg{constructor(n,r,s){this.root=n,this.queryParams=r,this.fragment=s}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=z_(this.queryParams)),this._queryParamMap}toString(){return xk.serialize(this)}}class Ut{constructor(n,r){this.segments=n,this.children=r,this.parent=null,di(r,(s,l)=>s.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ES(this)}}class hb{constructor(n,r){this.path=n,this.parameters=r}get parameterMap(){return this._parameterMap||(this._parameterMap=z_(this.parameters)),this._parameterMap}toString(){return _O(this)}}function Fg(i,n){return i.length===n.length&&i.every((r,s)=>r.path===n[s].path)}class Yx{}class gO{parse(n){const r=new Uk(n);return new kg(r.parseRootSegment(),r.parseQueryParams(),r.parseFragment())}serialize(n){return`${`/${fb(n.root,!0)}`}${function(i){const n=Object.keys(i).map(r=>{const s=i[r];return Array.isArray(s)?s.map(l=>`${wS(r)}=${wS(l)}`).join("&"):`${wS(r)}=${wS(s)}`}).filter(r=>!!r);return n.length?`?${n.join("&")}`:""}(n.queryParams)}${"string"==typeof n.fragment?`#${function(i){return encodeURI(i)}(n.fragment)}`:""}`}}const xk=new gO;function ES(i){return i.segments.map(n=>_O(n)).join("/")}function fb(i,n){if(!i.hasChildren())return ES(i);if(n){const r=i.children[Ft]?fb(i.children[Ft],!1):"",s=[];return di(i.children,(l,d)=>{d!==Ft&&s.push(`${d}:${fb(l,!1)}`)}),s.length>0?`${r}(${s.join("//")})`:r}{const r=function(i,n){let r=[];return di(i.children,(s,l)=>{l===Ft&&(r=r.concat(n(s,l)))}),di(i.children,(s,l)=>{l!==Ft&&(r=r.concat(n(s,l)))}),r}(i,(s,l)=>l===Ft?[fb(i.children[Ft],!1)]:[`${l}:${fb(s,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[Ft]?`${ES(i)}/${r[0]}`:`${ES(i)}/(${r.join("//")})`}}function mO(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function wS(i){return mO(i).replace(/%3B/gi,";")}function Qx(i){return mO(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bS(i){return decodeURIComponent(i)}function yO(i){return bS(i.replace(/\+/g,"%20"))}function _O(i){return`${Qx(i.path)}${function(i){return Object.keys(i).map(n=>`;${Qx(n)}=${Qx(i[n])}`).join("")}(i.parameters)}`}const Pk=/^[^\/()?;=#]+/;function CS(i){const n=i.match(Pk);return n?n[0]:""}const kk=/^[^=?&#]+/,Lk=/^[^?&#]+/;class Uk{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ut([],{}):new Ut([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0));let s={};return this.peekStartsWith("(")&&(s=this.parseParens(!1)),(n.length>0||Object.keys(r).length>0)&&(s[Ft]=new Ut(n,r)),s}parseSegment(){const n=CS(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(n),new hb(bS(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const r=CS(this.remaining);if(!r)return;this.capture(r);let s="";if(this.consumeOptional("=")){const l=CS(this.remaining);l&&(s=l,this.capture(s))}n[bS(r)]=bS(s)}parseQueryParam(n){const r=function(i){const n=i.match(kk);return n?n[0]:""}(this.remaining);if(!r)return;this.capture(r);let s="";if(this.consumeOptional("=")){const f=function(i){const n=i.match(Lk);return n?n[0]:""}(this.remaining);f&&(s=f,this.capture(s))}const l=yO(r),d=yO(s);if(n.hasOwnProperty(l)){let f=n[l];Array.isArray(f)||(f=[f],n[l]=f),f.push(d)}else n[l]=d}parseParens(n){const r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const s=CS(this.remaining),l=this.remaining[s.length];if("/"!==l&&")"!==l&&";"!==l)throw new Error(`Cannot parse url '${this.url}'`);let d;s.indexOf(":")>-1?(d=s.substr(0,s.indexOf(":")),this.capture(d),this.capture(":")):n&&(d=Ft);const f=this.parseChildren();r[d]=1===Object.keys(f).length?f[Ft]:new Ut([],f),this.consumeOptional("//")}return r}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new Error(`Expected "${n}".`)}}class vO{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const r=this.pathFromRoot(n);return r.length>1?r[r.length-2]:null}children(n){const r=Jx(n,this._root);return r?r.children.map(s=>s.value):[]}firstChild(n){const r=Jx(n,this._root);return r&&r.children.length>0?r.children[0].value:null}siblings(n){const r=Xx(n,this._root);return r.length<2?[]:r[r.length-2].children.map(l=>l.value).filter(l=>l!==n)}pathFromRoot(n){return Xx(n,this._root).map(r=>r.value)}}function Jx(i,n){if(i===n.value)return n;for(const r of n.children){const s=Jx(i,r);if(s)return s}return null}function Xx(i,n){if(i===n.value)return[n];for(const r of n.children){const s=Xx(i,r);if(s.length)return s.unshift(n),s}return[]}class Vc{constructor(n,r){this.value=n,this.children=r}toString(){return`TreeNode(${this.value})`}}function pb(i){const n={};return i&&i.children.forEach(r=>n[r.value.outlet]=r),n}class EO extends vO{constructor(n,r){super(n),this.snapshot=r,eN(this,n)}toString(){return this.snapshot.toString()}}function wO(i,n){const r=function(i,n){const f=new IS([],{},{},"",{},Ft,n,null,i.root,-1,{});return new CO("",new Vc(f,[]))}(i,n),s=new ja([new hb("",{})]),l=new ja({}),d=new ja({}),f=new ja({}),E=new ja(""),C=new W_(s,l,f,E,d,Ft,n,r.root);return C.snapshot=r.root,new EO(new Vc(C,[]),r)}class W_{constructor(n,r,s,l,d,f,E,C){this.url=n,this.params=r,this.queryParams=s,this.fragment=l,this.data=d,this.outlet=f,this.component=E,this._futureSnapshot=C}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,St.U)(n=>z_(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,St.U)(n=>z_(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function bO(i,n="emptyOnly"){const r=i.pathFromRoot;let s=0;if("always"!==n)for(s=r.length-1;s>=1;){const l=r[s],d=r[s-1];if(l.routeConfig&&""===l.routeConfig.path)s--;else{if(d.component)break;s--}}return function(i){return i.reduce((n,r)=>({params:Object.assign(Object.assign({},n.params),r.params),data:Object.assign(Object.assign({},n.data),r.data),resolve:Object.assign(Object.assign({},n.resolve),r._resolvedData)}),{params:{},data:{},resolve:{}})}(r.slice(s))}class IS{constructor(n,r,s,l,d,f,E,C,S,x,N){this.url=n,this.params=r,this.queryParams=s,this.fragment=l,this.data=d,this.outlet=f,this.component=E,this.routeConfig=C,this._urlSegment=S,this._lastPathIndex=x,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=z_(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=z_(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(s=>s.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class CO extends vO{constructor(n,r){super(r),this.url=n,eN(this,r)}toString(){return IO(this._root)}}function eN(i,n){n.value._routerState=i,n.children.forEach(r=>eN(i,r))}function IO(i){const n=i.children.length>0?` { ${i.children.map(IO).join(", ")} } `:"";return`${i.value}${n}`}function tN(i){if(i.snapshot){const n=i.snapshot,r=i._futureSnapshot;i.snapshot=r,Zu(n.queryParams,r.queryParams)||i.queryParams.next(r.queryParams),n.fragment!==r.fragment&&i.fragment.next(r.fragment),Zu(n.params,r.params)||i.params.next(r.params),function(i,n){if(i.length!==n.length)return!1;for(let r=0;r<i.length;++r)if(!Zu(i[r],n[r]))return!1;return!0}(n.url,r.url)||i.url.next(r.url),Zu(n.data,r.data)||i.data.next(r.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function nN(i,n){return Zu(i.params,n.params)&&function(i,n){return Fg(i,n)&&i.every((r,s)=>Zu(r.parameters,n[s].parameters))}(i.url,n.url)&&!(!i.parent!=!n.parent)&&(!i.parent||nN(i.parent,n.parent))}function DS(i,n,r){if(r&&i.shouldReuseRoute(n.value,r.value.snapshot)){const s=r.value;s._futureSnapshot=n.value;const l=function(i,n,r){return n.children.map(s=>{for(const l of r.children)if(i.shouldReuseRoute(s.value,l.value.snapshot))return DS(i,s,l);return DS(i,s)})}(i,n,r);return new Vc(s,l)}{if(i.shouldAttach(n.value)){const d=i.retrieve(n.value);if(null!==d){const f=d.route;return DO(n,f),f}}const s=function(i){return new W_(new ja(i.url),new ja(i.params),new ja(i.queryParams),new ja(i.fragment),new ja(i.data),i.outlet,i.component,i)}(n.value),l=n.children.map(d=>DS(i,d));return new Vc(s,l)}}function DO(i,n){if(i.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(i.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=i.value;for(let r=0;r<i.children.length;++r)DO(i.children[r],n.children[r])}function TS(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function gb(i){return"object"==typeof i&&null!=i&&i.outlets}function rN(i,n,r,s,l){let d={};return s&&di(s,(f,E)=>{d[E]=Array.isArray(f)?f.map(C=>`${C}`):`${f}`}),new kg(r.root===i?n:TO(r.root,i,n),d,l)}function TO(i,n,r){const s={};return di(i.children,(l,d)=>{s[d]=l===n?r:TO(l,n,r)}),new Ut(i.segments,s)}class SO{constructor(n,r,s){if(this.isAbsolute=n,this.numberOfDoubleDots=r,this.commands=s,n&&s.length>0&&TS(s[0]))throw new Error("Root segment cannot have matrix parameters");const l=s.find(gb);if(l&&l!==lO(s))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class iN{constructor(n,r,s){this.segmentGroup=n,this.processChildren=r,this.index=s}}function AO(i,n,r){if(i||(i=new Ut([],{})),0===i.segments.length&&i.hasChildren())return SS(i,n,r);const s=function(i,n,r){let s=0,l=n;const d={match:!1,pathIndex:0,commandIndex:0};for(;l<i.segments.length;){if(s>=r.length)return d;const f=i.segments[l],E=r[s];if(gb(E))break;const C=`${E}`,S=s<r.length-1?r[s+1]:null;if(l>0&&void 0===C)break;if(C&&S&&"object"==typeof S&&void 0===S.outlets){if(!xO(C,S,f))return d;s+=2}else{if(!xO(C,{},f))return d;s++}l++}return{match:!0,pathIndex:l,commandIndex:s}}(i,n,r),l=r.slice(s.commandIndex);if(s.match&&s.pathIndex<i.segments.length){const d=new Ut(i.segments.slice(0,s.pathIndex),{});return d.children[Ft]=new Ut(i.segments.slice(s.pathIndex),i.children),SS(d,0,l)}return s.match&&0===l.length?new Ut(i.segments,{}):s.match&&!i.hasChildren()?sN(i,n,r):s.match?SS(i,0,l):sN(i,n,r)}function SS(i,n,r){if(0===r.length)return new Ut(i.segments,{});{const s=function(i){return gb(i[0])?i[0].outlets:{[Ft]:i}}(r),l={};return di(s,(d,f)=>{"string"==typeof d&&(d=[d]),null!==d&&(l[f]=AO(i.children[f],n,d))}),di(i.children,(d,f)=>{void 0===s[f]&&(l[f]=d)}),new Ut(i.segments,l)}}function sN(i,n,r){const s=i.segments.slice(0,n);let l=0;for(;l<r.length;){const d=r[l];if(gb(d)){const C=Qk(d.outlets);return new Ut(s,C)}if(0===l&&TS(r[0])){s.push(new hb(i.segments[n].path,RO(r[0]))),l++;continue}const f=gb(d)?d.outlets[Ft]:`${d}`,E=l<r.length-1?r[l+1]:null;f&&E&&TS(E)?(s.push(new hb(f,RO(E))),l+=2):(s.push(new hb(f,{})),l++)}return new Ut(s,{})}function Qk(i){const n={};return di(i,(r,s)=>{"string"==typeof r&&(r=[r]),null!==r&&(n[s]=sN(new Ut([],{}),0,r))}),n}function RO(i){const n={};return di(i,(r,s)=>n[s]=`${r}`),n}function xO(i,n,r){return i==r.path&&Zu(n,r.parameters)}class Xk{constructor(n,r,s,l){this.routeReuseStrategy=n,this.futureState=r,this.currState=s,this.forwardEvent=l}activate(n){const r=this.futureState._root,s=this.currState?this.currState._root:null;this.deactivateChildRoutes(r,s,n),tN(this.futureState.root),this.activateChildRoutes(r,s,n)}deactivateChildRoutes(n,r,s){const l=pb(r);n.children.forEach(d=>{const f=d.value.outlet;this.deactivateRoutes(d,l[f],s),delete l[f]}),di(l,(d,f)=>{this.deactivateRouteAndItsChildren(d,s)})}deactivateRoutes(n,r,s){const l=n.value,d=r?r.value:null;if(l===d)if(l.component){const f=s.getContext(l.outlet);f&&this.deactivateChildRoutes(n,r,f.children)}else this.deactivateChildRoutes(n,r,s);else d&&this.deactivateRouteAndItsChildren(r,s)}deactivateRouteAndItsChildren(n,r){this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,r):this.deactivateRouteAndOutlet(n,r)}detachAndStoreRouteSubtree(n,r){const s=r.getContext(n.value.outlet);if(s&&s.outlet){const l=s.outlet.detach(),d=s.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:l,route:n,contexts:d})}}deactivateRouteAndOutlet(n,r){const s=r.getContext(n.value.outlet),l=s&&n.value.component?s.children:r,d=pb(n);for(const f of Object.keys(d))this.deactivateRouteAndItsChildren(d[f],l);s&&s.outlet&&(s.outlet.deactivate(),s.children.onOutletDeactivated(),s.attachRef=null,s.resolver=null,s.route=null)}activateChildRoutes(n,r,s){const l=pb(r);n.children.forEach(d=>{this.activateRoutes(d,l[d.value.outlet],s),this.forwardEvent(new vk(d.value.snapshot))}),n.children.length&&this.forwardEvent(new yk(n.value.snapshot))}activateRoutes(n,r,s){const l=n.value,d=r?r.value:null;if(tN(l),l===d)if(l.component){const f=s.getOrCreateContext(l.outlet);this.activateChildRoutes(n,r,f.children)}else this.activateChildRoutes(n,r,s);else if(l.component){const f=s.getOrCreateContext(l.outlet);if(this.routeReuseStrategy.shouldAttach(l.snapshot)){const E=this.routeReuseStrategy.retrieve(l.snapshot);this.routeReuseStrategy.store(l.snapshot,null),f.children.onOutletReAttached(E.contexts),f.attachRef=E.componentRef,f.route=E.route.value,f.outlet&&f.outlet.attach(E.componentRef,E.route.value),NO(E.route)}else{const E=function(i){for(let n=i.parent;n;n=n.parent){const r=n.routeConfig;if(r&&r._loadedConfig)return r._loadedConfig;if(r&&r.component)return null}return null}(l.snapshot),C=E?E.module.componentFactoryResolver:null;f.attachRef=null,f.route=l,f.resolver=C,f.outlet&&f.outlet.activateWith(l,C),this.activateChildRoutes(n,null,f.children)}}else this.activateChildRoutes(n,null,s)}}function NO(i){tN(i.value),i.children.forEach(NO)}class oN{constructor(n,r){this.routes=n,this.module=r}}function Rh(i){return"function"==typeof i}function Lg(i){return i instanceof kg}const mb=Symbol("INITIAL_VALUE");function yb(){return Nr(i=>function(...i){let n,r;return(0,Bl.K)(i[i.length-1])&&(r=i.pop()),"function"==typeof i[i.length-1]&&(n=i.pop()),1===i.length&&(0,ib.k)(i[0])&&(i=i[0]),(0,YP.n)(i,r).lift(new JP(n))}(i.map(n=>n.pipe(Cw(1),lu(mb)))).pipe(Vm((n,r)=>{let s=!1;return r.reduce((l,d,f)=>l!==mb?l:(d===mb&&(s=!0),s||!1!==d&&f!==r.length-1&&!Lg(d)?l:d),n)},mb),Ui(n=>n!==mb),(0,St.U)(n=>Lg(n)?n:!0===n),Cw(1)))}let MO=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=m.Xpm({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(r,s){1&r&&m._UZ(0,"router-outlet")},directives:function(){return[hN]},encapsulation:2}),i})();function OO(i,n=""){for(let r=0;r<i.length;r++){const s=i[r];oF(s,aF(n,s))}}function oF(i,n){i.children&&OO(i.children,n)}function aF(i,n){return n?i||n.path?i&&!n.path?`${i}/`:!i&&n.path?n.path:`${i}/${n.path}`:"":i}function aN(i){const n=i.children&&i.children.map(aN),r=n?Object.assign(Object.assign({},i),{children:n}):Object.assign({},i);return!r.component&&(n||r.loadChildren)&&r.outlet&&r.outlet!==Ft&&(r.component=MO),r}function Lo(i){return i.outlet||Ft}function PO(i,n){const r=i.filter(s=>Lo(s)===n);return r.push(...i.filter(s=>Lo(s)!==n)),r}const kO={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function AS(i,n,r){var s;if(""===n.path)return"full"===n.pathMatch&&(i.hasChildren()||r.length>0)?Object.assign({},kO):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const d=(n.matcher||bk)(r,i,n);if(!d)return Object.assign({},kO);const f={};di(d.posParams,(C,S)=>{f[S]=C.path});const E=d.consumed.length>0?Object.assign(Object.assign({},f),d.consumed[d.consumed.length-1].parameters):f;return{matched:!0,consumedSegments:d.consumed,lastChild:d.consumed.length,parameters:E,positionalParamSegments:null!==(s=d.posParams)&&void 0!==s?s:{}}}function RS(i,n,r,s,l="corrected"){if(r.length>0&&function(i,n,r){return r.some(s=>xS(i,n,s)&&Lo(s)!==Ft)}(i,r,s)){const f=new Ut(n,function(i,n,r,s){const l={};l[Ft]=s,s._sourceSegment=i,s._segmentIndexShift=n.length;for(const d of r)if(""===d.path&&Lo(d)!==Ft){const f=new Ut([],{});f._sourceSegment=i,f._segmentIndexShift=n.length,l[Lo(d)]=f}return l}(i,n,s,new Ut(r,i.children)));return f._sourceSegment=i,f._segmentIndexShift=n.length,{segmentGroup:f,slicedSegments:[]}}if(0===r.length&&function(i,n,r){return r.some(s=>xS(i,n,s))}(i,r,s)){const f=new Ut(i.segments,function(i,n,r,s,l,d){const f={};for(const E of s)if(xS(i,r,E)&&!l[Lo(E)]){const C=new Ut([],{});C._sourceSegment=i,C._segmentIndexShift="legacy"===d?i.segments.length:n.length,f[Lo(E)]=C}return Object.assign(Object.assign({},l),f)}(i,n,r,s,i.children,l));return f._sourceSegment=i,f._segmentIndexShift=n.length,{segmentGroup:f,slicedSegments:r}}const d=new Ut(i.segments,i.children);return d._sourceSegment=i,d._segmentIndexShift=n.length,{segmentGroup:d,slicedSegments:r}}function xS(i,n,r){return(!(i.hasChildren()||n.length>0)||"full"!==r.pathMatch)&&""===r.path}function FO(i,n,r,s){return!!(Lo(i)===s||s!==Ft&&xS(n,r,i))&&("**"===i.path||AS(n,i,r).matched)}function LO(i,n,r){return 0===n.length&&!i.children[r]}class _b{constructor(n){this.segmentGroup=n||null}}class VO{constructor(n){this.urlTree=n}}function NS(i){return new Xn.y(n=>n.error(new _b(i)))}function UO(i){return new Xn.y(n=>n.error(new VO(i)))}function hF(i){return new Xn.y(n=>n.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${i}'`)))}class gF{constructor(n,r,s,l,d){this.configLoader=r,this.urlSerializer=s,this.urlTree=l,this.config=d,this.allowRedirects=!0,this.ngModule=n.get(m.h0i)}apply(){const n=RS(this.urlTree.root,[],[],this.config).segmentGroup,r=new Ut(n.segments,n.children);return this.expandSegmentGroup(this.ngModule,this.config,r,Ft).pipe((0,St.U)(d=>this.createUrlTree(uN(d),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Pg(d=>{if(d instanceof VO)return this.allowRedirects=!1,this.match(d.urlTree);throw d instanceof _b?this.noMatchError(d):d}))}match(n){return this.expandSegmentGroup(this.ngModule,this.config,n.root,Ft).pipe((0,St.U)(l=>this.createUrlTree(uN(l),n.queryParams,n.fragment))).pipe(Pg(l=>{throw l instanceof _b?this.noMatchError(l):l}))}noMatchError(n){return new Error(`Cannot match any routes. URL Segment: '${n.segmentGroup}'`)}createUrlTree(n,r,s){const l=n.segments.length>0?new Ut([],{[Ft]:n}):n;return new kg(l,r,s)}expandSegmentGroup(n,r,s,l){return 0===s.segments.length&&s.hasChildren()?this.expandChildren(n,r,s).pipe((0,St.U)(d=>new Ut([],d))):this.expandSegment(n,s,r,s.segments,l,!0)}expandChildren(n,r,s){const l=[];for(const d of Object.keys(s.children))"primary"===d?l.unshift(d):l.push(d);return(0,Jt.D)(l).pipe(cb(d=>{const f=s.children[d],E=PO(r,d);return this.expandSegmentGroup(n,E,f,d).pipe((0,St.U)(C=>({segment:C,outlet:d})))}),Vm((d,f)=>(d[f.outlet]=f.segment,d),{}),function(i,n){const r=arguments.length>=2;return s=>s.pipe(i?Ui((l,d)=>i(l,d,s)):A_.y,Wx(1),r?u1(n):l1(()=>new S_))}())}expandSegment(n,r,s,l,d,f){return(0,Jt.D)(s).pipe(cb(E=>this.expandSegmentAgainstRoute(n,r,s,E,l,d,f).pipe(Pg(S=>{if(S instanceof _b)return(0,it.of)(null);throw S}))),gs(E=>!!E),Pg((E,C)=>{if(E instanceof S_||"EmptyError"===E.name){if(LO(r,l,d))return(0,it.of)(new Ut([],{}));throw new _b(r)}throw E}))}expandSegmentAgainstRoute(n,r,s,l,d,f,E){return FO(l,r,d,f)?void 0===l.redirectTo?this.matchSegmentAgainstRoute(n,r,l,d,f):E&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,r,s,l,d,f):NS(r):NS(r)}expandSegmentAgainstRouteUsingRedirect(n,r,s,l,d,f){return"**"===l.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,s,l,f):this.expandRegularSegmentAgainstRouteUsingRedirect(n,r,s,l,d,f)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,r,s,l){const d=this.applyRedirectCommands([],s.redirectTo,{});return s.redirectTo.startsWith("/")?UO(d):this.lineralizeSegments(s,d).pipe((0,Ji.zg)(f=>{const E=new Ut(f,{});return this.expandSegment(n,E,r,f,l,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,r,s,l,d,f){const{matched:E,consumedSegments:C,lastChild:S,positionalParamSegments:x}=AS(r,l,d);if(!E)return NS(r);const N=this.applyRedirectCommands(C,l.redirectTo,x);return l.redirectTo.startsWith("/")?UO(N):this.lineralizeSegments(l,N).pipe((0,Ji.zg)(V=>this.expandSegment(n,r,s,V.concat(d.slice(S)),f,!1)))}matchSegmentAgainstRoute(n,r,s,l,d){if("**"===s.path)return s.loadChildren?(s._loadedConfig?(0,it.of)(s._loadedConfig):this.configLoader.load(n.injector,s)).pipe((0,St.U)(V=>(s._loadedConfig=V,new Ut(l,{})))):(0,it.of)(new Ut(l,{}));const{matched:f,consumedSegments:E,lastChild:C}=AS(r,s,l);if(!f)return NS(r);const S=l.slice(C);return this.getChildConfig(n,s,l).pipe((0,Ji.zg)(N=>{const V=N.module,B=N.routes,{segmentGroup:W,slicedSegments:fe}=RS(r,E,S,B),De=new Ut(W.segments,W.children);if(0===fe.length&&De.hasChildren())return this.expandChildren(V,B,De).pipe((0,St.U)(Ze=>new Ut(E,Ze)));if(0===B.length&&0===fe.length)return(0,it.of)(new Ut(E,{}));const $e=Lo(s)===d;return this.expandSegment(V,De,B,fe,$e?Ft:d,!0).pipe((0,St.U)(Ge=>new Ut(E.concat(Ge.segments),Ge.children)))}))}getChildConfig(n,r,s){return r.children?(0,it.of)(new oN(r.children,n)):r.loadChildren?void 0!==r._loadedConfig?(0,it.of)(r._loadedConfig):this.runCanLoadGuards(n.injector,r,s).pipe((0,Ji.zg)(l=>l?this.configLoader.load(n.injector,r).pipe((0,St.U)(d=>(r._loadedConfig=d,d))):function(i){return new Xn.y(n=>n.error(Kx(`Cannot load children because the guard of the route "path: '${i.path}'" returned false`)))}(r))):(0,it.of)(new oN([],n))}runCanLoadGuards(n,r,s){const l=r.canLoad;if(!l||0===l.length)return(0,it.of)(!0);const d=l.map(f=>{const E=n.get(f);let C;if(function(i){return i&&Rh(i.canLoad)}(E))C=E.canLoad(r,s);else{if(!Rh(E))throw new Error("Invalid CanLoad guard");C=E(r,s)}return Ku(C)});return(0,it.of)(d).pipe(yb(),(0,zs.b)(f=>{if(!Lg(f))return;const E=Kx(`Redirecting to "${this.urlSerializer.serialize(f)}"`);throw E.url=f,E}),(0,St.U)(f=>!0===f))}lineralizeSegments(n,r){let s=[],l=r.root;for(;;){if(s=s.concat(l.segments),0===l.numberOfChildren)return(0,it.of)(s);if(l.numberOfChildren>1||!l.children[Ft])return hF(n.redirectTo);l=l.children[Ft]}}applyRedirectCommands(n,r,s){return this.applyRedirectCreatreUrlTree(r,this.urlSerializer.parse(r),n,s)}applyRedirectCreatreUrlTree(n,r,s,l){const d=this.createSegmentGroup(n,r.root,s,l);return new kg(d,this.createQueryParams(r.queryParams,this.urlTree.queryParams),r.fragment)}createQueryParams(n,r){const s={};return di(n,(l,d)=>{if("string"==typeof l&&l.startsWith(":")){const E=l.substring(1);s[d]=r[E]}else s[d]=l}),s}createSegmentGroup(n,r,s,l){const d=this.createSegments(n,r.segments,s,l);let f={};return di(r.children,(E,C)=>{f[C]=this.createSegmentGroup(n,E,s,l)}),new Ut(d,f)}createSegments(n,r,s,l){return r.map(d=>d.path.startsWith(":")?this.findPosParam(n,d,l):this.findOrReturn(d,s))}findPosParam(n,r,s){const l=s[r.path.substring(1)];if(!l)throw new Error(`Cannot redirect to '${n}'. Cannot find '${r.path}'.`);return l}findOrReturn(n,r){let s=0;for(const l of r){if(l.path===n.path)return r.splice(s),l;s++}return n}}function uN(i){const n={};for(const s of Object.keys(i.children)){const d=uN(i.children[s]);(d.segments.length>0||d.hasChildren())&&(n[s]=d)}return function(i){if(1===i.numberOfChildren&&i.children[Ft]){const n=i.children[Ft];return new Ut(i.segments.concat(n.segments),n.children)}return i}(new Ut(i.segments,n))}class BO{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class MS{constructor(n,r){this.component=n,this.route=r}}function _F(i,n,r){const s=i._root;return vb(s,n?n._root:null,r,[s.value])}function OS(i,n,r){const s=function(i){if(!i)return null;for(let n=i.parent;n;n=n.parent){const r=n.routeConfig;if(r&&r._loadedConfig)return r._loadedConfig}return null}(n);return(s?s.module.injector:r).get(i)}function vb(i,n,r,s,l={canDeactivateChecks:[],canActivateChecks:[]}){const d=pb(n);return i.children.forEach(f=>{(function(i,n,r,s,l={canDeactivateChecks:[],canActivateChecks:[]}){const d=i.value,f=n?n.value:null,E=r?r.getContext(i.value.outlet):null;if(f&&d.routeConfig===f.routeConfig){const C=function(i,n,r){if("function"==typeof r)return r(i,n);switch(r){case"pathParamsChange":return!Fg(i.url,n.url);case"pathParamsOrQueryParamsChange":return!Fg(i.url,n.url)||!Zu(i.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!nN(i,n)||!Zu(i.queryParams,n.queryParams);case"paramsChange":default:return!nN(i,n)}}(f,d,d.routeConfig.runGuardsAndResolvers);C?l.canActivateChecks.push(new BO(s)):(d.data=f.data,d._resolvedData=f._resolvedData),vb(i,n,d.component?E?E.children:null:r,s,l),C&&E&&E.outlet&&E.outlet.isActivated&&l.canDeactivateChecks.push(new MS(E.outlet.component,f))}else f&&Eb(n,E,l),l.canActivateChecks.push(new BO(s)),vb(i,null,d.component?E?E.children:null:r,s,l)})(f,d[f.value.outlet],r,s.concat([f.value]),l),delete d[f.value.outlet]}),di(d,(f,E)=>Eb(f,r.getContext(E),l)),l}function Eb(i,n,r){const s=pb(i),l=i.value;di(s,(d,f)=>{Eb(d,l.component?n?n.children.getContext(f):null:n,r)}),r.canDeactivateChecks.push(new MS(l.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,l))}class NF{}function jO(i){return new Xn.y(n=>n.error(i))}class OF{constructor(n,r,s,l,d,f){this.rootComponentType=n,this.config=r,this.urlTree=s,this.url=l,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=f}recognize(){const n=RS(this.urlTree.root,[],[],this.config.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution).segmentGroup,r=this.processSegmentGroup(this.config,n,Ft);if(null===r)return null;const s=new IS([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ft,this.rootComponentType,null,this.urlTree.root,-1,{}),l=new Vc(s,r),d=new CO(this.url,l);return this.inheritParamsAndData(d._root),d}inheritParamsAndData(n){const r=n.value,s=bO(r,this.paramsInheritanceStrategy);r.params=Object.freeze(s.params),r.data=Object.freeze(s.data),n.children.forEach(l=>this.inheritParamsAndData(l))}processSegmentGroup(n,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,r):this.processSegment(n,r,r.segments,s)}processChildren(n,r){const s=[];for(const d of Object.keys(r.children)){const f=r.children[d],E=PO(n,d),C=this.processSegmentGroup(E,f,d);if(null===C)return null;s.push(...C)}const l=$O(s);return function(i){i.sort((n,r)=>n.value.outlet===Ft?-1:r.value.outlet===Ft?1:n.value.outlet.localeCompare(r.value.outlet))}(l),l}processSegment(n,r,s,l){for(const d of n){const f=this.processSegmentAgainstRoute(d,r,s,l);if(null!==f)return f}return LO(r,s,l)?[]:null}processSegmentAgainstRoute(n,r,s,l){if(n.redirectTo||!FO(n,r,s,l))return null;let d,f=[],E=[];if("**"===n.path){const B=s.length>0?lO(s).parameters:{};d=new IS(s,B,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,qO(n),Lo(n),n.component,n,HO(r),GO(r)+s.length,zO(n))}else{const B=AS(r,n,s);if(!B.matched)return null;f=B.consumedSegments,E=s.slice(B.lastChild),d=new IS(f,B.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,qO(n),Lo(n),n.component,n,HO(r),GO(r)+f.length,zO(n))}const C=function(i){return i.children?i.children:i.loadChildren?i._loadedConfig.routes:[]}(n),{segmentGroup:S,slicedSegments:x}=RS(r,f,E,C.filter(B=>void 0===B.redirectTo),this.relativeLinkResolution);if(0===x.length&&S.hasChildren()){const B=this.processChildren(C,S);return null===B?null:[new Vc(d,B)]}if(0===C.length&&0===x.length)return[new Vc(d,[])];const N=Lo(n)===l,V=this.processSegment(C,S,x,N?Ft:l);return null===V?null:[new Vc(d,V)]}}function FF(i){const n=i.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function $O(i){const n=[],r=new Set;for(const s of i){if(!FF(s)){n.push(s);continue}const l=n.find(d=>s.value.routeConfig===d.value.routeConfig);void 0!==l?(l.children.push(...s.children),r.add(l)):n.push(s)}for(const s of r){const l=$O(s.children);n.push(new Vc(s.value,l))}return n.filter(s=>!r.has(s))}function HO(i){let n=i;for(;n._sourceSegment;)n=n._sourceSegment;return n}function GO(i){let n=i,r=n._segmentIndexShift?n._segmentIndexShift:0;for(;n._sourceSegment;)n=n._sourceSegment,r+=n._segmentIndexShift?n._segmentIndexShift:0;return r-1}function qO(i){return i.data||{}}function zO(i){return i.resolve||{}}function lN(i){return Nr(n=>{const r=i(n);return r?(0,Jt.D)(r).pipe((0,St.U)(()=>n)):(0,it.of)(n)})}class GF extends class{shouldDetach(n){return!1}store(n,r){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,r){return n.routeConfig===r.routeConfig}}{}const cN=new m.OlP("ROUTES");class WO{constructor(n,r,s,l){this.loader=n,this.compiler=r,this.onLoadStartListener=s,this.onLoadEndListener=l}load(n,r){if(r._loader$)return r._loader$;this.onLoadStartListener&&this.onLoadStartListener(r);const l=this.loadModuleFactory(r.loadChildren).pipe((0,St.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(r);const f=d.create(n);return new oN(uO(f.injector.get(cN,void 0,m.XFs.Self|m.XFs.Optional)).map(aN),f)}),Pg(d=>{throw r._loader$=void 0,d}));return r._loader$=new ek.c(l,()=>new xc.xQ).pipe((0,ok.x)()),r._loader$}loadModuleFactory(n){return"string"==typeof n?(0,Jt.D)(this.loader.load(n)):Ku(n()).pipe((0,Ji.zg)(r=>r instanceof m.YKP?(0,it.of)(r):(0,Jt.D)(this.compiler.compileModuleAsync(r))))}}class qF{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Z_,this.attachRef=null}}class Z_{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const s=this.getOrCreateContext(n);s.outlet=r,this.contexts.set(n,s)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new qF,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}}class WF{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}}function ZF(i){throw i}function KF(i,n,r){return n.parse("/")}function ZO(i,n){return(0,it.of)(null)}const YF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},QF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ws=(()=>{class i{constructor(r,s,l,d,f,E,C,S){this.rootComponentType=r,this.urlSerializer=s,this.rootContexts=l,this.location=d,this.config=S,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new xc.xQ,this.errorHandler=ZF,this.malformedUriErrorHandler=KF,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ZO,afterPreactivation:ZO},this.urlHandlingStrategy=new WF,this.routeReuseStrategy=new GF,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=f.get(m.h0i),this.console=f.get(m.c2e);const V=f.get(m.R0b);this.isNgZoneEnabled=V instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(S),this.currentUrlTree=new kg(new Ut([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new WO(E,C,B=>this.triggerEvent(new rO(B)),B=>this.triggerEvent(new iO(B))),this.routerState=wO(this.currentUrlTree,this.rootComponentType),this.transitions=new ja({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var r;return null===(r=this.location.getState())||void 0===r?void 0:r.\u0275routerPageId}setupNavigations(r){const s=this.events;return r.pipe(Ui(l=>0!==l.id),(0,St.U)(l=>Object.assign(Object.assign({},l),{extractedUrl:this.urlHandlingStrategy.extract(l.rawUrl)})),Nr(l=>{let d=!1,f=!1;return(0,it.of)(l).pipe((0,zs.b)(E=>{this.currentNavigation={id:E.id,initialUrl:E.currentRawUrl,extractedUrl:E.extractedUrl,trigger:E.source,extras:E.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Nr(E=>{const C=this.browserUrlTree.toString(),S=!this.navigated||E.extractedUrl.toString()!==C||C!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||S)&&this.urlHandlingStrategy.shouldProcessUrl(E.rawUrl))return PS(E.source)&&(this.browserUrlTree=E.extractedUrl),(0,it.of)(E).pipe(Nr(N=>{const V=this.transitions.getValue();return s.next(new Zx(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),V!==this.transitions.getValue()?Nc.E:Promise.resolve(N)}),function(i,n,r,s){return Nr(l=>function(i,n,r,s,l){return new gF(i,n,r,s,l).apply()}(i,n,r,l.extractedUrl,s).pipe((0,St.U)(d=>Object.assign(Object.assign({},l),{urlAfterRedirects:d}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,zs.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function(i,n,r,s,l){return(0,Ji.zg)(d=>function(i,n,r,s,l="emptyOnly",d="legacy"){try{const f=new OF(i,n,r,s,l,d).recognize();return null===f?jO(new NF):(0,it.of)(f)}catch(f){return jO(f)}}(i,n,d.urlAfterRedirects,r(d.urlAfterRedirects),s,l).pipe((0,St.U)(f=>Object.assign(Object.assign({},d),{targetSnapshot:f}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,zs.b)(N=>{"eager"===this.urlUpdateStrategy&&(N.extras.skipLocationChange||this.setBrowserUrl(N.urlAfterRedirects,N),this.browserUrlTree=N.urlAfterRedirects);const V=new dk(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);s.next(V)}));if(S&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:V,extractedUrl:B,source:W,restoredState:fe,extras:De}=E,$e=new Zx(V,this.serializeUrl(B),W,fe);s.next($e);const We=wO(B,this.rootComponentType).snapshot;return(0,it.of)(Object.assign(Object.assign({},E),{targetSnapshot:We,urlAfterRedirects:B,extras:Object.assign(Object.assign({},De),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=E.rawUrl,this.browserUrlTree=E.urlAfterRedirects,E.resolve(null),Nc.E}),lN(E=>{const{targetSnapshot:C,id:S,extractedUrl:x,rawUrl:N,extras:{skipLocationChange:V,replaceUrl:B}}=E;return this.hooks.beforePreactivation(C,{navigationId:S,appliedUrlTree:x,rawUrlTree:N,skipLocationChange:!!V,replaceUrl:!!B})}),(0,zs.b)(E=>{const C=new hk(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(C)}),(0,St.U)(E=>Object.assign(Object.assign({},E),{guards:_F(E.targetSnapshot,E.currentSnapshot,this.rootContexts)})),function(i,n){return(0,Ji.zg)(r=>{const{targetSnapshot:s,currentSnapshot:l,guards:{canActivateChecks:d,canDeactivateChecks:f}}=r;return 0===f.length&&0===d.length?(0,it.of)(Object.assign(Object.assign({},r),{guardsResult:!0})):function(i,n,r,s){return(0,Jt.D)(i).pipe((0,Ji.zg)(l=>function(i,n,r,s,l){const d=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!d||0===d.length)return(0,it.of)(!0);const f=d.map(E=>{const C=OS(E,n,l);let S;if(function(i){return i&&Rh(i.canDeactivate)}(C))S=Ku(C.canDeactivate(i,n,r,s));else{if(!Rh(C))throw new Error("Invalid CanDeactivate guard");S=Ku(C(i,n,r,s))}return S.pipe(gs())});return(0,it.of)(f).pipe(yb())}(l.component,l.route,r,n,s)),gs(l=>!0!==l,!0))}(f,s,l,i).pipe((0,Ji.zg)(E=>E&&function(i){return"boolean"==typeof i}(E)?function(i,n,r,s){return(0,Jt.D)(n).pipe(cb(l=>Sd(function(i,n){return null!==i&&n&&n(new mk(i)),(0,it.of)(!0)}(l.route.parent,s),function(i,n){return null!==i&&n&&n(new _k(i)),(0,it.of)(!0)}(l.route,s),function(i,n,r){const s=n[n.length-1],d=n.slice(0,n.length-1).reverse().map(f=>function(i){const n=i.routeConfig?i.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:i,guards:n}:null}(f)).filter(f=>null!==f).map(f=>tO(()=>{const E=f.guards.map(C=>{const S=OS(C,f.node,r);let x;if(function(i){return i&&Rh(i.canActivateChild)}(S))x=Ku(S.canActivateChild(s,i));else{if(!Rh(S))throw new Error("Invalid CanActivateChild guard");x=Ku(S(s,i))}return x.pipe(gs())});return(0,it.of)(E).pipe(yb())}));return(0,it.of)(d).pipe(yb())}(i,l.path,r),function(i,n,r){const s=n.routeConfig?n.routeConfig.canActivate:null;if(!s||0===s.length)return(0,it.of)(!0);const l=s.map(d=>tO(()=>{const f=OS(d,n,r);let E;if(function(i){return i&&Rh(i.canActivate)}(f))E=Ku(f.canActivate(n,i));else{if(!Rh(f))throw new Error("Invalid CanActivate guard");E=Ku(f(n,i))}return E.pipe(gs())}));return(0,it.of)(l).pipe(yb())}(i,l.route,r))),gs(l=>!0!==l,!0))}(s,d,i,n):(0,it.of)(E)),(0,St.U)(E=>Object.assign(Object.assign({},r),{guardsResult:E})))})}(this.ngModule.injector,E=>this.triggerEvent(E)),(0,zs.b)(E=>{if(Lg(E.guardsResult)){const S=Kx(`Redirecting to "${this.serializeUrl(E.guardsResult)}"`);throw S.url=E.guardsResult,S}const C=new fk(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot,!!E.guardsResult);this.triggerEvent(C)}),Ui(E=>!!E.guardsResult||(this.restoreHistory(E),this.cancelNavigationTransition(E,""),!1)),lN(E=>{if(E.guards.canActivateChecks.length)return(0,it.of)(E).pipe((0,zs.b)(C=>{const S=new pk(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(C.urlAfterRedirects),C.targetSnapshot);this.triggerEvent(S)}),Nr(C=>{let S=!1;return(0,it.of)(C).pipe(function(i,n){return(0,Ji.zg)(r=>{const{targetSnapshot:s,guards:{canActivateChecks:l}}=r;if(!l.length)return(0,it.of)(r);let d=0;return(0,Jt.D)(l).pipe(cb(f=>function(i,n,r,s){return function(i,n,r,s){const l=Object.keys(i);if(0===l.length)return(0,it.of)({});const d={};return(0,Jt.D)(l).pipe((0,Ji.zg)(f=>function(i,n,r,s){const l=OS(i,n,s);return Ku(l.resolve?l.resolve(n,r):l(n,r))}(i[f],n,r,s).pipe((0,zs.b)(E=>{d[f]=E}))),Wx(1),(0,Ji.zg)(()=>Object.keys(d).length===l.length?(0,it.of)(d):Nc.E))}(i._resolve,i,n,s).pipe((0,St.U)(d=>(i._resolvedData=d,i.data=Object.assign(Object.assign({},i.data),bO(i,r).resolve),null)))}(f.route,s,i,n)),(0,zs.b)(()=>d++),Wx(1),(0,Ji.zg)(f=>d===l.length?(0,it.of)(r):Nc.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,zs.b)({next:()=>S=!0,complete:()=>{S||(this.restoreHistory(C),this.cancelNavigationTransition(C,"At least one route resolver didn't emit any value."))}}))}),(0,zs.b)(C=>{const S=new gk(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(C.urlAfterRedirects),C.targetSnapshot);this.triggerEvent(S)}))}),lN(E=>{const{targetSnapshot:C,id:S,extractedUrl:x,rawUrl:N,extras:{skipLocationChange:V,replaceUrl:B}}=E;return this.hooks.afterPreactivation(C,{navigationId:S,appliedUrlTree:x,rawUrlTree:N,skipLocationChange:!!V,replaceUrl:!!B})}),(0,St.U)(E=>{const C=function(i,n,r){const s=DS(i,n._root,r?r._root:void 0);return new EO(s,n)}(this.routeReuseStrategy,E.targetSnapshot,E.currentRouterState);return Object.assign(Object.assign({},E),{targetRouterState:C})}),(0,zs.b)(E=>{this.currentUrlTree=E.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(E.urlAfterRedirects,E.rawUrl),this.routerState=E.targetRouterState,"deferred"===this.urlUpdateStrategy&&(E.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,E),this.browserUrlTree=E.urlAfterRedirects)}),((i,n,r)=>(0,St.U)(s=>(new Xk(n,s.targetRouterState,s.currentRouterState,r).activate(i),s)))(this.rootContexts,this.routeReuseStrategy,E=>this.triggerEvent(E)),(0,zs.b)({next(){d=!0},complete(){d=!0}}),function(i){return n=>n.lift(new uk(i))}(()=>{if(!d&&!f){const E=`Navigation ID ${l.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(l),this.cancelNavigationTransition(l,E)):this.cancelNavigationTransition(l,E)}this.currentNavigation=null}),Pg(E=>{if(f=!0,function(i){return i&&i[oO]}(E)){const C=Lg(E.url);C||(this.navigated=!0,this.restoreHistory(l,!0));const S=new nO(l.id,this.serializeUrl(l.extractedUrl),E.message);s.next(S),C?setTimeout(()=>{const x=this.urlHandlingStrategy.merge(E.url,this.rawUrlTree),N={skipLocationChange:l.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||PS(l.source)};this.scheduleNavigation(x,"imperative",null,N,{resolve:l.resolve,reject:l.reject,promise:l.promise})},0):l.resolve(!1)}else{this.restoreHistory(l,!0);const C=new ck(l.id,this.serializeUrl(l.extractedUrl),E);s.next(C);try{l.resolve(this.errorHandler(E))}catch(S){l.reject(S)}}return Nc.E}))}))}resetRootComponentType(r){this.rootComponentType=r,this.routerState.root.component=this.rootComponentType}getTransition(){const r=this.transitions.value;return r.urlAfterRedirects=this.browserUrlTree,r}setTransition(r){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),r))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(r=>{const s=this.extractLocationChangeInfoFromEvent(r);this.shouldScheduleNavigation(this.lastLocationChangeInfo,s)&&setTimeout(()=>{const{source:l,state:d,urlTree:f}=s,E={replaceUrl:!0};if(d){const C=Object.assign({},d);delete C.navigationId,delete C.\u0275routerPageId,0!==Object.keys(C).length&&(E.state=C)}this.scheduleNavigation(f,l,d,E)},0),this.lastLocationChangeInfo=s}))}extractLocationChangeInfoFromEvent(r){var s;return{source:"popstate"===r.type?"popstate":"hashchange",urlTree:this.parseUrl(r.url),state:(null===(s=r.state)||void 0===s?void 0:s.navigationId)?r.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(r,s){if(!r)return!0;const l=s.urlTree.toString()===r.urlTree.toString();return s.transitionId!==r.transitionId||!l||!("hashchange"===s.source&&"popstate"===r.source||"popstate"===s.source&&"hashchange"===r.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(r){this.events.next(r)}resetConfig(r){OO(r),this.config=r.map(aN),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(r,s={}){const{relativeTo:l,queryParams:d,fragment:f,queryParamsHandling:E,preserveFragment:C}=s,S=l||this.routerState.root,x=C?this.currentUrlTree.fragment:f;let N=null;switch(E){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),d);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=d||null}return null!==N&&(N=this.removeEmptyProps(N)),function(i,n,r,s,l){if(0===r.length)return rN(n.root,n.root,n,s,l);const d=function(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new SO(!0,0,i);let n=0,r=!1;const s=i.reduce((l,d,f)=>{if("object"==typeof d&&null!=d){if(d.outlets){const E={};return di(d.outlets,(C,S)=>{E[S]="string"==typeof C?C.split("/"):C}),[...l,{outlets:E}]}if(d.segmentPath)return[...l,d.segmentPath]}return"string"!=typeof d?[...l,d]:0===f?(d.split("/").forEach((E,C)=>{0==C&&"."===E||(0==C&&""===E?r=!0:".."===E?n++:""!=E&&l.push(E))}),l):[...l,d]},[]);return new SO(r,n,s)}(r);if(d.toRoot())return rN(n.root,new Ut([],{}),n,s,l);const f=function(i,n,r){if(i.isAbsolute)return new iN(n.root,!0,0);if(-1===r.snapshot._lastPathIndex){const d=r.snapshot._urlSegment;return new iN(d,d===n.root,0)}const s=TS(i.commands[0])?0:1;return function(i,n,r){let s=i,l=n,d=r;for(;d>l;){if(d-=l,s=s.parent,!s)throw new Error("Invalid number of '../'");l=s.segments.length}return new iN(s,!1,l-d)}(r.snapshot._urlSegment,r.snapshot._lastPathIndex+s,i.numberOfDoubleDots)}(d,n,i),E=f.processChildren?SS(f.segmentGroup,f.index,d.commands):AO(f.segmentGroup,f.index,d.commands);return rN(f.segmentGroup,E,n,s,l)}(S,this.currentUrlTree,r,N,null!=x?x:null)}navigateByUrl(r,s={skipLocationChange:!1}){const l=Lg(r)?r:this.parseUrl(r),d=this.urlHandlingStrategy.merge(l,this.rawUrlTree);return this.scheduleNavigation(d,"imperative",null,s)}navigate(r,s={skipLocationChange:!1}){return function(i){for(let n=0;n<i.length;n++){const r=i[n];if(null==r)throw new Error(`The requested path contains ${r} segment at index ${n}`)}}(r),this.navigateByUrl(this.createUrlTree(r,s),s)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){let s;try{s=this.urlSerializer.parse(r)}catch(l){s=this.malformedUriErrorHandler(l,this.urlSerializer,r)}return s}isActive(r,s){let l;if(l=!0===s?Object.assign({},YF):!1===s?Object.assign({},QF):s,Lg(r))return dO(this.currentUrlTree,r,l);const d=this.parseUrl(r);return dO(this.currentUrlTree,d,l)}removeEmptyProps(r){return Object.keys(r).reduce((s,l)=>{const d=r[l];return null!=d&&(s[l]=d),s},{})}processNavigations(){this.navigations.subscribe(r=>{this.navigated=!0,this.lastSuccessfulId=r.id,this.currentPageId=r.targetPageId,this.events.next(new db(r.id,this.serializeUrl(r.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,r.resolve(!0)},r=>{this.console.warn(`Unhandled Navigation Error: ${r}`)})}scheduleNavigation(r,s,l,d,f){var E,C;if(this.disposed)return Promise.resolve(!1);const S=this.getTransition(),x=PS(s)&&S&&!PS(S.source),B=(this.lastSuccessfulId===S.id||this.currentNavigation?S.rawUrl:S.urlAfterRedirects).toString()===r.toString();if(x&&B)return Promise.resolve(!0);let W,fe,De;f?(W=f.resolve,fe=f.reject,De=f.promise):De=new Promise((Ge,Ze)=>{W=Ge,fe=Ze});const $e=++this.navigationId;let We;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(l=this.location.getState()),We=l&&l.\u0275routerPageId?l.\u0275routerPageId:d.replaceUrl||d.skipLocationChange?null!==(E=this.browserPageId)&&void 0!==E?E:0:(null!==(C=this.browserPageId)&&void 0!==C?C:0)+1):We=0,this.setTransition({id:$e,targetPageId:We,source:s,restoredState:l,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:r,extras:d,resolve:W,reject:fe,promise:De,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),De.catch(Ge=>Promise.reject(Ge))}setBrowserUrl(r,s){const l=this.urlSerializer.serialize(r),d=Object.assign(Object.assign({},s.extras.state),this.generateNgRouterState(s.id,s.targetPageId));this.location.isCurrentPathEqualTo(l)||s.extras.replaceUrl?this.location.replaceState(l,"",d):this.location.go(l,"",d)}restoreHistory(r,s=!1){var l,d;if("computed"===this.canceledNavigationResolution){const f=this.currentPageId-r.targetPageId;"popstate"!==r.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)||0===f?this.currentUrlTree===(null===(d=this.currentNavigation)||void 0===d?void 0:d.finalUrl)&&0===f&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(f)}else"replace"===this.canceledNavigationResolution&&(s&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(r,s){const l=new nO(r.id,this.serializeUrl(r.extractedUrl),s);this.triggerEvent(l),r.resolve(!1)}generateNgRouterState(r,s){return"computed"===this.canceledNavigationResolution?{navigationId:r,\u0275routerPageId:s}:{navigationId:r}}}return i.\u0275fac=function(r){return new(r||i)(m.LFG(m.DyG),m.LFG(Yx),m.LFG(Z_),m.LFG(rt),m.LFG(m.zs3),m.LFG(m.v3s),m.LFG(m.Sil),m.LFG(void 0))},i.\u0275prov=m.Yz7({token:i,factory:i.\u0275fac}),i})();function PS(i){return"imperative"!==i}let kS=(()=>{class i{constructor(r,s,l){this.router=r,this.route=s,this.locationStrategy=l,this.commands=[],this.onChanges=new xc.xQ,this.subscription=r.events.subscribe(d=>{d instanceof db&&this.updateTargetUrlAndHref()})}set routerLink(r){this.commands=null!=r?Array.isArray(r)?r:[r]:[]}ngOnChanges(r){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(r,s,l,d,f){if(0!==r||s||l||d||f||"string"==typeof this.target&&"_self"!=this.target)return!0;const E={skipLocationChange:K_(this.skipLocationChange),replaceUrl:K_(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,E),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:K_(this.preserveFragment)})}}return i.\u0275fac=function(r){return new(r||i)(m.Y36(ws),m.Y36(W_),m.Y36(te))},i.\u0275dir=m.lG2({type:i,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(r,s){1&r&&m.NdJ("click",function(d){return s.onClick(d.button,d.ctrlKey,d.shiftKey,d.altKey,d.metaKey)}),2&r&&(m.Ikx("href",s.href,m.LSH),m.uIk("target",s.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[m.TTD]}),i})();function K_(i){return""===i||!!i}let hN=(()=>{class i{constructor(r,s,l,d,f){this.parentContexts=r,this.location=s,this.resolver=l,this.changeDetector=f,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.name=d||Ft,r.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const r=this.parentContexts.getContext(this.name);r&&r.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const r=this.activated;return this.activated=null,this._activatedRoute=null,r}attach(r,s){this.activated=r,this._activatedRoute=s,this.location.insert(r.hostView)}deactivate(){if(this.activated){const r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,s){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=r;const f=(s=s||this.resolver).resolveComponentFactory(r._futureSnapshot.routeConfig.component),E=this.parentContexts.getOrCreateContext(this.name).children,C=new tL(r,E,this.location.injector);this.activated=this.location.createComponent(f,this.location.length,C),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(r){return new(r||i)(m.Y36(Z_),m.Y36(m.s_b),m.Y36(m._Vd),m.$8M("name"),m.Y36(m.sBO))},i.\u0275dir=m.lG2({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),i})();class tL{constructor(n,r,s){this.route=n,this.childContexts=r,this.parent=s}get(n,r){return n===W_?this.route:n===Z_?this.childContexts:this.parent.get(n,r)}}class KO{}class YO{preload(n,r){return(0,it.of)(null)}}let QO=(()=>{class i{constructor(r,s,l,d,f){this.router=r,this.injector=d,this.preloadingStrategy=f,this.loader=new WO(s,l,S=>r.triggerEvent(new rO(S)),S=>r.triggerEvent(new iO(S)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ui(r=>r instanceof db),cb(()=>this.preload())).subscribe(()=>{})}preload(){const r=this.injector.get(m.h0i);return this.processRoutes(r,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,s){const l=[];for(const d of s)if(d.loadChildren&&!d.canLoad&&d._loadedConfig){const f=d._loadedConfig;l.push(this.processRoutes(f.module,f.routes))}else d.loadChildren&&!d.canLoad?l.push(this.preloadConfig(r,d)):d.children&&l.push(this.processRoutes(r,d.children));return(0,Jt.D)(l).pipe((0,Dd.J)(),(0,St.U)(d=>{}))}preloadConfig(r,s){return this.preloadingStrategy.preload(s,()=>(s._loadedConfig?(0,it.of)(s._loadedConfig):this.loader.load(r.injector,s)).pipe((0,Ji.zg)(d=>(s._loadedConfig=d,this.processRoutes(d.module,d.routes)))))}}return i.\u0275fac=function(r){return new(r||i)(m.LFG(ws),m.LFG(m.v3s),m.LFG(m.Sil),m.LFG(m.zs3),m.LFG(KO))},i.\u0275prov=m.Yz7({token:i,factory:i.\u0275fac}),i})(),fN=(()=>{class i{constructor(r,s,l={}){this.router=r,this.viewportScroller=s,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(r=>{r instanceof Zx?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof db&&(this.lastId=r.id,this.scheduleScrollEvent(r,this.router.parseUrl(r.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(r=>{r instanceof sO&&(r.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(r.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,s){this.router.triggerEvent(new sO(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,s))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(r){return new(r||i)(m.LFG(ws),m.LFG(sl),m.LFG(void 0))},i.\u0275prov=m.Yz7({token:i,factory:i.\u0275fac}),i})();const Vg=new m.OlP("ROUTER_CONFIGURATION"),JO=new m.OlP("ROUTER_FORROOT_GUARD"),iL=[rt,{provide:Yx,useClass:gO},{provide:ws,useFactory:function(i,n,r,s,l,d,f,E={},C,S){const x=new ws(null,i,n,r,s,l,d,uO(f));return C&&(x.urlHandlingStrategy=C),S&&(x.routeReuseStrategy=S),function(i,n){i.errorHandler&&(n.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(n.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(n.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(n.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(n.urlUpdateStrategy=i.urlUpdateStrategy)}(E,x),E.enableTracing&&x.events.subscribe(N=>{var V,B;null===(V=console.group)||void 0===V||V.call(console,`Router Event: ${N.constructor.name}`),console.log(N.toString()),console.log(N),null===(B=console.groupEnd)||void 0===B||B.call(console)}),x},deps:[Yx,Z_,rt,m.zs3,m.v3s,m.Sil,cN,Vg,[class{},new m.FiY],[class{},new m.FiY]]},Z_,{provide:W_,useFactory:function(i){return i.routerState.root},deps:[ws]},{provide:m.v3s,useClass:m.EAV},QO,YO,class{preload(n,r){return r().pipe(Pg(()=>(0,it.of)(null)))}},{provide:Vg,useValue:{enableTracing:!1}}];function sL(){return new m.PXZ("Router",ws)}let oL=(()=>{class i{constructor(r,s){}static forRoot(r,s){return{ngModule:i,providers:[iL,XO(r),{provide:JO,useFactory:lL,deps:[[ws,new m.FiY,new m.tp0]]},{provide:Vg,useValue:s||{}},{provide:te,useFactory:uL,deps:[pe,[new m.tBr(be),new m.FiY],Vg]},{provide:fN,useFactory:aL,deps:[ws,sl,Vg]},{provide:KO,useExisting:s&&s.preloadingStrategy?s.preloadingStrategy:YO},{provide:m.PXZ,multi:!0,useFactory:sL},[pN,{provide:m.ip1,multi:!0,useFactory:fL,deps:[pN]},{provide:eP,useFactory:pL,deps:[pN]},{provide:m.tb,multi:!0,useExisting:eP}]]}}static forChild(r){return{ngModule:i,providers:[XO(r)]}}}return i.\u0275fac=function(r){return new(r||i)(m.LFG(JO,8),m.LFG(ws,8))},i.\u0275mod=m.oAB({type:i}),i.\u0275inj=m.cJS({}),i})();function aL(i,n,r){return r.scrollOffset&&n.setOffset(r.scrollOffset),new fN(i,n,r)}function uL(i,n,r={}){return r.useHash?new je(i,n):new Pe(i,n)}function lL(i){return"guarded"}function XO(i){return[{provide:m.deG,multi:!0,useValue:i},{provide:cN,multi:!0,useValue:i}]}let pN=(()=>{class i{constructor(r){this.injector=r,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new xc.xQ}appInitializer(){return this.injector.get(k,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let s=null;const l=new Promise(E=>s=E),d=this.injector.get(ws),f=this.injector.get(Vg);return"disabled"===f.initialNavigation?(d.setUpLocationChangeListener(),s(!0)):"enabled"===f.initialNavigation||"enabledBlocking"===f.initialNavigation?(d.hooks.afterPreactivation=()=>this.initNavigation?(0,it.of)(null):(this.initNavigation=!0,s(!0),this.resultOfPreactivationDone),d.initialNavigation()):s(!0),l})}bootstrapListener(r){const s=this.injector.get(Vg),l=this.injector.get(QO),d=this.injector.get(fN),f=this.injector.get(ws),E=this.injector.get(m.z2F);r===E.components[0]&&(("enabledNonBlocking"===s.initialNavigation||void 0===s.initialNavigation)&&f.initialNavigation(),l.setUpPreloading(),d.init(),f.resetRootComponentType(E.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return i.\u0275fac=function(r){return new(r||i)(m.LFG(m.zs3))},i.\u0275prov=m.Yz7({token:i,factory:i.\u0275fac}),i})();function fL(i){return i.appInitializer.bind(i)}function pL(i){return i.bootstrapListener.bind(i)}const eP=new m.OlP("Router Initializer");let gN=(()=>{class i{constructor(r){this.firestore=r,this.readRecords().subscribe(s=>this.records=s)}readRecords(){return this.firestore.collection("records").snapshotChanges()}createRecord(r){return this.firestore.collection("records").add(r)}updateRecord(r,s){return this.firestore.collection("records").doc(r).set(s,{merge:!0})}}return i.\u0275fac=function(r){return new(r||i)(m.LFG(Mc))},i.\u0275prov=m.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),mN=(()=>{class i{constructor(r){this.firestore=r,this.readStatistics().subscribe(s=>this.statistics=s)}createStatistic(r){return this.firestore.collection("statistics").add(r)}readStatistics(){return this.firestore.collection("statistics").snapshotChanges()}}return i.\u0275fac=function(r){return new(r||i)(m.LFG(Mc))},i.\u0275prov=m.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function ke(i){return n=>[Hn(i.start),...i.steps.map(r=>ea(n/i.denominator,Hn(r)))]}F(6561),F(4762);const wb={bounce:ke({denominator:4,start:{},steps:[{transform:"translate3d(0, -30px, 0)","animation-timing-function":"cubic-bezier(0.755, 0.05, 0.855, 0.06)",offset:.43},{transform:"translate3d(0, -15px, 0)","animation-timing-function":"cubic-bezier(0.755, 0.05, 0.855, 0.06)",offset:.7},{transform:"translate3d(0, -4px, 0)",offset:.9},{"animation-timing-function":"cubic-bezier(0.215, 0.61, 0.355, 1)",transform:"translate3d(0, 0, 0)",offset:1}]}),flash:ke({denominator:4,start:{opacity:"1",offset:0},steps:[{opacity:"0",offset:.25},{opacity:"1",offset:.5},{opacity:"0",offset:.75},{opacity:"1",offset:1}]}),headShake:ke({denominator:5,start:{transform:"translateX(0)",offset:0},steps:[{transform:"translateX(-6px) rotateY(-9deg)",offset:.06},{transform:"translateX(5px) rotateY(7deg)",offset:.18},{transform:"translateX(-3px) rotateY(-5deg)",offset:.31},{transform:"translateX(2px) rotateY(3deg)",offset:.43},{transform:"translateX(0)",offset:.5}]}),heartBeat:ke({denominator:5,start:{transform:"scale(1)",offset:0},steps:[{transform:"scale(1.3)",offset:.14},{transform:"scale(1)",offset:.28},{transform:"scale(1.3)",offset:.42},{transform:"scale(1)",offset:.7}]}),pulse:ke({denominator:2,start:{transform:"scale3d(1, 1, 1)",offset:0},steps:[{transform:"scale3d(1.05, 1.05, 1.05)",offset:.5},{transform:"scale3d(1, 1, 1)",offset:1}]}),rubberBand:ke({denominator:6,start:{transform:"scale3d(1, 1, 1)",offset:0},steps:[{transform:"scale3d(1.25, 0.75, 1)",offset:.3},{transform:"scale3d(0.75, 1.25, 1)",offset:.4},{transform:"scale3d(1.15, 0.85, 1)",offset:.5},{transform:"scale3d(0.95, 1.05, 1)",offset:.65},{transform:"scale3d(1.05, 0.95, 1)",offset:.75},{transform:"scale3d(1, 1, 1)",offset:1}]}),shake:ke({denominator:10,start:{transform:"translate3d(0, 0, 0)",offset:0},steps:[{transform:"translate3d(-10px, 0, 0)"},{transform:"translate3d( 10px, 0, 0)"},{transform:"translate3d(-10px, 0, 0)"},{transform:"translate3d( 10px, 0, 0)"},{transform:"translate3d(-10px, 0, 0)"},{transform:"translate3d( 10px, 0, 0)"},{transform:"translate3d(-10px, 0, 0)"},{transform:"translate3d( 10px, 0, 0)"},{transform:"translate3d(-10px, 0, 0)"},{transform:"translate3d(0, 0, 0)"}]}),swing:ke({denominator:10,start:{},steps:[{transform:"rotate3d(0, 0, 1, 15deg)"},{transform:"rotate3d(0, 0, 1, -10deg)"},{transform:"rotate3d(0, 0, 1, 5deg)"},{transform:"rotate3d(0, 0, 1, -5deg)"},{transform:"rotate3d(0, 0, 1, 0deg)"}]}),tada:ke({denominator:10,start:{transform:"scale3d(1, 1, 1)"},steps:[{transform:"scale3d(0.9, 0.9, 0.9) rotate3d(0, 0, 1, -3deg)"},{transform:"scale3d(0.9, 0.9, 0.9) rotate3d(0, 0, 1, -3deg)"},{transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg)"},{transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg)"},{transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg)"},{transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg)"},{transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg)"},{transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg)"},{transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg)"},{transform:"scale3d(1, 1, 1)"}]}),wobble:ke({denominator:6,start:{transform:"translate3d(0, 0, 0)"},steps:[{transform:"translate3d(-25%, 0, 0) rotate3d(0, 0, 1, -5deg)"},{transform:"translate3d(20%, 0, 0) rotate3d(0, 0, 1, 3deg)"},{transform:"translate3d(-15%, 0, 0) rotate3d(0, 0, 1, -3deg)"},{transform:"translate3d(10%, 0, 0) rotate3d(0, 0, 1, 2deg)"},{transform:"translate3d(-5%, 0, 0) rotate3d(0, 0, 1, -1deg)"},{transform:"translate3d(0, 0, 0)"}]}),jello:ke({denominator:7,start:{transform:"translate3d(0, 0, 0)",offset:0},steps:[{transform:"skewX(-12.5deg) skewY(-12.5deg)",offset:.22},{transform:"skewX(6.25deg) skewY(6.25deg)",offset:.33},{transform:"skewX(-3.125deg) skewY(-3.125deg)",offset:.44},{transform:"skewX(1.5625deg) skewY(1.5625deg)",offset:.55},{transform:"skewX(-0.78125deg) skewY(-0.78125deg)",offset:.66},{transform:"skewX(0.390625deg) skewY(0.390625deg)",offset:.77},{transform:"skewX(-0.1953125deg) skewY(-0.1953125deg)",offset:.88}]}),bounceIn:ke({denominator:5,start:{opacity:"0",transform:"scale3d(0.3, 0.3, 0.3)",offset:0},steps:[{transform:"scale3d(1.1, 1.1, 1.1)",offset:.2},{transform:"scale3d(0.9, 0.9, 0.9)",offset:.4},{opacity:"1",transform:"scale3d(1.03, 1.03, 1.03)",offset:.6},{transform:"scale3d(0.97, 0.97, 0.97)",offset:.8},{opacity:"1",transform:"scale3d(1, 1, 1)"}]}),bounceInDown:ke({denominator:4,start:{opacity:"0",transform:"translate3d(0, -3000px, 0)",offset:0},steps:[{opacity:"1",transform:"translate3d(0, 25px, 0)",offset:.6},{transform:"translate3d(0, -10px, 0)",offset:.75},{transform:"translate3d(0, 5px, 0)",offset:.9},{transform:"translate3d(0, 0, 0)"}]}),bounceInLeft:ke({denominator:4,start:{opacity:"0",transform:"translate3d(-3000px, 0, 0)",offset:0},steps:[{opacity:"1",transform:"translate3d(25px, 0, 0)",offset:.6},{transform:"translate3d(-10px, 0, 0)",offset:.75},{transform:"translate3d(5px, 0, 0)",offset:.9},{transform:"translate3d(0, 0, 0)"}]}),bounceInRight:ke({denominator:4,start:{opacity:"0",transform:"translate3d(3000px, 0, 0)",offset:0},steps:[{opacity:"1",transform:"translate3d(-25px, 0, 0)",offset:.6},{transform:"translate3d(10px, 0, 0)",offset:.75},{transform:"translate3d(-5px, 0, 0)",offset:.9},{transform:"translate3d(0, 0, 0)"}]}),bounceInUp:ke({denominator:4,start:{opacity:"0",transform:"translate3d(0, 3000px, 0)",offset:0},steps:[{opacity:"1",transform:"translate3d(0, -25px, 0)",offset:.6},{transform:"translate3d(0, 10px, 0)",offset:.75},{transform:"translate3d(0, -5px, 0)",offset:.9},{transform:"translate3d(0, 0, 0)"}]}),bounceOut:ke({denominator:3,start:{},steps:[{transform:"scale3d(0.9, 0.9, 0.9",offset:.2},{opacity:1,transform:"scale3d(1.1, 1.1, 1.1",offset:.55},{opacity:0,transform:"scale3d(0.3, 0.3, 0.3"}]}),bounceOutDown:ke({denominator:3,start:{},steps:[{transform:"translate3d(0, 10px, 0",offset:.2},{opacity:1,transform:"translate3d(0, -20px, 0",offset:.45},{opacity:0,transform:"translate3d(0, 2000px, 0"}]}),bounceOutLeft:ke({denominator:2,start:{},steps:[{opacity:1,transform:"translate3d(20px, 0, 0",offset:.2},{opacity:0,transform:"translate3d(-2000px, 0, 0"}]}),bounceOutRight:ke({denominator:2,start:{},steps:[{opacity:1,transform:"translate3d(-20px, 0, 0",offset:.2},{opacity:0,transform:"translate3d(2000px, 0, 0"}]}),bounceOutUp:ke({denominator:3,start:{},steps:[{transform:"translate3d(0, -10px, 0",offset:.2},{opacity:1,transform:"translate3d(0, 20px, 0",offset:.45},{opacity:0,transform:"translate3d(0, -2000px, 0"}]}),fadeIn:ke({denominator:1,start:{opacity:"0"},steps:[{opacity:"1"}]}),fadeInDown:ke({denominator:1,start:{opacity:"0",transform:"translate3d(0, -100%, 0"},steps:[{opacity:"1",transform:"translate3d(0, 0, 0"}]}),fadeInDownBig:ke({denominator:1,start:{opacity:"0",transform:"translate3d(0, -2000px, 0"},steps:[{opacity:"1",transform:"translate3d(0, 0, 0"}]}),fadeInLeft:ke({denominator:1,start:{opacity:"0",transform:"translate3d(-100%, 0, 0"},steps:[{opacity:"1",transform:"translate3d(0, 0, 0"}]}),fadeInLeftBig:ke({denominator:1,start:{opacity:"0",transform:"translate3d(-2000px, 0, 0"},steps:[{opacity:"1",transform:"translate3d(0, 0, 0"}]}),fadeInRight:ke({denominator:1,start:{opacity:"0",transform:"translate3d(100%, 0, 0"},steps:[{opacity:"1",transform:"translate3d(0, 0, 0"}]}),fadeInRightBig:ke({denominator:1,start:{opacity:"0",transform:"translate3d(2000px, 0, 0"},steps:[{opacity:"1",transform:"translate3d(0, 0, 0"}]}),fadeInUp:ke({denominator:1,start:{opacity:"0",transform:"translate3d(0, 100%, 0"},steps:[{opacity:"1",transform:"translate3d(0, 0, 0"}]}),fadeInUpBig:ke({denominator:1,start:{opacity:"0",transform:"translate3d(0, 2000px, 0"},steps:[{opacity:"1",transform:"translate3d(0, 0, 0"}]}),fadeOut:ke({denominator:1,start:{opacity:"1"},steps:[{opacity:"0"}]}),fadeOutDown:ke({denominator:1,start:{opacity:"1"},steps:[{opacity:"0",transform:"translate3d(0, 100%, 0"}]}),fadeOutDownBig:ke({denominator:1,start:{opacity:"1"},steps:[{opacity:"0",transform:"translate3d(0, 2000px, 0"}]}),fadeOutLeft:ke({denominator:1,start:{opacity:"1"},steps:[{opacity:"0",transform:"translate3d(-100%, 0, 0"}]}),fadeOutLeftBig:ke({denominator:1,start:{opacity:"1"},steps:[{opacity:"0",transform:"translate3d(-2000px, 0, 0"}]}),fadeOutRight:ke({denominator:1,start:{opacity:"1"},steps:[{opacity:"0",transform:"translate3d(100%, 0, 0"}]}),fadeOutRightBig:ke({denominator:1,start:{opacity:"1"},steps:[{opacity:"0",transform:"translate3d(2000px, 0, 0"}]}),fadeOutUp:ke({denominator:1,start:{opacity:"1"},steps:[{opacity:"0",transform:"translate3d(0, -100%, 0"}]}),fadeOutUpBig:ke({denominator:1,start:{opacity:"1"},steps:[{opacity:"0",transform:"translate3d(0, -2000px, 0"}]}),flip:ke({denominator:4,start:{transform:"perspective(400px) scale3d(1, 1, 1) translate3d(0, 0, 0) rotate3d(0, 1, 0, -360deg)"},steps:[{transform:"perspective(400px) scale3d(1, 1, 1) translate3d(0, 0, 150px) rotate3d(0, 1, 0, -190deg)"},{transform:"perspective(400px) scale3d(1, 1, 1) translate3d(0, 0, 150px) rotate3d(0, 1, 0, -170deg)"},{transform:"perspective(400px) scale3d(0.95, 0.95, 0.95) translate3d(0, 0, 0) rotate3d(0, 1, 0, 0deg)"},{transform:"perspective(400px) scale3d(1, 1, 1) translate3d(0, 0, 0) rotate3d(0, 1, 0, 0deg)"}]}),flipInX:ke({denominator:4,start:{transform:"perspective(400px) rotate3d(1, 0, 0, 90deg)"},steps:[{transform:"perspective(400px) rotate3d(1, 0, 0, -20deg)"},{transform:"perspective(400px) rotate3d(1, 0, 0, 10deg)"},{transform:"perspective(400px) rotate3d(1, 0, 0, -5deg)"},{transform:"perspective(400px)"}]}),flipInY:ke({denominator:4,start:{transform:"perspective(400px) rotate3d(0, 1, 0, 90deg)"},steps:[{transform:"perspective(400px) rotate3d(0, 1, 0, -20deg)"},{transform:"perspective(400px) rotate3d(0, 1, 0, 10deg)"},{transform:"perspective(400px) rotate3d(0, 1, 0, -5deg)"},{transform:"perspective(400px)"}]}),flipOutX:ke({denominator:2,start:{transform:"perspective(400px)"},steps:[{transform:"perspective(400px) rotate3d(1, 0, 0, -20deg)"},{opacity:0,transform:"perspective(400px) rotate3d(1, 0, 0, 90deg)"}]}),flipOutY:ke({denominator:2,start:{transform:"perspective(400px)"},steps:[{transform:"perspective(400px) rotate3d(0, 1, 0, -15deg)"},{opacity:0,transform:"perspective(400px) rotate3d(0, 1, 0, 90deg)"}]}),lightSpeedIn:ke({denominator:4,start:{opacity:"0",transform:"translate3d(100%, 0, 0) skewX(-30deg)"},steps:[{opacity:"1",transform:"skewX(20deg)",offset:.6},{transform:"skewX(-5deg)",offset:.8},{transform:"translate3d(0, 0, 0)"}]}),lightSpeedOut:ke({denominator:4,start:{opacity:"1"},steps:[{opacity:"0",transform:"translate3d(100%, 0, 0) skewX(30deg)"}]}),rotateIn:ke({denominator:2,start:{opacity:"0","transform-origin":"center",transform:"rotate3d(0, 0, 1, -200deg)"},steps:[{opacity:"1","transform-origin":"center",transform:"translate3d(0, 0, 0)"}]}),rotateInDownLeft:ke({denominator:2,start:{opacity:"0","transform-origin":"left bottom",transform:"rotate3d(0, 0, 1, -45deg)"},steps:[{opacity:"1","transform-origin":"left bottom",transform:"translate3d(0, 0, 0)"}]}),rotateInDownRight:ke({denominator:2,start:{opacity:"0","transform-origin":"right bottom",transform:"rotate3d(0, 0, 1, 45deg)"},steps:[{opacity:"1","transform-origin":"right bottom",transform:"translate3d(0, 0, 0)"}]}),rotateInUpLeft:ke({denominator:2,start:{opacity:"0","transform-origin":"left bottom",transform:"rotate3d(0, 0, 1, 45deg)"},steps:[{opacity:"1","transform-origin":"left bottom",transform:"translate3d(0, 0, 0)"}]}),rotateInUpRight:ke({denominator:2,start:{opacity:"0","transform-origin":"right bottom",transform:"rotate3d(0, 0, 1, -90deg)"},steps:[{opacity:"1","transform-origin":"right bottom",transform:"translate3d(0, 0, 0)"}]}),rotateOut:ke({denominator:2,start:{opacity:"1","transform-origin":"center"},steps:[{opacity:"0","transform-origin":"center",transform:"rotate3d(0, 0, 1, 200deg"}]}),rotateOutDownLeft:ke({denominator:2,start:{opacity:"1","transform-origin":"left bottom"},steps:[{opacity:"0","transform-origin":"left bottom",transform:"rotate3d(0, 0, 1, 45deg"}]}),rotateOutDownRight:ke({denominator:2,start:{opacity:"1","transform-origin":"right bottom"},steps:[{opacity:"0","transform-origin":"right bottom",transform:"rotate3d(0, 0, 1, -45deg"}]}),rotateOutUpLeft:ke({denominator:2,start:{opacity:"1","transform-origin":"left bottom"},steps:[{opacity:"0","transform-origin":"left bottom",transform:"rotate3d(0, 0, 1, -45deg"}]}),rotateOutUpRight:ke({denominator:2,start:{opacity:"1","transform-origin":"right bottom"},steps:[{opacity:"0","transform-origin":"right bottom",transform:"rotate3d(0, 0, 1, 90deg"}]}),slideInUp:ke({denominator:2,start:{visibility:"visible",transform:"translate3d(0, 100%, 0"},steps:[{transform:"translate3d(0, 0, 0"}]}),slideInDown:ke({denominator:2,start:{visibility:"visible",transform:"translate3d(0, -100%, 0"},steps:[{transform:"translate3d(0, 0, 0"}]}),slideInLeft:ke({denominator:2,start:{visibility:"visible",transform:"translate3d(-100%, 0, 0"},steps:[{transform:"translate3d(0, 0, 0"}]}),slideInRight:ke({denominator:2,start:{visibility:"visible",transform:"translate3d(100%, 0, 0"},steps:[{transform:"translate3d(0, 0, 0"}]}),slideOutUp:ke({denominator:2,start:{transform:"translate3d(0, 0, 0"},steps:[{visibility:"hidden",transform:"translate3d(0, -100%, 0"}]}),slideOutDown:ke({denominator:2,start:{transform:"translate3d(0, 0, 0"},steps:[{visibility:"hidden",transform:"translate3d(0, 100%, 0"}]}),slideOutLeft:ke({denominator:2,start:{transform:"translate3d(0, 0, 0"},steps:[{visibility:"hidden",transform:"translate3d(-100%, 0, 0"}]}),slideOutRight:ke({denominator:2,start:{transform:"translate3d(0, 0, 0"},steps:[{visibility:"hidden",transform:"translate3d(100%, 0, 0"}]}),zoomIn:ke({denominator:1,start:{opacity:"0",transform:"scale3d(0.3, 0.3, 0.3)"},steps:[{opacity:"1",transform:"scale3d(1, 1, 1)"}]}),zoomInDown:ke({denominator:1,start:{opacity:"0",transform:"scale3d(0.1, 0.1, 0.1) translate3d(0, -1000px, 0)","animation-timing-function":"cubic-bezier(0.55, 0.055, 0.675, 0.19)"},steps:[{opacity:"1",transform:"scale3d(1, 1, 1) translate3d(0, 0, 0)","animation-timing-function":"cubic-bezier(0.175, 0.885, 0.32, 1)"}]}),zoomInLeft:ke({denominator:1,start:{opacity:"0",transform:"scale3d(0.1, 0.1, 0.1) translate3d(-1000px, 0, 0)","animation-timing-function":"cubic-bezier(0.55, 0.055, 0.675, 0.19)"},steps:[{opacity:"1",transform:"scale3d(1, 1, 1) translate3d(0, 0, 0)","animation-timing-function":"cubic-bezier(0.175, 0.885, 0.32, 1)"}]}),zoomInRight:ke({denominator:1,start:{opacity:"0",transform:"scale3d(0.1, 0.1, 0.1) translate3d(1000px, 0, 0)","animation-timing-function":"cubic-bezier(0.55, 0.055, 0.675, 0.19)"},steps:[{opacity:"1",transform:"scale3d(1, 1, 1) translate3d(0, 0, 0)","animation-timing-function":"cubic-bezier(0.175, 0.885, 0.32, 1)"}]}),zoomInUp:ke({denominator:1,start:{opacity:"0",transform:"scale3d(0.1, 0.1, 0.1) translate3d(0, 1000px, 0)","animation-timing-function":"cubic-bezier(0.55, 0.055, 0.675, 0.19)"},steps:[{opacity:"1",transform:"scale3d(1, 1, 1) translate3d(0, 0, 0)","animation-timing-function":"cubic-bezier(0.175, 0.885, 0.32, 1)"}]}),zoomOut:ke({denominator:1,start:{opacity:"1"},steps:[{opacity:"0",transform:"scale3d(0.3, 0.3, 0.3)",offset:.5},{opacity:"0"}]}),zoomOutDown:ke({denominator:1,start:{},steps:[{opacity:"0.5",transform:"scale3d(0.475, 0.475, 0.475) translate3d(0, 0, 0)","animation-timing-function":"cubic-bezier(0.55, 0.055, 0.675, 0.19)",offset:.4},{opacity:"0","transform-origin":"center bottom",transform:"scale3d(0.1, 0.1, 0.1) translate3d(0, 2000px, 0)","animation-timing-function":"cubic-bezier(0.175, 0.885, 0.32, 1)"}]}),zoomOutLeft:ke({denominator:1,start:{},steps:[{opacity:"0.5",transform:"scale3d(0.475, 0.475, 0.475) translate3d(42px, 0, 0)",offset:.4},{opacity:"0","transform-origin":"left center",transform:"scale(0.1) translate3d(-2000px, 0, 0)"}]}),zoomOutRight:ke({denominator:1,start:{},steps:[{opacity:"0.5",transform:"scale3d(0.475, 0.475, 0.475) translate3d(-42px, 0, 0)",offset:.4},{opacity:"0","transform-origin":"right center",transform:"scale(0.1) translate3d(2000px, 0, 0)"}]}),zoomOutUp:ke({denominator:1,start:{},steps:[{opacity:"0.5",transform:"scale3d(0.475, 0.475, 0.475) translate3d(0, 60px, 0)","animation-timing-function":"cubic-bezier(0.55, 0.055, 0.675, 0.19)",offset:.4},{opacity:"0","transform-origin":"center bottom",transform:"scale3d(0.1, 0.1, 0.1) translate3d(0, -2000px, 0)","animation-timing-function":"cubic-bezier(0.175, 0.885, 0.32, 1)"}]}),hinge:ke({denominator:3,start:{"transform-origin":"top left","animation-timing-function":"ease-in-out"},steps:[{"transform-origin":"top left","animation-timing-function":"ease-in-out",transform:"rotate3d(0, 0, 1, 80deg)"},{opacity:"1","transform-origin":"top left","animation-timing-function":"ease-in-out",transform:"rotate3d(0, 0, 1, 60deg)"},{opacity:"0","transform-origin":"top left","animation-timing-function":"ease-in-out",transform:"translate3d(0, 700px, 0)"}]}),jackInTheBox:ke({denominator:3,start:{opacity:"0","transform-origin":"center bottom",transform:"scale(0.1) rotate(30deg)"},steps:[{transform:"rotate(-10deg)"},{transform:"rotate(3deg)"},{opacity:"1",transform:"scale(1)"}]}),rollIn:ke({denominator:1,start:{opacity:"0",transform:"translate3d(-100%, 0, 0) rotate3d(0, 0, 1, -120deg)"},steps:[{opacity:"1",transform:"translate3d(0, 0, 0)"}]}),rollOut:ke({denominator:1,start:{opacity:"1"},steps:[{opacity:"0",transform:"translate3d(100%, 0, 0) rotate3d(0, 0, 1, 120deg)"}]}),backInDown:ke({denominator:1,start:{opacity:"0.7",transform:"translateY(-1200px) scale(0.7)"},steps:[{opacity:"0.7",transform:"translateY(0px) scale(0.7)",offset:.8},{opacity:"1",transform:"scale(1)",offset:1}]}),backInLeft:ke({denominator:1,start:{opacity:"0.7",transform:"translateX(-2000px) scale(0.7)"},steps:[{opacity:"0.7",transform:"translateX(0px) scale(0.7)",offset:.8},{opacity:"1",transform:"scale(1)",offset:1}]}),backInRight:ke({denominator:1,start:{opacity:"0.7",transform:"translateX(2000px) scale(0.7)"},steps:[{opacity:"0.7",transform:"translateX(0px) scale(0.7)",offset:.8},{opacity:"1",transform:"scale(1)",offset:1}]}),backInUp:ke({denominator:1,start:{opacity:"0.7",transform:"translateY(1200px) scale(0.7)"},steps:[{opacity:"0.7",transform:"translateY(0px) scale(0.7)",offset:.8},{opacity:"1",transform:"scale(1)",offset:1}]}),backOutDown:ke({denominator:1,start:{opacity:"1",transform:"scale(1)"},steps:[{opacity:"0.7",transform:"translateY(0px) scale(0.7)",offset:.2},{opacity:"0.7",transform:"translateY(700px) scale(0.7)",offset:1}]}),backOutLeft:ke({denominator:1,start:{opacity:"1",transform:"scale(1)"},steps:[{opacity:"0.7",transform:"translateX(0px) scale(0.7)",offset:.2},{opacity:"0.7",transform:"translateX(-2000px) scale(0.7)",offset:1}]}),backOutRight:ke({denominator:1,start:{opacity:"1",transform:"scale(1)"},steps:[{opacity:"0.7",transform:"translateX(0px) scale(0.7)",offset:.2},{opacity:"0.7",transform:"translateX(2000px) scale(0.7)",offset:1}]}),backOutUp:ke({denominator:1,start:{opacity:"1",transform:"scale(1)"},steps:[{opacity:"0.7",transform:"translateY(0px) scale(0.7)",offset:.2},{opacity:"0.7",transform:"translateY(-700px) scale(0.7)",offset:1}]})};function YV(i={}){return ns(i.stateChangeExpr||"* => *",[bl(":enter",[Hn({opacity:0,position:"absolute"})],{optional:!0}),bl(":leave",[Hn({position:"absolute"}),...i.leave||wb.bounceOut(200)],{optional:!0}),bl(":enter",[Hn({position:"absolute"}),...i.enter||wb.bounceIn(200)],{optional:!0})])}let QV=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=m.Xpm({type:i,selectors:[["app-header"]],decls:10,vars:0,consts:[["routerLink","MineSweeper/game"],["routerLink","MineSweeper/records"],["routerLink","MineSweeper/statistics"]],template:function(r,s){1&r&&(m.TgZ(0,"header"),m.TgZ(1,"div"),m.TgZ(2,"a",0),m._uU(3,"Game"),m.qZA(),m.qZA(),m.TgZ(4,"div"),m.TgZ(5,"a",1),m._uU(6,"Records"),m.qZA(),m.qZA(),m.TgZ(7,"div"),m.TgZ(8,"a",2),m._uU(9,"Statistics"),m.qZA(),m.qZA(),m.qZA())},directives:[kS],styles:["header[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:row;justify-content:space-around;position:relative;background-color:#374844;color:#f8f8ff;text-decoration:underline}"]}),i})(),JV=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=m.Xpm({type:i,selectors:[["app-footer"]],decls:9,vars:0,consts:[["href","https://github.com/6mahdapihka9"]],template:function(r,s){1&r&&(m.TgZ(0,"footer"),m.TgZ(1,"p"),m._uU(2,"E-mail: kulesh.oleksandr@gmail.com"),m.qZA(),m.TgZ(3,"p"),m._uU(4,"GitHub: "),m.TgZ(5,"a",0),m._uU(6,"https://github.com/6mahdapihka9"),m.qZA(),m.qZA(),m.TgZ(7,"p"),m._uU(8,"Zul'Jin x Baal x K.O. - Copyright \xa9 2021"),m.qZA(),m.qZA())},styles:["footer[_ngcontent-%COMP%]{padding:60px;display:flex;flex-direction:column;align-items:center;flex-shrink:0;background-color:#374448;color:#f8f8ff}footer[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-size:15px!important}"]}),i})(),XV=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=m.Xpm({type:i,selectors:[["app-root"]],decls:5,vars:1,consts:[["o","outlet"],["id","footer-comp"]],template:function(r,s){if(1&r&&(m._UZ(0,"app-header"),m.TgZ(1,"main"),m._UZ(2,"router-outlet",null,0),m.qZA(),m._UZ(4,"app-footer",1)),2&r){const l=m.MAs(3);m.xp6(1),m.Q6J("@routeAnimation",l.activatedRouteData.animation)}},directives:[QV,hN,JV],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;flex:1 0 auto;margin:50px 0}"],data:{animation:[xs("routeAnimation",[YV({stateChangeExpr:"* => *",enter:wb.fadeIn(125),leave:wb.fadeOut(125)})])]}}),i})();const eU=function(i){return{color:i}};function tU(i,n){if(1&i&&(m.TgZ(0,"tr"),m.TgZ(1,"td"),m._uU(2),m.qZA(),m.TgZ(3,"td"),m._uU(4),m.qZA(),m.TgZ(5,"td"),m._uU(6),m.qZA(),m.TgZ(7,"td"),m._uU(8),m.qZA(),m.TgZ(9,"td"),m._uU(10),m.qZA(),m.TgZ(11,"td",1),m._uU(12),m.qZA(),m.qZA()),2&i){const r=n.$implicit;m.xp6(2),m.Oqu(r.payload.doc.data().width),m.xp6(2),m.Oqu(r.payload.doc.data().height),m.xp6(2),m.Oqu(r.payload.doc.data().mines),m.xp6(2),m.Oqu(r.payload.doc.data().time),m.xp6(2),m.Oqu(r.payload.doc.data().playerName?r.payload.doc.data().playerName:"--"),m.xp6(1),m.Q6J("ngStyle",m.VKq(7,eU,r.payload.doc.data().lost?"crimson":"forestgreen")),m.xp6(1),m.hij(" ",r.payload.doc.data().lost?"Lost":"Won"," ")}}let nU=(()=>{class i{constructor(r){this.SS=r}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)(m.Y36(mN))},i.\u0275cmp=m.Xpm({type:i,selectors:[["app-statistics"]],hostAttrs:[1,"content"],decls:17,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"ngStyle"]],template:function(r,s){1&r&&(m.TgZ(0,"table"),m.TgZ(1,"thead"),m.TgZ(2,"tr"),m.TgZ(3,"td"),m._uU(4,"Width"),m.qZA(),m.TgZ(5,"td"),m._uU(6,"Height"),m.qZA(),m.TgZ(7,"td"),m._uU(8,"Mines"),m.qZA(),m.TgZ(9,"td"),m._uU(10,"Time"),m.qZA(),m.TgZ(11,"td"),m._uU(12,"Player"),m.qZA(),m.TgZ(13,"td"),m._uU(14,"Result"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(15,"tbody"),m.YNc(16,tU,13,9,"tr",0),m.qZA(),m.qZA()),2&r&&(m.xp6(16),m.Q6J("ngForOf",s.SS.statistics))},directives:[Mi,Nn],styles:["table[_ngcontent-%COMP%]{background-color:#f8f8ff}tr[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{margin:0}td[_ngcontent-%COMP%]{padding:10px;border:1px solid darkgray}"]}),i})();function rU(i,n){if(1&i&&(m.TgZ(0,"tr"),m.TgZ(1,"td"),m._uU(2),m.qZA(),m.TgZ(3,"td"),m._uU(4),m.qZA(),m.TgZ(5,"td"),m._uU(6),m.qZA(),m.TgZ(7,"td"),m._uU(8),m.qZA(),m.TgZ(9,"td"),m._uU(10),m.qZA(),m.TgZ(11,"td"),m._uU(12),m.qZA(),m.TgZ(13,"td"),m._uU(14),m.qZA(),m.qZA()),2&i){const r=n.$implicit;m.xp6(2),m.Oqu(r.payload.doc.data().width),m.xp6(2),m.Oqu(r.payload.doc.data().height),m.xp6(2),m.Oqu(r.payload.doc.data().mines),m.xp6(2),m.Oqu(r.payload.doc.data().fastestTime),m.xp6(2),m.Oqu(r.payload.doc.data().playerName?r.payload.doc.data().playerName:"--"),m.xp6(2),m.Oqu(r.payload.doc.data().averageTime),m.xp6(2),m.Oqu(r.payload.doc.data().amountOfGames)}}let iU=(()=>{class i{constructor(r){this.RS=r}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)(m.Y36(gN))},i.\u0275cmp=m.Xpm({type:i,selectors:[["app-records"]],hostAttrs:[1,"content"],decls:19,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,s){1&r&&(m.TgZ(0,"table"),m.TgZ(1,"thead"),m.TgZ(2,"tr"),m.TgZ(3,"td"),m._uU(4,"Width"),m.qZA(),m.TgZ(5,"td"),m._uU(6,"Height"),m.qZA(),m.TgZ(7,"td"),m._uU(8,"Mines"),m.qZA(),m.TgZ(9,"td"),m._uU(10,"Fastest Time"),m.qZA(),m.TgZ(11,"td"),m._uU(12,"Player"),m.qZA(),m.TgZ(13,"td"),m._uU(14,"Average Time"),m.qZA(),m.TgZ(15,"td"),m._uU(16,"Games"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(17,"tbody"),m.YNc(18,rU,15,7,"tr",0),m.qZA(),m.qZA()),2&r&&(m.xp6(18),m.Q6J("ngForOf",s.RS.records))},directives:[Mi],styles:["table[_ngcontent-%COMP%]{background-color:#f8f8ff}tr[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{margin:0}td[_ngcontent-%COMP%]{padding:10px;border:1px solid darkgray}"]}),i})();const sU=function(i,n){return{backgroundColor:i,color:n}};let rP=(()=>{class i{constructor(){this.mineMarked=new m.vpe,this.mineExploded=new m.vpe,this.fieldOpened=new m.vpe,this.field={i:0,j:0,isMined:!1,isMarked:!1,minesAround:0,isLeftClicked:!1,id:"0-0"}}leftClick(){var r,s,l,d,f,E;(null===(r=this.field)||void 0===r?void 0:r.isMarked)||((null===(s=this.field)||void 0===s?void 0:s.isMined)?this.mineExploded.emit(!0):0===(null===(l=this.field)||void 0===l?void 0:l.minesAround)?this.fieldOpened.emit({i:null===(d=this.field)||void 0===d?void 0:d.i,j:null===(f=this.field)||void 0===f?void 0:f.j}):this.fieldOpened.emit(),null===(E=this.field)||void 0===E||(E.isLeftClicked=!0))}rightClick(){var r;this.mineMarked.emit(!(null===(r=this.field)||void 0===r?void 0:r.isMarked)),this.field&&(this.field.isMarked=!this.field.isMarked)}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=m.Xpm({type:i,selectors:[["app-field"]],inputs:{id:"id",field:"field"},outputs:{mineMarked:"mineMarked",mineExploded:"mineExploded",fieldOpened:"fieldOpened"},decls:2,vars:7,consts:[[3,"ngStyle","id","disabled","click","contextmenu"]],template:function(r,s){1&r&&(m.TgZ(0,"button",0),m.NdJ("click",function(){return s.leftClick()})("contextmenu",function(){return s.rightClick()}),m._uU(1),m.qZA()),2&r&&(m.s9C("id",s.id),m.Q6J("ngStyle",m.WLB(4,sU,null!=s.field&&s.field.isLeftClicked?"lightsteelblue":"burlywood",s.field.minesAround?s.field.minesAround<2?"rgb(0,0,255)":s.field.minesAround<3?"rgb(0,128,0)":s.field.minesAround<4?"rgb(255,0,0)":s.field.minesAround<5?"rgb(0,0,128)":s.field.minesAround<6?"rgb(128,0,0)":s.field.minesAround<7?"rgb(0,128,128)":s.field.minesAround<8?"rgb(0,0,0)":"rgb(128,128,128)":"black"))("disabled",null==s.field?null:s.field.isLeftClicked),m.xp6(1),m.hij(" ",void 0!==s.field.minesAround&&(s.field.isLeftClicked?s.field.isMined?"\u{1f4a3}":s.field.minesAround>0?s.field.minesAround:"":s.field.isMarked?"\u{1f6a9}":""),"\n"))},directives:[Nn],styles:["button[_ngcontent-%COMP%]{width:25px;height:25px;font-weight:900;font-size:15px}button[_ngcontent-%COMP%]:disabled{background-color:#000;color:initial;border:1px solid rgba(0,0,0,.1)}"]}),i})();function oU(i,n){if(1&i){const r=m.EpF();m.TgZ(0,"div",4),m.TgZ(1,"app-field",5),m.NdJ("mineMarked",function(l){return m.CHM(r),m.oxw(3).minesLeftChange(l)})("mineExploded",function(){return m.CHM(r),m.oxw(3).mineExploded()})("fieldOpened",function(l){return m.CHM(r),m.oxw(3).spacesLeftChange(l)}),m.qZA(),m.qZA()}if(2&i){const r=n.$implicit;m.xp6(1),m.Q6J("id",r.id)("field",r)}}function aU(i,n){if(1&i&&(m.TgZ(0,"div",2),m.YNc(1,oU,2,2,"div",3),m.qZA()),2&i){const r=n.$implicit;m.xp6(1),m.Q6J("ngForOf",r)}}function uU(i,n){if(1&i&&(m.TgZ(0,"div"),m.YNc(1,aU,2,1,"div",1),m.qZA()),2&i){const r=m.oxw();m.xp6(1),m.Q6J("ngForOf",r.board.fields)}}let iP=(()=>{class i{constructor(){this.minesMarked=new m.vpe,this.gameEnded=new m.vpe,this.gameStarted=new m.vpe}minesLeftChange(r){this.gameStarted.emit(),this.minesMarked.emit(r)}mineExploded(){this.gameStarted.emit(),this.gameEnded.emit(!0)}spacesLeftChange(r){var s;setTimeout(()=>{if(r){let l=r.i,d=r.j;this.buttonComp&&this.buttonComp.filter(f=>{var E,C,S,x,N,V,B;return!(!this.board||!(l>0&&f.id===l-1+"-"+d||l<(null===(E=this.board)||void 0===E?void 0:E.height)&&f.id===l+1+"-"+d||d>0&&f.id===l+"-"+(d-1)||d<(null===(C=this.board)||void 0===C?void 0:C.width)&&f.id===l+"-"+(d+1)||l>0&&d>0&&f.id===l-1+"-"+(d-1)||l>0&&d<(null===(S=this.board)||void 0===S?void 0:S.width)&&f.id===l-1+"-"+(d+1)||l<(null===(x=this.board)||void 0===x?void 0:x.height)&&d>0&&f.id===l+1+"-"+(d-1)||l<(null===(N=this.board)||void 0===N?void 0:N.height)&&d<(null===(V=this.board)||void 0===V?void 0:V.width)&&f.id===l+1+"-"+(d+1))||(null===(B=f.field)||void 0===B?void 0:B.isLeftClicked))}).forEach(f=>f.leftClick())}},0),this.amountOfFields&&this.board&&(this.amountOfFields--,this.amountOfFields-(null===(s=this.board)||void 0===s?void 0:s.mines)==0&&(this.gameEnded.emit(!1),this.minesMarked.emit(this.board.mines))),this.gameStarted.emit()}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=m.Xpm({type:i,selectors:[["app-board"]],viewQuery:function(r,s){if(1&r&&m.Gf(rP,5),2&r){let l;m.iGM(l=m.CRH())&&(s.buttonComp=l)}},inputs:{board:"board",amountOfFields:"amountOfFields"},outputs:{minesMarked:"minesMarked",gameEnded:"gameEnded",gameStarted:"gameStarted"},decls:1,vars:1,consts:[[4,"ngIf"],["class","rows",4,"ngFor","ngForOf"],[1,"rows"],["class","fields",4,"ngFor","ngForOf"],[1,"fields"],[3,"id","field","mineMarked","mineExploded","fieldOpened"]],template:function(r,s){1&r&&m.YNc(0,uU,2,1,"div",0),2&r&&m.Q6J("ngIf",s.board)},directives:[Is,Mi,rP],styles:[".rows[_ngcontent-%COMP%], .fields[_ngcontent-%COMP%], .fields[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{display:flex}.rows[_ngcontent-%COMP%]{flex-direction:row}.fields[_ngcontent-%COMP%], .fields[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{flex-direction:column}"]}),i})(),lU=(()=>{class i{constructor(){this.newBoard=new m.vpe,this.restartBoard=new m.vpe}generateNewBoard(){this.newBoard.emit()}restartGame(){this.restartBoard.emit()}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=m.Xpm({type:i,selectors:[["app-mines-counter"]],inputs:{minesTotal:"minesTotal",minesLeft:"minesLeft"},outputs:{newBoard:"newBoard",restartBoard:"restartBoard"},decls:10,vars:2,consts:[[3,"click"]],template:function(r,s){1&r&&(m.TgZ(0,"div"),m.TgZ(1,"h3"),m._uU(2),m.qZA(),m.TgZ(3,"h3"),m._uU(4),m.qZA(),m.qZA(),m.TgZ(5,"div"),m.TgZ(6,"button",0),m.NdJ("click",function(){return s.generateNewBoard()}),m._uU(7,"New game"),m.qZA(),m.TgZ(8,"button",0),m.NdJ("click",function(){return s.restartGame()}),m._uU(9,"Restart game"),m.qZA(),m.qZA()),2&r&&(m.xp6(2),m.hij("Mines total: ",s.minesTotal,""),m.xp6(2),m.hij("Mines left: ",s.minesLeft,""))},styles:["div[_ngcontent-%COMP%]:not(:last-child){margin-right:20px}div[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around}button[_ngcontent-%COMP%]{font-size:20px;padding:5px 30px;margin:5px 0;border:0;border-radius:10px}"]}),i})();const cU=function(i){return{color:i}};let dU=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=m.Xpm({type:i,selectors:[["app-announcer"]],inputs:{userLost:"userLost"},decls:2,vars:4,consts:[[3,"ngStyle"]],template:function(r,s){1&r&&(m.TgZ(0,"h1",0),m._uU(1),m.qZA()),2&r&&(m.Q6J("ngStyle",m.VKq(2,cU,s.userLost?"red":"green")),m.xp6(1),m.hij(" ",s.userLost?"Game over":"You won!","\n"))},directives:[Nn],styles:[""]}),i})();function hU(i,n){if(1&i&&m._UZ(0,"app-announcer",3),2&i){const r=m.oxw();m.Q6J("userLost",r.userLost)}}const fU=function(i){return{pointerEvents:i}};let pU=(()=>{class i{constructor(r,s){this.SS=r,this.RS=s,this.newBoard=new m.vpe,this.clicked=!1,this.gameStart=new Date,this.gameEnded=!1,this.userLost=!1,this.minesMarked=0}generateNewBoard(){this.newBoard.emit()}restartBoard(){var r;null===(r=this.board)||void 0===r||r.fields.forEach(s=>{s.forEach(l=>l.isLeftClicked=l.isMarked=!1)}),this.clicked=!1,this.gameEnded=!1,this.userLost=!1,this.minesMarked=0,this.board&&this.boardComp&&(this.boardComp.amountOfFields=this.amountOfFields=this.board.width*this.board.height)}changeAmountOfMinesLeft(r){"boolean"==typeof r?this.minesMarked+=r?1:-1:this.minesMarked=r,this.minesTotal&&(this.minesLeft=this.minesTotal-this.minesMarked)}gameStarted(){this.clicked||(this.clicked=!0,this.gameStart=new Date)}gameCondition(r){if(this.userLost=r,this.gameEnded=!0,this.board&&this.gameStart){let l=(new Date-this.gameStart)/1e3;if(this.SS.createStatistic({date:this.gameStart,width:this.board.width,height:this.board.height,mines:this.board.mines,time:l,playerName:this.userName?this.userName:"",lost:r}).catch(d=>console.log(d)),!this.userLost){let d=this.RS.records.find(f=>{var E,C,S;return f.payload.doc.data().width===(null===(E=this.board)||void 0===E?void 0:E.width)&&f.payload.doc.data().height===(null===(C=this.board)||void 0===C?void 0:C.height)&&f.payload.doc.data().mines===(null===(S=this.board)||void 0===S?void 0:S.mines)});d?this.RS.updateRecord(d.payload.doc.id,{fastestTime:d.payload.doc.data().fastestTime>l?l:d.payload.doc.data().fastestTime,playerName:d.payload.doc.data().fastestTime>l?this.userName?this.userName:"--":d.payload.doc.data().playerName,date:d.payload.doc.data().fastestTime>l?this.gameStart:d.payload.doc.data().date,averageTime:(d.payload.doc.data().averageTime*d.payload.doc.data().amountOfGames+l)/(d.payload.doc.data().amountOfGames+1),amountOfGames:d.payload.doc.data().amountOfGames+1}).catch(f=>console.log(f)):this.RS.createRecord({width:this.board.width,height:this.board.height,mines:this.board.mines,fastestTime:l,playerName:this.userName?this.userName:"--",date:this.gameStart,averageTime:l,amountOfGames:1}).catch(f=>console.log(f))}}}}return i.\u0275fac=function(r){return new(r||i)(m.Y36(mN),m.Y36(gN))},i.\u0275cmp=m.Xpm({type:i,selectors:[["app-gameplay-container"]],viewQuery:function(r,s){if(1&r&&m.Gf(iP,5),2&r){let l;m.iGM(l=m.CRH())&&(s.boardComp=l.first)}},inputs:{userName:"userName",board:"board",amountOfFields:"amountOfFields",minesTotal:"minesTotal",minesLeft:"minesLeft"},outputs:{newBoard:"newBoard"},decls:3,vars:8,consts:[["id","minesCounter",3,"minesTotal","minesLeft","newBoard","restartBoard"],["id","board",3,"ngStyle","board","amountOfFields","minesMarked","gameEnded","gameStarted"],["id","announcer",3,"userLost",4,"ngIf"],["id","announcer",3,"userLost"]],template:function(r,s){1&r&&(m.TgZ(0,"app-mines-counter",0),m.NdJ("newBoard",function(){return s.generateNewBoard()})("restartBoard",function(){return s.restartBoard()}),m.qZA(),m.TgZ(1,"app-board",1),m.NdJ("minesMarked",function(d){return s.changeAmountOfMinesLeft(d)})("gameEnded",function(d){return s.gameCondition(d)})("gameStarted",function(){return s.gameStarted()}),m.qZA(),m.YNc(2,hU,1,1,"app-announcer",2)),2&r&&(m.Q6J("minesTotal",s.minesTotal)("minesLeft",s.minesLeft),m.xp6(1),m.Q6J("ngStyle",m.VKq(6,fU,s.gameEnded?"none":"auto"))("board",s.board)("amountOfFields",s.amountOfFields),m.xp6(1),m.Q6J("ngIf",s.gameEnded))},directives:[lU,iP,Nn,Is,dU],styles:["#minesCounter[_ngcontent-%COMP%], #board[_ngcontent-%COMP%], #announcer[_ngcontent-%COMP%]{display:flex}#minesCounter[_ngcontent-%COMP%]{margin-bottom:30px}#announcer[_ngcontent-%COMP%]{justify-content:center;width:400px;padding:15px 0;background-color:#f8f8ffcc;position:absolute;top:calc(50% - 35px);left:calc(50% - 200px);border-radius:10px}"]}),i})();const gU=function(){return{opacity:"1"}},_N=function(i){return{opacity:i}};let mU=(()=>{class i{constructor(){this.setUserName=new m.vpe,this.tryToBuildBoard=new m.vpe,this.isWidthValid=this.isHeightValid=this.isMinesValid=!0,this.width=this.height=10,this.mines=20,this.name=""}changeWidth(r){let s=r.target.value;+s>9&&+s<41?(this.width=+s,this.isWidthValid=!0):this.isWidthValid=!1}changeHeight(r){let s=r.target.value;+s>9&&+s<21?(this.height=+s,this.isHeightValid=!0):this.isHeightValid=!1}changeMines(r){let s=r.target.value;+s>9&&+s<Math.floor(this.width*this.height/2)?(this.mines=+s,this.isMinesValid=!0):this.isMinesValid=!1}submit(r){r.preventDefault();let s=new Array(this.height).fill(new Array(this.width).fill(void 0));s=s.map((E,C)=>E.map((S,x)=>({i:C,j:x,isMined:!1,isMarked:!1,minesAround:0,id:C+"-"+x})));let d,f,l=this.mines;do{d=Math.floor(Math.random()*this.height),f=Math.floor(Math.random()*this.width),s[d][f].isMined||(s[d][f].isMined=!0,d>0&&(s[d-1][f].minesAround++,f>0&&s[d-1][f-1].minesAround++,f<this.width-1&&s[d-1][f+1].minesAround++),d<this.height-1&&(s[d+1][f].minesAround++,f>0&&s[d+1][f-1].minesAround++,f<this.width-1&&s[d+1][f+1].minesAround++),f>0&&s[d][f-1].minesAround++,f<this.width-1&&s[d][f+1].minesAround++,l--)}while(l>0);this.tryToBuildBoard.emit({width:this.width,height:this.height,mines:this.mines,fields:s}),this.setUserName.emit(this.name)}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=m.Xpm({type:i,selectors:[["app-board-form"]],outputs:{setUserName:"setUserName",tryToBuildBoard:"tryToBuildBoard"},decls:27,vars:16,consts:[[1,"input-group"],["type","text","name","login","placeholder","anonymous",3,"ngModel","ngModelChange"],[1,"info",3,"ngStyle"],["data-title","(min 10, max 40)",1,"input-group"],["type","number","value","10",3,"value","input"],[1,"error",3,"ngStyle"],["data-title","(min 10, max 20)",1,"input-group"],["data-title","(min 10, max w*h/2)",1,"input-group"],["type","number","value","20",3,"value","input"],[3,"disabled","click"]],template:function(r,s){1&r&&(m.TgZ(0,"form"),m.TgZ(1,"div",0),m.TgZ(2,"label"),m._uU(3,"Login"),m.qZA(),m.TgZ(4,"input",1),m.NdJ("ngModelChange",function(d){return s.name=d}),m.qZA(),m.qZA(),m.TgZ(5,"span",2),m._uU(6,"Login is not necessary"),m.qZA(),m.TgZ(7,"div",3),m.TgZ(8,"label"),m._uU(9,"Width"),m.qZA(),m.TgZ(10,"input",4),m.NdJ("input",function(d){return s.changeWidth(d)}),m.qZA(),m.qZA(),m.TgZ(11,"span",5),m._uU(12,"Width value invalid (min 10, max 40)"),m.qZA(),m.TgZ(13,"div",6),m.TgZ(14,"label"),m._uU(15,"Height"),m.qZA(),m.TgZ(16,"input",4),m.NdJ("input",function(d){return s.changeHeight(d)}),m.qZA(),m.qZA(),m.TgZ(17,"span",5),m._uU(18,"Height value invalid (min 10, max 20)"),m.qZA(),m.TgZ(19,"div",7),m.TgZ(20,"label"),m._uU(21,"Mines"),m.qZA(),m.TgZ(22,"input",8),m.NdJ("input",function(d){return s.changeMines(d)}),m.qZA(),m.qZA(),m.TgZ(23,"span",5),m._uU(24,"Mines value invalid (min 10, max w*h/2)"),m.qZA(),m.TgZ(25,"button",9),m.NdJ("click",function(d){return s.submit(d)}),m._uU(26,"Start game"),m.qZA(),m.qZA()),2&r&&(m.xp6(4),m.Q6J("ngModel",s.name),m.xp6(1),m.Q6J("ngStyle",m.DdM(9,gU)),m.xp6(5),m.Q6J("value",s.width),m.xp6(1),m.Q6J("ngStyle",m.VKq(10,_N,s.isWidthValid?"0":"1")),m.xp6(5),m.Q6J("value",s.height),m.xp6(1),m.Q6J("ngStyle",m.VKq(12,_N,s.isHeightValid?"0":"1")),m.xp6(5),m.Q6J("value",s.mines),m.xp6(1),m.Q6J("ngStyle",m.VKq(14,_N,s.isMinesValid?"0":"1")),m.xp6(2),m.Q6J("disabled",!s.isWidthValid||!s.isHeightValid||!s.isMinesValid))},directives:[PM,q,_S,Ng,U,Ux,Nn],styles:["form[_ngcontent-%COMP%]{width:400px;display:flex;flex-direction:column}.input-group[_ngcontent-%COMP%]{display:flex;flex-direction:row}.input-group[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;text-align:center;padding:10px 0;border:0;border-radius:10px}.input-group[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:50%}.input-group[_ngcontent-%COMP%]{position:relative}span[_ngcontent-%COMP%]{text-align:center;font-weight:initial;font-size:15px;border-radius:10px}.error[_ngcontent-%COMP%]{background-color:#ffc8c8cc;color:#dc143c}.info[_ngcontent-%COMP%]{background-color:#c8ffc8cc;color:#228b22}"]}),i})();function yU(i,n){if(1&i){const r=m.EpF();m.TgZ(0,"div"),m.TgZ(1,"app-gameplay-container",2),m.NdJ("newBoard",function(){return m.CHM(r),m.oxw().newBoard()}),m.qZA(),m.qZA()}if(2&i){const r=m.oxw();m.Q6J("@insertRemoveBoard",void 0),m.xp6(1),m.Q6J("board",r.board)("amountOfFields",r.amountOfFields)("minesTotal",r.board.mines)("minesLeft",r.board.mines)("userName",r.userName)}}function _U(i,n){if(1&i){const r=m.EpF();m.TgZ(0,"app-board-form",3),m.NdJ("tryToBuildBoard",function(l){return m.CHM(r),m.oxw().setBoard(l)})("setUserName",function(l){return m.CHM(r),m.oxw().setUserName(l)}),m.qZA()}2&i&&m.Q6J("@insertRemoveForm",void 0)}let sP=(()=>{class i{constructor(){this.gameBuilt=!1,window.oncontextmenu=r=>{r.preventDefault()}}setBoard(r){this.gameBuilt=!0,this.board=r,this.amountOfFields=r.width*r.height}newBoard(){this.gameBuilt=!1}setUserName(r){this.userName=r}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=m.Xpm({type:i,selectors:[["app-game"]],hostAttrs:[1,"content"],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["boardForm",""],[1,"game",3,"board","amountOfFields","minesTotal","minesLeft","userName","newBoard"],[1,"game",3,"tryToBuildBoard","setUserName"]],template:function(r,s){if(1&r&&(m.YNc(0,yU,2,6,"div",0),m.YNc(1,_U,1,1,"ng-template",null,1,m.W1O)),2&r){const l=m.MAs(2);m.Q6J("ngIf",s.gameBuilt&&s.board)("ngIfElse",l)}},directives:[Is,pU,mU],styles:[".game[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}"],data:{animation:[xs("insertRemoveBoard",[ns(":enter",[Hn({opacity:0,display:"none"}),ea("300ms",Hn({opacity:1,display:"flex"}))]),ns(":leave",[Hn({opacity:1,display:"flex"}),ea("300ms",Hn({opacity:0,display:"none"}))])]),xs("insertRemoveForm",[ns(":enter",[Hn({opacity:0,display:"none"}),ea("300ms",Hn({opacity:1,display:"flex"}))]),ns(":leave",[Hn({opacity:1,display:"flex"}),ea("300ms",Hn({opacity:0,display:"none"}))])])]}}),i})();const oP_firebaseConfig={apiKey:"AIzaSyCtb9dt7UKRoQCQSQv6lkjnJvaWDnIGQuI",authDomain:"minesweeper-830b3.firebaseapp.com",projectId:"minesweeper-830b3",storageBucket:"minesweeper-830b3.appspot.com",messagingSenderId:"605988123822",appId:"1:605988123822:web:59d05f6ecbc7faf35ea93f",measurementId:"G-Q88LFPPVYC"},vU=[{path:"MineSweeper/game",component:sP,data:{animation:"game"}},{path:"MineSweeper/statistics",component:nU,data:{animation:"statistics"}},{path:"MineSweeper/records",component:iU,data:{animation:"records"}},{path:"MineSweeper/**",component:sP,data:{animation:"game"}}];let EU=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=m.oAB({type:i,bootstrap:[XV]}),i.\u0275inj=m.cJS({providers:[gN,mN],imports:[[zg,Xo,dt,qP,Lt.hO.initializeApp(oP_firebaseConfig),y1,sM,sS,oL.forRoot(vU)]]}),i})();(0,m.G48)(),ov().bootstrapModule(EU).catch(i=>console.error(i))},4762:(Ke,we,F)=>{"use strict";function _e(ie,ae){var he={};for(var ue in ie)Object.prototype.hasOwnProperty.call(ie,ue)&&ae.indexOf(ue)<0&&(he[ue]=ie[ue]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var le=0;for(ue=Object.getOwnPropertySymbols(ie);le<ue.length;le++)ae.indexOf(ue[le])<0&&Object.prototype.propertyIsEnumerable.call(ie,ue[le])&&(he[ue[le]]=ie[ue[le]])}return he}function pe(ie,ae,he,ue){return new(he||(he=Promise))(function(X,Me){function Qe(wt){try{ot(ue.next(wt))}catch(rn){Me(rn)}}function Tt(wt){try{ot(ue.throw(wt))}catch(rn){Me(rn)}}function ot(wt){wt.done?X(wt.value):function(X){return X instanceof he?X:new he(function(Me){Me(X)})}(wt.value).then(Qe,Tt)}ot((ue=ue.apply(ie,ae||[])).next())})}function Z(ie,ae){var ue,le,X,Me,he={label:0,sent:function(){if(1&X[0])throw X[1];return X[1]},trys:[],ops:[]};return Me={next:Qe(0),throw:Qe(1),return:Qe(2)},"function"==typeof Symbol&&(Me[Symbol.iterator]=function(){return this}),Me;function Qe(ot){return function(wt){return function(ot){if(ue)throw new TypeError("Generator is already executing.");for(;he;)try{if(ue=1,le&&(X=2&ot[0]?le.return:ot[0]?le.throw||((X=le.return)&&X.call(le),0):le.next)&&!(X=X.call(le,ot[1])).done)return X;switch(le=0,X&&(ot=[2&ot[0],X.value]),ot[0]){case 0:case 1:X=ot;break;case 4:return he.label++,{value:ot[1],done:!1};case 5:he.label++,le=ot[1],ot=[0];continue;case 7:ot=he.ops.pop(),he.trys.pop();continue;default:if(!(X=(X=he.trys).length>0&&X[X.length-1])&&(6===ot[0]||2===ot[0])){he=0;continue}if(3===ot[0]&&(!X||ot[1]>X[0]&&ot[1]<X[3])){he.label=ot[1];break}if(6===ot[0]&&he.label<X[1]){he.label=X[1],X=ot;break}if(X&&he.label<X[2]){he.label=X[2],he.ops.push(ot);break}X[2]&&he.ops.pop(),he.trys.pop();continue}ot=ae.call(ie,he)}catch(wt){ot=[6,wt],le=0}finally{ue=X=0}if(5&ot[0])throw ot[1];return{value:ot[0]?ot[1]:void 0,done:!0}}([ot,wt])}}}function Y(ie){var ae="function"==typeof Symbol&&Symbol.iterator,he=ae&&ie[ae],ue=0;if(he)return he.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&ue>=ie.length&&(ie=void 0),{value:ie&&ie[ue++],done:!ie}}};throw new TypeError(ae?"Object is not iterable.":"Symbol.iterator is not defined.")}function K(ie,ae){var he="function"==typeof Symbol&&ie[Symbol.iterator];if(!he)return ie;var le,Me,ue=he.call(ie),X=[];try{for(;(void 0===ae||ae-- >0)&&!(le=ue.next()).done;)X.push(le.value)}catch(Qe){Me={error:Qe}}finally{try{le&&!le.done&&(he=ue.return)&&he.call(ue)}finally{if(Me)throw Me.error}}return X}function ne(ie,ae,he){if(he||2===arguments.length)for(var X,ue=0,le=ae.length;ue<le;ue++)(X||!(ue in ae))&&(X||(X=Array.prototype.slice.call(ae,0,ue)),X[ue]=ae[ue]);return ie.concat(X||Array.prototype.slice.call(ae))}F.d(we,{_T:()=>_e,mG:()=>pe,Jh:()=>Z,XA:()=>Y,CR:()=>K,ev:()=>ne})},8239:(Ke,we,F)=>{"use strict";function m(j,_e,me,oe,Ee,pe,Z){try{var k=j[pe](Z),L=k.value}catch(Y){return void me(Y)}k.done?_e(L):Promise.resolve(L).then(oe,Ee)}function ee(j){return function(){var _e=this,me=arguments;return new Promise(function(oe,Ee){var pe=j.apply(_e,me);function Z(L){m(pe,oe,Ee,Z,k,"next",L)}function k(L){m(pe,oe,Ee,Z,k,"throw",L)}Z(void 0)})}}F.d(we,{Z:()=>ee})}},Ke=>{Ke(Ke.s=748)}]);