(self.webpackChunkmine_sweeper=self.webpackChunkmine_sweeper||[]).push([[179],{8255:et=>{function Ne(L){return Promise.resolve().then(()=>{var b=new Error("Cannot find module '"+L+"'");throw b.code="MODULE_NOT_FOUND",b})}Ne.keys=()=>[],Ne.resolve=Ne,Ne.id=8255,et.exports=Ne},4693:(et,Ne,L)=>{"use strict";L.d(Ne,{AFp:()=>y0,ip1:()=>Ey,CZH:()=>Vl,hGG:()=>mT,z2F:()=>yp,sBO:()=>NE,_Vd:()=>Ss,EJc:()=>fp,SBq:()=>As,qLn:()=>Jn,vpe:()=>xs,gxx:()=>Yc,OlP:()=>qt,zs3:()=>un,ZZ4:()=>Cd,aQg:()=>Ad,soG:()=>Ud,h0i:()=>Sl,PXZ:()=>Ty,R0b:()=>ti,FiY:()=>gs,Lbi:()=>GD,g9A:()=>by,Qsj:()=>DE,FYo:()=>Hm,JOm:()=>Qs,Tiy:()=>fu,q3G:()=>fn,Rgc:()=>Qf,dDg:()=>JD,q4F:()=>CE,GfV:()=>qm,s_b:()=>Rd,ifc:()=>Q,eFA:()=>Cy,G48:()=>mp,X6Q:()=>Dy,_c5:()=>YA,VLi:()=>FA,c2e:()=>WD,zSh:()=>Ef,wAp:()=>tt,vHH:()=>X,EiD:()=>wr,mCW:()=>kn,qzn:()=>mi,JVY:()=>w_,pB0:()=>ug,eBb:()=>Rh,L6k:()=>b_,LAX:()=>I_,cg1:()=>Vf,Tjo:()=>QA,kL8:()=>Il,yhl:()=>Nc,dqk:()=>yt,sIi:()=>to,QGY:()=>dm,F4k:()=>Hv,RDi:()=>Mu,AaK:()=>fe,z3N:()=>xi,TTD:()=>Ru,xp6:()=>Z_,Xpm:()=>ai,lG2:()=>Mn,Yz7:()=>sn,cJS:()=>gr,oAB:()=>Gd,Yjl:()=>Wd,Y36:()=>ud,_UZ:()=>Ib,qZA:()=>cd,TgZ:()=>ld,EpF:()=>Yo,LFG:()=>an,$8M:()=>mh,NdJ:()=>El,CRH:()=>RD,oxw:()=>qv,Q6J:()=>Vv,s9C:()=>mn,VKq:()=>XE,WLB:()=>cy,iGM:()=>AD,MAs:()=>Mv,CHM:()=>oh,kYT:()=>Cu,YNc:()=>ln,W1O:()=>a0,_uU:()=>Hb,hij:()=>Im,Gf:()=>ND});var b=L(9765),ne=L(5319),$=L(7574),ye=L(6682),me=L(7393);function he(){return function(s){return s.lift(new Ce(s))}}class Ce{constructor(s){this.connectable=s}call(s,u){const{connectable:c}=this;c._refCount++;const d=new Ie(s,c),f=u.subscribe(d);return d.closed||(d.connection=c.connect()),f}}class Ie extends me.L{constructor(s,u){super(s),this.connectable=u}_unsubscribe(){const{connectable:s}=this;if(!s)return void(this.connection=null);this.connectable=null;const u=s._refCount;if(u<=0)return void(this.connection=null);if(s._refCount=u-1,u>1)return void(this.connection=null);const{connection:c}=this,d=s._connection;this.connection=null,d&&(!c||d===c)&&d.unsubscribe()}}class ie extends $.y{constructor(s,u){super(),this.source=s,this.subjectFactory=u,this._refCount=0,this._isComplete=!1}_subscribe(s){return this.getSubject().subscribe(s)}getSubject(){const s=this._subject;return(!s||s.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let s=this._connection;return s||(this._isComplete=!1,s=this._connection=new ne.w,s.add(this.source.subscribe(new H(this.getSubject(),this))),s.closed&&(this._connection=null,s=ne.w.EMPTY)),s}refCount(){return he()(this)}}const k=(()=>{const o=ie.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:o._subscribe},_isComplete:{value:o._isComplete,writable:!0},getSubject:{value:o.getSubject},connect:{value:o.connect},refCount:{value:o.refCount}}})();class H extends b.Yc{constructor(s,u){super(s),this.connectable=u}_error(s){this._unsubscribe(),super._error(s)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const s=this.connectable;if(s){this.connectable=null;const u=s._connection;s._refCount=0,s._subject=null,s._connection=null,u&&u.unsubscribe()}}}function re(){return new b.xQ}function De(o){for(let s in o)if(o[s]===De)return s;throw Error("Could not find renamed property on target object.")}function fe(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(fe).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const s=o.toString();if(null==s)return""+s;const u=s.indexOf("\n");return-1===u?s:s.substring(0,u)}function Ve(o,s){return null==o||""===o?null===s?"":s:null==s||""===s?o:o+" "+s}const qe=De({__forward_ref__:De});function Ct(o){return o.__forward_ref__=Ct,o.toString=function(){return fe(this())},o}function Fe(o){return function(o){return"function"==typeof o&&o.hasOwnProperty(qe)&&o.__forward_ref__===Ct}(o)?o():o}class X extends Error{constructor(s,u){super(function(o,s){return`${o?`NG0${o}: `:""}${s}`}(s,u)),this.code=s}}function K(o){return"string"==typeof o?o:null==o?"":String(o)}function be(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():K(o)}function Zt(o,s){const u=s?` in ${s}`:"";throw new X("201",`No provider for ${be(o)} found${u}`)}function xn(o,s){null==o&&function(o,s,u,c){throw new Error(`ASSERTION ERROR: ${o}`+(null==c?"":` [Expected=> ${u} ${c} ${s} <=Actual]`))}(s,o,null,"!=")}function sn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function gr(o){return{providers:o.providers||[],imports:o.imports||[]}}function si(o){return lt(o,Pn)||lt(o,Ge)}function lt(o,s){return o.hasOwnProperty(s)?o[s]:null}function Yt(o){return o&&(o.hasOwnProperty(Ot)||o.hasOwnProperty(it))?o[Ot]:null}const Pn=De({\u0275prov:De}),Ot=De({\u0275inj:De}),Ge=De({ngInjectableDef:De}),it=De({ngInjectorDef:De});var Ke=(()=>((Ke=Ke||{})[Ke.Default=0]="Default",Ke[Ke.Host=1]="Host",Ke[Ke.Self=2]="Self",Ke[Ke.SkipSelf=4]="SkipSelf",Ke[Ke.Optional=8]="Optional",Ke))();let Ui;function oi(o){const s=Ui;return Ui=o,s}function mr(o,s,u){const c=si(o);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&Ke.Optional?null:void 0!==s?s:void Zt(fe(o),"Injector")}function j(o){return{toString:o}.toString()}var U=(()=>((U=U||{})[U.OnPush=0]="OnPush",U[U.Default=1]="Default",U))(),Q=(()=>((Q=Q||{})[Q.Emulated=0]="Emulated",Q[Q.None=2]="None",Q[Q.ShadowDom=3]="ShadowDom",Q))();const Ze="undefined"!=typeof globalThis&&globalThis,pt="undefined"!=typeof window&&window,Ht="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,_n="undefined"!=typeof global&&global,yt=Ze||_n||pt||Ht,hn={},Dt=[],_o=De({\u0275cmp:De}),Wl=De({\u0275dir:De}),Du=De({\u0275pipe:De}),$d=De({\u0275mod:De}),qd=De({\u0275loc:De}),Gr=De({\u0275fac:De}),vo=De({__NG_ELEMENT_ID__:De});let Tu=0;function ai(o){return j(()=>{const u={},c={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===U.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||Dt,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Q.Emulated,id:"c",styles:o.styles||Dt,_:null,setInput:null,schemas:o.schemas||null,tView:null},d=o.directives,f=o.features,_=o.pipes;return c.id+=Tu++,c.inputs=Np(o.inputs,u),c.outputs=Np(o.outputs),f&&f.forEach(v=>v(c)),c.directiveDefs=d?()=>("function"==typeof d?d():d).map(Ap):null,c.pipeDefs=_?()=>("function"==typeof _?_():_).map(zl):null,c})}function Ap(o){return Kn(o)||function(o){return o[Wl]||null}(o)}function zl(o){return function(o){return o[Du]||null}(o)}const Kl={};function Gd(o){return j(()=>{const s={type:o.type,bootstrap:o.bootstrap||Dt,declarations:o.declarations||Dt,imports:o.imports||Dt,exports:o.exports||Dt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(Kl[o.id]=o.type),s})}function Cu(o,s){return j(()=>{const u=Wr(o,!0);u.declarations=s.declarations||Dt,u.imports=s.imports||Dt,u.exports=s.exports||Dt})}function Np(o,s){if(null==o)return hn;const u={};for(const c in o)if(o.hasOwnProperty(c)){let d=o[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),u[d]=c,s&&(s[d]=f)}return u}const Mn=ai;function Wd(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function Kn(o){return o[_o]||null}function Wr(o,s){const u=o[$d]||null;if(!u&&!0===s)throw new Error(`Type ${fe(o)} does not have '\u0275mod' property.`);return u}function ji(o){return Array.isArray(o)&&"object"==typeof o[1]}function zr(o){return Array.isArray(o)&&!0===o[1]}function Qd(o){return 0!=(8&o.flags)}function ga(o){return 2==(2&o.flags)}function Ql(o){return 1==(1&o.flags)}function Ci(o){return null!==o.template}function Yd(o){return 0!=(512&o[2])}function ks(o,s){return o.hasOwnProperty(Gr)?o[Gr]:null}class Jl{constructor(s,u,c){this.previousValue=s,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Ru(){return Xd}function Xd(o){return o.type.prototype.ngOnChanges&&(o.setInput=eh),Y0}function Y0(){const o=va(this),s=null==o?void 0:o.current;if(s){const u=o.previous;if(u===hn)o.previous=s;else for(let c in s)u[c]=s[c];o.current=null,this.ngOnChanges(s)}}function eh(o,s,u,c){const d=va(o)||function(o,s){return o[Xl]=s}(o,{previous:hn,current:null}),f=d.current||(d.current={}),_=d.previous,v=this.declaredInputs[u],I=_[v];f[v]=new Jl(I&&I.currentValue,s,_===hn),o[c]=s}Ru.ngInherit=!0;const Xl="__ngSimpleChanges__";function va(o){return o[Xl]||null}let Ea;function Mu(o){Ea=o}function on(o){return!!o.listen}const Zy={createRenderer:(o,s)=>void 0!==Ea?Ea:"undefined"!=typeof document?document:void 0};function On(o){for(;Array.isArray(o);)o=o[0];return o}function rr(o,s){return On(s[o.index])}function Ou(o,s){return o.data[s]}function kr(o,s){const u=s[o];return ji(u)?u:u[0]}function Op(o){return 4==(4&o[2])}function us(o){return 128==(128&o[2])}function li(o,s){return null==s?null:o[s]}function rh(o){o[18]=0}function ls(o,s){o[5]+=s;let u=o,c=o[3];for(;null!==c&&(1===s&&1===u[5]||-1===s&&0===u[5]);)c[5]+=s,u=c,c=c[3]}const ct={lFrame:n_(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Fp(){return ct.bindingsEnabled}function Te(){return ct.lFrame.lView}function Tt(){return ct.lFrame.tView}function oh(o){return ct.lFrame.contextLView=o,o[8]}function Tn(){let o=Fu();for(;null!==o&&64===o.type;)o=o.parent;return o}function Fu(){return ct.lFrame.currentTNode}function ds(o,s){const u=ct.lFrame;u.currentTNode=o,u.isParent=s}function Lu(){return ct.lFrame.isParent}function Da(){return ct.isInCheckNoChangesMode}function oc(o){ct.isInCheckNoChangesMode=o}function Zn(){const o=ct.lFrame;let s=o.bindingRootIndex;return-1===s&&(s=o.bindingRootIndex=o.tView.bindingStartIndex),s}function Ta(){return ct.lFrame.bindingIndex++}function J0(o,s){const u=ct.lFrame;u.bindingIndex=u.bindingRootIndex=o,ah(s)}function ah(o){ct.lFrame.currentDirectiveIndex=o}function Bp(){return ct.lFrame.currentQueryIndex}function e_(o){ct.lFrame.currentQueryIndex=o}function BT(o){const s=o[1];return 2===s.type?s.declTNode:1===s.type?o[6]:null}function X0(o,s,u){if(u&Ke.SkipSelf){let d=s,f=o;for(;!(d=d.parent,null!==d||u&Ke.Host||(d=BT(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;s=d,o=f}const c=ct.lFrame=t_();return c.currentTNode=s,c.lView=o,!0}function jp(o){const s=t_(),u=o[1];ct.lFrame=s,s.currentTNode=u.firstChild,s.lView=o,s.tView=u,s.contextLView=o,s.bindingIndex=u.bindingStartIndex,s.inI18n=!1}function t_(){const o=ct.lFrame,s=null===o?null:o.child;return null===s?n_(o):s}function n_(o){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=s),s}function uc(){const o=ct.lFrame;return ct.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const $i=uc;function Ca(){const o=uc();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function _r(){return ct.lFrame.selectedIndex}function Ls(o){ct.lFrame.selectedIndex=o}function en(){const o=ct.lFrame;return Ou(o.tView,o.selectedIndex)}function Sa(o,s){for(let u=s.directiveStart,c=s.directiveEnd;u<c;u++){const f=o.data[u].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:v,ngAfterViewInit:I,ngAfterViewChecked:C,ngOnDestroy:A}=f;_&&(o.contentHooks||(o.contentHooks=[])).push(-u,_),v&&((o.contentHooks||(o.contentHooks=[])).push(u,v),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(u,v)),I&&(o.viewHooks||(o.viewHooks=[])).push(-u,I),C&&((o.viewHooks||(o.viewHooks=[])).push(u,C),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(u,C)),null!=A&&(o.destroyHooks||(o.destroyHooks=[])).push(u,A)}}function $p(o,s,u){Vs(o,s,3,u)}function Ro(o,s,u,c){(3&o[2])===u&&Vs(o,s,u,c)}function o_(o,s){let u=o[2];(3&u)===s&&(u&=2047,u+=1,o[2]=u)}function Vs(o,s,u,c){const f=null!=c?c:-1,_=s.length-1;let v=0;for(let I=void 0!==c?65535&o[18]:0;I<_;I++)if("number"==typeof s[I+1]){if(v=s[I],null!=c&&v>=c)break}else s[I]<0&&(o[18]+=65536),(v<f||-1==f)&&(a_(o,u,s,I),o[18]=(4294901760&o[18])+I+2),I++}function a_(o,s,u,c){const d=u[c]<0,f=u[c+1],v=o[d?-u[c]:u[c]];if(d){if(o[2]>>11<o[18]>>16&&(3&o[2])===s){o[2]+=2048;try{f.call(v)}finally{}}}else try{f.call(v)}finally{}}class hs{constructor(s,u,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function Vu(o,s,u){const c=on(o);let d=0;for(;d<u.length;){const f=u[d];if("number"==typeof f){if(0!==f)break;d++;const _=u[d++],v=u[d++],I=u[d++];c?o.setAttribute(s,v,I,_):s.setAttributeNS(_,v,I)}else{const _=f,v=u[++d];Uu(_)?c&&o.setProperty(s,_,v):c?o.setAttribute(s,_,v):s.setAttribute(_,v),d++}}return d}function l_(o){return 3===o||4===o||6===o}function Uu(o){return 64===o.charCodeAt(0)}function cc(o,s){if(null!==s&&0!==s.length)if(null===o||0===o.length)o=s.slice();else{let u=-1;for(let c=0;c<s.length;c++){const d=s[c];"number"==typeof d?u=d:0===u||Na(o,u,d,null,-1===u||2===u?s[++c]:null)}}return o}function Na(o,s,u,c,d){let f=0,_=o.length;if(-1===s)_=-1;else for(;f<o.length;){const v=o[f++];if("number"==typeof v){if(v===s){_=-1;break}if(v>s){_=f-1;break}}}for(;f<o.length;){const v=o[f];if("number"==typeof v)break;if(v===u){if(null===c)return void(null!==d&&(o[f+1]=d));if(c===o[f+1])return void(o[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==_&&(o.splice(_,0,s),f=_+1),o.splice(f++,0,u),null!==c&&o.splice(f++,0,c),null!==d&&o.splice(f++,0,d)}function dc(o){return-1!==o}function xo(o){return 32767&o}function Er(o,s){let u=function(o){return o>>16}(o),c=s;for(;u>0;)c=c[15],u--;return c}let Ra=!0;function Po(o){const s=Ra;return Ra=o,s}let rw=0;function di(o,s){const u=Wp(o,s);if(-1!==u)return u;const c=s[1];c.firstCreatePass&&(o.injectorIndex=s.length,Gp(c.data,o),Gp(s,null),Gp(c.blueprint,null));const d=fh(o,s),f=o.injectorIndex;if(dc(d)){const _=xo(d),v=Er(d,s),I=v[1].data;for(let C=0;C<8;C++)s[f+C]=v[_+C]|I[_+C]}return s[f+8]=d,f}function Gp(o,s){o.push(0,0,0,0,0,0,0,0,s)}function Wp(o,s){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===s[o.injectorIndex+8]?-1:o.injectorIndex}function fh(o,s){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,c=null,d=s;for(;null!==d;){const f=d[1],_=f.type;if(c=2===_?f.declTNode:1===_?d[6]:null,null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function Bu(o,s,u){!function(o,s,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(vo)&&(c=u[vo]),null==c&&(c=u[vo]=rw++);const d=255&c;s.data[o+(d>>5)]|=1<<d}(o,s,u)}function fc(o,s,u){if(u&Ke.Optional)return o;Zt(s,"NodeInjector")}function Us(o,s,u,c){if(u&Ke.Optional&&void 0===c&&(c=null),0==(u&(Ke.Self|Ke.Host))){const d=o[9],f=oi(void 0);try{return d?d.get(s,c,u&Ke.Optional):mr(s,c,u&Ke.Optional)}finally{oi(f)}}return fc(c,s,u)}function ph(o,s,u,c=Ke.Default,d){if(null!==o){const f=function(o){if("string"==typeof o)return o.charCodeAt(0)||0;const s=o.hasOwnProperty(vo)?o[vo]:void 0;return"number"==typeof s?s>=0?255&s:ju:s}(u);if("function"==typeof f){if(!X0(s,o,c))return c&Ke.Host?fc(d,u,c):Us(s,u,c,d);try{const _=f(c);if(null!=_||c&Ke.Optional)return _;Zt(u)}finally{$i()}}else if("number"==typeof f){let _=null,v=Wp(o,s),I=-1,C=c&Ke.Host?s[16][6]:null;for((-1===v||c&Ke.SkipSelf)&&(I=-1===v?fh(o,s):s[v+8],-1!==I&&mc(c,!1)?(_=s[1],v=xo(I),s=Er(I,s)):v=-1);-1!==v;){const A=s[1];if(gc(f,v,A.data)){const x=gh(v,s,u,_,c,C);if(x!==pc)return x}I=s[v+8],-1!==I&&mc(c,s[1].data[v+8]===C)&&gc(f,v,s)?(_=A,v=xo(I),s=Er(I,s)):v=-1}}}return Us(s,u,c,d)}const pc={};function ju(){return new jn(Tn(),Te())}function gh(o,s,u,c,d,f){const _=s[1],v=_.data[o+8],A=Ai(v,_,u,null==c?ga(v)&&Ra:c!=_&&0!=(3&v.type),d&Ke.Host&&f===v);return null!==A?xa(s,_,A,v):pc}function Ai(o,s,u,c,d){const f=o.providerIndexes,_=s.data,v=1048575&f,I=o.directiveStart,A=f>>20,P=d?v+A:o.directiveEnd;for(let F=c?v:v+A;F<P;F++){const B=_[F];if(F<I&&u===B||F>=I&&B.type===u)return F}if(d){const F=_[I];if(F&&Ci(F)&&F.type===u)return I}return null}function xa(o,s,u,c){let d=o[u];const f=s.data;if(function(o){return o instanceof hs}(d)){const _=d;_.resolving&&function(o,s){throw new X("200",`Circular dependency in DI detected for ${o}`)}(be(f[u]));const v=Po(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?oi(_.injectImpl):null;X0(o,c,Ke.Default);try{d=o[u]=_.factory(void 0,f,o,c),s.firstCreatePass&&u>=c.directiveStart&&function(o,s,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=s.type.prototype;if(c){const _=Xd(s);(u.preOrderHooks||(u.preOrderHooks=[])).push(o,_),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,_)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-o,d),f&&((u.preOrderHooks||(u.preOrderHooks=[])).push(o,f),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,f))}(u,f[u],s)}finally{null!==I&&oi(I),Po(v),_.resolving=!1,$i()}}return d}function gc(o,s,u){return!!(u[s+(o>>5)]&1<<o)}function mc(o,s){return!(o&Ke.Self||o&Ke.Host&&s)}class jn{constructor(s,u){this._tNode=s,this._lView=u}get(s,u){return ph(this._tNode,this._lView,s,void 0,u)}}function mh(o){return function(o,s){if("class"===s)return o.classes;if("style"===s)return o.styles;const u=o.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const f=u[d];if(l_(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(f===s)return u[d+1];d+=2}}}return null}(Tn(),o)}const qu="__parameters__";function fs(o,s,u){return j(()=>{const c=function(o){return function(...u){if(o){const c=o(...u);for(const d in c)this[d]=c[d]}}}(s);function d(...f){if(this instanceof d)return c.apply(this,f),this;const _=new d(...f);return v.annotation=_,v;function v(I,C,A){const x=I.hasOwnProperty(qu)?I[qu]:Object.defineProperty(I,qu,{value:[]})[qu];for(;x.length<=A;)x.push(null);return(x[A]=x[A]||[]).push(_),I}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=o,d.annotationCls=d,d})}class qt{constructor(s,u){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=sn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}function hi(o,s){void 0===s&&(s=o);for(let u=0;u<o.length;u++){let c=o[u];Array.isArray(c)?(s===o&&(s=o.slice(0,u)),hi(c,s)):s!==o&&s.push(c)}return s}function Qn(o,s){o.forEach(u=>Array.isArray(u)?Qn(u,s):s(u))}function Zu(o,s,u){s>=o.length?o.push(u):o.splice(s,0,u)}function Lr(o,s){return s>=o.length-1?o.pop():o.splice(s,1)[0]}const qs={},Fo="__NG_DI_FLAG__",Gs="ngTempTokenPath",p_=/\n/gm,Va="__source",Eh=De({provide:String,useValue:De});let el;function Ws(o){const s=el;return el=o,s}function g_(o,s=Ke.Default){if(void 0===el)throw new Error("inject() must be called from an injection context");return null===el?mr(o,void 0,s):el.get(o,s&Ke.Optional?null:void 0,s)}function an(o,s=Ke.Default){return(Ui||g_)(Fe(o),s)}function pi(o){const s=[];for(let u=0;u<o.length;u++){const c=Fe(o[u]);if(Array.isArray(c)){if(0===c.length)throw new Error("Arguments array must have arguments.");let d,f=Ke.Default;for(let _=0;_<c.length;_++){const v=c[_],I=bc(v);"number"==typeof I?-1===I?d=v.token:f|=I:d=v}s.push(an(d,f))}else s.push(an(c))}return s}function Lo(o,s){return o[Fo]=s,o.prototype[Fo]=s,o}function bc(o){return o[Fo]}function eg(o,s,u,c){const d=o[Gs];throw s[Va]&&d.unshift(s[Va]),o.message=function(o,s,u,c=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let d=fe(s);if(Array.isArray(s))d=s.map(fe).join(" -> ");else if("object"==typeof s){let f=[];for(let _ in s)if(s.hasOwnProperty(_)){let v=s[_];f.push(_+":"+("string"==typeof v?JSON.stringify(v):fe(v)))}d=`{${f.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${o.replace(p_,"\n  ")}`}("\n"+o.message,d,u,c),o.ngTokenPath=d,o[Gs]=null,o}const tl=Lo(fs("Inject",o=>({token:o})),-1),gs=Lo(fs("Optional"),8),ms=Lo(fs("SkipSelf"),4);let Ac;function Ha(o){var s;return(null===(s=function(){if(void 0===Ac&&(Ac=null,yt.trustedTypes))try{Ac=yt.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return Ac}())||void 0===s?void 0:s.createHTML(o))||o}class Vo{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Ah extends Vo{getTypeName(){return"HTML"}}class E_ extends Vo{getTypeName(){return"Style"}}class ag extends Vo{getTypeName(){return"Script"}}class Nh extends Vo{getTypeName(){return"URL"}}class gi extends Vo{getTypeName(){return"ResourceURL"}}function xi(o){return o instanceof Vo?o.changingThisBreaksApplicationSecurity:o}function mi(o,s){const u=Nc(o);if(null!=u&&u!==s){if("ResourceURL"===u&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===s}function Nc(o){return o instanceof Vo&&o.getTypeName()||null}function w_(o){return new Ah(o)}function b_(o){return new E_(o)}function Rh(o){return new ag(o)}function I_(o){return new Nh(o)}function ug(o){return new gi(o)}class D_{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const u=(new window.DOMParser).parseFromString(Ha(s),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(s):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class lg{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const c=this.inertDocument.createElement("body");u.appendChild(c)}}getInertBodyElement(s){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=Ha(s),u;const c=this.inertDocument.createElement("body");return c.innerHTML=Ha(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(s){const u=s.attributes;for(let d=u.length-1;0<d;d--){const _=u.item(d).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&s.removeAttribute(_)}let c=s.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const xc=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,hw=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function kn(o){return(o=String(o)).match(xc)||o.match(hw)?o:"unsafe:"+o}function Wi(o){const s={};for(const u of o.split(","))s[u]=!0;return s}function rl(...o){const s={};for(const u of o)for(const c in u)u.hasOwnProperty(c)&&(s[c]=!0);return s}const Pc=Wi("area,br,col,hr,img,wbr"),cg=Wi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ph=Wi("rp,rt"),il=rl(Pc,rl(cg,Wi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),rl(Ph,Wi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),rl(Ph,cg)),Mc=Wi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),kh=Wi("srcset"),dg=rl(Mc,kh,Wi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Wi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),hg=Wi("script,style,template");class Oc{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let u=s.firstChild,c=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?c=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,c&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let d=this.checkClobberedElement(u,u.nextSibling);if(d){u=d;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(s){const u=s.nodeName.toLowerCase();if(!il.hasOwnProperty(u))return this.sanitizedSomething=!0,!hg.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const c=s.attributes;for(let d=0;d<c.length;d++){const f=c.item(d),_=f.name,v=_.toLowerCase();if(!dg.hasOwnProperty(v)){this.sanitizedSomething=!0;continue}let I=f.value;Mc[v]&&(I=kn(I)),kh[v]&&(o=I,I=(o=String(o)).split(",").map(s=>kn(s.trim())).join(", ")),this.buf.push(" ",_,'="',Lh(I),'"')}var o;return this.buf.push(">"),!0}endElement(s){const u=s.nodeName.toLowerCase();il.hasOwnProperty(u)&&!Pc.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(s){this.buf.push(Lh(s))}checkClobberedElement(s,u){if(u&&(s.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return u}}const Fh=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,fg=/([^\#-~ |!])/g;function Lh(o){return o.replace(/&/g,"&amp;").replace(Fh,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(fg,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ks;function wr(o,s){let u=null;try{Ks=Ks||function(o){const s=new lg(o);return function(){try{return!!(new window.DOMParser).parseFromString(Ha(""),"text/html")}catch(o){return!1}}()?new D_(s):s}(o);let c=s?String(s):"";u=Ks.getInertBodyElement(c);let d=5,f=c;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,c=f,f=u.innerHTML,u=Ks.getInertBodyElement(c)}while(c!==f);return Ha((new Oc).sanitizeChildren(zi(u)||u))}finally{if(u){const c=zi(u)||u;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function zi(o){return"content"in o&&function(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var fn=(()=>((fn=fn||{})[fn.NONE=0]="NONE",fn[fn.HTML=1]="HTML",fn[fn.STYLE=2]="STYLE",fn[fn.SCRIPT=3]="SCRIPT",fn[fn.URL=4]="URL",fn[fn.RESOURCE_URL=5]="RESOURCE_URL",fn))();const $h="__ngContext__";function tn(o,s){o[$h]=s}function Lc(o){const s=function(o){return o[$h]||null}(o);return s?Array.isArray(s)?s:s.lView:null}function st(o){return o.ngOriginalError}function Lt(o,...s){o.error(...s)}class Jn{constructor(){this._console=console}handleError(s){const u=this._findOriginalError(s),c=this._findContext(s),d=(o=s)&&o.ngErrorLogger||Lt;var o;d(this._console,"ERROR",s),u&&d(this._console,"ORIGINAL ERROR",u),c&&d(this._console,"ERROR CONTEXT",c)}_findContext(s){return s?s.ngDebugContext||this._findContext(st(s)):null}_findOriginalError(s){let u=s&&st(s);for(;u&&st(u);)u=st(u);return u||null}}const yg=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(yt))();function Zs(o){return o instanceof Function?o():o}var Qs=(()=>((Qs=Qs||{})[Qs.Important=1]="Important",Qs[Qs.DashCase=2]="DashCase",Qs))();function _g(o,s){return undefined(o,s)}function Ga(o){const s=o[3];return zr(s)?s[3]:s}function O_(o){return je(o[13])}function Es(o){return je(o[4])}function je(o){for(;null!==o&&!zr(o);)o=o[4];return o}function ut(o,s,u,c,d){if(null!=c){let f,_=!1;zr(c)?f=c:ji(c)&&(_=!0,c=c[0]);const v=On(c);0===o&&null!==u?null==d?Qh(s,u,v):Ho(s,u,v,d||null,!0):1===o&&null!==u?Ho(s,u,v,d||null,!0):2===o?function(o,s,u){const c=jc(o,s);c&&function(o,s,u,c){on(o)?o.removeChild(s,u,c):s.removeChild(u)}(o,c,s,u)}(s,v,_):3===o&&s.destroyNode(v),null!=f&&function(o,s,u,c,d){const f=u[7];f!==On(u)&&ut(s,o,c,f,d);for(let v=10;v<u.length;v++){const I=u[v];ll(I[1],I,o,s,c,f)}}(s,o,f,u,d)}}function k_(o,s,u){return on(o)?o.createElement(s,u):null===u?o.createElement(s):o.createElementNS(u,s)}function ir(o,s){const u=o[9],c=u.indexOf(s),d=s[3];1024&s[2]&&(s[2]&=-1025,ls(d,-1)),u.splice(c,1)}function Ys(o,s){if(o.length<=10)return;const u=10+s,c=o[u];if(c){const d=c[17];null!==d&&d!==o&&ir(d,c),s>0&&(o[u-1][4]=c[4]);const f=Lr(o,10+s);!function(o,s){ll(o,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const _=f[19];null!==_&&_.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function mw(o,s){if(!(256&s[2])){const u=s[11];on(u)&&u.destroyNode&&ll(o,s,u,3,null,null),function(o){let s=o[13];if(!s)return L_(o[1],o);for(;s;){let u=null;if(ji(s))u=s[13];else{const c=s[10];c&&(u=c)}if(!u){for(;s&&!s[4]&&s!==o;)ji(s)&&L_(s[1],s),s=s[3];null===s&&(s=o),ji(s)&&L_(s[1],s),u=s&&s[4]}s=u}}(s)}}function L_(o,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(o,s){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let c=0;c<u.length;c+=2){const d=s[u[c]];if(!(d instanceof hs)){const f=u[c+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const v=d[f[_]],I=f[_+1];try{I.call(v)}finally{}}else try{f.call(d)}finally{}}}}(o,s),function(o,s){const u=o.cleanup,c=s[7];let d=-1;if(null!==u)for(let f=0;f<u.length-1;f+=2)if("string"==typeof u[f]){const _=u[f+1],v="function"==typeof _?_(s):On(s[_]),I=c[d=u[f+2]],C=u[f+3];"boolean"==typeof C?v.removeEventListener(u[f],I,C):C>=0?c[d=C]():c[d=-C].unsubscribe(),f+=2}else{const _=c[d=u[f+1]];u[f].call(_)}if(null!==c){for(let f=d+1;f<c.length;f++)c[f]();s[7]=null}}(o,s),1===s[1].type&&on(s[11])&&s[11].destroy();const u=s[17];if(null!==u&&zr(s[3])){u!==s[3]&&ir(u,s);const c=s[19];null!==c&&c.detachView(o)}}}function vw(o,s,u){return function(o,s,u){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return u[0];if(2&c.flags){const d=o.data[c.directiveStart].encapsulation;if(d===Q.None||d===Q.Emulated)return null}return rr(c,u)}(o,s.parent,u)}function Ho(o,s,u,c,d){on(o)?o.insertBefore(s,u,c,d):s.insertBefore(u,c,d)}function Qh(o,s,u){on(o)?o.appendChild(s,u):s.appendChild(u)}function U_(o,s,u,c,d){null!==c?Ho(o,s,u,c,d):Qh(o,s,u)}function jc(o,s){return on(o)?o.parentNode(s):s.parentNode}let wg=function(o,s,u){return 40&o.type?rr(o,u):null};function Yh(o,s,u,c){const d=vw(o,c,s),f=s[11],v=function(o,s,u){return wg(o,s,u)}(c.parent||s[6],c,s);if(null!=d)if(Array.isArray(u))for(let I=0;I<u.length;I++)U_(f,d,u[I],v,!1);else U_(f,d,u,v,!1)}function Hc(o,s){if(null!==s){const u=s.type;if(3&u)return rr(s,o);if(4&u)return $_(-1,o[s.index]);if(8&u){const c=s.child;if(null!==c)return Hc(o,c);{const d=o[s.index];return zr(d)?$_(-1,d):On(d)}}if(32&u)return _g(s,o)()||On(o[s.index]);{const c=Ew(o,s);return null!==c?Array.isArray(c)?c[0]:Hc(Ga(o[16]),c):Hc(o,s.next)}}return null}function Ew(o,s){return null!==s?o[16][6].projection[s.projection]:null}function $_(o,s){const u=10+o+1;if(u<s.length){const c=s[u],d=c[1].firstChild;if(null!==d)return Hc(c,d)}return s[7]}function Ig(o,s,u,c,d,f,_){for(;null!=u;){const v=c[u.index],I=u.type;if(_&&0===s&&(v&&tn(On(v),c),u.flags|=4),64!=(64&u.flags))if(8&I)Ig(o,s,u.child,c,d,f,!1),ut(s,o,d,v,f);else if(32&I){const C=_g(u,c);let A;for(;A=C();)ut(s,o,d,A,f);ut(s,o,d,v,f)}else 16&I?bw(o,s,c,u,d,f):ut(s,o,d,v,f);u=_?u.projectionNext:u.next}}function ll(o,s,u,c,d,f){Ig(u,c,o.firstChild,s,d,f,!1)}function bw(o,s,u,c,d,f){const _=u[16],I=_[6].projection[c.projection];if(Array.isArray(I))for(let C=0;C<I.length;C++)ut(s,o,d,I[C],f);else Ig(o,s,I,_[3],d,f,!0)}function Tg(o,s,u){on(o)?o.setAttribute(s,"style",u):s.style.cssText=u}function Jh(o,s,u){on(o)?""===u?o.removeAttribute(s,"class"):o.setAttribute(s,"class",u):s.className=u}function Cg(o,s,u){let c=o.length;for(;;){const d=o.indexOf(s,u);if(-1===d)return d;if(0===d||o.charCodeAt(d-1)<=32){const f=s.length;if(d+f===c||o.charCodeAt(d+f)<=32)return d}u=d+1}}const Dw="ng-template";function q_(o,s,u){let c=0;for(;c<o.length;){let d=o[c++];if(u&&"class"===d){if(d=o[c],-1!==Cg(d.toLowerCase(),s,0))return!0}else if(1===d){for(;c<o.length&&"string"==typeof(d=o[c++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function G_(o){return 4===o.type&&o.value!==Dw}function KT(o,s,u){return s===(4!==o.type||u?o.value:Dw)}function ZT(o,s,u){let c=4;const d=o.attrs||[],f=function(o){for(let s=0;s<o.length;s++)if(l_(o[s]))return s;return o.length}(d);let _=!1;for(let v=0;v<s.length;v++){const I=s[v];if("number"!=typeof I){if(!_)if(4&c){if(c=2|1&c,""!==I&&!KT(o,I,u)||""===I&&1===s.length){if(nn(c))return!1;_=!0}}else{const C=8&c?I:s[++v];if(8&c&&null!==o.attrs){if(!q_(o.attrs,C,u)){if(nn(c))return!1;_=!0}continue}const x=Xh(8&c?"class":I,d,G_(o),u);if(-1===x){if(nn(c))return!1;_=!0;continue}if(""!==C){let P;P=x>f?"":d[x+1].toLowerCase();const F=8&c?P:null;if(F&&-1!==Cg(F,C,0)||2&c&&C!==P){if(nn(c))return!1;_=!0}}}}else{if(!_&&!nn(c)&&!nn(I))return!1;if(_&&nn(I))continue;_=!1,c=I|1&c}}return nn(c)||_}function nn(o){return 0==(1&o)}function Xh(o,s,u,c){if(null===s)return-1;let d=0;if(c||!u){let f=!1;for(;d<s.length;){const _=s[d];if(_===o)return d;if(3===_||6===_)f=!0;else{if(1===_||2===_){let v=s[++d];for(;"string"==typeof v;)v=s[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=f?1:2}return-1}return function(o,s){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const c=o[u];if("number"==typeof c)return-1;if(c===s)return u;u++}return-1}(s,o)}function Tw(o,s,u=!1){for(let c=0;c<s.length;c++)if(ZT(o,s[c],u))return!0;return!1}function tf(o,s){return o?":not("+s.trim()+")":s}function W_(o){let s=o[0],u=1,c=2,d="",f=!1;for(;u<o.length;){let _=o[u];if("string"==typeof _)if(2&c){const v=o[++u];d+="["+_+(v.length>0?'="'+v+'"':"")+"]"}else 8&c?d+="."+_:4&c&&(d+=" "+_);else""!==d&&!nn(_)&&(s+=tf(f,d),d=""),c=_,f=f||!nn(c);u++}return""!==d&&(s+=tf(f,d)),s}const gt={};function Z_(o){Q_(Tt(),Te(),_r()+o,Da())}function Q_(o,s,u,c){if(!c)if(3==(3&s[2])){const f=o.preOrderCheckHooks;null!==f&&$p(s,f,u)}else{const f=o.preOrderHooks;null!==f&&Ro(s,f,0,u)}Ls(u)}function uv(o,s){const u=o.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const d=u[c],f=u[c+1];if(-1!==f){const _=o.data[f];e_(d),_.contentQueries(2,s[f],f)}}}function hl(o,s,u,c,d,f,_,v,I,C){const A=s.blueprint.slice();return A[0]=d,A[2]=140|c,rh(A),A[3]=A[15]=o,A[8]=u,A[10]=_||o&&o[10],A[11]=v||o&&o[11],A[12]=I||o&&o[12]||null,A[9]=C||o&&o[9]||null,A[6]=f,A[16]=2==s.type?o[16]:A,A}function Ka(o,s,u,c,d){let f=o.data[s];if(null===f)f=function(o,s,u,c,d){const f=Fu(),_=Lu(),I=o.data[s]=function(o,s,u,c,d,f){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,u,s,c,d);return null===o.firstChild&&(o.firstChild=I),null!==f&&(_?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(o,s,u,c,d),ct.lFrame.inI18n&&(f.flags|=64);else if(64&f.type){f.type=u,f.value=c,f.attrs=d;const _=function(){const o=ct.lFrame,s=o.currentTNode;return o.isParent?s:s.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return ds(f,!0),f}function qo(o,s,u,c){if(0===u)return-1;const d=s.length;for(let f=0;f<u;f++)s.push(c),o.blueprint.push(c),o.data.push(null);return d}function Go(o,s,u){jp(s);try{const c=o.viewQuery;null!==c&&vv(1,c,u);const d=o.template;null!==d&&Vg(o,s,d,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&uv(o,s),o.staticViewQueries&&vv(2,o.viewQuery,u);const f=o.components;null!==f&&function(o,s){for(let u=0;u<s.length;u++)Fw(o,s[u])}(s,f)}catch(c){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),c}finally{s[2]&=-5,Ca()}}function fl(o,s,u,c){const d=s[2];if(256==(256&d))return;jp(s);const f=Da();try{rh(s),function(o){ct.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&Vg(o,s,u,2,c);const _=3==(3&d);if(!f)if(_){const C=o.preOrderCheckHooks;null!==C&&$p(s,C,null)}else{const C=o.preOrderHooks;null!==C&&Ro(s,C,0,null),o_(s,0)}if(function(o){for(let s=O_(o);null!==s;s=Es(s)){if(!s[2])continue;const u=s[9];for(let c=0;c<u.length;c++){const d=u[c],f=d[3];0==(1024&d[2])&&ls(f,1),d[2]|=1024}}}(s),function(o){for(let s=O_(o);null!==s;s=Es(s))for(let u=10;u<s.length;u++){const c=s[u],d=c[1];us(c)&&fl(d,c,d.template,c[8])}}(s),null!==o.contentQueries&&uv(o,s),!f)if(_){const C=o.contentCheckHooks;null!==C&&$p(s,C)}else{const C=o.contentHooks;null!==C&&Ro(s,C,1),o_(s,1)}!function(o,s){const u=o.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)Ls(~d);else{const f=d,_=u[++c],v=u[++c];J0(_,f),v(2,s[f])}}}finally{Ls(-1)}}(o,s);const v=o.components;null!==v&&function(o,s){for(let u=0;u<s.length;u++)fC(o,s[u])}(s,v);const I=o.viewQuery;if(null!==I&&vv(2,I,c),!f)if(_){const C=o.viewCheckHooks;null!==C&&$p(s,C)}else{const C=o.viewHooks;null!==C&&Ro(s,C,2),o_(s,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),f||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,ls(s[3],-1))}finally{Ca()}}function iC(o,s,u,c){const d=s[10],f=!Da(),_=Op(s);try{f&&!_&&d.begin&&d.begin(),_&&Go(o,s,c),fl(o,s,u,c)}finally{f&&!_&&d.end&&d.end()}}function Vg(o,s,u,c,d){const f=_r(),_=2&c;try{Ls(-1),_&&s.length>20&&Q_(o,s,20,Da()),u(c,d)}finally{Ls(f)}}function df(o,s,u){!Fp()||(function(o,s,u,c){const d=u.directiveStart,f=u.directiveEnd;o.firstCreatePass||di(u,s),tn(c,s);const _=u.initialInputs;for(let v=d;v<f;v++){const I=o.data[v],C=Ci(I);C&&dC(s,u,I);const A=xa(s,o,v,u);tn(A,s),null!==_&&mf(0,v-d,A,I,0,_),C&&(kr(u.index,s)[8]=A)}}(o,s,u,rr(u,s)),128==(128&u.flags)&&function(o,s,u){const c=u.directiveStart,d=u.directiveEnd,_=u.index,v=ct.lFrame.currentDirectiveIndex;try{Ls(_);for(let I=c;I<d;I++){const C=o.data[I],A=s[I];ah(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Mw(C,A)}}finally{Ls(-1),ah(v)}}(o,s,u))}function Ug(o,s,u=rr){const c=s.localNames;if(null!==c){let d=s.index+1;for(let f=0;f<c.length;f+=2){const _=c[f+1],v=-1===_?u(s,o):o[_];o[d++]=v}}}function lv(o){const s=o.tView;return null===s||s.incompleteFirstPass?o.tView=hf(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):s}function hf(o,s,u,c,d,f,_,v,I,C){const A=20+c,x=A+d,P=function(o,s){const u=[];for(let c=0;c<s;c++)u.push(c<o?null:gt);return u}(A,x),F="function"==typeof C?C():C;return P[1]={type:o,blueprint:P,template:u,queries:null,viewQuery:v,declTNode:s,data:P.slice().fill(null,A),bindingStartIndex:A,expandoStartIndex:x,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:F,incompleteFirstPass:!1}}function Gc(o,s,u,c){const d=Zc(s);null===u?d.push(c):(d.push(u),o.firstCreatePass&&vf(o).push(c,d.length-1))}function Bg(o,s,u){for(let c in o)if(o.hasOwnProperty(c)){const d=o[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(s,d):u[c]=[s,d]}return u}function or(o,s,u,c,d,f,_,v){const I=rr(s,u);let A,C=s.inputs;!v&&null!=C&&(A=C[c])?(Qc(o,u,A,c,d),ga(s)&&function(o,s){const u=kr(s,o);16&u[2]||(u[2]|=64)}(u,s.index)):3&s.type&&(c=function(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(c),d=null!=_?_(d,s.value||"",c):d,on(f)?f.setProperty(I,c,d):Uu(c)||(I.setProperty?I.setProperty(c,d):I[c]=d))}function Wc(o,s,u,c){let d=!1;if(Fp()){const f=function(o,s,u){const c=o.directiveRegistry;let d=null;if(c)for(let f=0;f<c.length;f++){const _=c[f];Tw(u,_.selectors,!1)&&(d||(d=[]),Bu(di(u,s),o,_.type),Ci(_)?(zc(o,u),d.unshift(_)):d.push(_))}return d}(o,s,u),_=null===c?null:{"":-1};if(null!==f){d=!0,hv(u,o.data.length,f.length);for(let A=0;A<f.length;A++){const x=f[A];x.providersResolver&&x.providersResolver(x)}let v=!1,I=!1,C=qo(o,s,f.length,null);for(let A=0;A<f.length;A++){const x=f[A];u.mergedAttrs=cc(u.mergedAttrs,x.hostAttrs),Ow(o,u,s,C,x),cC(C,x,_),null!==x.contentQueries&&(u.flags|=8),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(u.flags|=128);const P=x.type.prototype;!v&&(P.ngOnChanges||P.ngOnInit||P.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(u.index),v=!0),!I&&(P.ngOnChanges||P.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(u.index),I=!0),C++}!function(o,s){const c=s.directiveEnd,d=o.data,f=s.attrs,_=[];let v=null,I=null;for(let C=s.directiveStart;C<c;C++){const A=d[C],x=A.inputs,P=null===f||G_(s)?null:Ya(x,f);_.push(P),v=Bg(x,C,v),I=Bg(A.outputs,C,I)}null!==v&&(v.hasOwnProperty("class")&&(s.flags|=16),v.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=v,s.outputs=I}(o,u)}_&&function(o,s,u){if(s){const c=o.localNames=[];for(let d=0;d<s.length;d+=2){const f=u[s[d+1]];if(null==f)throw new X("301",`Export of name '${s[d+1]}' not found!`);c.push(s[d],f)}}}(u,c,_)}return u.mergedAttrs=cc(u.mergedAttrs,u.attrs),d}function pf(o,s,u,c,d,f){const _=f.hostBindings;if(_){let v=o.hostBindingOpCodes;null===v&&(v=o.hostBindingOpCodes=[]);const I=~s.index;(function(o){let s=o.length;for(;s>0;){const u=o[--s];if("number"==typeof u&&u<0)return u}return 0})(v)!=I&&v.push(I),v.push(c,d,_)}}function Mw(o,s){null!==o.hostBindings&&o.hostBindings(1,s)}function zc(o,s){s.flags|=2,(o.components||(o.components=[])).push(s.index)}function cC(o,s,u){if(u){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)u[s.exportAs[c]]=o;Ci(s)&&(u[""]=o)}}function hv(o,s,u){o.flags|=1,o.directiveStart=s,o.directiveEnd=s+u,o.providerIndexes=s}function Ow(o,s,u,c,d){o.data[c]=d;const f=d.factory||(d.factory=ks(d.type)),_=new hs(f,Ci(d),null);o.blueprint[c]=_,u[c]=_,pf(o,s,0,c,qo(o,u,d.hostVars,gt),d)}function dC(o,s,u){const c=rr(s,o),d=lv(u),f=o[10],_=yf(o,hl(o,d,null,u.onPush?64:16,c,s,f,f.createRenderer(c,u),null,null));o[s.index]=_}function mf(o,s,u,c,d,f){const _=f[s];if(null!==_){const v=c.setInput;for(let I=0;I<_.length;){const C=_[I++],A=_[I++],x=_[I++];null!==v?c.setInput(u,x,C,A):u[A]=x}}}function Ya(o,s){let u=null,c=0;for(;c<s.length;){const d=s[c];if(0!==d)if(5!==d){if("number"==typeof d)break;o.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,o[d],s[c+1])),c+=2}else c+=2;else c+=4}return u}function pv(o,s,u,c){return new Array(o,!0,!1,s,null,0,c,u,null,null)}function fC(o,s){const u=kr(s,o);if(us(u)){const c=u[1];80&u[2]?fl(c,u,c.template,u[8]):u[5]>0&&gv(u)}}function gv(o){for(let c=O_(o);null!==c;c=Es(c))for(let d=10;d<c.length;d++){const f=c[d];if(1024&f[2]){const _=f[1];fl(_,f,_.template,f[8])}else f[5]>0&&gv(f)}const u=o[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=kr(u[c],o);us(d)&&d[5]>0&&gv(d)}}function Fw(o,s){const u=kr(s,o),c=u[1];(function(o,s){for(let u=s.length;u<o.blueprint.length;u++)s.push(o.blueprint[u])})(c,u),Go(c,u,u[8])}function yf(o,s){return o[13]?o[14][4]=s:o[13]=s,o[14]=s,s}function $g(o){for(;o;){o[2]|=64;const s=Ga(o);if(Yd(o)&&!s)return o;o=s}return null}function qg(o,s,u){const c=s[10];c.begin&&c.begin();try{fl(o,s,o.template,u)}catch(d){throw Ev(s,d),d}finally{c.end&&c.end()}}function yv(o){!function(o){for(let s=0;s<o.components.length;s++){const u=o.components[s],c=Lc(u),d=c[1];iC(d,c,d.template,u)}}(o[8])}function vv(o,s,u){e_(0),s(o,u)}const Gg=(()=>Promise.resolve(null))();function Zc(o){return o[7]||(o[7]=[])}function vf(o){return o.cleanup||(o.cleanup=[])}function Ev(o,s){const u=o[9],c=u?u.get(Jn,null):null;c&&c.handleError(s)}function Qc(o,s,u,c,d){for(let f=0;f<u.length;){const _=u[f++],v=u[f++],I=s[_],C=o.data[_];null!==C.setInput?C.setInput(I,d,c,v):I[v]=d}}function Oi(o,s,u){const c=function(o,s){return On(s[o])}(s,o);!function(o,s,u){on(o)?o.setValue(s,u):s.textContent=u}(o[11],c,u)}function zg(o,s,u){let c=u?o.styles:null,d=u?o.classes:null,f=0;if(null!==s)for(let _=0;_<s.length;_++){const v=s[_];"number"==typeof v?f=v:1==f?d=Ve(d,v):2==f&&(c=Ve(c,v+": "+s[++_]+";"))}u?o.styles=c:o.stylesWithoutHost=c,u?o.classes=d:o.classesWithoutHost=d}const Yc=new qt("INJECTOR",-1);class Vw{get(s,u=qs){if(u===qs){const c=new Error(`NullInjectorError: No provider for ${fe(s)}!`);throw c.name="NullInjectorError",c}return u}}const Ef=new qt("Set Injector scope."),Jc={},Uw={};let Kg;function wf(){return void 0===Kg&&(Kg=new Vw),Kg}function Xs(o,s=null,u=null,c){return new jw(o,u,s||wf(),c)}class jw{constructor(s,u,c,d=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];u&&Qn(u,v=>this.processProvider(v,s,u)),Qn([s],v=>this.processInjectorType(v,[],f)),this.records.set(Yc,Ja(void 0,this));const _=this.records.get(Ef);this.scope=null!=_?_.value:null,this.source=d||("object"==typeof s?null:fe(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,u=qs,c=Ke.Default){this.assertNotDestroyed();const d=Ws(this),f=oi(void 0);try{if(!(c&Ke.SkipSelf)){let v=this.records.get(s);if(void 0===v){const I=("function"==typeof(o=s)||"object"==typeof o&&o instanceof qt)&&si(s);v=I&&this.injectableDefInScope(I)?Ja(wv(s),Jc):null,this.records.set(s,v)}if(null!=v)return this.hydrate(s,v)}return(c&Ke.Self?wf():this.parent).get(s,u=c&Ke.Optional&&u===qs?null:u)}catch(_){if("NullInjectorError"===_.name){if((_[Gs]=_[Gs]||[]).unshift(fe(s)),d)throw _;return eg(_,s,"R3InjectorError",this.source)}throw _}finally{oi(f),Ws(d)}var o}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((c,d)=>s.push(fe(d))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,u,c){if(!(s=Fe(s)))return!1;let d=Yt(s);const f=null==d&&s.ngModule||void 0,_=void 0===f?s:f,v=-1!==c.indexOf(_);if(void 0!==f&&(d=Yt(f)),null==d)return!1;if(null!=d.imports&&!v){let A;c.push(_);try{Qn(d.imports,x=>{this.processInjectorType(x,u,c)&&(void 0===A&&(A=[]),A.push(x))})}finally{}if(void 0!==A)for(let x=0;x<A.length;x++){const{ngModule:P,providers:F}=A[x];Qn(F,B=>this.processProvider(B,P,F||Dt))}}this.injectorDefTypes.add(_);const I=ks(_)||(()=>new _);this.records.set(_,Ja(I,Jc));const C=d.providers;if(null!=C&&!v){const A=s;Qn(C,x=>this.processProvider(x,A,C))}return void 0!==f&&void 0!==s.providers}processProvider(s,u,c){let d=Wo(s=Fe(s))?s:Fe(s&&s.provide);const f=If(o=s)?Ja(void 0,o.useValue):Ja(function(o,s,u){let c;if(Wo(o)){const d=Fe(o);return ks(d)||wv(d)}if(If(o))c=()=>Fe(o.useValue);else if(function(o){return!(!o||!o.useFactory)}(o))c=()=>o.useFactory(...pi(o.deps||[]));else if(function(o){return!(!o||!o.useExisting)}(o))c=()=>an(Fe(o.useExisting));else{const d=Fe(o&&(o.useClass||o.provide));if(!function(o){return!!o.deps}(o))return ks(d)||wv(d);c=()=>new d(...pi(o.deps))}return c}(o),Jc);var o;if(Wo(s)||!0!==s.multi)this.records.get(d);else{let _=this.records.get(d);_||(_=Ja(void 0,Jc,!0),_.factory=()=>pi(_.multi),this.records.set(d,_)),d=s,_.multi.push(s)}this.records.set(d,f)}hydrate(s,u){return u.value===Jc&&(u.value=Uw,u.value=u.factory()),"object"==typeof u.value&&u.value&&null!==(o=u.value)&&"object"==typeof o&&"function"==typeof o.ngOnDestroy&&this.onDestroy.add(u.value),u.value;var o}injectableDefInScope(s){if(!s.providedIn)return!1;const u=Fe(s.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function wv(o){const s=si(o),u=null!==s?s.factory:ks(o);if(null!==u)return u;if(o instanceof qt)throw new Error(`Token ${fe(o)} is missing a \u0275prov definition.`);if(o instanceof Function)return function(o){const s=o.length;if(s>0){const c=function(o,s){const u=[];for(let c=0;c<o;c++)u.push(s);return u}(s,"?");throw new Error(`Can't resolve all parameters for ${fe(o)}: (${c.join(", ")}).`)}const u=function(o){const s=o&&(o[Pn]||o[Ge]);if(s){const u=function(o){if(o.hasOwnProperty("name"))return o.name;const s=(""+o).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),s}return null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new Error("unreachable")}function Ja(o,s,u=!1){return{factory:o,value:s,multi:u?[]:void 0}}function If(o){return null!==o&&"object"==typeof o&&Eh in o}function Wo(o){return"function"==typeof o}const Zg=function(o,s,u){return function(o,s=null,u=null,c){const d=Xs(o,s,u,c);return d._resolveInjectorDefTypes(),d}({name:u},s,o,u)};let un=(()=>{class o{static create(u,c){return Array.isArray(u)?Zg(u,c,""):Zg(u.providers,u.parent,u.name||"")}}return o.THROW_IF_NOT_FOUND=qs,o.NULL=new Vw,o.\u0275prov=sn({token:o,providedIn:"any",factory:()=>an(Yc)}),o.__NG_ELEMENT_ID__=-1,o})();function IC(o,s){Sa(Lc(o)[1],Tn())}let eu=null;function Rt(){if(!eu){const o=yt.Symbol;if(o&&o.iterator)eu=o.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<s.length;++u){const c=s[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(eu=c)}}}return eu}function to(o){return!!Rv(o)&&(Array.isArray(o)||!(o instanceof Map)&&Rt()in o)}function Rv(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Cr(o,s,u){return o[s]=u}function Fn(o,s,u){return!Object.is(o[s],u)&&(o[s]=u,!0)}function yl(o,s,u,c){return Fn(o,Ta(),u)?s+K(u)+c:gt}function ln(o,s,u,c,d,f,_,v){const I=Te(),C=Tt(),A=o+20,x=C.firstCreatePass?function(o,s,u,c,d,f,_,v,I){const C=s.consts,A=Ka(s,o,4,_||null,li(C,v));Wc(s,u,A,li(C,I)),Sa(s,A);const x=A.tViews=hf(2,A,c,d,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,C);return null!==s.queries&&(s.queries.template(s,A),x.queries=s.queries.embeddedTView(A)),A}(A,C,I,s,u,c,d,f,_):C.data[A];ds(x,!1);const P=I[11].createComment("");Yh(C,I,P,x),tn(P,I),yf(I,I[A]=pv(P,I,P,x)),Ql(x)&&df(C,I,x),null!=_&&Ug(I,x,v)}function Mv(o){return function(o,s){return o[s]}(ct.lFrame.contextLView,20+o)}function ud(o,s=Ke.Default){const u=Te();return null===u?an(o,s):ph(Tn(),u,Fe(o),s)}function Vv(o,s,u){const c=Te();return Fn(c,Ta(),s)&&or(Tt(),en(),c,o,s,c[11],u,!1),Vv}function Uv(o,s,u,c,d){const _=d?"class":"style";Qc(o,u,s.inputs[_],_,c)}function ld(o,s,u,c){const d=Te(),f=Tt(),_=20+o,v=d[11],I=d[_]=k_(v,s,ct.lFrame.currentNamespace),C=f.firstCreatePass?function(o,s,u,c,d,f,_){const v=s.consts,C=Ka(s,o,2,d,li(v,f));return Wc(s,u,C,li(v,_)),null!==C.attrs&&zg(C,C.attrs,!1),null!==C.mergedAttrs&&zg(C,C.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,C),C}(_,f,d,0,s,u,c):f.data[_];ds(C,!0);const A=C.mergedAttrs;null!==A&&Vu(v,I,A);const x=C.classes;null!==x&&Jh(v,I,x);const P=C.styles;null!==P&&Tg(v,I,P),64!=(64&C.flags)&&Yh(f,d,I,C),0===ct.lFrame.elementDepthCount&&tn(I,d),ct.lFrame.elementDepthCount++,Ql(C)&&(df(f,d,C),function(o,s,u){if(Qd(s)){const d=s.directiveEnd;for(let f=s.directiveStart;f<d;f++){const _=o.data[f];_.contentQueries&&_.contentQueries(1,u[f],f)}}}(f,C,d)),null!==c&&Ug(d,C)}function cd(){let o=Tn();Lu()?ct.lFrame.isParent=!1:(o=o.parent,ds(o,!1));const s=o;ct.lFrame.elementDepthCount--;const u=Tt();u.firstCreatePass&&(Sa(u,o),Qd(o)&&u.queries.elementEnd(o)),null!=s.classesWithoutHost&&function(o){return 0!=(16&o.flags)}(s)&&Uv(u,s,Te(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(o){return 0!=(32&o.flags)}(s)&&Uv(u,s,Te(),s.stylesWithoutHost,!1)}function Ib(o,s,u,c){ld(o,s,u,c),cd()}function Yo(){return Te()}function dm(o){return!!o&&"function"==typeof o.then}function Hv(o){return!!o&&"function"==typeof o.subscribe}const $v=Hv;function El(o,s,u,c){const d=Te(),f=Tt(),_=Tn();return function(o,s,u,c,d,f,_,v){const I=Ql(c),A=o.firstCreatePass&&vf(o),x=s[8],P=Zc(s);let F=!0;if(3&c.type||v){const z=rr(c,s),xe=v?v(z):z,de=P.length,ze=v?at=>v(On(at[c.index])):c.index;if(on(u)){let at=null;if(!v&&I&&(at=function(o,s,u,c){const d=o.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const _=d[f];if(_===u&&d[f+1]===c){const v=s[7],I=d[f+2];return v.length>I?v[I]:null}"string"==typeof _&&(f+=2)}return null}(o,s,d,c.index)),null!==at)(at.__ngLastListenerFn__||at).__ngNextListenerFn__=f,at.__ngLastListenerFn__=f,F=!1;else{f=fm(c,s,x,f,!1);const wt=u.listen(xe,d,f);P.push(f,wt),A&&A.push(d,ze,de,de+1)}}else f=fm(c,s,x,f,!0),xe.addEventListener(d,f,_),P.push(f),A&&A.push(d,ze,de,_)}else f=fm(c,s,x,f,!1);const B=c.outputs;let ee;if(F&&null!==B&&(ee=B[d])){const z=ee.length;if(z)for(let xe=0;xe<z;xe+=2){const Bn=s[ee[xe]][ee[xe+1]].subscribe(f),go=P.length;P.push(f,Bn),A&&A.push(d,c.index,go,-(go+1))}}}(f,d,d[11],_,o,s,!!u,c),El}function xt(o,s,u,c){try{return!1!==u(c)}catch(d){return Ev(o,d),!1}}function fm(o,s,u,c,d){return function f(_){if(_===Function)return c;const v=2&o.flags?kr(o.index,s):s;0==(32&s[2])&&$g(v);let I=xt(s,0,c,_),C=f.__ngNextListenerFn__;for(;C;)I=xt(s,0,C,_)&&I,C=C.__ngNextListenerFn__;return d&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function qv(o=1){return function(o){return(ct.lFrame.contextLView=function(o,s){for(;o>0;)s=s[15],o--;return s}(o,ct.lFrame.contextLView))[8]}(o)}function mn(o,s,u){return gm(o,"",s,"",u),mn}function gm(o,s,u,c,d){const f=Te(),_=yl(f,s,u,c);return _!==gt&&or(Tt(),en(),f,o,_,f[11],d,!1),gm}function Hb(o,s=""){const u=Te(),c=Tt(),d=o+20,f=c.firstCreatePass?Ka(c,d,1,s,null):c.data[d],_=u[d]=function(o,s){return on(o)?o.createText(s):o.createTextNode(s)}(u[11],s);Yh(c,u,_,f),ds(f,!1)}function Im(o,s,u){const c=Te(),d=yl(c,o,s,u);return d!==gt&&Oi(c,_r(),d),Im}const ea=void 0;var Qb=["en",[["a","p"],["AM","PM"],ea],[["AM","PM"],ea,ea],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ea,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ea,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ea,"{1} 'at' {0}",ea],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(o){const s=Math.floor(Math.abs(o)),u=o.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===u?1:5}];let uu={};function Vf(o){const s=function(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=Dl(s);if(u)return u;const c=s.split("-")[0];if(u=Dl(c),u)return u;if("en"===c)return Qb;throw new Error(`Missing locale data for the locale "${o}".`)}function Il(o){return Vf(o)[tt.PluralCase]}function Dl(o){return o in uu||(uu[o]=yt.ng&&yt.ng.common&&yt.ng.common.locales&&yt.ng.common.locales[o]),uu[o]}var tt=(()=>((tt=tt||{})[tt.LocaleId=0]="LocaleId",tt[tt.DayPeriodsFormat=1]="DayPeriodsFormat",tt[tt.DayPeriodsStandalone=2]="DayPeriodsStandalone",tt[tt.DaysFormat=3]="DaysFormat",tt[tt.DaysStandalone=4]="DaysStandalone",tt[tt.MonthsFormat=5]="MonthsFormat",tt[tt.MonthsStandalone=6]="MonthsStandalone",tt[tt.Eras=7]="Eras",tt[tt.FirstDayOfWeek=8]="FirstDayOfWeek",tt[tt.WeekendRange=9]="WeekendRange",tt[tt.DateFormat=10]="DateFormat",tt[tt.TimeFormat=11]="TimeFormat",tt[tt.DateTimeFormat=12]="DateTimeFormat",tt[tt.NumberSymbols=13]="NumberSymbols",tt[tt.NumberFormats=14]="NumberFormats",tt[tt.CurrencyCode=15]="CurrencyCode",tt[tt.CurrencySymbol=16]="CurrencySymbol",tt[tt.CurrencyName=17]="CurrencyName",tt[tt.Currencies=18]="Currencies",tt[tt.Directionality=19]="Directionality",tt[tt.PluralCase=20]="PluralCase",tt[tt.ExtraData=21]="ExtraData",tt))();const Bf="en-US";let tE=Bf;function $r(o){xn(o,"Expected localeId to be defined"),"string"==typeof o&&(tE=o.toLowerCase().replace(/_/g,"-"))}class TI{}const SI="ngComponent";class wE{resolveComponentFactory(s){throw function(o){const s=Error(`No component factory found for ${fe(o)}. Did you add it to @NgModule.entryComponents?`);return s[SI]=o,s}(s)}}let Ss=(()=>{class o{}return o.NULL=new wE,o})();function du(...o){}function Cl(o,s){return new As(rr(o,s))}const hu=function(){return Cl(Tn(),Te())};let As=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=hu,o})();function RI(o){return o instanceof As?o.nativeElement:o}class Hm{}let DE=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>$m(),o})();const $m=function(){const o=Te(),u=kr(Tn().index,o);return function(o){return o[11]}(ji(u)?u:o)};let fu=(()=>{class o{}return o.\u0275prov=sn({token:o,providedIn:"root",factory:()=>null}),o})();class qm{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const CE=new qm("12.2.7");class OI{constructor(){}supports(s){return to(s)}create(s){return new uS(s)}}const kI=(o,s)=>s;class uS{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||kI}forEachItem(s){let u;for(u=this._itHead;null!==u;u=u._next)s(u)}forEachOperation(s){let u=this._itHead,c=this._removalsHead,d=0,f=null;for(;u||c;){const _=!c||u&&u.currentIndex<FI(c,d,f)?u:c,v=FI(_,d,f),I=_.currentIndex;if(_===c)d--,c=c._nextRemoved;else if(u=u._next,null==_.previousIndex)d++;else{f||(f=[]);const C=v-d,A=I-d;if(C!=A){for(let P=0;P<C;P++){const F=P<f.length?f[P]:f[P]=0,B=F+P;A<=B&&B<C&&(f[P]=F+1)}f[_.previousIndex]=A-C}}v!==I&&s(_,v,I)}}forEachPreviousItem(s){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)s(u)}forEachAddedItem(s){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)s(u)}forEachMovedItem(s){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)s(u)}forEachRemovedItem(s){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)s(u)}forEachIdentityChange(s){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)s(u)}diff(s){if(null==s&&(s=[]),!to(s))throw new Error(`Error trying to diff '${fe(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,f,_,u=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let v=0;v<this.length;v++)f=s[v],_=this._trackByFn(v,f),null!==u&&Object.is(u.trackById,_)?(c&&(u=this._verifyReinsertion(u,f,_,v)),Object.is(u.item,f)||this._addIdentityChange(u,f)):(u=this._mismatch(u,f,_,v),c=!0),u=u._next}else d=0,function(o,s){if(Array.isArray(o))for(let u=0;u<o.length;u++)s(o[u]);else{const u=o[Rt()]();let c;for(;!(c=u.next()).done;)s(c.value)}}(s,v=>{_=this._trackByFn(d,v),null!==u&&Object.is(u.trackById,_)?(c&&(u=this._verifyReinsertion(u,v,_,d)),Object.is(u.item,v)||this._addIdentityChange(u,v)):(u=this._mismatch(u,v,_,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,u,c,d){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,u)||this._addIdentityChange(s,u),this._reinsertAfter(s,f,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(s.item,u)||this._addIdentityChange(s,u),this._moveAfter(s,f,d)):s=this._addAfter(new SE(u,c),f,d),s}_verifyReinsertion(s,u,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?s=this._reinsertAfter(f,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const u=s._next;this._addToRemovals(this._unlink(s)),s=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,f=s._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(s,u,c),this._addToMoves(s,c),s}_moveAfter(s,u,c){return this._unlink(s),this._insertAfter(s,u,c),this._addToMoves(s,c),s}_addAfter(s,u,c){return this._insertAfter(s,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,u,c){const d=null===u?this._itHead:u._next;return s._next=d,s._prev=u,null===d?this._itTail=s:d._prev=s,null===u?this._itHead=s:u._next=s,null===this._linkedRecords&&(this._linkedRecords=new Gm),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const u=s._prev,c=s._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,s}_addToMoves(s,u){return s.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Gm),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,u){return s.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class SE{constructor(s,u){this.item=s,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class lS{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const u=s._prevDup,c=s._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class Gm{constructor(){this.map=new Map}put(s){const u=s.trackById;let c=this.map.get(u);c||(c=new lS,this.map.set(u,c)),c.add(s)}get(s,u){const d=this.map.get(s);return d?d.get(s,u):null}remove(s){const u=s.trackById;return this.map.get(u).remove(s)&&this.map.delete(u),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function FI(o,s,u){const c=o.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+s+d}class Wm{constructor(){}supports(s){return s instanceof Map||Rv(s)}create(){return new cS}}class cS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let u;for(u=this._mapHead;null!==u;u=u._next)s(u)}forEachPreviousItem(s){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)s(u)}forEachChangedItem(s){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)s(u)}forEachAddedItem(s){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)s(u)}forEachRemovedItem(s){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)s(u)}diff(s){if(s){if(!(s instanceof Map||Rv(s)))throw new Error(`Error trying to diff '${fe(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const f=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,f)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,u){if(s){const c=s._prev;return u._next=s,u._prev=c,s._prev=u,c&&(c._next=u),s===this._mapHead&&(this._mapHead=u),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(s,u){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,u);const f=d._prev,_=d._next;return f&&(f._next=_),_&&(_._prev=f),d._next=null,d._prev=null,d}const c=new AE(s);return this._records.set(s,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,u){Object.is(u,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=u,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,u){s instanceof Map?s.forEach(u):Object.keys(s).forEach(c=>u(s[c],c))}}class AE{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function zm(){return new Cd([new OI])}let Cd=(()=>{class o{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new o(u)}static extend(u){return{provide:o,useFactory:c=>o.create(u,c||zm()),deps:[[o,new ms,new gs]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new Error(`Cannot find a differ supporting object '${u}' of type '${function(o){return o.name||typeof o}(u)}'`)}}return o.\u0275prov=sn({token:o,providedIn:"root",factory:zm}),o})();function na(){return new Ad([new Wm])}let Ad=(()=>{class o{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new o(u)}static extend(u){return{provide:o,useFactory:c=>o.create(u,c||na()),deps:[[o,new ms,new gs]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(c)return c;throw new Error(`Cannot find a differ supporting object '${u}'`)}}return o.\u0275prov=sn({token:o,providedIn:"root",factory:na}),o})();function ra(o,s,u,c,d=!1){for(;null!==u;){const f=s[u.index];if(null!==f&&c.push(On(f)),zr(f))for(let v=10;v<f.length;v++){const I=f[v],C=I[1].firstChild;null!==C&&ra(I[1],I,C,c)}const _=u.type;if(8&_)ra(o,s,u.child,c);else if(32&_){const v=_g(u,s);let I;for(;I=v();)c.push(I)}else if(16&_){const v=Ew(s,u);if(Array.isArray(v))c.push(...v);else{const I=Ga(s[16]);ra(I[1],I,v,c,!0)}}u=d?u.projectionNext:u.next}return c}class oo{constructor(s,u){this._lView=s,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,u=s[1];return ra(u,s,u.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(zr(s)){const u=s[8],c=u?u.indexOf(this):-1;c>-1&&(Ys(s,c),Lr(u,c))}this._attachedToViewContainer=!1}mw(this._lView[1],this._lView)}onDestroy(s){Gc(this._lView[1],this._lView,null,s)}markForCheck(){$g(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){qg(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(o,s,u){oc(!0);try{qg(o,s,u)}finally{oc(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,ll(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class LI extends oo{constructor(s){super(s),this._view=s}detectChanges(){yv(this._view)}checkNoChanges(){!function(o){oc(!0);try{yv(o)}finally{oc(!1)}}(this._view)}get context(){return null}}const dS=function(o){return function(o,s,u){if(ga(o)&&!u){const c=kr(o.index,s);return new oo(c,c)}return 47&o.type?new oo(s[16],s):null}(Tn(),Te(),16==(16&o))};let NE=(()=>{class o{}return o.__NG_ELEMENT_ID__=dS,o})();const PE=[new Wm],fS=new Cd([new OI]),ME=new Ad(PE),VI=function(){return Yf(Tn(),Te())};let Qf=(()=>{class o{}return o.__NG_ELEMENT_ID__=VI,o})();const UI=Qf,BI=class extends UI{constructor(s,u,c){super(),this._declarationLView=s,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(s){const u=this._declarationTContainer.tViews,c=hl(this._declarationLView,u,s,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(c[19]=f.createEmbeddedView(u)),Go(u,c,s),new oo(c)}};function Yf(o,s){return 4&o.type?new BI(s,o,Cl(o,s)):null}class Sl{}const kE=function(){return LE(Tn(),Te())};let Rd=(()=>{class o{}return o.__NG_ELEMENT_ID__=kE,o})();const mS=Rd,Km=class extends mS{constructor(s,u,c){super(),this._lContainer=s,this._hostTNode=u,this._hostLView=c}get element(){return Cl(this._hostTNode,this._hostLView)}get injector(){return new jn(this._hostTNode,this._hostLView)}get parentInjector(){const s=fh(this._hostTNode,this._hostLView);if(dc(s)){const u=Er(s,this._hostLView),c=xo(s);return new jn(u[1].data[c+8],u)}return new jn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const u=HI(this._lContainer);return null!==u&&u[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,u,c){const d=s.createEmbeddedView(u||{});return this.insert(d,c),d}createComponent(s,u,c,d,f){const _=c||this.parentInjector;if(!f&&null==s.ngModule&&_){const I=_.get(Sl,null);I&&(f=I)}const v=s.create(_,d,void 0,f);return this.insert(v.hostView,u),v}insert(s,u){const c=s._lView,d=c[1];if(zr(c[3])){const A=this.indexOf(s);if(-1!==A)this.detach(A);else{const x=c[3],P=new Km(x,x[6],x[3]);P.detach(P.indexOf(s))}}const f=this._adjustIndex(u),_=this._lContainer;!function(o,s,u,c){const d=10+c,f=u.length;c>0&&(u[d-1][4]=s),c<f-10?(s[4]=u[d],Zu(u,10+c,s)):(u.push(s),s[4]=null),s[3]=u;const _=s[17];null!==_&&u!==_&&function(o,s){const u=o[9];s[16]!==s[3][3][16]&&(o[2]=!0),null===u?o[9]=[s]:u.push(s)}(_,s);const v=s[19];null!==v&&v.insertView(o),s[2]|=128}(d,c,_,f);const v=$_(f,_),I=c[11],C=jc(I,_[7]);return null!==C&&function(o,s,u,c,d,f){c[0]=d,c[6]=s,ll(o,c,u,1,d,f)}(d,_[6],I,c,C,v),s.attachToViewContainerRef(),Zu(Jf(_),f,s),s}move(s,u){return this.insert(s,u)}indexOf(s){const u=HI(this._lContainer);return null!==u?u.indexOf(s):-1}remove(s){const u=this._adjustIndex(s,-1),c=Ys(this._lContainer,u);c&&(Lr(Jf(this._lContainer),u),mw(c[1],c))}detach(s){const u=this._adjustIndex(s,-1),c=Ys(this._lContainer,u);return c&&null!=Lr(Jf(this._lContainer),u)?new oo(c):null}_adjustIndex(s,u=0){return null==s?this.length+u:s}};function HI(o){return o[8]}function Jf(o){return o[8]||(o[8]=[])}function LE(o,s){let u;const c=s[o.index];if(zr(c))u=c;else{let d;if(8&o.type)d=On(c);else{const f=s[11];d=f.createComment("");const _=rr(o,s);Ho(f,jc(f,_),d,function(o,s){return on(o)?o.nextSibling(s):s.nextSibling}(f,_),!1)}s[o.index]=u=pv(c,s,d,o),yf(s,u)}return new Km(u,o,s)}const Od={};class dD extends Ss{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const u=Kn(s);return new gD(u,this.ngModule)}}function hD(o){const s=[];for(let u in o)o.hasOwnProperty(u)&&s.push({propName:o[u],templateName:u});return s}const pD=new qt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>yg});class gD extends TI{constructor(s,u){super(),this.componentDef=s,this.ngModule=u,this.componentType=s.type,this.selector=s.selectors.map(W_).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return hD(this.componentDef.inputs)}get outputs(){return hD(this.componentDef.outputs)}create(s,u,c,d){const f=(d=d||this.ngModule)?function(o,s){return{get:(u,c,d)=>{const f=o.get(u,Od,d);return f!==Od||c===Od?f:s.get(u,c,d)}}}(s,d.injector):s,_=f.get(Hm,Zy),v=f.get(fu,null),I=_.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",A=c?function(o,s,u){if(on(o))return o.selectRootElement(s,u===Q.ShadowDom);let c="string"==typeof s?o.querySelector(s):s;return c.textContent="",c}(I,c,this.componentDef.encapsulation):k_(_.createRenderer(null,this.componentDef),C,function(o){const s=o.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(C)),x=this.componentDef.onPush?576:528,P=function(o,s){return{components:[],scheduler:o||yg,clean:Gg,playerHandler:s||null,flags:0}}(),F=hf(0,null,null,1,0,null,null,null,null,null),B=hl(null,F,P,x,null,null,_,I,v,f);let ee,z;jp(B);try{const xe=function(o,s,u,c,d,f){const _=u[1];u[20]=o;const I=Ka(_,20,2,"#host",null),C=I.mergedAttrs=s.hostAttrs;null!==C&&(zg(I,C,!0),null!==o&&(Vu(d,o,C),null!==I.classes&&Jh(d,o,I.classes),null!==I.styles&&Tg(d,o,I.styles)));const A=c.createRenderer(o,s),x=hl(u,lv(s),null,s.onPush?64:16,u[20],I,c,A,f||null,null);return _.firstCreatePass&&(Bu(di(I,u),_,s.type),zc(_,I),hv(I,u.length,1)),yf(u,x),u[20]=x}(A,this.componentDef,B,_,I);if(A)if(c)Vu(I,A,["ng-version",CE.full]);else{const{attrs:de,classes:ze}=function(o){const s=[],u=[];let c=1,d=2;for(;c<o.length;){let f=o[c];if("string"==typeof f)2===d?""!==f&&s.push(f,o[++c]):8===d&&u.push(f);else{if(!nn(d))break;d=f}c++}return{attrs:s,classes:u}}(this.componentDef.selectors[0]);de&&Vu(I,A,de),ze&&ze.length>0&&Jh(I,A,ze.join(" "))}if(z=Ou(F,20),void 0!==u){const de=z.projection=[];for(let ze=0;ze<this.ngContentSelectors.length;ze++){const at=u[ze];de.push(null!=at?Array.from(at):null)}}ee=function(o,s,u,c,d){const f=u[1],_=function(o,s,u){const c=Tn();o.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),Ow(o,c,s,qo(o,s,1,null),u));const d=xa(s,o,c.directiveStart,c);tn(d,s);const f=rr(c,s);return f&&tn(f,s),d}(f,u,s);if(c.components.push(_),o[8]=_,d&&d.forEach(I=>I(_,s)),s.contentQueries){const I=Tn();s.contentQueries(1,_,I.directiveStart)}const v=Tn();return!f.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Ls(v.index),pf(u[1],v,0,v.directiveStart,v.directiveEnd,s),Mw(s,_)),_}(xe,this.componentDef,B,P,[IC]),Go(F,B,null)}finally{Ca()}return new ip(this.componentType,ee,Cl(z,B),B,z)}}class ip extends class{}{constructor(s,u,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.instance=u,this.hostView=this.changeDetectorRef=new LI(d),this.componentType=s}get injector(){return new jn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}const pu=new Map;class vD extends Sl{constructor(s,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new dD(this);const c=Wr(s),d=s[qd]||null;d&&$r(d),this._bootstrapComponents=Zs(c.bootstrap),this._r3Injector=Xs(s,u,[{provide:Sl,useValue:this},{provide:Ss,useValue:this.componentFactoryResolver}],fe(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,u=un.THROW_IF_NOT_FOUND,c=Ke.Default){return s===un||s===Sl||s===Yc?this:this._r3Injector.get(s,u,c)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class aa extends class{}{constructor(s){super(),this.moduleType=s,null!==Wr(s)&&function(o){const s=new Set;!function u(c){const d=Wr(c,!0),f=d.id;null!==f&&(function(o,s,u){if(s&&s!==u)throw new Error(`Duplicate module registered for ${o} - ${fe(s)} vs ${fe(s.name)}`)}(f,pu.get(f),c),pu.set(f,c));const _=Zs(d.imports);for(const v of _)s.has(v)||(s.add(v),u(v))}(o)}(s)}create(s){return new vD(this.moduleType,s)}}function XE(o,s,u,c){return function(o,s,u,c,d,f){const _=s+u;return Fn(o,_,d)?Cr(o,_+1,f?c.call(f,d):c(d)):gu(o,_+1)}(Te(),Zn(),o,s,u,c)}function cy(o,s,u,c,d){return function(o,s,u,c,d,f,_){const v=s+u;return function(o,s,u,c){const d=Fn(o,s,u);return Fn(o,s+1,c)||d}(o,v,d,f)?Cr(o,v+2,_?c.call(_,d,f):c(d,f)):gu(o,v+2)}(Te(),Zn(),o,s,u,c,d)}function gu(o,s){const u=o[s];return u===gt?void 0:u}function n0(o){return s=>{setTimeout(o,void 0,s)}}const xs=class extends b.xQ{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,u,c){var d,f,_;let v=s,I=u||(()=>null),C=c;if(s&&"object"==typeof s){const x=s;v=null===(d=x.next)||void 0===d?void 0:d.bind(x),I=null===(f=x.error)||void 0===f?void 0:f.bind(x),C=null===(_=x.complete)||void 0===_?void 0:_.bind(x)}this.__isAsync&&(I=n0(I),v&&(v=n0(v)),C&&(C=n0(C)));const A=super.subscribe({next:v,error:I,complete:C});return s instanceof ne.w&&s.add(A),A}};function YS(){return this._results[Rt()]()}class hy{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Rt(),c=hy.prototype;c[u]||(c[u]=YS)}get changes(){return this._changes||(this._changes=new xs)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,u){return this._results.reduce(s,u)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,u){const c=this;c.dirty=!1;const d=hi(s);(this._changesDetected=!function(o,s,u){if(o.length!==s.length)return!1;for(let c=0;c<o.length;c++){let d=o[c],f=s[c];if(u&&(d=u(d),f=u(f)),f!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class fy{constructor(s){this.queryList=s,this.matches=null}clone(){return new fy(this.queryList)}setDirty(){this.queryList.setDirty()}}class py{constructor(s=[]){this.queries=s}createEmbeddedView(s){const u=s.queries;if(null!==u){const c=null!==s.contentQueries?s.contentQueries[0]:u.length,d=[];for(let f=0;f<c;f++){const _=u.getByIndex(f);d.push(this.queries[_.indexInDeclarationView].clone())}return new py(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let u=0;u<this.queries.length;u++)null!==xD(s,u).matches&&this.queries[u].setDirty()}}class r0{constructor(s,u,c=null){this.predicate=s,this.flags=u,this.read=c}}class gy{constructor(s=[]){this.queries=s}elementStart(s,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,u)}elementEnd(s){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(s)}embeddedTView(s){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,f=this.getByIndex(c).embeddedTView(s,d);f&&(f.indexInDeclarationView=c,null!==u?u.push(f):u=[f])}return null!==u?new gy(u):null}template(s,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,u)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class up{constructor(s,u=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(s,u){this.isApplyingToNode(u)&&this.matchTNode(s,u)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,u){this.elementStart(s,u)}embeddedTView(s,u){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,u),new up(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(s,u,my(u,f)),this.matchTNodeWithReadOption(s,u,Ai(u,s,f,!1,!1))}else c===Qf?4&u.type&&this.matchTNodeWithReadOption(s,u,-1):this.matchTNodeWithReadOption(s,u,Ai(u,s,c,!1,!1))}matchTNodeWithReadOption(s,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===As||d===Rd||d===Qf&&4&u.type)this.addMatch(u.index,-2);else{const f=Ai(u,s,d,!1,!1);null!==f&&this.addMatch(u.index,f)}else this.addMatch(u.index,c)}}addMatch(s,u){null===this.matches?this.matches=[s,u]:this.matches.push(s,u)}}function my(o,s){const u=o.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===s)return u[c+1];return null}function CD(o,s,u,c){return-1===u?function(o,s){return 11&o.type?Cl(o,s):4&o.type?Yf(o,s):null}(s,o):-2===u?function(o,s,u){return u===As?Cl(s,o):u===Qf?Yf(s,o):u===Rd?LE(s,o):void 0}(o,s,c):xa(o,o[1],u,s)}function SD(o,s,u,c){const d=s[19].queries[c];if(null===d.matches){const f=o.data,_=u.matches,v=[];for(let I=0;I<_.length;I+=2){const C=_[I];v.push(C<0?null:CD(s,f[C],_[I+1],u.metadata.read))}d.matches=v}return d.matches}function la(o,s,u,c){const d=o.queries.getByIndex(u),f=d.matches;if(null!==f){const _=SD(o,s,d,u);for(let v=0;v<f.length;v+=2){const I=f[v];if(I>0)c.push(_[v/2]);else{const C=f[v+1],A=s[-I];for(let x=10;x<A.length;x++){const P=A[x];P[17]===P[3]&&la(P[1],P,C,c)}if(null!==A[9]){const x=A[9];for(let P=0;P<x.length;P++){const F=x[P];la(F[1],F,C,c)}}}}}return c}function AD(o){const s=Te(),u=Tt(),c=Bp();e_(c+1);const d=xD(u,c);if(o.dirty&&Op(s)===(2==(2&d.metadata.flags))){if(null===d.matches)o.reset([]);else{const f=d.crossesNgTemplate?la(u,s,c,[]):SD(u,s,d,c);o.reset(f,RI),o.notifyOnChanges()}return!0}return!1}function ND(o,s,u){const c=Tt();c.firstCreatePass&&(function(o,s,u){null===o.queries&&(o.queries=new gy),o.queries.track(new up(s,u))}(c,new r0(o,s,u),-1),2==(2&s)&&(c.staticViewQueries=!0)),function(o,s,u){const c=new hy(4==(4&u));Gc(o,s,c,c.destroy),null===s[19]&&(s[19]=new py),s[19].queries.push(new fy(c))}(c,Te(),s)}function RD(){return o=Te(),s=Bp(),o[19].queries[s].queryList;var o,s}function xD(o,s){return o.queries.getByIndex(s)}function a0(o,s){return Yf(o,s)}const Ey=new qt("Application Initializer");let Vl=(()=>{class o{constructor(u){this.appInits=u,this.resolve=du,this.reject=du,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(dm(f))u.push(f);else if($v(f)){const _=new Promise((v,I)=>{f.subscribe({complete:v,error:I})});u.push(_)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return o.\u0275fac=function(u){return new(u||o)(an(Ey,8))},o.\u0275prov=sn({token:o,factory:o.\u0275fac}),o})();const y0=new qt("AppId"),qD={provide:y0,useFactory:function(){return`${wy()}${wy()}${wy()}`},deps:[]};function wy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const by=new qt("Platform Initializer"),GD=new qt("Platform ID"),wA=new qt("appBootstrapListener");let WD=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=sn({token:o,factory:o.\u0275fac}),o})();const Ud=new qt("LocaleId"),fp=new qt("DefaultCurrencyCode");class KD{constructor(s,u){this.ngModuleFactory=s,this.componentFactories=u}}const Iy=function(o){return new aa(o)},SA=Iy,_0=function(o){return Promise.resolve(Iy(o))},ZD=function(o){const s=Iy(o),c=Zs(Wr(o).declarations).reduce((d,f)=>{const _=Kn(f);return _&&d.push(new gD(_)),d},[]);return new KD(s,c)},NA=ZD,bu=function(o){return Promise.resolve(ZD(o))};let gp=(()=>{class o{constructor(){this.compileModuleSync=SA,this.compileModuleAsync=_0,this.compileModuleAndAllComponentsSync=NA,this.compileModuleAndAllComponentsAsync=bu}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=sn({token:o,factory:o.\u0275fac}),o})();const xA=(()=>Promise.resolve(0))();function yn(o){"undefined"==typeof Zone?xA.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class ti{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xs(!1),this.onMicrotaskEmpty=new xs(!1),this.onStable=new xs(!1),this.onError=new xs(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function(){let o=yt.requestAnimationFrame,s=yt.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&s){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(o){const s=()=>{!function(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(yt,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,w0(o),o.isCheckStableRunning=!0,E0(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),w0(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,f,_,v)=>{try{return YD(o),u.invokeTask(d,f,_,v)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||o.shouldCoalesceRunChangeDetection)&&s(),b0(o)}},onInvoke:(u,c,d,f,_,v,I)=>{try{return YD(o),u.invoke(d,f,_,v,I)}finally{o.shouldCoalesceRunChangeDetection&&s(),b0(o)}},onHasTask:(u,c,d,f)=>{u.hasTask(d,f),c===d&&("microTask"==f.change?(o._hasPendingMicrotasks=f.microTask,w0(o),E0(o)):"macroTask"==f.change&&(o.hasPendingMacrotasks=f.macroTask))},onHandleError:(u,c,d,f)=>(u.handleError(d,f),o.runOutsideAngular(()=>o.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ti.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ti.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,u,c){return this._inner.run(s,u,c)}runTask(s,u,c,d){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+d,s,PA,du,du);try{return f.runTask(_,u,c)}finally{f.cancelTask(_)}}runGuarded(s,u,c){return this._inner.runGuarded(s,u,c)}runOutsideAngular(s){return this._outer.run(s)}}const PA={};function E0(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function w0(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function YD(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function b0(o){o._nesting--,E0(o)}class kA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xs,this.onMicrotaskEmpty=new xs,this.onStable=new xs,this.onError=new xs}run(s,u,c){return s.apply(u,c)}runGuarded(s,u,c){return s.apply(u,c)}runOutsideAngular(s){return s()}runTask(s,u,c,d){return s.apply(u,c)}}let JD=(()=>{class o{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ti.assertNotInAngularZone(),yn(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())yn(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:f,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,d){return[]}}return o.\u0275fac=function(u){return new(u||o)(an(ti))},o.\u0275prov=sn({token:o,factory:o.\u0275fac}),o})(),XD=(()=>{class o{constructor(){this._applications=new Map,I0.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return I0.findTestabilityInTree(this,u,c)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=sn({token:o,factory:o.\u0275fac}),o})();class eT{addToWindow(s){}findTestabilityInTree(s,u,c){return null}}function FA(o){I0=o}let I0=new eT,Ul=!0,D0=!1;function Dy(){return D0=!0,Ul}function mp(){if(D0)throw new Error("Cannot enable prod mode after platform setup.");Ul=!1}let Ii;const tT=new qt("AllowMultipleToken");class Ty{constructor(s,u){this.name=s,this.token=u}}function Cy(o,s,u=[]){const c=`Platform: ${s}`,d=new qt(c);return(f=[])=>{let _=C0();if(!_||_.injector.get(tT,!1))if(o)o(u.concat(f).concat({provide:d,useValue:!0}));else{const v=u.concat(f).concat({provide:d,useValue:!0},{provide:Ef,useValue:"platform"});!function(o){if(Ii&&!Ii.destroyed&&!Ii.injector.get(tT,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ii=o.get(rT);const s=o.get(by,null);s&&s.forEach(u=>u())}(un.create({providers:v,name:c}))}return function(o){const s=C0();if(!s)throw new Error("No platform exists!");if(!s.injector.get(o,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return s}(d)}}function C0(){return Ii&&!Ii.destroyed?Ii:null}let rT=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const v=function(o,s){let u;return u="noop"===o?new kA:("zone.js"===o?void 0:o)||new ti({enableLongStackTrace:Dy(),shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),I=[{provide:ti,useValue:v}];return v.run(()=>{const C=un.create({providers:I,parent:this.injector,name:u.moduleType.name}),A=u.create(C),x=A.injector.get(Jn,null);if(!x)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return v.runOutsideAngular(()=>{const P=v.onError.subscribe({next:F=>{x.handleError(F)}});A.onDestroy(()=>{S0(this._modules,A),P.unsubscribe()})}),function(o,s,u){try{const c=u();return dm(c)?c.catch(d=>{throw s.runOutsideAngular(()=>o.handleError(d)),d}):c}catch(c){throw s.runOutsideAngular(()=>o.handleError(c)),c}}(x,v,()=>{const P=A.injector.get(Vl);return P.runInitializers(),P.donePromise.then(()=>($r(A.injector.get(Ud,Bf)||Bf),this._moduleDoBootstrap(A),A))})})}bootstrapModule(u,c=[]){const d=iT({},c);return function(o,s,u){const c=new aa(u);return Promise.resolve(c)}(0,0,u).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(u){const c=u.injector.get(yp);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new Error(`The module ${fe(u.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(u){return new(u||o)(an(un))},o.\u0275prov=sn({token:o,factory:o.\u0275fac}),o})();function iT(o,s){return Array.isArray(s)?s.reduce(iT,o):Object.assign(Object.assign({},o),s)}let yp=(()=>{class o{constructor(u,c,d,f,_){this._zone=u,this._injector=c,this._exceptionHandler=d,this._componentFactoryResolver=f,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new $.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),I=new $.y(C=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{ti.assertNotInAngularZone(),yn(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{ti.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{A.unsubscribe(),x.unsubscribe()}});this.isStable=(0,ye.T)(v,I.pipe(o=>he()(function(o,s){return function(c){let d;d="function"==typeof o?o:function(){return o};const f=Object.create(c,k);return f.source=c,f.subjectFactory=d,f}}(re)(o))))}bootstrap(u,c){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let d;d=u instanceof TI?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(d.componentType);const f=function(o){return o.isBoundToModule}(d)?void 0:this._injector.get(Sl),v=d.create(un.NULL,[],c||d.selector,f),I=v.location.nativeElement,C=v.injector.get(JD,null),A=C&&v.injector.get(XD);return C&&A&&A.registerApplication(I,C),v.onDestroy(()=>{this.detachView(v.hostView),S0(this.components,v),A&&A.unregisterApplication(I)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;S0(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(wA,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(u){return new(u||o)(an(ti),an(un),an(Jn),an(Ss),an(Vl))},o.\u0275prov=sn({token:o,factory:o.\u0275fac}),o})();function S0(o,s){const u=o.indexOf(s);u>-1&&o.splice(u,1)}const QA=function(o){return null},YA=Cy(null,"core",[{provide:GD,useValue:"unknown"},{provide:rT,deps:[un]},{provide:XD,deps:[]},{provide:WD,deps:[]}]),XA=[{provide:yp,useClass:yp,deps:[ti,un,Jn,Ss,Vl]},{provide:pD,deps:[ti],useFactory:function(o){let s=[];return o.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(u){s.push(u)}}},{provide:Vl,useClass:Vl,deps:[[new gs,Ey]]},{provide:gp,useClass:gp,deps:[]},qD,{provide:Cd,useFactory:function(){return fS},deps:[]},{provide:Ad,useFactory:function(){return ME},deps:[]},{provide:Ud,useFactory:function(o){return $r(o=o||"undefined"!=typeof $localize&&$localize.locale||Bf),o},deps:[[new tl(Ud),new gs,new ms]]},{provide:fp,useValue:"USD"}];let mT=(()=>{class o{constructor(u){}}return o.\u0275fac=function(u){return new(u||o)(an(yp))},o.\u0275mod=Gd({type:o}),o.\u0275inj=gr({providers:XA}),o})()},8939:(et,Ne,L)=>{"use strict";L.d(Ne,{hO:()=>te,xv:()=>ie,Dh:()=>Ie,GT:()=>he,on:()=>k,pX:()=>me});var b=L(4693),ne=L(7841),$=L(2993);et=L.hmd(et);const ye=["ngOnDestroy"],me=(Y,ce,re,we={})=>new Proxy(Y,{get:(De,Pe)=>re.runOutsideAngular(()=>{var fe;if(Y[Pe])return(null===(fe=null==we?void 0:we.spy)||void 0===fe?void 0:fe.get)&&we.spy.get(Pe,Y[Pe]),Y[Pe];if(ye.indexOf(Pe)>-1)return()=>{};const Ve=ce.toPromise().then(qe=>{const Ct=qe&&qe[Pe];return"function"==typeof Ct?Ct.bind(qe):Ct&&Ct.then?Ct.then(Fe=>re.run(()=>Fe)):re.run(()=>Ct)});return new Proxy(()=>{},{get:(qe,Ct)=>Ve[Ct],apply:(qe,Ct,Fe)=>Ve.then(At=>{var _e;const X=At&&At(...Fe);return(null===(_e=null==we?void 0:we.spy)||void 0===_e?void 0:_e.apply)&&we.spy.apply(Pe,Fe,X),X})})})}),he=(Y,ce)=>{ce.forEach(re=>{Object.getOwnPropertyNames(re.prototype||re).forEach(we=>{Object.defineProperty(Y.prototype,we,Object.getOwnPropertyDescriptor(re.prototype||re,we))})})};class Ce{constructor(ce){return ce}}const Ie=new b.OlP("angularfire2.app.options"),ie=new b.OlP("angularfire2.app.name");function k(Y,ce,re){const De="object"==typeof re&&re||{};De.name=De.name||"string"==typeof re&&re||"[DEFAULT]";const fe=ne.Z.apps.filter(Ve=>Ve&&Ve.name===De.name)[0]||ce.runOutsideAngular(()=>ne.Z.initializeApp(Y,De));try{JSON.stringify(Y)!==JSON.stringify(fe.options)&&H("error",`${fe.name} Firebase App already initialized with different options${et.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ve){}return new Ce(fe)}const H=(Y,...ce)=>{(0,b.X6Q)()&&"undefined"!=typeof console&&console[Y](...ce)},J={provide:Ce,useFactory:k,deps:[Ie,b.R0b,[new b.FiY,ie]]};let te=(()=>{class Y{constructor(re){ne.Z.registerVersion("angularfire",$.q4.full,"core"),ne.Z.registerVersion("angularfire",$.q4.full,"app-compat"),ne.Z.registerVersion("angular",b.q4F.full,re.toString())}static initializeApp(re,we){return{ngModule:Y,providers:[{provide:Ie,useValue:re},{provide:ie,useValue:we}]}}}return Y.\u0275fac=function(re){return new(re||Y)(b.LFG(b.Lbi))},Y.\u0275mod=b.oAB({type:Y}),Y.\u0275inj=b.cJS({providers:[J]}),Y})()},2993:(et,Ne,L)=>{"use strict";L.d(Ne,{q4:()=>ce,iC:()=>se,fc:()=>K,HU:()=>_e,cc:()=>De});var b=L(4693);(0,L(5452).registerVersion)("firebase","9.1.0","app");var me=L(7771),he=L(3637),Ce=L(7393);function Ie(){}var ie=L(9105);class H{constructor(Oe,Be,Xe){this.nextOrObserver=Oe,this.error=Be,this.complete=Xe}call(Oe,Be){return Be.subscribe(new J(Oe,this.nextOrObserver,this.error,this.complete))}}class J extends Ce.L{constructor(Oe,Be,Xe,mt){super(Oe),this._tapNext=Ie,this._tapError=Ie,this._tapComplete=Ie,this._tapError=Xe||Ie,this._tapComplete=mt||Ie,(0,ie.m)(Be)?(this._context=this,this._tapNext=Be):Be&&(this._context=Be,this._tapNext=Be.next||Ie,this._tapError=Be.error||Ie,this._tapComplete=Be.complete||Ie)}_next(Oe){try{this._tapNext.call(this._context,Oe)}catch(Be){return void this.destination.error(Be)}this.destination.next(Oe)}_error(Oe){try{this._tapError.call(this._context,Oe)}catch(Be){return void this.destination.error(Be)}this.destination.error(Oe)}_complete(){try{this._tapComplete.call(this._context)}catch(Oe){return void this.destination.error(Oe)}return this.destination.complete()}}var te=L(309),Y=L(3101);et=L.hmd(et);const ce=new b.GfV("7.0.4"),re=!!et.hot,we=(Se,...Oe)=>{(0,b.X6Q)()&&"undefined"!=typeof console&&console[Se](...Oe)};function De(Se,Oe,Be,Xe,mt){const[,rn,Qt]=globalThis.\u0275AngularfireInstanceCache.find(Ut=>Ut[0]===Se)||[];if(rn)return function(Se,Oe){try{return Se.toString()===Oe.toString()}catch(Be){return Se===Oe}}(mt,Qt)||(we("error",`${Oe} was already initialized on the ${Be} Firebase App with different settings.${re?" You may need to reload as Firebase is not HMR aware.":""}`),we("warn",{is:mt,was:Qt})),rn;{const Ut=Xe();return globalThis.\u0275AngularfireInstanceCache.push([Se,Ut,mt]),Ut}}function Ct(){}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[]);class Fe{constructor(Oe,Be=me.N){this.zone=Oe,this.delegate=Be}now(){return this.delegate.now()}schedule(Oe,Be,Xe){const mt=this.zone;return this.delegate.schedule(function(Qt){mt.runGuarded(()=>{Oe.apply(this,[Qt])})},Be,Xe)}}class At{constructor(Oe){this.zone=Oe,this.task=null}call(Oe,Be){const Xe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ct,{},Ct,Ct)),Be.pipe((Se={next:Xe,complete:Xe,error:Xe},function(mt){return mt.lift(new H(Se,void 0,void 0))})).subscribe(Oe).add(Xe);var Se}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let _e=(()=>{class Se{constructor(Be){this.ngZone=Be,this.outsideAngular=Be.runOutsideAngular(()=>new Fe(Zone.current)),this.insideAngular=Be.run(()=>new Fe(Zone.current,he.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return Se.\u0275fac=function(Be){return new(Be||Se)(b.LFG(b.R0b))},Se.\u0275prov=b.Yz7({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Se})();function X(){const Se=globalThis.\u0275AngularFireScheduler;if(!Se)throw new Error("AngularFireModule has not been provided");return Se}function K(Se){return Se.pipe((0,te.QV)(X().outsideAngular))}function se(Se){return X(),function(Se){return function(Be){return(Be=Be.lift(new At(Se.ngZone))).pipe((0,Y.R)(Se.outsideAngular),(0,te.QV)(Se.insideAngular))}}(X())(Se)}},4486:(et,Ne,L)=>{"use strict";L.d(Ne,{Z:()=>ce});var b=L(3854),ne=L(6034),$=L(5452),ye=L(5601);class me{constructor(we,De){this._delegate=we,this.firebase=De,(0,$._addComponent)(we,new ne.wA("app-compat",()=>this,"PUBLIC")),this.container=we.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(we){this._delegate.automaticDataCollectionEnabled=we}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(we=>{this._delegate.checkDestroyed(),we()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,$.deleteApp)(this._delegate)))}_getService(we,De=$._DEFAULT_ENTRY_NAME){var Pe;this._delegate.checkDestroyed();const fe=this._delegate.container.getProvider(we);return!fe.isInitialized()&&"EXPLICIT"===(null===(Pe=fe.getComponent())||void 0===Pe?void 0:Pe.instantiationMode)&&fe.initialize(),fe.getImmediate({identifier:De})}_removeServiceInstance(we,De=$._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(we).clearInstance(De)}_addComponent(we){(0,$._addComponent)(this._delegate,we)}_addOrOverwriteComponent(we){(0,$._addOrOverwriteComponent)(this._delegate,we)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ce=new b.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),k=function ie(){const re=function(re){const we={},De={__esModule:!0,initializeApp:function(At,_e={}){const X=$.initializeApp(At,_e);if((0,b.r3)(we,X.name))return we[X.name];const ae=new re(X,De);return we[X.name]=ae,ae},app:fe,registerVersion:$.registerVersion,setLogLevel:$.setLogLevel,onLog:$.onLog,apps:null,SDK_VERSION:$.SDK_VERSION,INTERNAL:{registerComponent:function(At){const _e=At.name,X=_e.replace("-compat","");if($._registerComponent(At)&&"PUBLIC"===At.type){const ae=(ue=fe())=>{if("function"!=typeof ue[X])throw Ce.create("invalid-app-argument",{appName:_e});return ue[X]()};void 0!==At.serviceProps&&(0,b.ZB)(ae,At.serviceProps),De[X]=ae,re.prototype[X]=function(...ue){return this._getService.bind(this,_e).apply(this,At.multipleInstances?ue:[])}}return"PUBLIC"===At.type?De[X]:null},removeApp:function(At){delete we[At]},useAsService:function(At,_e){return"serverAuth"===_e?null:_e},modularAPIs:$}};function fe(At){if(!(0,b.r3)(we,At=At||$._DEFAULT_ENTRY_NAME))throw Ce.create("no-app",{appName:At});return we[At]}return De.default=De,Object.defineProperty(De,"apps",{get:function(){return Object.keys(we).map(At=>we[At])}}),fe.App=re,De}(me);return re.INTERNAL=Object.assign(Object.assign({},re.INTERNAL),{createFirebaseNamespace:ie,extendNamespace:function(De){(0,b.ZB)(re,De)},createSubscribe:b.ne,ErrorFactory:b.LL,deepExtend:b.ZB}),re}(),H=new ye.Yd("@firebase/app-compat");if((0,b.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const re=self.firebase.SDK_VERSION;re&&re.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ce=k;(0,$.registerVersion)("@firebase/app-compat","0.1.2",undefined)},5452:(et,Ne,L)=>{"use strict";L.r(Ne),L.d(Ne,{FirebaseError:()=>ye.ZR,SDK_VERSION:()=>Di,_DEFAULT_ENTRY_NAME:()=>Zt,_addComponent:()=>Xe,_addOrOverwriteComponent:()=>mt,_apps:()=>Oe,_clearComponents:()=>Pt,_components:()=>Be,_getProvider:()=>Qt,_registerComponent:()=>rn,_removeServiceInstance:()=>Ut,deleteApp:()=>yo,getApp:()=>Ft,getApps:()=>Gl,initializeApp:()=>xn,onLog:()=>pr,registerVersion:()=>sn,setLogLevel:()=>gr});var b=L(8239),ne=L(6034),$=L(5601),ye=L(3854);class me{constructor(rt){this.container=rt}getPlatformInfoString(){return this.container.getProviders().map(Wt=>{if(function(lt){const rt=lt.getComponent();return"VERSION"===(null==rt?void 0:rt.type)}(Wt)){const Yt=Wt.getImmediate();return`${Yt.library}/${Yt.version}`}return null}).filter(Wt=>Wt).join(" ")}}const Ce="@firebase/app",ie=new $.Yd("@firebase/app"),Zt="[DEFAULT]",Se={[Ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Oe=new Map,Be=new Map;function Xe(lt,rt){try{lt.container.addComponent(rt)}catch(Wt){ie.debug(`Component ${rt.name} failed to register with FirebaseApp ${lt.name}`,Wt)}}function mt(lt,rt){lt.container.addOrOverwriteComponent(rt)}function rn(lt){const rt=lt.name;if(Be.has(rt))return ie.debug(`There were multiple attempts to register component ${rt}.`),!1;Be.set(rt,lt);for(const Wt of Oe.values())Xe(Wt,lt);return!0}function Qt(lt,rt){return lt.container.getProvider(rt)}function Ut(lt,rt,Wt=Zt){Qt(lt,rt).clearInstance(Wt)}function Pt(){Be.clear()}const ss=new ye.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class mo{constructor(rt,Wt,Yt){this._isDeleted=!1,this._options=Object.assign({},rt),this._config=Object.assign({},Wt),this._name=Wt.name,this._automaticDataCollectionEnabled=Wt.automaticDataCollectionEnabled,this._container=Yt,this.container.addComponent(new ne.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(rt){this.checkDestroyed(),this._automaticDataCollectionEnabled=rt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(rt){this._isDeleted=rt}checkDestroyed(){if(this.isDeleted)throw ss.create("app-deleted",{appName:this._name})}}const Di="9.1.0";function xn(lt,rt={}){"object"!=typeof rt&&(rt={name:rt});const Wt=Object.assign({name:Zt,automaticDataCollectionEnabled:!1},rt),Yt=Wt.name;if("string"!=typeof Yt||!Yt)throw ss.create("bad-app-name",{appName:String(Yt)});const Pn=Oe.get(Yt);if(Pn){if((0,ye.vZ)(lt,Pn.options)&&(0,ye.vZ)(Wt,Pn.config))return Pn;throw ss.create("duplicate-app",{appName:Yt})}const Ot=new ne.H0(Yt);for(const it of Be.values())Ot.addComponent(it);const Ge=new mo(lt,Wt,Ot);return Oe.set(Yt,Ge),Ge}function Ft(lt=Zt){const rt=Oe.get(lt);if(!rt)throw ss.create("no-app",{appName:lt});return rt}function Gl(){return Array.from(Oe.values())}function yo(lt){return ha.apply(this,arguments)}function ha(){return(ha=(0,b.Z)(function*(lt){const rt=lt.name;Oe.has(rt)&&(Oe.delete(rt),yield Promise.all(lt.container.getProviders().map(Wt=>Wt.delete())),lt.isDeleted=!0)})).apply(this,arguments)}function sn(lt,rt,Wt){var Yt;let Pn=null!==(Yt=Se[lt])&&void 0!==Yt?Yt:lt;Wt&&(Pn+=`-${Wt}`);const Ot=Pn.match(/\s|\//),Ge=rt.match(/\s|\//);if(Ot||Ge){const it=[`Unable to register library "${Pn}" with version "${rt}":`];return Ot&&it.push(`library name "${Pn}" contains illegal characters (whitespace or "/")`),Ot&&Ge&&it.push("and"),Ge&&it.push(`version name "${rt}" contains illegal characters (whitespace or "/")`),void ie.warn(it.join(" "))}rn(new ne.wA(`${Pn}-version`,()=>({library:Pn,version:rt}),"VERSION"))}function pr(lt,rt){if(null!==lt&&"function"!=typeof lt)throw ss.create("invalid-log-argument");(0,$.Am)(lt,rt)}function gr(lt){(0,$.Ub)(lt)}rn(new ne.wA("platform-logger",rt=>new me(rt),"PRIVATE")),sn(Ce,"0.7.1",undefined),sn("fire-js","")},6034:(et,Ne,L)=>{"use strict";L.d(Ne,{wA:()=>$,H0:()=>Ie});var b=L(4762),ne=L(3854),$=function(){function ie(k,H,J){this.name=k,this.instanceFactory=H,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ie.prototype.setInstantiationMode=function(k){return this.instantiationMode=k,this},ie.prototype.setMultipleInstances=function(k){return this.multipleInstances=k,this},ie.prototype.setServiceProps=function(k){return this.serviceProps=k,this},ie.prototype.setInstanceCreatedCallback=function(k){return this.onInstanceCreated=k,this},ie}(),ye="[DEFAULT]",me=function(){function ie(k,H){this.name=k,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ie.prototype.get=function(k){var H=this.normalizeInstanceIdentifier(k);if(!this.instancesDeferred.has(H)){var J=new ne.BH;if(this.instancesDeferred.set(H,J),this.isInitialized(H)||this.shouldAutoInitialize())try{var te=this.getOrInitializeService({instanceIdentifier:H});te&&J.resolve(te)}catch(Y){}}return this.instancesDeferred.get(H).promise},ie.prototype.getImmediate=function(k){var H,J=this.normalizeInstanceIdentifier(null==k?void 0:k.identifier),te=null!==(H=null==k?void 0:k.optional)&&void 0!==H&&H;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(te)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Y){if(te)return null;throw Y}},ie.prototype.getComponent=function(){return this.component},ie.prototype.setComponent=function(k){var H,J;if(k.name!==this.name)throw Error("Mismatching Component "+k.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=k,this.shouldAutoInitialize()){if(function(ie){return"EAGER"===ie.instantiationMode}(k))try{this.getOrInitializeService({instanceIdentifier:ye})}catch(fe){}try{for(var te=(0,b.XA)(this.instancesDeferred.entries()),Y=te.next();!Y.done;Y=te.next()){var ce=(0,b.CR)(Y.value,2),we=ce[1],De=this.normalizeInstanceIdentifier(ce[0]);try{var Pe=this.getOrInitializeService({instanceIdentifier:De});we.resolve(Pe)}catch(fe){}}}catch(fe){H={error:fe}}finally{try{Y&&!Y.done&&(J=te.return)&&J.call(te)}finally{if(H)throw H.error}}}},ie.prototype.clearInstance=function(k){void 0===k&&(k=ye),this.instancesDeferred.delete(k),this.instancesOptions.delete(k),this.instances.delete(k)},ie.prototype.delete=function(){return(0,b.mG)(this,void 0,void 0,function(){var k;return(0,b.Jh)(this,function(H){switch(H.label){case 0:return k=Array.from(this.instances.values()),[4,Promise.all((0,b.ev)((0,b.ev)([],(0,b.CR)(k.filter(function(J){return"INTERNAL"in J}).map(function(J){return J.INTERNAL.delete()}))),(0,b.CR)(k.filter(function(J){return"_delete"in J}).map(function(J){return J._delete()}))))];case 1:return H.sent(),[2]}})})},ie.prototype.isComponentSet=function(){return null!=this.component},ie.prototype.isInitialized=function(k){return void 0===k&&(k=ye),this.instances.has(k)},ie.prototype.getOptions=function(k){return void 0===k&&(k=ye),this.instancesOptions.get(k)||{}},ie.prototype.initialize=function(k){var H,J;void 0===k&&(k={});var te=k.options,Y=void 0===te?{}:te,ce=this.normalizeInstanceIdentifier(k.instanceIdentifier);if(this.isInitialized(ce))throw Error(this.name+"("+ce+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var re=this.getOrInitializeService({instanceIdentifier:ce,options:Y});try{for(var we=(0,b.XA)(this.instancesDeferred.entries()),De=we.next();!De.done;De=we.next()){var Pe=(0,b.CR)(De.value,2),Ve=Pe[1];ce===this.normalizeInstanceIdentifier(Pe[0])&&Ve.resolve(re)}}catch(Ct){H={error:Ct}}finally{try{De&&!De.done&&(J=we.return)&&J.call(we)}finally{if(H)throw H.error}}return re},ie.prototype.onInit=function(k,H){var J,te=this.normalizeInstanceIdentifier(H),Y=null!==(J=this.onInitCallbacks.get(te))&&void 0!==J?J:new Set;Y.add(k),this.onInitCallbacks.set(te,Y);var ce=this.instances.get(te);return ce&&k(ce,te),function(){Y.delete(k)}},ie.prototype.invokeOnInitCallbacks=function(k,H){var J,te,Y=this.onInitCallbacks.get(H);if(Y)try{for(var ce=(0,b.XA)(Y),re=ce.next();!re.done;re=ce.next()){var we=re.value;try{we(k,H)}catch(De){}}}catch(De){J={error:De}}finally{try{re&&!re.done&&(te=ce.return)&&te.call(ce)}finally{if(J)throw J.error}}},ie.prototype.getOrInitializeService=function(k){var H=k.instanceIdentifier,J=k.options,te=void 0===J?{}:J,Y=this.instances.get(H);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:he(H),options:te}),this.instances.set(H,Y),this.instancesOptions.set(H,te),this.invokeOnInitCallbacks(Y,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,Y)}catch(ce){}return Y||null},ie.prototype.normalizeInstanceIdentifier=function(k){return void 0===k&&(k=ye),this.component?this.component.multipleInstances?k:ye:k},ie.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},ie}();function he(ie){return ie===ye?void 0:ie}var Ie=function(){function ie(k){this.name=k,this.providers=new Map}return ie.prototype.addComponent=function(k){var H=this.getProvider(k.name);if(H.isComponentSet())throw new Error("Component "+k.name+" has already been registered with "+this.name);H.setComponent(k)},ie.prototype.addOrOverwriteComponent=function(k){this.getProvider(k.name).isComponentSet()&&this.providers.delete(k.name),this.addComponent(k)},ie.prototype.getProvider=function(k){if(this.providers.has(k))return this.providers.get(k);var H=new me(k,this);return this.providers.set(k,H),H},ie.prototype.getProviders=function(){return Array.from(this.providers.values())},ie}()},5601:(et,Ne,L)=>{"use strict";L.d(Ne,{in:()=>ne,Yd:()=>Ce,Ub:()=>Ie,Am:()=>ie});const b=[];var ne=(()=>{return(k=ne||(ne={}))[k.DEBUG=0]="DEBUG",k[k.VERBOSE=1]="VERBOSE",k[k.INFO=2]="INFO",k[k.WARN=3]="WARN",k[k.ERROR=4]="ERROR",k[k.SILENT=5]="SILENT",ne;var k})();const $={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},ye=ne.INFO,me={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},he=(k,H,...J)=>{if(H<k.logLevel)return;const te=(new Date).toISOString(),Y=me[H];if(!Y)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Y](`[${te}]  ${k.name}:`,...J)};class Ce{constructor(H){this.name=H,this._logLevel=ye,this._logHandler=he,this._userLogHandler=null,b.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in ne))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?$[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...H),this._logHandler(this,ne.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...H),this._logHandler(this,ne.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...H),this._logHandler(this,ne.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...H),this._logHandler(this,ne.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...H),this._logHandler(this,ne.ERROR,...H)}}function Ie(k){b.forEach(H=>{H.setLogLevel(k)})}function ie(k,H){for(const J of b){let te=null;H&&H.level&&(te=$[H.level]),J.userLogHandler=null===k?null:(Y,ce,...re)=>{const we=re.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch(Pe){return null}}).filter(De=>De).join(" ");ce>=(null!=te?te:Y.logLevel)&&k({level:ne[ce].toLowerCase(),message:we,args:re,type:Y.name})}}}},3854:(et,Ne,L)=>{"use strict";L.d(Ne,{BH:()=>te,LL:()=>se,ZR:()=>be,tV:()=>ie,r3:()=>Qt,Sg:()=>Y,ne:()=>yo,vZ:()=>ss,ZB:()=>H,pd:()=>Ft,m9:()=>fa,z$:()=>ce,jU:()=>De,ru:()=>Pe,d:()=>Ve,xb:()=>Pt,w1:()=>qe,hl:()=>_e,uI:()=>re,UG:()=>we,b$:()=>fe,G6:()=>At,Mn:()=>Ct,xO:()=>Di,zd:()=>xn});const ye=function(j){const U=[];let G=0;for(let Ee=0;Ee<j.length;Ee++){let Q=j.charCodeAt(Ee);Q<128?U[G++]=Q:Q<2048?(U[G++]=Q>>6|192,U[G++]=63&Q|128):55296==(64512&Q)&&Ee+1<j.length&&56320==(64512&j.charCodeAt(Ee+1))?(Q=65536+((1023&Q)<<10)+(1023&j.charCodeAt(++Ee)),U[G++]=Q>>18|240,U[G++]=Q>>12&63|128,U[G++]=Q>>6&63|128,U[G++]=63&Q|128):(U[G++]=Q>>12|224,U[G++]=Q>>6&63|128,U[G++]=63&Q|128)}return U},he={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,U){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=U?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ee=[];for(let Q=0;Q<j.length;Q+=3){const Ze=j[Q],pt=Q+1<j.length,Ht=pt?j[Q+1]:0,_n=Q+2<j.length,yt=_n?j[Q+2]:0;let hn=(15&Ht)<<2|yt>>6,Dt=63&yt;_n||(Dt=64,pt||(hn=64)),Ee.push(G[Ze>>2],G[(3&Ze)<<4|Ht>>4],G[hn],G[Dt])}return Ee.join("")},encodeString(j,U){return this.HAS_NATIVE_SUPPORT&&!U?btoa(j):this.encodeByteArray(ye(j),U)},decodeString(j,U){return this.HAS_NATIVE_SUPPORT&&!U?atob(j):function(j){const U=[];let G=0,Ee=0;for(;G<j.length;){const Q=j[G++];if(Q<128)U[Ee++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const Ze=j[G++];U[Ee++]=String.fromCharCode((31&Q)<<6|63&Ze)}else if(Q>239&&Q<365){const _n=((7&Q)<<18|(63&j[G++])<<12|(63&j[G++])<<6|63&j[G++])-65536;U[Ee++]=String.fromCharCode(55296+(_n>>10)),U[Ee++]=String.fromCharCode(56320+(1023&_n))}else{const Ze=j[G++],pt=j[G++];U[Ee++]=String.fromCharCode((15&Q)<<12|(63&Ze)<<6|63&pt)}}return U.join("")}(this.decodeStringToByteArray(j,U))},decodeStringToByteArray(j,U){this.init_();const G=U?this.charToByteMapWebSafe_:this.charToByteMap_,Ee=[];for(let Q=0;Q<j.length;){const Ze=G[j.charAt(Q++)],Ht=Q<j.length?G[j.charAt(Q)]:0;++Q;const yt=Q<j.length?G[j.charAt(Q)]:64;++Q;const St=Q<j.length?G[j.charAt(Q)]:64;if(++Q,null==Ze||null==Ht||null==yt||null==St)throw Error();Ee.push(Ze<<2|Ht>>4),64!==yt&&(Ee.push(Ht<<4&240|yt>>2),64!==St&&Ee.push(yt<<6&192|St))}return Ee},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},Ie=function(j){return function(j){const U=ye(j);return he.encodeByteArray(U,!0)}(j).replace(/\./g,"")},ie=function(j){try{return he.decodeString(j,!0)}catch(U){console.error("base64Decode failed: ",U)}return null};function H(j,U){if(!(U instanceof Object))return U;switch(U.constructor){case Date:return new Date(U.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return U}for(const G in U)!U.hasOwnProperty(G)||!J(G)||(j[G]=H(j[G],U[G]));return j}function J(j){return"__proto__"!==j}class te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((U,G)=>{this.resolve=U,this.reject=G})}wrapCallback(U){return(G,Ee)=>{G?this.reject(G):this.resolve(Ee),"function"==typeof U&&(this.promise.catch(()=>{}),1===U.length?U(G):U(G,Ee))}}}function Y(j,U){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ee=U||"demo-project",Q=j.iat||0,Ze=j.sub||j.user_id;if(!Ze)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const pt=Object.assign({iss:`https://securetoken.google.com/${Ee}`,aud:Ee,iat:Q,exp:Q+3600,auth_time:Q,sub:Ze,user_id:Ze,firebase:{sign_in_provider:"custom",identities:{}}},j);return[Ie(JSON.stringify({alg:"none",type:"JWT"})),Ie(JSON.stringify(pt)),""].join(".")}function ce(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function re(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ce())}function we(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(j){return!1}}function De(){return"object"==typeof self&&self.self===self}function Pe(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function fe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ve(){return ce().indexOf("Electron/")>=0}function qe(){const j=ce();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function Ct(){return ce().indexOf("MSAppHost/")>=0}function At(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _e(){return"object"==typeof indexedDB}class be extends Error{constructor(U,G,Ee){super(G),this.code=U,this.customData=Ee,this.name="FirebaseError",Object.setPrototypeOf(this,be.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,se.prototype.create)}}class se{constructor(U,G,Ee){this.service=U,this.serviceName=G,this.errors=Ee}create(U,...G){const Ee=G[0]||{},Q=`${this.service}/${U}`,Ze=this.errors[U],pt=Ze?function(j,U){return j.replace(Mt,(G,Ee)=>{const Q=U[Ee];return null!=Q?String(Q):`<${Ee}?>`})}(Ze,Ee):"Error";return new be(Q,`${this.serviceName}: ${pt} (${Q}).`,Ee)}}const Mt=/\{\$([^}]+)}/g;function Qt(j,U){return Object.prototype.hasOwnProperty.call(j,U)}function Pt(j){for(const U in j)if(Object.prototype.hasOwnProperty.call(j,U))return!1;return!0}function ss(j,U){if(j===U)return!0;const G=Object.keys(j),Ee=Object.keys(U);for(const Q of G){if(!Ee.includes(Q))return!1;const Ze=j[Q],pt=U[Q];if(mo(Ze)&&mo(pt)){if(!ss(Ze,pt))return!1}else if(Ze!==pt)return!1}for(const Q of Ee)if(!G.includes(Q))return!1;return!0}function mo(j){return null!==j&&"object"==typeof j}function Di(j){const U=[];for(const[G,Ee]of Object.entries(j))Array.isArray(Ee)?Ee.forEach(Q=>{U.push(encodeURIComponent(G)+"="+encodeURIComponent(Q))}):U.push(encodeURIComponent(G)+"="+encodeURIComponent(Ee));return U.length?"&"+U.join("&"):""}function xn(j){const U={};return j.replace(/^\?/,"").split("&").forEach(Ee=>{if(Ee){const[Q,Ze]=Ee.split("=");U[decodeURIComponent(Q)]=decodeURIComponent(Ze)}}),U}function Ft(j){const U=j.indexOf("?");if(!U)return"";const G=j.indexOf("#",U);return j.substring(U,G>0?G:void 0)}function yo(j,U){const G=new ha(j,U);return G.subscribe.bind(G)}class ha{constructor(U,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{U(this)}).catch(Ee=>{this.error(Ee)})}next(U){this.forEachObserver(G=>{G.next(U)})}error(U){this.forEachObserver(G=>{G.error(U)}),this.close(U)}complete(){this.forEachObserver(U=>{U.complete()}),this.close()}subscribe(U,G,Ee){let Q;if(void 0===U&&void 0===G&&void 0===Ee)throw new Error("Missing Observer.");Q=function(j,U){if("object"!=typeof j||null===j)return!1;for(const G of["next","error","complete"])if(G in j&&"function"==typeof j[G])return!0;return!1}(U)?U:{next:U,error:G,complete:Ee},void 0===Q.next&&(Q.next=gr),void 0===Q.error&&(Q.error=gr),void 0===Q.complete&&(Q.complete=gr);const Ze=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch(pt){}}),this.observers.push(Q),Ze}unsubscribeOne(U){void 0===this.observers||void 0===this.observers[U]||(delete this.observers[U],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(U){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,U)}sendOne(U,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[U])try{G(this.observers[U])}catch(Ee){"undefined"!=typeof console&&console.error&&console.error(Ee)}})}close(U){this.finalized||(this.finalized=!0,void 0!==U&&(this.finalError=U),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gr(){}function fa(j){return j&&j._delegate?j._delegate:j}},7841:(et,Ne,L)=>{"use strict";L.d(Ne,{Z:()=>b.Z});var b=L(4486);b.Z.registerVersion("firebase","9.1.0","app-compat")},670:(et,Ne,L)=>{"use strict";L.r(Ne);var b=L(8239),ne=L(4486),$=L(3854),ye=L(5452),me=L(4762),he=L(5601),Ce=L(6034);const ce=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},re=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},we=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Pe=new he.Yd("@firebase/auth");function fe(w,...g){Pe.logLevel<=he.in.ERROR&&Pe.error(`Auth (${ye.SDK_VERSION}): ${w}`,...g)}function Ve(w,...g){throw At(w,...g)}function qe(w,...g){return At(w,...g)}function Ct(w,g,y){const D=Object.assign(Object.assign({},re()),{[g]:y});return new $.LL("auth","Firebase",D).create(g,{appName:w.name})}function Fe(w,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&Ve(w,"argument-error"),Ct(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function At(w,...g){if("string"!=typeof w){const y=g[0],D=[...g.slice(1)];return D[0]&&(D[0].appName=w.name),w._errorFactory.create(y,...D)}return we.create(w,...g)}function _e(w,g,...y){if(!w)throw At(g,...y)}function X(w){const g="INTERNAL ASSERTION FAILED: "+w;throw fe(g),new Error(g)}function ae(w,g){w||X(g)}const ue=new Map;function K(w){ae(w instanceof Function,"Expected a class definition");let g=ue.get(w);return g?(ae(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,ue.set(w,g),g)}function dt(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Mt(){return"http:"===Zt()||"https:"===Zt()}function Zt(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Be{constructor(g,y){this.shortDelay=g,this.longDelay=y,ae(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Mt()||(0,$.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Xe(w,g){ae(w.emulator,"Emulator should always be set here");const{url:y}=w.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class mt{static initialize(g,y,D){this.fetchImpl=g,y&&(this.headersImpl=y),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void X("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void X("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void X("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Qt=new Be(3e4,6e4);function Ut(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function Pt(w,g,y,D){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,b.Z)(function*(w,g,y,D,N={}){return ss(w,N,()=>{let M={},W={};D&&("GET"===g?W=D:M={body:JSON.stringify(D)});const le=(0,$.xO)(Object.assign({key:w.config.apiKey},W)).slice(1),ke=new(mt.headers());return ke.set("Content-Type","application/json"),ke.set("X-Client-Version",w._getSdkClientVersion()),w.languageCode&&ke.set("X-Firebase-Locale",w.languageCode),mt.fetch()(Ft(w,w.config.apiHost,y,le),Object.assign({method:g,headers:ke,referrerPolicy:"no-referrer"},M))})})).apply(this,arguments)}function ss(w,g,y){return mo.apply(this,arguments)}function mo(){return(mo=(0,b.Z)(function*(w,g,y){w._canInitEmulator=!1;const D=Object.assign(Object.assign({},rn),g);try{const N=new Gl(w),M=yield Promise.race([y(),N.promise]);N.clearNetworkTimeout();const W=yield M.json();if("needConfirmation"in W)throw yo(w,"account-exists-with-different-credential",W);if(M.ok&&!("errorMessage"in W))return W;{const le=M.ok?W.errorMessage:W.error.message,[ke,He]=le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ke)throw yo(w,"credential-already-in-use",W);if("EMAIL_EXISTS"===ke)throw yo(w,"email-already-in-use",W);const st=D[ke]||ke.toLowerCase().replace(/[_\s]+/g,"-");if(He)throw Ct(w,st,He);Ve(w,st)}}catch(N){if(N instanceof $.ZR)throw N;Ve(w,"network-request-failed")}})).apply(this,arguments)}function Di(w,g,y,D){return xn.apply(this,arguments)}function xn(){return(xn=(0,b.Z)(function*(w,g,y,D,N={}){const M=yield Pt(w,g,y,D,N);return"mfaPendingCredential"in M&&Ve(w,"multi-factor-auth-required",{serverResponse:M}),M})).apply(this,arguments)}function Ft(w,g,y,D){const N=`${g}${y}?${D}`;return w.config.emulator?Xe(w.config,N):`${w.config.apiScheme}://${N}`}class Gl{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,D)=>{this.timer=setTimeout(()=>D(qe(this.auth,"timeout")),Qt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yo(w,g,y){const D={appName:w.name};y.email&&(D.email=y.email),y.phoneNumber&&(D.phoneNumber=y.phoneNumber);const N=qe(w,g,D);return N.customData._tokenResponse=y,N}function sn(){return(sn=(0,b.Z)(function*(w,g){return Pt(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function pr(w,g){return gr.apply(this,arguments)}function gr(){return(gr=(0,b.Z)(function*(w,g){return Pt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function si(w,g){return lt.apply(this,arguments)}function lt(){return(lt=(0,b.Z)(function*(w,g){return Pt(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function rt(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function Pn(){return(Pn=(0,b.Z)(function*(w,g=!1){const y=(0,$.m9)(w),D=yield y.getIdToken(g),N=Ge(D);_e(N&&N.exp&&N.auth_time&&N.iat,y.auth,"internal-error");const M="object"==typeof N.firebase?N.firebase:void 0,W=null==M?void 0:M.sign_in_provider;return{claims:N,token:D,authTime:rt(Ot(N.auth_time)),issuedAtTime:rt(Ot(N.iat)),expirationTime:rt(Ot(N.exp)),signInProvider:W||null,signInSecondFactor:(null==M?void 0:M.sign_in_second_factor)||null}})).apply(this,arguments)}function Ot(w){return 1e3*Number(w)}function Ge(w){const[g,y,D]=w.split(".");if(void 0===g||void 0===y||void 0===D)return fe("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,$.tV)(y);return N?JSON.parse(N):(fe("Failed to decode base64 JWT payload"),null)}catch(N){return fe("Caught error parsing JWT payload as JSON",N),null}}function Ke(w,g){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,b.Z)(function*(w,g,y=!1){if(y)return g;try{return yield g}catch(D){throw D instanceof $.ZR&&Bi(D)&&w.auth.currentUser===w&&(yield w.auth.signOut()),D}})).apply(this,arguments)}function Bi({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class oi{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const N=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,N)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const D=this.getInterval(g);this.timerId=setTimeout((0,b.Z)(function*(){yield y.iteration()}),D)}iteration(){var g=this;return(0,b.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y.code&&g.schedule(!0))}g.schedule()})()}}class mr{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=rt(this.lastLoginAt),this.creationTime=rt(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function fa(w){return j.apply(this,arguments)}function j(){return(j=(0,b.Z)(function*(w){var g;const y=w.auth,D=yield w.getIdToken(),N=yield Ke(w,si(y,{idToken:D}));_e(null==N?void 0:N.users.length,y,"internal-error");const M=N.users[0];w._notifyReloadListener(M);const W=(null===(g=M.providerUserInfo)||void 0===g?void 0:g.length)?Q(M.providerUserInfo):[],le=Ee(w.providerData,W),st=!!w.isAnonymous&&!(w.email&&M.passwordHash||(null==le?void 0:le.length)),ot={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:le,metadata:new mr(M.createdAt,M.lastLoginAt),isAnonymous:st};Object.assign(w,ot)})).apply(this,arguments)}function G(){return(G=(0,b.Z)(function*(w){const g=(0,$.m9)(w);yield fa(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Ee(w,g){return[...w.filter(D=>!g.some(N=>N.providerId===D.providerId)),...g]}function Q(w){return w.map(g=>{var{providerId:y}=g,D=(0,me._T)(g,["providerId"]);return{providerId:y,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}function pt(){return(pt=(0,b.Z)(function*(w,g){const y=yield ss(w,{},()=>{const D=(0,$.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:N,apiKey:M}=w.config,W=Ft(w,N,"/v1/token",`key=${M}`);return mt.fetch()(W,{method:"POST",headers:{"X-Client-Version":w._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:D})});return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class Ht{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){_e(g.idToken,"internal-error"),_e(void 0!==g.idToken,"internal-error"),_e(void 0!==g.refreshToken,"internal-error");const y="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function(w){const g=Ge(w);return _e(g,"internal-error"),_e(void 0!==g.exp,"internal-error"),_e(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var D=this;return(0,b.Z)(function*(){return _e(!D.accessToken||D.refreshToken,g,"user-token-expired"),y||!D.accessToken||D.isExpired?D.refreshToken?(yield D.refresh(g,D.refreshToken),D.accessToken):null:D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var D=this;return(0,b.Z)(function*(){const{accessToken:N,refreshToken:M,expiresIn:W}=yield function(w,g){return pt.apply(this,arguments)}(g,y);D.updateTokensAndExpiration(N,M,Number(W))})()}updateTokensAndExpiration(g,y,D){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(g,y){const{refreshToken:D,accessToken:N,expirationTime:M}=y,W=new Ht;return D&&(_e("string"==typeof D,"internal-error",{appName:g}),W.refreshToken=D),N&&(_e("string"==typeof N,"internal-error",{appName:g}),W.accessToken=N),M&&(_e("number"==typeof M,"internal-error",{appName:g}),W.expirationTime=M),W}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Ht,this.toJSON())}_performRefresh(){return X("not implemented")}}function _n(w,g){_e("string"==typeof w||void 0===w,"internal-error",{appName:g})}class yt{constructor(g){var{uid:y,auth:D,stsTokenManager:N}=g,M=(0,me._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new oi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=D,this.stsTokenManager=N,this.accessToken=N.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.metadata=new mr(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,b.Z)(function*(){const D=yield Ke(y,y.stsTokenManager.getToken(y.auth,g));return _e(D,y.auth,"internal-error"),y.accessToken!==D&&(y.accessToken=D,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),D})()}getIdTokenResult(g){return function(w){return Pn.apply(this,arguments)}(this,g)}reload(){return function(w){return G.apply(this,arguments)}(this)}_assign(g){this!==g&&(_e(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new yt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var D=this;return(0,b.Z)(function*(){let N=!1;g.idToken&&g.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(g),N=!0),y&&(yield fa(D)),yield D.auth._persistUserIfCurrent(D),N&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var g=this;return(0,b.Z)(function*(){const y=yield g.getIdToken();return yield Ke(g,function(w,g){return sn.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var D,N,M,W,le,ke,He,st;const ot=null!==(D=y.displayName)&&void 0!==D?D:void 0,Lt=null!==(N=y.email)&&void 0!==N?N:void 0,Jn=null!==(M=y.phoneNumber)&&void 0!==M?M:void 0,jo=null!==(W=y.photoURL)&&void 0!==W?W:void 0,Pi=null!==(le=y.tenantId)&&void 0!==le?le:void 0,Mi=null!==(ke=y._redirectEventId)&&void 0!==ke?ke:void 0,Gt=null!==(He=y.createdAt)&&void 0!==He?He:void 0,gg=null!==(st=y.lastLoginAt)&&void 0!==st?st:void 0,{uid:qa,emailVerified:Ur,isAnonymous:zh,providerData:ol,stsTokenManager:vs}=y;_e(qa&&vs,g,"internal-error");const Vc=Ht.fromJSON(this.name,vs);_e("string"==typeof qa,g,"internal-error"),_n(ot,g.name),_n(Lt,g.name),_e("boolean"==typeof Ur,g,"internal-error"),_e("boolean"==typeof zh,g,"internal-error"),_n(Jn,g.name),_n(jo,g.name),_n(Pi,g.name),_n(Mi,g.name),_n(Gt,g.name),_n(gg,g.name);const mg=new yt({uid:qa,auth:g,email:Lt,emailVerified:Ur,displayName:ot,isAnonymous:zh,photoURL:jo,phoneNumber:Jn,tenantId:Pi,stsTokenManager:Vc,createdAt:Gt,lastLoginAt:gg});return ol&&Array.isArray(ol)&&(mg.providerData=ol.map(yg=>Object.assign({},yg))),Mi&&(mg._redirectEventId=Mi),mg}static _fromIdTokenResponse(g,y,D=!1){return(0,b.Z)(function*(){const N=new Ht;N.updateFromServerResponse(y);const M=new yt({uid:y.localId,auth:g,stsTokenManager:N,isAnonymous:D});return yield fa(M),M})()}}const St=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,b.Z)(function*(){return!0})()}_set(y,D){var N=this;return(0,b.Z)(function*(){N.storage[y]=D})()}_get(y){var D=this;return(0,b.Z)(function*(){const N=D.storage[y];return void 0===N?null:N})()}_remove(y){var D=this;return(0,b.Z)(function*(){delete D.storage[y]})()}_addListener(y,D){}_removeListener(y,D){}}return w.type="NONE",w})();function hn(w,g,y){return`firebase:${w}:${g}:${y}`}class Dt{constructor(g,y,D){this.persistence=g,this.auth=y,this.userKey=D;const{config:N,name:M}=this.auth;this.fullUserKey=hn(this.userKey,N.apiKey,M),this.fullPersistenceKey=hn("persistence",N.apiKey,M),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,b.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?yt._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,b.Z)(function*(){if(y.persistence===g)return;const D=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,D?y.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,D="authUser"){return(0,b.Z)(function*(){if(!y.length)return new Dt(K(St),g,D);const N=(yield Promise.all(y.map(function(){var He=(0,b.Z)(function*(st){if(yield st._isAvailable())return st});return function(st){return He.apply(this,arguments)}}()))).filter(He=>He);let M=N[0]||K(St);const W=hn(D,g.config.apiKey,g.name);let le=null;for(const He of y)try{const st=yield He._get(W);if(st){const ot=yt._fromJSON(g,st);He!==M&&(le=ot),M=He;break}}catch(st){}const ke=N.filter(He=>He._shouldAllowMigration);return M._shouldAllowMigration&&ke.length?(M=ke[0],le&&(yield M._set(W,le.toJSON())),yield Promise.all(y.map(function(){var He=(0,b.Z)(function*(st){if(st!==M)try{yield st._remove(W)}catch(ot){}});return function(st){return He.apply(this,arguments)}}())),new Dt(M,g,D)):new Dt(M,g,D)})()}}function _o(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(qd(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Wl(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(vo(g))return"Blackberry";if(Tu(g))return"Webos";if(Du(g))return"Safari";if((g.includes("chrome/")||$d(g))&&!g.includes("edge/"))return"Chrome";if(Gr(g))return"Android";{const D=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==D?void 0:D.length))return D[1]}return"Other"}function Wl(w=(0,$.z$)()){return/firefox\//i.test(w)}function Du(w=(0,$.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function $d(w=(0,$.z$)()){return/crios\//i.test(w)}function qd(w=(0,$.z$)()){return/iemobile/i.test(w)}function Gr(w=(0,$.z$)()){return/android/i.test(w)}function vo(w=(0,$.z$)()){return/blackberry/i.test(w)}function Tu(w=(0,$.z$)()){return/webos/i.test(w)}function ai(w=(0,$.z$)()){return/iphone|ipad|ipod/i.test(w)}function Kl(w=(0,$.z$)()){return ai(w)||Gr(w)||Tu(w)||vo(w)||/windows phone/i.test(w)||qd(w)}function Cu(w,g=[]){let y;switch(w){case"Browser":y=_o((0,$.z$)());break;case"Worker":y=`${_o((0,$.z$)())}-${w}`;break;default:y=w}const D=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${ye.SDK_VERSION}/${D}`}class Np{constructor(g,y){this.app=g,this.config=y,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wd(this),this.idTokenSubscription=new Wd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=we,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=y.sdkClientVersion}_initializeWithPersistence(g,y){var D=this;return y&&(this._popupRedirectResolver=K(y)),this._initializationPromise=this.queue((0,b.Z)(function*(){var N;D._deleted||(D.persistenceManager=yield Dt.create(D,g),!D._deleted&&((null===(N=D._popupRedirectResolver)||void 0===N?void 0:N._shouldInitProactively)&&(yield D._popupRedirectResolver._initialize(D)),yield D.initializeCurrentUser(y),!D._deleted&&(D._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,b.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y)}})()}initializeCurrentUser(g){var y=this;return(0,b.Z)(function*(){var D;let N=yield y.assertedPersistence.getCurrentUser();if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const M=null===(D=y.redirectUser)||void 0===D?void 0:D._redirectEventId,W=null==N?void 0:N._redirectEventId,le=yield y.tryRedirectSignIn(g);(!M||M===W)&&(null==le?void 0:le.user)&&(N=le.user)}return N?N._redirectEventId?(_e(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===N._redirectEventId?y.directlySetCurrentUser(N):y.reloadAndSetCurrentUserOrClear(N)):y.reloadAndSetCurrentUserOrClear(N):y.directlySetCurrentUser(null)})()}tryRedirectSignIn(g){var y=this;return(0,b.Z)(function*(){let D=null;try{D=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch(N){yield y._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,b.Z)(function*(){try{yield fa(g)}catch(D){if("auth/network-request-failed"!==D.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,b.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,b.Z)(function*(){const D=g?(0,$.m9)(g):null;return D&&_e(D.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(D&&D._clone(y))})()}_updateCurrentUser(g){var y=this;return(0,b.Z)(function*(){if(!y._deleted)return g&&_e(y.tenantId===g.tenantId,y,"tenant-id-mismatch"),y.queue((0,b.Z)(function*(){yield y.directlySetCurrentUser(g),y.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,b.Z)(function*(){return(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null)})()}setPersistence(g){var y=this;return this.queue((0,b.Z)(function*(){yield y.assertedPersistence.setPersistence(K(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new $.LL("auth","Firebase",g())}onAuthStateChanged(g,y,D){return this.registerStateListener(this.authStateSubscription,g,y,D)}onIdTokenChanged(g,y,D){return this.registerStateListener(this.idTokenSubscription,g,y,D)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var D=this;return(0,b.Z)(function*(){const N=yield D.getOrInitRedirectPersistenceManager(y);return null===g?N.removeCurrentUser():N.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,b.Z)(function*(){if(!y.redirectPersistenceManager){const D=g&&K(g)||y._popupRedirectResolver;_e(D,y,"argument-error"),y.redirectPersistenceManager=yield Dt.create(y,[K(D._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,b.Z)(function*(){var D,N;return y._isInitialized&&(yield y.queue((0,b.Z)(function*(){}))),(null===(D=y._currentUser)||void 0===D?void 0:D._redirectEventId)===g?y._currentUser:(null===(N=y.redirectUser)||void 0===N?void 0:N._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,b.Z)(function*(){if(g===y.currentUser)return y.queue((0,b.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,D,N){if(this._deleted)return()=>{};const M="function"==typeof y?y:y.next.bind(y),W=this._isInitialized?Promise.resolve():this._initializationPromise;return _e(W,this,"internal-error"),W.then(()=>M(this.currentUser)),"function"==typeof y?g.addObserver(y,D,N):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,b.Z)(function*(){y.currentUser&&y.currentUser!==g&&(y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh()),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Cu(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function Mn(w){return(0,$.m9)(w)}class Wd{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,$.ne)(y=>this.observer=y)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function os(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function Wr(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class In{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return X("not implemented")}_getIdTokenResponse(g){return X("not implemented")}_linkToIdToken(g,y){return X("not implemented")}_getReauthenticationResolver(g){return X("not implemented")}}function Ue(w,g){return bt.apply(this,arguments)}function bt(){return(bt=(0,b.Z)(function*(w,g){return Pt(w,"POST","/v1/accounts:resetPassword",Ut(w,g))})).apply(this,arguments)}function Jt(w,g){return yr.apply(this,arguments)}function yr(){return(yr=(0,b.Z)(function*(w,g){return Pt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function wo(w,g){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,b.Z)(function*(w,g){return Pt(w,"POST","/v1/accounts:update",Ut(w,g))})).apply(this,arguments)}function Xt(){return(Xt=(0,b.Z)(function*(w,g){return Di(w,"POST","/v1/accounts:signInWithPassword",Ut(w,g))})).apply(this,arguments)}function as(w,g){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,b.Z)(function*(w,g){return Pt(w,"POST","/v1/accounts:sendOobCode",Ut(w,g))})).apply(this,arguments)}function _t(w,g){return pa.apply(this,arguments)}function pa(){return(pa=(0,b.Z)(function*(w,g){return as(w,g)})).apply(this,arguments)}function Io(w,g){return Do.apply(this,arguments)}function Do(){return(Do=(0,b.Z)(function*(w,g){return as(w,g)})).apply(this,arguments)}function Os(w,g){return er.apply(this,arguments)}function er(){return(er=(0,b.Z)(function*(w,g){return as(w,g)})).apply(this,arguments)}function Su(w,g){return To.apply(this,arguments)}function To(){return(To=(0,b.Z)(function*(w,g){return as(w,g)})).apply(this,arguments)}function Bt(){return(Bt=(0,b.Z)(function*(w,g){return Di(w,"POST","/v1/accounts:signInWithEmailLink",Ut(w,g))})).apply(this,arguments)}function Kd(){return(Kd=(0,b.Z)(function*(w,g){return Di(w,"POST","/v1/accounts:signInWithEmailLink",Ut(w,g))})).apply(this,arguments)}class Co extends In{constructor(g,y,D,N=null){super("password",D),this._email=g,this._password=y,this._tenantId=N}static _fromEmailAndPassword(g,y){return new Co(g,y,"password")}static _fromEmailAndCode(g,y,D=null){return new Co(g,y,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if((null==y?void 0:y.email)&&(null==y?void 0:y.password)){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,b.Z)(function*(){switch(y.signInMethod){case"password":return function(w,g){return Xt.apply(this,arguments)}(g,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function(w,g){return Bt.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:Ve(g,"internal-error")}})()}_linkToIdToken(g,y){var D=this;return(0,b.Z)(function*(){switch(D.signInMethod){case"password":return Jt(g,{idToken:y,returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function(w,g){return Kd.apply(this,arguments)}(g,{idToken:y,email:D._email,oobCode:D._password});default:Ve(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function vn(w,g){return So.apply(this,arguments)}function So(){return(So=(0,b.Z)(function*(w,g){return Di(w,"POST","/v1/accounts:signInWithIdp",Ut(w,g))})).apply(this,arguments)}class tr extends In{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new tr(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):Ve("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:D,signInMethod:N}=y,M=(0,me._T)(y,["providerId","signInMethod"]);if(!D||!N)return null;const W=new tr(D,N);return Object.assign(W,M),W}_getIdTokenResponse(g){return vn(g,this.buildRequest())}_linkToIdToken(g,y){const D=this.buildRequest();return D.idToken=y,vn(g,D)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,vn(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,$.xO)(y)}return g}}function nr(w,g){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,b.Z)(function*(w,g){return Pt(w,"POST","/v1/accounts:sendVerificationCode",Ut(w,g))})).apply(this,arguments)}function zr(){return(zr=(0,b.Z)(function*(w,g){return Di(w,"POST","/v1/accounts:signInWithPhoneNumber",Ut(w,g))})).apply(this,arguments)}function ga(){return(ga=(0,b.Z)(function*(w,g){const y=yield Di(w,"POST","/v1/accounts:signInWithPhoneNumber",Ut(w,g));if(y.temporaryProof)throw yo(w,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const Ql={USER_NOT_FOUND:"user-not-found"};function Yd(){return(Yd=(0,b.Z)(function*(w,g){return Di(w,"POST","/v1/accounts:signInWithPhoneNumber",Ut(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Ql)})).apply(this,arguments)}class ma extends In{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new ma({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new ma({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function(w,g){return zr.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function(w,g){return ga.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function(w,g){return Yd.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:D,verificationCode:N}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:D,code:N}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:D,phoneNumber:N,temporaryProof:M}=g;return D||y||N||M?new ma({verificationId:y,verificationCode:D,phoneNumber:N,temporaryProof:M}):null}}class Yl{constructor(g){var y,D,N,M,W,le;const ke=(0,$.zd)((0,$.pd)(g)),He=null!==(y=ke.apiKey)&&void 0!==y?y:null,st=null!==(D=ke.oobCode)&&void 0!==D?D:null,ot=function(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(N=ke.mode)&&void 0!==N?N:null);_e(He&&st&&ot,"argument-error"),this.apiKey=He,this.operation=ot,this.code=st,this.continueUrl=null!==(M=ke.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(W=ke.languageCode)&&void 0!==W?W:null,this.tenantId=null!==(le=ke.tenantId)&&void 0!==le?le:null}static parseLink(g){const y=function(w){const g=(0,$.zd)((0,$.pd)(w)).link,y=g?(0,$.zd)((0,$.pd)(g)).deep_link_id:null,D=(0,$.zd)((0,$.pd)(w)).deep_link_id;return(D?(0,$.zd)((0,$.pd)(D)).link:null)||D||y||g||w}(g);try{return new Yl(y)}catch(D){return null}}}let Rp=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(y,D){return Co._fromEmailAndPassword(y,D)}static credentialWithLink(y,D){const N=Yl.parseLink(D);return _e(N,"argument-error"),Co._fromEmailAndCode(y,N.code,N.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Ao{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Nu extends Ao{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class No extends Nu{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return _e("providerId"in y&&"signInMethod"in y,"argument-error"),tr._fromParams(y)}credential(g){return this._credential(g)}_credential(g){return _e(g.idToken||g.accessToken,"argument-error"),tr._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return No.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return No.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:D,oauthTokenSecret:N,pendingToken:M,nonce:W,providerId:le}=g;if(!D&&!N&&!y&&!M||!le)return null;try{return new No(le)._credential({idToken:y,accessToken:D,rawNonce:W,pendingToken:M})}catch(ke){return null}}}let Jd=(()=>{class w extends Nu{constructor(){super("facebook.com")}static credential(y){return tr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch(D){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),Wy=(()=>{class w extends Nu{constructor(){super("google.com"),this.addScope("profile")}static credential(y,D){return tr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:D})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:D,oauthAccessToken:N}=y;if(!D&&!N)return null;try{return w.credential(D,N)}catch(M){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),z0=(()=>{class w extends Nu{constructor(){super("github.com")}static credential(y){return tr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch(D){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class ya extends In{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return vn(g,this.buildRequest())}_linkToIdToken(g,y){const D=this.buildRequest();return D.idToken=y,vn(g,D)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,vn(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:D,signInMethod:N,pendingToken:M}=y;return D&&N&&M&&D===N?new ya(D,M):null}static _create(g,y){return new ya(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let zy=(()=>{class w extends Nu{constructor(){super("twitter.com")}static credential(y,D){return tr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:D})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:D,oauthTokenSecret:N}=y;if(!D||!N)return null;try{return w.credential(D,N)}catch(M){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Pp(w,g){return _a.apply(this,arguments)}function _a(){return(_a=(0,b.Z)(function*(w,g){return Di(w,"POST","/v1/accounts:signUp",Ut(w,g))})).apply(this,arguments)}class Hi{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,D,N=!1){return(0,b.Z)(function*(){const M=yield yt._fromIdTokenResponse(g,D,N),W=Q0(D);return new Hi({user:M,providerId:W,_tokenResponse:D,operationType:y})})()}static _forOperation(g,y,D){return(0,b.Z)(function*(){yield g._updateTokensIfNecessary(D,!0);const N=Q0(D);return new Hi({user:g,providerId:N,_tokenResponse:D,operationType:y})})()}}function Q0(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function ks(){return(ks=(0,b.Z)(function*(w){var g;const y=Mn(w);if(yield y._initializationPromise,null===(g=y.currentUser)||void 0===g?void 0:g.isAnonymous)return new Hi({user:y.currentUser,providerId:null,operationType:"signIn"});const D=yield Pp(y,{returnSecureToken:!0}),N=yield Hi._fromIdTokenResponse(y,"signIn",D,!0);return yield y._updateCurrentUser(N.user),N})).apply(this,arguments)}class Jl extends $.ZR{constructor(g,y,D,N){var M;super(y.code,y.message),this.operationType=D,this.user=N,this.name="FirebaseError",Object.setPrototypeOf(this,Jl.prototype),this.appName=g.name,this.code=y.code,this.tenantId=null!==(M=g.tenantId)&&void 0!==M?M:void 0,this.serverResponse=y.customData.serverResponse}static _fromErrorAndOperation(g,y,D,N){return new Jl(g,y,D,N)}}function Ru(w,g,y,D){return("reauthenticate"===g?y._getReauthenticationResolver(w):y._getIdTokenResponse(w)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?Jl._fromErrorAndOperation(w,M,g,D):M})}function Xd(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function eh(){return(eh=(0,b.Z)(function*(w,g){const y=(0,$.m9)(w);yield Fs(!0,y,g);const{providerUserInfo:D}=yield pr(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),N=Xd(D||[]);return y.providerData=y.providerData.filter(M=>N.has(M.providerId)),N.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function Xl(w,g){return va.apply(this,arguments)}function va(){return(va=(0,b.Z)(function*(w,g,y=!1){const D=yield Ke(w,g._linkToIdToken(w.auth,yield w.getIdToken()),y);return Hi._forOperation(w,"link",D)})).apply(this,arguments)}function Fs(w,g,y){return xu.apply(this,arguments)}function xu(){return(xu=(0,b.Z)(function*(w,g,y){yield fa(g);const N=!1===w?"provider-already-linked":"no-such-provider";_e(Xd(g.providerData).has(y)===w,g.auth,N)})).apply(this,arguments)}function Pu(w,g){return Or.apply(this,arguments)}function Or(){return(Or=(0,b.Z)(function*(w,g,y=!1){const{auth:D}=w,N="reauthenticate";try{const M=yield Ke(w,Ru(D,N,g,w),y);_e(M.idToken,D,"internal-error");const W=Ge(M.idToken);_e(W,D,"internal-error");const{sub:le}=W;return _e(w.uid===le,D,"user-mismatch"),Hi._forOperation(w,N,M)}catch(M){throw"auth/user-not-found"===(null==M?void 0:M.code)&&Ve(D,"user-mismatch"),M}})).apply(this,arguments)}function ec(w,g){return tc.apply(this,arguments)}function tc(){return(tc=(0,b.Z)(function*(w,g,y=!1){const D="signIn",N=yield Ru(w,D,g),M=yield Hi._fromIdTokenResponse(w,D,N);return y||(yield w._updateCurrentUser(M.user)),M})).apply(this,arguments)}function Ea(w,g){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,b.Z)(function*(w,g){return ec(Mn(w),g)})).apply(this,arguments)}function nc(w,g){return Mp.apply(this,arguments)}function Mp(){return(Mp=(0,b.Z)(function*(w,g){const y=(0,$.m9)(w);return yield Fs(!1,y,g.providerId),Xl(y,g)})).apply(this,arguments)}function on(w,g){return Ky.apply(this,arguments)}function Ky(){return(Ky=(0,b.Z)(function*(w,g){return Pu((0,$.m9)(w),g)})).apply(this,arguments)}function Zy(w,g){return wa.apply(this,arguments)}function wa(){return(wa=(0,b.Z)(function*(w,g){return Di(w,"POST","/v1/accounts:signInWithCustomToken",Ut(w,g))})).apply(this,arguments)}function th(){return(th=(0,b.Z)(function*(w,g){const y=Mn(w),D=yield Zy(y,{token:g,returnSecureToken:!0}),N=yield Hi._fromIdTokenResponse(y,"signIn",D);return yield y._updateCurrentUser(N.user),N})).apply(this,arguments)}class nh{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?ba._fromServerResponse(g,y):Ve(g,"internal-error")}}class ba extends nh{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new ba(y)}}function rr(w,g,y){var D;_e((null===(D=y.url)||void 0===D?void 0:D.length)>0,w,"invalid-continue-uri"),_e(void 0===y.dynamicLinkDomain||y.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(_e(y.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iosBundleId=y.iOS.bundleId),y.android&&(_e(y.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function Ou(){return(Ou=(0,b.Z)(function*(w,g,y){const D=(0,$.m9)(w),N={requestType:"PASSWORD_RESET",email:g};y&&rr(D,N,y),yield Io(D,N)})).apply(this,arguments)}function kr(){return(kr=(0,b.Z)(function*(w,g,y){yield Ue((0,$.m9)(w),{oobCode:g,newPassword:y})})).apply(this,arguments)}function us(){return(us=(0,b.Z)(function*(w,g){yield wo((0,$.m9)(w),{oobCode:g})})).apply(this,arguments)}function ku(w,g){return li.apply(this,arguments)}function li(){return(li=(0,b.Z)(function*(w,g){const y=(0,$.m9)(w),D=yield Ue(y,{oobCode:g}),N=D.requestType;switch(_e(N,y,"internal-error"),N){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":_e(D.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":_e(D.mfaInfo,y,"internal-error");default:_e(D.email,y,"internal-error")}let M=null;return D.mfaInfo&&(M=nh._fromServerResponse(Mn(y),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:M},operation:N}})).apply(this,arguments)}function ls(){return(ls=(0,b.Z)(function*(w,g){const{data:y}=yield ku((0,$.m9)(w),g);return y.email})).apply(this,arguments)}function rc(){return(rc=(0,b.Z)(function*(w,g,y){const D=Mn(w),N=yield Pp(D,{returnSecureToken:!0,email:g,password:y}),M=yield Hi._fromIdTokenResponse(D,"signIn",N);return yield D._updateCurrentUser(M.user),M})).apply(this,arguments)}function ic(){return(ic=(0,b.Z)(function*(w,g,y){const D=(0,$.m9)(w),N={requestType:"EMAIL_SIGNIN",email:g};_e(y.handleCodeInApp,D,"argument-error"),y&&rr(D,N,y),yield Os(D,N)})).apply(this,arguments)}function sh(){return(sh=(0,b.Z)(function*(w,g,y){const D=(0,$.m9)(w),N=Rp.credentialWithLink(g,y||dt());return _e(N._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),Ea(D,N)})).apply(this,arguments)}function Te(w,g){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,b.Z)(function*(w,g){return Pt(w,"POST","/v1/accounts:createAuthUri",Ut(w,g))})).apply(this,arguments)}function Tn(){return(Tn=(0,b.Z)(function*(w,g){const D={identifier:g,continueUri:Mt()?dt():"http://localhost"},{signinMethods:N}=yield Te((0,$.m9)(w),D);return N||[]})).apply(this,arguments)}function cs(){return(cs=(0,b.Z)(function*(w,g){const y=(0,$.m9)(w),N={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&rr(y.auth,N,g);const{email:M}=yield _t(y.auth,N);M!==w.email&&(yield w.reload())})).apply(this,arguments)}function Lu(){return(Lu=(0,b.Z)(function*(w,g,y){const D=(0,$.m9)(w),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};y&&rr(D.auth,M,y);const{email:W}=yield Su(D.auth,M);W!==w.email&&(yield w.reload())})).apply(this,arguments)}function sc(w,g){return Lp.apply(this,arguments)}function Lp(){return(Lp=(0,b.Z)(function*(w,g){return Pt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Da(){return(Da=(0,b.Z)(function*(w,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const D=(0,$.m9)(w),M={idToken:yield D.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},W=yield Ke(D,sc(D.auth,M));D.displayName=W.displayName||null,D.photoURL=W.photoUrl||null;const le=D.providerData.find(({providerId:ke})=>"password"===ke);le&&(le.displayName=D.displayName,le.photoURL=D.photoURL),yield D._updateTokensIfNecessary(W)})).apply(this,arguments)}function ci(w,g,y){return ac.apply(this,arguments)}function ac(){return(ac=(0,b.Z)(function*(w,g,y){const{auth:D}=w,M={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(M.email=g),y&&(M.password=y);const W=yield Ke(w,Jt(D,M));yield w._updateTokensIfNecessary(W,!0)})).apply(this,arguments)}class Fr{constructor(g,y,D={}){this.isNewUser=g,this.providerId=y,this.profile=D}}class Xy extends Fr{constructor(g,y,D,N){super(g,y,D),this.username=N}}class Vp extends Fr{constructor(g,y){super(g,"facebook.com",y)}}class J0 extends Xy{constructor(g,y){super(g,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class Up extends Fr{constructor(g,y){super(g,"google.com",y)}}class ah extends Xy{constructor(g,y,D){super(g,"twitter.com",y,D)}}function uh(w){const{user:g,_tokenResponse:y}=w;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function(w){var g,y;if(!w)return null;const{providerId:D}=w,N=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},M=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!D&&(null==w?void 0:w.idToken)){const W=null===(y=null===(g=Ge(w.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(W)return new Fr(M,"anonymous"!==W&&"custom"!==W?W:null)}if(!D)return null;switch(D){case"facebook.com":return new Vp(M,N);case"github.com":return new J0(M,N);case"google.com":return new Up(M,N);case"twitter.com":return new ah(M,N,w.screenName||null);case"custom":case"anonymous":return new Fr(M,null);default:return new Fr(M,D,N)}}(y)}class $i{constructor(g,y){this.type=g,this.credential=y}static _fromIdtoken(g){return new $i("enroll",g)}static _fromMfaPendingCredential(g){return new $i("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,D;if(null==g?void 0:g.multiFactorSession){if(null===(y=g.multiFactorSession)||void 0===y?void 0:y.pendingCredential)return $i._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(D=g.multiFactorSession)||void 0===D?void 0:D.idToken)return $i._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Ca{constructor(g,y,D){this.session=g,this.hints=y,this.signInResolver=D}static _fromError(g,y){const D=Mn(g),N=(y.serverResponse.mfaInfo||[]).map(W=>nh._fromServerResponse(D,W));_e(y.serverResponse.mfaPendingCredential,D,"internal-error");const M=$i._fromMfaPendingCredential(y.serverResponse.mfaPendingCredential);return new Ca(M,N,function(){var W=(0,b.Z)(function*(le){const ke=yield le._process(D,M);delete y.serverResponse.mfaInfo,delete y.serverResponse.mfaPendingCredential;const He=Object.assign(Object.assign({},y.serverResponse),{idToken:ke.idToken,refreshToken:ke.refreshToken});switch(y.operationType){case"signIn":const st=yield Hi._fromIdTokenResponse(D,y.operationType,He);return yield D._updateCurrentUser(st.user),st;case"reauthenticate":return _e(y.user,D,"internal-error"),Hi._forOperation(y.user,y.operationType,He);default:Ve(D,"internal-error")}});return function(le){return W.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,b.Z)(function*(){return y.signInResolver(g)})()}}function r_(w,g){return Pt(w,"POST","/v2/accounts/mfaEnrollment:start",Ut(w,g))}class en{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(D=>nh._fromServerResponse(g.auth,D)))})}static _fromUser(g){return new en(g)}getSession(){var g=this;return(0,b.Z)(function*(){return $i._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,y){var D=this;return(0,b.Z)(function*(){const N=g,M=yield D.getSession(),W=yield Ke(D.user,N._process(D.user.auth,M,y));return yield D.user._updateTokensIfNecessary(W),D.user.reload()})()}unenroll(g){var y=this;return(0,b.Z)(function*(){const D="string"==typeof g?g:g.uid,N=yield y.user.getIdToken(),M=yield Ke(y.user,function(w,g){return Pt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Ut(w,g))}(y.user.auth,{idToken:N,mfaEnrollmentId:D}));y.enrolledFactors=y.enrolledFactors.filter(({uid:W})=>W!==D),yield y.user._updateTokensIfNecessary(M);try{yield y.user.reload()}catch(W){if("auth/user-token-expired"!==W.code)throw W}})()}}const ch=new WeakMap,dh="__sak";class Hp{constructor(g,y){this.storage=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(dh,"1"),this.storage.removeItem(dh),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}}const Ro=(()=>{class w extends Hp{constructor(){super(window.localStorage,"LOCAL"),this.boundEventHandler=(y,D)=>this.onStorageEvent(y,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const w=(0,$.z$)();return Du(w)||ai(w)}()&&function(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=Kl(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const D of Object.keys(this.listeners)){const N=this.storage.getItem(D),M=this.localCache[D];N!==M&&y(D,M,N)}}onStorageEvent(y,D=!1){if(!y.key)return void this.forAllChangedKeys((le,ke,He)=>{this.notifyListeners(le,He)});const N=y.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const le=this.storage.getItem(N);if(y.newValue!==le)null!==y.newValue?this.storage.setItem(N,y.newValue):this.storage.removeItem(N);else if(this.localCache[N]===y.newValue&&!D)return}const M=()=>{const le=this.storage.getItem(N);!D&&this.localCache[N]===le||this.notifyListeners(N,le)},W=this.storage.getItem(N);(0,$.w1)()&&10===document.documentMode&&W!==y.newValue&&y.newValue!==y.oldValue?setTimeout(M,10):M()}notifyListeners(y,D){this.localCache[y]=D;const N=this.listeners[y];if(N)for(const M of Array.from(N))M(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,D,N)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:D,newValue:N}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(D)}_removeListener(y,D){this.listeners[y]&&(this.listeners[y].delete(D),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,D){var N=()=>super._set,M=this;return(0,b.Z)(function*(){yield N().call(M,y,D),M.localCache[y]=JSON.stringify(D)})()}_get(y){var D=()=>super._get,N=this;return(0,b.Z)(function*(){const M=yield D().call(N,y);return N.localCache[y]=JSON.stringify(M),M})()}_remove(y){var D=()=>super._remove,N=this;return(0,b.Z)(function*(){yield D().call(N,y),delete N.localCache[y]})()}}return w.type="LOCAL",w})(),Vs=(()=>{class w extends Hp{constructor(){super(window.sessionStorage,"SESSION")}_addListener(y,D){}_removeListener(y,D){}}return w.type="SESSION",w})();let vr=(()=>{class w{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const D=this.receivers.find(M=>M.isListeningto(y));if(D)return D;const N=new w(y);return this.receivers.push(N),N}isListeningto(y){return this.eventTarget===y}handleEvent(y){var D=this;return(0,b.Z)(function*(){const N=y,{eventId:M,eventType:W,data:le}=N.data,ke=D.handlersMap[W];if(!(null==ke?void 0:ke.size))return;N.ports[0].postMessage({status:"ack",eventId:M,eventType:W});const He=Array.from(ke).map(function(){var ot=(0,b.Z)(function*(Lt){return Lt(N.origin,le)});return function(Lt){return ot.apply(this,arguments)}}()),st=yield function(w){return Promise.all(w.map(function(){var g=(0,b.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(D){return{fulfilled:!1,reason:D}}});return function(y){return g.apply(this,arguments)}}()))}(He);N.ports[0].postMessage({status:"done",eventId:M,eventType:W,response:st})})()}_subscribe(y,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(D)}_unsubscribe(y,D){this.handlersMap[y]&&D&&this.handlersMap[y].delete(D),(!D||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function hs(w="",g=10){let y="";for(let D=0;D<g;D++)y+=Math.floor(10*Math.random());return w+y}class u_{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,D=50){var N=this;return(0,b.Z)(function*(){const M="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let W,le;return new Promise((ke,He)=>{const st=hs("",20);M.port1.start();const ot=setTimeout(()=>{He(new Error("unsupported_event"))},D);le={messageChannel:M,onMessage(Lt){const Jn=Lt;if(Jn.data.eventId===st)switch(Jn.data.status){case"ack":clearTimeout(ot),W=setTimeout(()=>{He(new Error("timeout"))},3e3);break;case"done":clearTimeout(W),ke(Jn.data.response);break;default:clearTimeout(ot),clearTimeout(W),He(new Error("invalid_response"))}}},N.handlers.add(le),M.port1.addEventListener("message",le.onMessage),N.target.postMessage({eventType:g,eventId:st,data:y},[M.port2])}).finally(()=>{le&&N.removeMessageHandler(le)})})()}}function En(){return window}function lc(){return void 0!==En().WorkerGlobalScope&&"function"==typeof En().importScripts}function qp(){return(qp=(0,b.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const Vu="firebaseLocalStorageDb",Uu="firebaseLocalStorage",cc="fbase_key";class Na{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function dc(w,g){return w.transaction([Uu],g?"readwrite":"readonly").objectStore(Uu)}function hh(){const w=indexedDB.open(Vu,1);return new Promise((g,y)=>{w.addEventListener("error",()=>{y(w.error)}),w.addEventListener("upgradeneeded",()=>{const D=w.result;try{D.createObjectStore(Uu,{keyPath:cc})}catch(N){y(N)}}),w.addEventListener("success",(0,b.Z)(function*(){const D=w.result;D.objectStoreNames.contains(Uu)?g(D):(D.close(),yield function(){const w=indexedDB.deleteDatabase(Vu);return new Na(w).toPromise()}(),g(yield hh()))}))})}function Er(w,g,y){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,b.Z)(function*(w,g,y){const D=dc(w,!0).put({[cc]:g,value:y});return new Na(D).toPromise()})).apply(this,arguments)}function c_(){return(c_=(0,b.Z)(function*(w,g){const y=dc(w,!1).get(g),D=yield new Na(y).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function hc(w,g){const y=dc(w,!0).delete(g);return new Na(y).toPromise()}const di=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,b.Z)(function*(){return y.db||(y.db=yield hh()),y.db})()}_withRetries(y){var D=this;return(0,b.Z)(function*(){let N=0;for(;;)try{const M=yield D._openDb();return yield y(M)}catch(M){if(N++>3)throw M;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,b.Z)(function*(){return lc()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,b.Z)(function*(){y.receiver=vr._getInstance(lc()?self:null),y.receiver._subscribe("keyChanged",function(){var D=(0,b.Z)(function*(N,M){return{keyProcessed:(yield y._poll()).includes(M.key)}});return function(N,M){return D.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var D=(0,b.Z)(function*(N,M){return["keyChanged"]});return function(N,M){return D.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,b.Z)(function*(){var D,N;if(y.activeServiceWorker=yield function(){return qp.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new u_(y.activeServiceWorker);const M=yield y.sender._send("ping",{},800);!M||(null===(D=M[0])||void 0===D?void 0:D.fulfilled)&&(null===(N=M[0])||void 0===N?void 0:N.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var D=this;return(0,b.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:y},D.serviceWorkerReceiverAvailable?800:50)}catch(N){}})()}_isAvailable(){return(0,b.Z)(function*(){try{if(!indexedDB)return!1;const y=yield hh();return yield Er(y,dh,"1"),yield hc(y,dh),!0}catch(y){}return!1})()}_withPendingWrite(y){var D=this;return(0,b.Z)(function*(){D.pendingWrites++;try{yield y()}finally{D.pendingWrites--}})()}_set(y,D){var N=this;return(0,b.Z)(function*(){return N._withPendingWrite((0,b.Z)(function*(){return yield N._withRetries(M=>Er(M,y,D)),N.localCache[y]=D,N.notifyServiceWorker(y)}))})()}_get(y){var D=this;return(0,b.Z)(function*(){const N=yield D._withRetries(M=>function(w,g){return c_.apply(this,arguments)}(M,y));return D.localCache[y]=N,N})()}_remove(y){var D=this;return(0,b.Z)(function*(){return D._withPendingWrite((0,b.Z)(function*(){return yield D._withRetries(N=>hc(N,y)),delete D.localCache[y],D.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,b.Z)(function*(){const D=yield y._withRetries(W=>{const le=dc(W,!1).getAll();return new Na(le).toPromise()});if(!D)return[];if(0!==y.pendingWrites)return[];const N=[],M=new Set;for(const{fbase_key:W,value:le}of D)M.add(W),JSON.stringify(y.localCache[W])!==JSON.stringify(le)&&(y.notifyListeners(W,le),N.push(W));for(const W of Object.keys(y.localCache))y.localCache[W]&&!M.has(W)&&(y.notifyListeners(W,null),N.push(W));return N})()}notifyListeners(y,D){this.localCache[y]=D;const N=this.listeners[y];if(N)for(const M of Array.from(N))M(D)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,b.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(D)}_removeListener(y,D){this.listeners[y]&&(this.listeners[y].delete(D),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Gp(w,g){return Pt(w,"POST","/v2/accounts/mfaSignIn:start",Ut(w,g))}function Bu(){return(Bu=(0,b.Z)(function*(w){return(yield Pt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function fc(w){return new Promise((g,y)=>{const D=document.createElement("script");D.setAttribute("src",w),D.onload=g,D.onerror=N=>{const M=qe("internal-error");M.customData=N,y(M)},D.type="text/javascript",D.charset="UTF-8",function(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(D)})}function Us(w){return`__${w}${Math.floor(1e6*Math.random())}`}const ju=1e12;class gh{constructor(g){this.auth=g,this.counter=ju,this._widgets=new Map}render(g,y){const D=this.counter;return this._widgets.set(D,new Ai(g,this.auth.name,y||{})),this.counter++,D}reset(g){var y;const D=g||ju;null===(y=this._widgets.get(D))||void 0===y||y.delete(),this._widgets.delete(D)}getResponse(g){var y;return(null===(y=this._widgets.get(g||ju))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,b.Z)(function*(){var D;return null===(D=y._widgets.get(g||ju))||void 0===D||D.execute(),""})()}}class Ai{constructor(g,y,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const N="string"==typeof g?document.getElementById(g):g;_e(N,"argument-error",{appName:y}),this.container=N,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(w){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<50;D++)g.push(y.charAt(Math.floor(Math.random()*y.length)));return g.join("")}();const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch(D){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch(D){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Hu=Us("rcb"),gc=new Be(3e4,6e4);class jn{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!En().grecaptcha}load(g,y=""){return _e((w=y).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w),g,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(En().grecaptcha):new Promise((D,N)=>{const M=En().setTimeout(()=>{N(qe(g,"network-request-failed"))},gc.get());En()[Hu]=()=>{En().clearTimeout(M),delete En()[Hu];const le=En().grecaptcha;if(!le)return void N(qe(g,"internal-error"));const ke=le.render;le.render=(He,st)=>{const ot=ke(He,st);return this.counter++,ot},this.hostLanguage=y,D(le)},fc(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:Hu,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(M),N(qe(g,"internal-error"))})});var w}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!En().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class $u{load(g){return(0,b.Z)(function*(){return new gh(g)})()}clearedOneInstance(){}}const mh="recaptcha",Bs={theme:"light",type:"image"};class qu{constructor(g,y=Object.assign({},Bs),D){this.parameters=y,this.type=mh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Mn(D),this.isInvisible="invisible"===this.parameters.size,_e("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const N="string"==typeof g?document.getElementById(g):g;_e(N,this.auth,"argument-error"),this.container=N,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new $u:new jn,this.validateStartingState()}verify(){var g=this;return(0,b.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),D=g.getAssertedRecaptcha();return D.getResponse(y)||new Promise(M=>{const W=le=>{!le||(g.tokenChangeListeners.delete(W),M(le))};g.tokenChangeListeners.add(W),g.isInvisible&&D.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){_e(!this.parameters.sitekey,this.auth,"argument-error"),_e(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),_e("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(D=>D(y)),"function"==typeof g)g(y);else if("string"==typeof g){const D=En()[g];"function"==typeof D&&D(y)}}}assertNotDestroyed(){_e(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,b.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const D=document.createElement("div");y.appendChild(D),y=D}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,b.Z)(function*(){_e(Mt()&&!lc(),g.auth,"internal-error"),yield function(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function(w){return Bu.apply(this,arguments)}(g.auth);_e(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return _e(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Pa{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=ma._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function fs(){return(fs=(0,b.Z)(function*(w,g,y){const D=Mn(w),N=yield Oa(D,g,(0,$.m9)(y));return new Pa(N,M=>Ea(D,M))})).apply(this,arguments)}function yh(){return(yh=(0,b.Z)(function*(w,g,y){const D=(0,$.m9)(w);yield Fs(!1,D,"phone");const N=yield Oa(D.auth,g,(0,$.m9)(y));return new Pa(N,M=>nc(D,M))})).apply(this,arguments)}function Kp(){return(Kp=(0,b.Z)(function*(w,g,y){const D=(0,$.m9)(w),N=yield Oa(D.auth,g,(0,$.m9)(y));return new Pa(N,M=>on(D,M))})).apply(this,arguments)}function Oa(w,g,y){return qt.apply(this,arguments)}function qt(){return(qt=(0,b.Z)(function*(w,g,y){var D;const N=yield y.verify();try{let M;if(_e("string"==typeof N,w,"argument-error"),_e(y.type===mh,w,"argument-error"),M="string"==typeof g?{phoneNumber:g}:g,"session"in M){const W=M.session;if("phoneNumber"in M)return _e("enroll"===W.type,w,"internal-error"),(yield r_(w,{idToken:W.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:N}})).phoneSessionInfo.sessionInfo;{_e("signin"===W.type,w,"internal-error");const le=(null===(D=M.multiFactorHint)||void 0===D?void 0:D.uid)||M.multiFactorUid;return _e(le,w,"missing-multi-factor-info"),(yield Gp(w,{mfaPendingCredential:W.credential,mfaEnrollmentId:le,phoneSignInInfo:{recaptchaToken:N}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:W}=yield nr(w,{phoneNumber:M.phoneNumber,recaptchaToken:N});return W}}finally{y._reset()}})).apply(this,arguments)}function Gu(){return(Gu=(0,b.Z)(function*(w,g){yield Xl((0,$.m9)(w),g)})).apply(this,arguments)}let Wu=(()=>{class w{constructor(y){this.providerId=w.PROVIDER_ID,this.auth=Mn(y)}verifyPhoneNumber(y,D){return Oa(this.auth,y,(0,$.m9)(D))}static credential(y,D){return ma._fromVerification(y,D)}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:D,temporaryProof:N}=y;return D&&N?ma._fromTokenResponse(D,N):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function js(w,g){return g?K(g):(_e(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Qp extends In{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return vn(g,this._buildIdpRequest())}_linkToIdToken(g,y){return vn(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return vn(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function d_(w){return ec(w.auth,new Qp(w),w.bypassAuthState)}function sw(w){const{auth:g,user:y}=w;return _e(y,g,"internal-error"),Pu(y,new Qp(w),w.bypassAuthState)}function Yp(w){return zu.apply(this,arguments)}function zu(){return(zu=(0,b.Z)(function*(w){const{auth:g,user:y}=w;return _e(y,g,"internal-error"),Xl(y,new Qp(w),w.bypassAuthState)})).apply(this,arguments)}class ow{constructor(g,y,D,N,M=!1){this.auth=g,this.resolver=D,this.user=N,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,b.Z)(function*(D,N){g.pendingPromise={resolve:D,reject:N};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(M){g.reject(M)}});return function(D,N){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,b.Z)(function*(){const{urlResponse:D,sessionId:N,postBody:M,tenantId:W,error:le,type:ke}=g;if(le)return void y.reject(le);const He={auth:y.auth,requestUri:D,sessionId:N,tenantId:W||void 0,postBody:M||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(ke)(He))}catch(st){y.reject(st)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return d_;case"linkViaPopup":case"linkViaRedirect":return Yp;case"reauthViaPopup":case"reauthViaRedirect":return sw;default:Ve(this.auth,"internal-error")}}resolve(g){ae(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){ae(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const $T=new Be(2e3,1e4);function Ku(){return(Ku=(0,b.Z)(function*(w,g,y){const D=Mn(w);Fe(w,g,Ao);const N=js(D,y);return new ka(D,"signInViaPopup",g,N).executeNotNull()})).apply(this,arguments)}function Oo(){return(Oo=(0,b.Z)(function*(w,g,y){const D=(0,$.m9)(w);Fe(D.auth,g,Ao);const N=js(D.auth,y);return new ka(D.auth,"reauthViaPopup",g,N,D).executeNotNull()})).apply(this,arguments)}function _c(){return(_c=(0,b.Z)(function*(w,g,y){const D=(0,$.m9)(w);Fe(D.auth,g,Ao);const N=js(D.auth,y);return new ka(D.auth,"linkViaPopup",g,N,D).executeNotNull()})).apply(this,arguments)}let ka=(()=>{class w extends ow{constructor(y,D,N,M,W){super(y,D,M,W),this.provider=N,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var y=this;return(0,b.Z)(function*(){const D=yield y.execute();return _e(D,y.auth,"internal-error"),D})()}onExecution(){var y=this;return(0,b.Z)(function*(){ae(1===y.filter.length,"Popup operations only handle one event");const D=hs();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],D),y.authWindow.associatedEvent=D,y.resolver._originValidation(y.auth).catch(N=>{y.reject(N)}),y.resolver._isIframeWebStorageSupported(y.auth,N=>{N||y.reject(qe(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(qe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const y=()=>{var D,N;this.pollId=(null===(N=null===(D=this.authWindow)||void 0===D?void 0:D.window)||void 0===N?void 0:N.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(qe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,$T.get())};y()}}return w.currentPopupAction=null,w})();const Qn=new Map;class Zu extends ow{constructor(g,y,D=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,D),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,b.Z)(function*(){let D=Qn.get(y.auth._key());if(!D){try{const M=(yield function(w,g){return Ni.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;D=()=>Promise.resolve(M)}catch(N){D=()=>Promise.reject(N)}Qn.set(y.auth._key(),D)}return D()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,D=this;return(0,b.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(D,g);if("unknown"!==g.type){if(g.eventId){const N=yield D.auth._redirectUserForId(g.eventId);if(N)return D.user=N,y().call(D,g);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,b.Z)(function*(){})()}cleanUp(){}}function Ni(){return(Ni=(0,b.Z)(function*(w,g){const y=h_(g),D="true"===(yield Fa(w)._get(y));return yield Fa(w)._remove(y),D})).apply(this,arguments)}function Qu(w,g){return fi.apply(this,arguments)}function fi(){return(fi=(0,b.Z)(function*(w,g){return Fa(w)._set(h_(g),"true")})).apply(this,arguments)}function Fa(w){return K(w._redirectPersistence)}function h_(w){return hn("pendingRedirect",w.config.apiKey,w.name)}function $s(){return($s=(0,b.Z)(function*(w,g,y){const D=Mn(w);Fe(w,g,Ao);const N=js(D,y);return yield Qu(N,D),N._openRedirect(D,g,"signInViaRedirect")})).apply(this,arguments)}function La(){return(La=(0,b.Z)(function*(w,g,y){const D=(0,$.m9)(w);Fe(D.auth,g,Ao);const N=js(D.auth,y);yield Qu(N,D.auth);const M=yield Xu(D);return N._openRedirect(D.auth,g,"reauthViaRedirect",M)})).apply(this,arguments)}function Ec(){return(Ec=(0,b.Z)(function*(w,g,y){const D=(0,$.m9)(w);Fe(D.auth,g,Ao);const N=js(D.auth,y);yield Fs(!1,D,g.providerId),yield Qu(N,D.auth);const M=yield Xu(D);return N._openRedirect(D.auth,g,"linkViaRedirect",M)})).apply(this,arguments)}function Yu(){return(Yu=(0,b.Z)(function*(w,g){return yield Mn(w)._initializationPromise,Ri(w,g,!1)})).apply(this,arguments)}function Ri(w,g){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,b.Z)(function*(w,g,y=!1){const D=Mn(w),N=js(D,g),W=yield new Zu(D,N,y).execute();return W&&!y&&(delete W.user._redirectEventId,yield D._persistUserIfCurrent(W.user),yield D._setRedirectUser(null,g)),W})).apply(this,arguments)}function Xu(w){return Xp.apply(this,arguments)}function Xp(){return(Xp=(0,b.Z)(function*(w){const g=hs(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class Fo{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(g,D)&&(y=!0,this.sendToConsumer(g,D),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vh(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var D;if(g.error&&!vh(g)){const N=(null===(D=g.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";y.onError(qe(this.auth,N))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const D=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&D}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gs(g))}saveEventToCache(g){this.cachedEventUids.add(Gs(g)),this.lastProcessedEventTime=Date.now()}}function Gs(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function vh({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===(null==g?void 0:g.code)}function wc(w){return Va.apply(this,arguments)}function Va(){return(Va=(0,b.Z)(function*(w,g={}){return Pt(w,"GET","/v1/projects",g)})).apply(this,arguments)}const uw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Eh=/^https?/;function Ws(){return(Ws=(0,b.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield wc(w);for(const y of g)try{if(g_(y))return}catch(D){}Ve(w,"unauthorized-domain")})).apply(this,arguments)}function g_(w){const g=dt(),{protocol:y,hostname:D}=new URL(g);if(w.startsWith("chrome-extension://")){const W=new URL(w);return""===W.hostname&&""===D?"chrome-extension:"===y&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&W.hostname===D}if(!Eh.test(y))return!1;if(uw.test(w))return D===w;const N=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+N+"|"+N+")$","i").test(D)}const an=new Be(3e4,6e4);function wh(){const w=En().___jsl;if(null==w?void 0:w.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let y=0;y<w.CP.length;y++)w.CP[y]=null}let pi=null;function Lo(w){return pi=pi||function(w){return new Promise((g,y)=>{var D,N,M;function W(){wh(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{wh(),y(qe(w,"network-request-failed"))},timeout:an.get()})}if(null===(N=null===(D=En().gapi)||void 0===D?void 0:D.iframes)||void 0===N?void 0:N.Iframe)g(gapi.iframes.getContext());else{if(!(null===(M=En().gapi)||void 0===M?void 0:M.load)){const le=Us("iframefcb");return En()[le]=()=>{gapi.load?W():y(qe(w,"network-request-failed"))},fc(`https://apis.google.com/js/api.js?onload=${le}`)}W()}}).catch(g=>{throw pi=null,g})}(w),pi}const bc=new Be(5e3,15e3),lw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},tl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gs(w){const g=w.config;_e(g.authDomain,w,"auth-domain-config-required");const y=g.emulator?Xe(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,D={apiKey:g.apiKey,appName:w.name,v:ye.SDK_VERSION},N=tl.get(w.config.apiHost);N&&(D.eid=N);const M=w._getFrameworks();return M.length&&(D.fw=M.join(",")),`${y}?${(0,$.xO)(D).slice(1)}`}function ms(){return(ms=(0,b.Z)(function*(w){const g=yield Lo(w),y=En().gapi;return _e(y,w,"internal-error"),g.open({where:document.body,url:gs(w),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lw,dontclear:!0},D=>new Promise(function(){var N=(0,b.Z)(function*(M,W){yield D.restyle({setHideOnLeave:!1});const le=qe(w,"network-request-failed"),ke=En().setTimeout(()=>{W(le)},bc.get());function He(){En().clearTimeout(ke),M(D)}D.ping(He).then(He,()=>{W(le)})});return function(M,W){return N.apply(this,arguments)}}()))})).apply(this,arguments)}const Ic={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ng{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function y_(w,g,y,D,N,M){_e(w.config.authDomain,w,"auth-domain-config-required"),_e(w.config.apiKey,w,"invalid-api-key");const W={apiKey:w.config.apiKey,appName:w.name,authType:y,redirectUrl:D,v:ye.SDK_VERSION,eventId:N};if(g instanceof Ao){g.setDefaultLanguage(w.languageCode),W.providerId=g.providerId||"",(0,$.xb)(g.getCustomParameters())||(W.customParameters=JSON.stringify(g.getCustomParameters()));for(const[ke,He]of Object.entries(M||{}))W[ke]=He}if(g instanceof Nu){const ke=g.getScopes().filter(He=>""!==He);ke.length>0&&(W.scopes=ke.join(","))}w.tenantId&&(W.tid=w.tenantId);const le=W;for(const ke of Object.keys(le))void 0===le[ke]&&delete le[ke];return`${function({config:w}){return w.emulator?Xe(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,$.xO)(le).slice(1)}`}const Ih="webStorageSupport";class Dh extends class{constructor(g){this.factorId=g}_process(g,y,D){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,D);case"signin":return this._finalizeSignIn(g,y.credential);default:return X("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Dh(g)}_finalizeEnroll(g,y,D){return function(w,g){return Pt(w,"POST","/v2/accounts/mfaEnrollment:finalize",Ut(w,g))}(g,{idToken:y,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function(w,g){return Pt(w,"POST","/v2/accounts/mfaSignIn:finalize",Ut(w,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ac=(()=>{class w{constructor(){}static assertion(y){return Dh._fromCredential(y)}}return w.FACTOR_ID="phone",w})();var w;class v_{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,b.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(D=>{var N;g((null===(N=D)||void 0===N?void 0:N.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);!y||(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Gi(){return window}function nl(){return(nl=(0,b.Z)(function*(w,g,y){var D;const{BuildInfo:N}=Gi();ae(g.sessionId,"AuthEvent did not contain a session ID");const M=yield xi(g.sessionId),W={};return ai()?W.ibi=N.packageName:Gr()?W.apn=N.packageName:Ve(w,"operation-not-supported-in-this-environment"),N.displayName&&(W.appDisplayName=N.displayName),W.sessionId=M,y_(w,y,g.type,void 0,null!==(D=g.eventId)&&void 0!==D?D:void 0,W)})).apply(this,arguments)}function Ah(){return(Ah=(0,b.Z)(function*(w){const{BuildInfo:g}=Gi(),y={};ai()?y.iosBundleId=g.packageName:Gr()?y.androidPackageName=g.packageName:Ve(w,"operation-not-supported-in-this-environment"),yield wc(w,y)})).apply(this,arguments)}function Nh(){return(Nh=(0,b.Z)(function*(w,g,y){const{cordova:D}=Gi();let N=()=>{};try{yield new Promise((M,W)=>{let le=null;function ke(){var ot;M();const Lt=null===(ot=D.plugins.browsertab)||void 0===ot?void 0:ot.close;"function"==typeof Lt&&Lt(),"function"==typeof(null==y?void 0:y.close)&&y.close()}function He(){le||(le=window.setTimeout(()=>{W(qe(w,"redirect-cancelled-by-user"))},2e3))}function st(){"visible"===(null==document?void 0:document.visibilityState)&&He()}g.addPassiveListener(ke),document.addEventListener("resume",He,!1),Gr()&&document.addEventListener("visibilitychange",st,!1),N=()=>{g.removePassiveListener(ke),document.removeEventListener("resume",He,!1),document.removeEventListener("visibilitychange",st,!1),le&&window.clearTimeout(le)}})}finally{N()}})).apply(this,arguments)}function xi(w){return mi.apply(this,arguments)}function mi(){return(mi=(0,b.Z)(function*(w){const g=Nc(w),y=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(y)).map(N=>N.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Nc(w){if(ae(/[0-9a-zA-Z]+/.test(w),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(w);const g=new ArrayBuffer(w.length),y=new Uint8Array(g);for(let D=0;D<w.length;D++)y[D]=w.charCodeAt(D);return y}w="Browser",(0,ye._registerComponent)(new Ce.wA("auth",(g,{options:y})=>{const D=g.getProvider("app").getImmediate(),{apiKey:N,authDomain:M}=D.options;return(W=>{_e(N&&!N.includes(":"),"invalid-api-key",{appName:W.name}),_e(!(null==M?void 0:M.includes(":")),"argument-error",{appName:W.name});const le={apiKey:N,authDomain:M,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cu(w)},ke=new Np(W,le);return function(w,g){const y=(null==g?void 0:g.persistence)||[],D=(Array.isArray(y)?y:[y]).map(K);(null==g?void 0:g.errorMap)&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(D,null==g?void 0:g.popupRedirectResolver)}(ke,y),ke})(D)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,D)=>{g.getProvider("auth-internal").initialize()})),(0,ye._registerComponent)(new Ce.wA("auth-internal",g=>{const y=Mn(g.getProvider("auth").getImmediate());return new v_(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ye.registerVersion)("@firebase/auth","0.18.0",void 0);class b_ extends Fo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(y=>y(g)),super.onEvent(g)}initialized(){var g=this;return(0,b.Z)(function*(){yield g.initPromise})()}}function ug(w){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,b.Z)(function*(w){const g=yield Rc()._get(xc(w));return g&&(yield Rc()._remove(xc(w))),g})).apply(this,arguments)}function lg(){const w=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<20;y++){const D=Math.floor(Math.random()*g.length);w.push(g.charAt(D))}return w.join("")}function Rc(){return K(Ro)}function xc(w){return hn("authEvent",w.config.apiKey,w.name)}function kn(w){if(!(null==w?void 0:w.includes("?")))return{};const[g,...y]=w.split("?");return(0,$.zd)(y.join("?"))}function Pc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:qe("no-auth-event")}}function Oh(){var w;return(null===(w=null==self?void 0:self.location)||void 0===w?void 0:w.protocol)||null}function Mc(w=(0,$.z$)()){return!("file:"!==Oh()&&"ionic:"!==Oh()||!w.toLowerCase().match(/iphone|ipad|ipod|android/))}function hg(){try{const w=self.localStorage,g=hs();if(w)return w.setItem(g,"1"),w.removeItem(g),!function(w=(0,$.z$)()){return(0,$.w1)()&&11===(null==document?void 0:document.documentMode)||function(w=(0,$.z$)()){return/Edge\/\d+/.test(w)}(w)}()||(0,$.hl)()}catch(w){return Oc()&&(0,$.hl)()}return!1}function Oc(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Fh(){return("http:"===Oh()||"https:"===Oh()||(0,$.ru)()||Mc())&&!((0,$.b$)()||(0,$.UG)())&&hg()&&!Oc()}function fg(){return Mc()&&"undefined"!=typeof document}function Ks(){return(Ks=(0,b.Z)(function*(){return!!fg()&&new Promise(w=>{const g=setTimeout(()=>{w(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),w(!0)})})})).apply(this,arguments)}const wr={LOCAL:"local",NONE:"none",SESSION:"session"},zi=_e,kc="persistence";function Vh(w){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,b.Z)(function*(w){yield w._initializationPromise;const g=jh(),y=hn(kc,w.config.apiKey,w.name);(null==g?void 0:g.sessionStorage)&&g.sessionStorage.setItem(y,w._getPersistence())})).apply(this,arguments)}function jh(){return"undefined"!=typeof window?window:null}const A_=_e;class ys{constructor(){this.browserResolver=K(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vs,this._completeRedirectFn=Ri}_openPopup(g,y,D,N){var M=this;return(0,b.Z)(function*(){var W;ae(null===(W=M.eventManagers[g._key()])||void 0===W?void 0:W.manager,"_initialize() not called before _openPopup()");const le=y_(g,y,D,dt(),N);return function(w,g,y,D=500,N=600){const M=Math.max((window.screen.availHeight-N)/2,0).toString(),W=Math.max((window.screen.availWidth-D)/2,0).toString();let le="";const ke=Object.assign(Object.assign({},Ic),{width:D.toString(),height:N.toString(),top:M,left:W}),He=(0,$.z$)().toLowerCase();y&&(le=$d(He)?"_blank":y),Wl(He)&&(g=g||"http://localhost",ke.scrollbars="yes");const st=Object.entries(ke).reduce((Lt,[Jn,jo])=>`${Lt}${Jn}=${jo},`,"");if(function(w=(0,$.z$)()){var g;return ai(w)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(He)&&"_self"!==le)return function(w,g){const y=document.createElement("a");y.href=w,y.target=g;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(D)}(g||"",le),new ng(null);const ot=window.open(g||"",le,st);_e(ot,w,"popup-blocked");try{ot.focus()}catch(Lt){}return new ng(ot)}(g,le,hs())})()}_openRedirect(g,y,D,N){var M=this;return(0,b.Z)(function*(){return yield M._originValidation(g),w=y_(g,y,D,dt(),N),En().location.href=w,new Promise(()=>{});var w})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:N,promise:M}=this.eventManagers[y];return N?Promise.resolve(N):(ae(M,"If manager is not set, promise should be"),M)}const D=this.initAndGetManager(g);return this.eventManagers[y]={promise:D},D}initAndGetManager(g){var y=this;return(0,b.Z)(function*(){const D=yield function(w){return ms.apply(this,arguments)}(g),N=new Fo(g);return D.register("authEvent",M=>(_e(null==M?void 0:M.authEvent,g,"invalid-auth-event"),{status:N.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:N},y.iframes[g._key()]=D,N})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(Ih,{type:Ih},N=>{var M;const W=null===(M=null==N?void 0:N[0])||void 0===M?void 0:M[Ih];void 0!==W&&y(!!W),Ve(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function(w){return Ws.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return Kl()||Du()||ai()}}),this.cordovaResolver=K(class{constructor(){this._redirectPersistence=Vs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ri}_initialize(g){var y=this;return(0,b.Z)(function*(){const D=g._key();let N=y.eventManagers.get(D);return N||(N=new b_(g),y.eventManagers.set(D,N),y.attachCallbackListeners(g,N)),N})()}_openPopup(g){Ve(g,"operation-not-supported-in-this-environment")}_openRedirect(g,y,D,N){var M=this;return(0,b.Z)(function*(){!function(w){var g,y,D,N,M,W,le,ke,He,st;const ot=Gi();_e("function"==typeof(null===(g=null==ot?void 0:ot.universalLinks)||void 0===g?void 0:g.subscribe),w,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),_e(void 0!==(null===(y=null==ot?void 0:ot.BuildInfo)||void 0===y?void 0:y.packageName),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),_e("function"==typeof(null===(M=null===(N=null===(D=null==ot?void 0:ot.cordova)||void 0===D?void 0:D.plugins)||void 0===N?void 0:N.browsertab)||void 0===M?void 0:M.openUrl),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_e("function"==typeof(null===(ke=null===(le=null===(W=null==ot?void 0:ot.cordova)||void 0===W?void 0:W.plugins)||void 0===le?void 0:le.browsertab)||void 0===ke?void 0:ke.isAvailable),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_e("function"==typeof(null===(st=null===(He=null==ot?void 0:ot.cordova)||void 0===He?void 0:He.InAppBrowser)||void 0===st?void 0:st.open),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const W=yield M._initialize(g);yield W.initialized(),W.resetRedirect(),Qn.clear(),yield M._originValidation(g);const le=function(w,g,y=null){return{type:g,eventId:y,urlResponse:null,sessionId:lg(),postBody:null,tenantId:w.tenantId,error:qe(w,"no-auth-event")}}(g,D,N);yield function(w,g){return Rc()._set(xc(w),g)}(g,le);const ke=yield function(w,g,y){return nl.apply(this,arguments)}(g,le,y),He=yield function(w){const{cordova:g}=Gi();return new Promise(y=>{g.plugins.browsertab.isAvailable(D=>{let N=null;D?g.plugins.browsertab.openUrl(w):N=g.InAppBrowser.open(w,function(w=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}()?"_blank":"_system","location=yes"),y(N)})})}(ke);return function(w,g,y){return Nh.apply(this,arguments)}(g,W,He)})()}_isIframeWebStorageSupported(g,y){throw new Error("Method not implemented.")}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function(w){return Ah.apply(this,arguments)}(g)),this.originValidationPromises[y]}attachCallbackListeners(g,y){const{universalLinks:D,handleOpenURL:N,BuildInfo:M}=Gi(),W=setTimeout((0,b.Z)(function*(){yield ug(g),y.onEvent(Pc())}),500),le=function(){var st=(0,b.Z)(function*(ot){clearTimeout(W);const Lt=yield ug(g);let Jn=null;Lt&&(null==ot?void 0:ot.url)&&(Jn=function(w,g){var y,D;const N=function(w){const g=kn(w),y=g.link?decodeURIComponent(g.link):void 0,D=kn(y).link,N=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return kn(N).link||N||D||y||w}(g);if(N.includes("/__/auth/callback")){const M=kn(N),W=M.firebaseError?function(w){try{return JSON.parse(w)}catch(g){return null}}(decodeURIComponent(M.firebaseError)):null,le=null===(D=null===(y=null==W?void 0:W.code)||void 0===y?void 0:y.split("auth/"))||void 0===D?void 0:D[1],ke=le?qe(le):null;return ke?{type:w.type,eventId:w.eventId,tenantId:w.tenantId,error:ke,urlResponse:null,sessionId:null,postBody:null}:{type:w.type,eventId:w.eventId,tenantId:w.tenantId,sessionId:w.sessionId,urlResponse:N,postBody:null}}return null}(Lt,ot.url)),y.onEvent(Jn||Pc())});return function(Lt){return st.apply(this,arguments)}}();void 0!==D&&"function"==typeof D.subscribe&&D.subscribe(null,le);const ke=N,He=`${M.packageName.toLowerCase()}://`;Gi().handleOpenURL=function(){var st=(0,b.Z)(function*(ot){if(ot.toLowerCase().startsWith(He)&&le({url:ot}),"function"==typeof ke)try{ke(ot)}catch(Lt){console.error(Lt)}});return function(ot){return st.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Vs,this._completeRedirectFn=Ri}_initialize(g){var y=this;return(0,b.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,y,D,N){var M=this;return(0,b.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(g,y,D,N)})()}_openRedirect(g,y,D,N){var M=this;return(0,b.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(g,y,D,N)})()}_isIframeWebStorageSupported(g,y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,y)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return fg()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return A_(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,b.Z)(function*(){if(g.underlyingResolver)return;const y=yield function(){return Ks.apply(this,arguments)}();g.underlyingResolver=y?g.cordovaResolver:g.browserResolver})()}}function Hh(w){return w.unwrap()}function R_(w){return pg(w)}function fw(w,g){var y;const D=null===(y=g.customData)||void 0===y?void 0:y._tokenResponse;if("auth/multi-factor-auth-required"===g.code)g.resolver=new $h(w,function(w,g){var y;const D=(0,$.m9)(w),N=g;return _e(g.operationType,D,"argument-error"),_e(null===(y=N.serverResponse)||void 0===y?void 0:y.mfaPendingCredential,D,"argument-error"),Ca._fromError(D,N)}(w,g));else if(D){const N=pg(g),M=g;N&&(M.credential=N,M.tenantId=D.tenantId||void 0,M.email=D.email||void 0,M.phoneNumber=D.phoneNumber||void 0)}}function pg(w){const{_tokenResponse:g}=w instanceof $.ZR?w.customData:w;if(!g)return null;if(!(w instanceof $.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return Wu.credentialFromResult(w);const y=g.providerId;if(!y||"password"===y)return null;let D;switch(y){case"google.com":D=Wy;break;case"facebook.com":D=Jd;break;case"github.com":D=z0;break;case"twitter.com":D=zy;break;default:const{oauthIdToken:N,oauthAccessToken:M,oauthTokenSecret:W,pendingToken:le,nonce:ke}=g;return M||W||N||le?le?y.startsWith("saml.")?ya._create(y,le):tr._fromParams({providerId:y,signInMethod:y,pendingToken:le,idToken:N,accessToken:M}):new No(y).credential({idToken:N,accessToken:M,rawNonce:ke}):null}return w instanceof $.ZR?D.credentialFromError(w):D.credentialFromResult(w)}function Yn(w,g){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,b.Z)(function*(w,g){let y;try{y=yield g}catch(M){throw M instanceof $.ZR&&fw(w,M),M}const{operationType:D,user:N}=y;return{operationType:D,credential:R_(y),additionalUserInfo:uh(y),user:tn.getOrCreate(N)}})).apply(this,arguments)}function sl(w,g){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,b.Z)(function*(w,g){const y=yield g;return{verificationId:y.verificationId,confirm:D=>Yn(w,y.confirm(D))}})).apply(this,arguments)}class $h{constructor(g,y){this.resolver=y,this.auth=function(w){return w.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return Yn(Hh(this.auth),this.resolver.resolveSignIn(g))}}class tn{constructor(g){this._delegate=g,this.multiFactor=function(w){const g=(0,$.m9)(w);return ch.has(g)||ch.set(g,en._fromUser(g)),ch.get(g)}(g)}static getOrCreate(g){return tn.USER_MAP.has(g)||tn.USER_MAP.set(g,new tn(g)),tn.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var y=this;return(0,b.Z)(function*(){return Yn(y.auth,nc(y._delegate,g))})()}linkWithPhoneNumber(g,y){var D=this;return(0,b.Z)(function*(){return sl(D.auth,function(w,g,y){return yh.apply(this,arguments)}(D._delegate,g,y))})()}linkWithPopup(g){var y=this;return(0,b.Z)(function*(){return Yn(y.auth,function(w,g,y){return _c.apply(this,arguments)}(y._delegate,g,ys))})()}linkWithRedirect(g){var y=this;return(0,b.Z)(function*(){return yield Vh(Mn(y.auth)),function(w,g,y){return function(w,g,y){return Ec.apply(this,arguments)}(w,g,y)}(y._delegate,g,ys)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var y=this;return(0,b.Z)(function*(){return Yn(y.auth,on(y._delegate,g))})()}reauthenticateWithPhoneNumber(g,y){return sl(this.auth,function(w,g,y){return Kp.apply(this,arguments)}(this._delegate,g,y))}reauthenticateWithPopup(g){return Yn(this.auth,function(w,g,y){return Oo.apply(this,arguments)}(this._delegate,g,ys))}reauthenticateWithRedirect(g){var y=this;return(0,b.Z)(function*(){return yield Vh(Mn(y.auth)),function(w,g,y){return function(w,g,y){return La.apply(this,arguments)}(w,g,y)}(y._delegate,g,ys)})()}sendEmailVerification(g){return function(w,g){return cs.apply(this,arguments)}(this._delegate,g)}unlink(g){var y=this;return(0,b.Z)(function*(){return yield function(w,g){return eh.apply(this,arguments)}(y._delegate,g),y})()}updateEmail(g){return function(w,g){return ci((0,$.m9)(w),g,null)}(this._delegate,g)}updatePassword(g){return function(w,g){return ci((0,$.m9)(w),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function(w,g){return Gu.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function(w,g){return Da.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,y){return function(w,g,y){return Lu.apply(this,arguments)}(this._delegate,g,y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}tn.USER_MAP=new WeakMap;const _s=_e;let Lc=(()=>{class w{constructor(y,D){if(this.app=y,D.isInitialized())return this._delegate=D.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:N}=y.options;_s(N,"invalid-api-key",{appName:y.name});let M=[St];if("undefined"!=typeof window){M=function(w,g){const y=jh();if(!(null==y?void 0:y.sessionStorage))return[];const D=hn(kc,w,g);switch(y.sessionStorage.getItem(D)){case wr.NONE:return[St];case wr.LOCAL:return[di,Vs];case wr.SESSION:return[Vs];default:return[]}}(N,y.name);for(const le of[di,Ro,Vs])M.includes(le)||M.push(le)}_s(N,"invalid-api-key",{appName:y.name});const W="undefined"!=typeof window?ys:void 0;this._delegate=D.initialize({options:{persistence:M,popupRedirectResolver:W}}),this._delegate._updateErrorMap(ce),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?tn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(y){this._delegate.languageCode=y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(y){this._delegate.tenantId=y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(y,D){!function(w,g,y){const D=Mn(w);_e(D._canInitEmulator,D,"emulator-config-failed"),_e(/^https?:\/\//.test(g),D,"invalid-emulator-scheme");const N=!!(null==y?void 0:y.disableWarnings),M=os(g),{host:W,port:le}=function(w){const g=os(w),y=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!y)return{host:"",port:null};const D=y[2].split("@").pop()||"",N=/^(\[[^\]]+\])(:|$)/.exec(D);if(N){const M=N[1];return{host:M,port:Wr(D.substr(M.length+1))}}{const[M,W]=D.split(":");return{host:M,port:Wr(W)}}}(g);D.config.emulator={url:`${M}//${W}${null===le?"":`:${le}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:W,port:le,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:N})}),function(w){function g(){const y=document.createElement("p"),D=y.style;y.innerText="Running in emulator mode. Do not use with production credentials.",D.position="fixed",D.width="100%",D.backgroundColor="#ffffff",D.border=".1em solid #000000",D.color="#b50000",D.bottom="0px",D.left="0px",D.margin="0px",D.zIndex="10000",D.textAlign="center",y.classList.add("firebase-emulator-warning"),document.body.appendChild(y)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&!w&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}(N)}(this._delegate,y,D)}applyActionCode(y){return function(w,g){return us.apply(this,arguments)}(this._delegate,y)}checkActionCode(y){return ku(this._delegate,y)}confirmPasswordReset(y,D){return function(w,g,y){return kr.apply(this,arguments)}(this._delegate,y,D)}createUserWithEmailAndPassword(y,D){var N=this;return(0,b.Z)(function*(){return Yn(N._delegate,function(w,g,y){return rc.apply(this,arguments)}(N._delegate,y,D))})()}fetchProvidersForEmail(y){return this.fetchSignInMethodsForEmail(y)}fetchSignInMethodsForEmail(y){return function(w,g){return Tn.apply(this,arguments)}(this._delegate,y)}isSignInWithEmailLink(y){return function(w,g){const y=Yl.parseLink(g);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}(0,y)}getRedirectResult(){var y=this;return(0,b.Z)(function*(){_s(Fh(),y._delegate,"operation-not-supported-in-this-environment");const D=yield function(w,g){return Yu.apply(this,arguments)}(y._delegate,ys);return D?Yn(y._delegate,Promise.resolve(D)):{credential:null,user:null}})()}addFrameworkForLogging(y){!function(w,g){Mn(w)._logFramework(g)}(this._delegate,y)}onAuthStateChanged(y,D,N){const{next:M,error:W,complete:le}=qh(y,D,N);return this._delegate.onAuthStateChanged(M,W,le)}onIdTokenChanged(y,D,N){const{next:M,error:W,complete:le}=qh(y,D,N);return this._delegate.onIdTokenChanged(M,W,le)}sendSignInLinkToEmail(y,D){return function(w,g,y){return ic.apply(this,arguments)}(this._delegate,y,D)}sendPasswordResetEmail(y,D){return function(w,g,y){return Ou.apply(this,arguments)}(this._delegate,y,D||void 0)}setPersistence(y){var D=this;return(0,b.Z)(function*(){let N;switch(function(w,g){zi(Object.values(wr).includes(g),w,"invalid-persistence-type"),(0,$.b$)()?zi(g!==wr.SESSION,w,"unsupported-persistence-type"):(0,$.UG)()?zi(g===wr.NONE,w,"unsupported-persistence-type"):Oc()?zi(g===wr.NONE||g===wr.LOCAL&&(0,$.hl)(),w,"unsupported-persistence-type"):zi(g===wr.NONE||hg(),w,"unsupported-persistence-type")}(D._delegate,y),y){case wr.SESSION:N=Vs;break;case wr.LOCAL:N=(yield K(di)._isAvailable())?di:Ro;break;case wr.NONE:N=St;break;default:return Ve("argument-error",{appName:D._delegate.name})}return D._delegate.setPersistence(N)})()}signInAndRetrieveDataWithCredential(y){return this.signInWithCredential(y)}signInAnonymously(){return Yn(this._delegate,function(w){return ks.apply(this,arguments)}(this._delegate))}signInWithCredential(y){return Yn(this._delegate,Ea(this._delegate,y))}signInWithCustomToken(y){return Yn(this._delegate,function(w,g){return th.apply(this,arguments)}(this._delegate,y))}signInWithEmailAndPassword(y,D){return Yn(this._delegate,function(w,g,y){return Ea((0,$.m9)(w),Rp.credential(g,y))}(this._delegate,y,D))}signInWithEmailLink(y,D){return Yn(this._delegate,function(w,g,y){return sh.apply(this,arguments)}(this._delegate,y,D))}signInWithPhoneNumber(y,D){return sl(this._delegate,function(w,g,y){return fs.apply(this,arguments)}(this._delegate,y,D))}signInWithPopup(y){var D=this;return(0,b.Z)(function*(){return _s(Fh(),D._delegate,"operation-not-supported-in-this-environment"),Yn(D._delegate,function(w,g,y){return Ku.apply(this,arguments)}(D._delegate,y,ys))})()}signInWithRedirect(y){var D=this;return(0,b.Z)(function*(){return _s(Fh(),D._delegate,"operation-not-supported-in-this-environment"),yield Vh(D._delegate),function(w,g,y){return function(w,g,y){return $s.apply(this,arguments)}(w,g,y)}(D._delegate,y,ys)})()}updateCurrentUser(y){return this._delegate.updateCurrentUser(y)}verifyPasswordResetCode(y){return function(w,g){return ls.apply(this,arguments)}(this._delegate,y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return w.Persistence=wr,w})();function qh(w,g,y){let D=w;"function"!=typeof w&&({next:D,error:g,complete:y}=w);const N=D;return{next:W=>N(W&&tn.getOrCreate(W)),error:g,complete:y}}class $a{constructor(){this.providerId="phone",this._delegate=new Wu(Hh(ne.Z.auth()))}static credential(g,y){return Wu.credential(g,y)}verifyPhoneNumber(g,y){return this._delegate.verifyPhoneNumber(g,y)}unwrap(){return this._delegate}}$a.PHONE_SIGN_IN_METHOD=Wu.PHONE_SIGN_IN_METHOD,$a.PROVIDER_ID=Wu.PROVIDER_ID;const Gh=_e;class x_{constructor(g,y,D=ne.Z.app()){var N;Gh(null===(N=D.options)||void 0===N?void 0:N.apiKey,"invalid-api-key",{appName:D.name}),this._delegate=new qu(g,y,D.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(w){w.INTERNAL.registerComponent(new Ce.wA("auth-compat",g=>{const y=g.getProvider("app-compat").getImmediate(),D=g.getProvider("auth");return new Lc(y,D)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Rp,FacebookAuthProvider:Jd,GithubAuthProvider:z0,GoogleAuthProvider:Wy,OAuthProvider:No,PhoneAuthProvider:$a,PhoneMultiFactorGenerator:Ac,RecaptchaVerifier:x_,TwitterAuthProvider:zy,Auth:Lc,AuthCredential:In,Error:$.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),w.registerVersion("@firebase/auth-compat","0.1.3")}(ne.Z)},7574:(et,Ne,L)=>{"use strict";L.d(Ne,{y:()=>H});var b=L(7393),$=L(9181),ye=L(6490),he=L(6554),Ce=L(4487);var k=L(2494);let H=(()=>{class te{constructor(ce){this._isScalar=!1,ce&&(this._subscribe=ce)}lift(ce){const re=new te;return re.source=this,re.operator=ce,re}subscribe(ce,re,we){const{operator:De}=this,Pe=function(te,Y,ce){if(te){if(te instanceof b.L)return te;if(te[$.b])return te[$.b]()}return te||Y||ce?new b.L(te,Y,ce):new b.L(ye.c)}(ce,re,we);if(Pe.add(De?De.call(Pe,this.source):this.source||k.v.useDeprecatedSynchronousErrorHandling&&!Pe.syncErrorThrowable?this._subscribe(Pe):this._trySubscribe(Pe)),k.v.useDeprecatedSynchronousErrorHandling&&Pe.syncErrorThrowable&&(Pe.syncErrorThrowable=!1,Pe.syncErrorThrown))throw Pe.syncErrorValue;return Pe}_trySubscribe(ce){try{return this._subscribe(ce)}catch(re){k.v.useDeprecatedSynchronousErrorHandling&&(ce.syncErrorThrown=!0,ce.syncErrorValue=re),function(te){for(;te;){const{closed:Y,destination:ce,isStopped:re}=te;if(Y||re)return!1;te=ce&&ce instanceof b.L?ce:null}return!0}(ce)?ce.error(re):console.warn(re)}}forEach(ce,re){return new(re=J(re))((we,De)=>{let Pe;Pe=this.subscribe(fe=>{try{ce(fe)}catch(Ve){De(Ve),Pe&&Pe.unsubscribe()}},De,we)})}_subscribe(ce){const{source:re}=this;return re&&re.subscribe(ce)}[he.L](){return this}pipe(...ce){return 0===ce.length?this:function(te){return 0===te.length?Ce.y:1===te.length?te[0]:function(ce){return te.reduce((re,we)=>we(re),ce)}}(ce)(this)}toPromise(ce){return new(ce=J(ce))((re,we)=>{let De;this.subscribe(Pe=>De=Pe,Pe=>we(Pe),()=>re(De))})}}return te.create=Y=>new te(Y),te})();function J(te){if(te||(te=k.v.Promise||Promise),!te)throw new Error("no Promise impl found");return te}},6490:(et,Ne,L)=>{"use strict";L.d(Ne,{c:()=>$});var b=L(2494),ne=L(4449);const $={closed:!0,next(ye){},error(ye){if(b.v.useDeprecatedSynchronousErrorHandling)throw ye;(0,ne.z)(ye)},complete(){}}},9765:(et,Ne,L)=>{"use strict";L.d(Ne,{Yc:()=>Ce,xQ:()=>Ie});var b=L(7574),ne=L(7393),$=L(5319),ye=L(7971),me=L(8858),he=L(9181);class Ce extends ne.L{constructor(H){super(H),this.destination=H}}let Ie=(()=>{class k extends b.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[he.b](){return new Ce(this)}lift(J){const te=new ie(this,this);return te.operator=J,te}next(J){if(this.closed)throw new ye.N;if(!this.isStopped){const{observers:te}=this,Y=te.length,ce=te.slice();for(let re=0;re<Y;re++)ce[re].next(J)}}error(J){if(this.closed)throw new ye.N;this.hasError=!0,this.thrownError=J,this.isStopped=!0;const{observers:te}=this,Y=te.length,ce=te.slice();for(let re=0;re<Y;re++)ce[re].error(J);this.observers.length=0}complete(){if(this.closed)throw new ye.N;this.isStopped=!0;const{observers:J}=this,te=J.length,Y=J.slice();for(let ce=0;ce<te;ce++)Y[ce].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(J){if(this.closed)throw new ye.N;return super._trySubscribe(J)}_subscribe(J){if(this.closed)throw new ye.N;return this.hasError?(J.error(this.thrownError),$.w.EMPTY):this.isStopped?(J.complete(),$.w.EMPTY):(this.observers.push(J),new me.W(this,J))}asObservable(){const J=new b.y;return J.source=this,J}}return k.create=(H,J)=>new ie(H,J),k})();class ie extends Ie{constructor(H,J){super(),this.destination=H,this.source=J}next(H){const{destination:J}=this;J&&J.next&&J.next(H)}error(H){const{destination:J}=this;J&&J.error&&this.destination.error(H)}complete(){const{destination:H}=this;H&&H.complete&&this.destination.complete()}_subscribe(H){const{source:J}=this;return J?this.source.subscribe(H):$.w.EMPTY}}},8858:(et,Ne,L)=>{"use strict";L.d(Ne,{W:()=>ne});var b=L(5319);class ne extends b.w{constructor(ye,me){super(),this.subject=ye,this.subscriber=me,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ye=this.subject,me=ye.observers;if(this.subject=null,!me||0===me.length||ye.isStopped||ye.closed)return;const he=me.indexOf(this.subscriber);-1!==he&&me.splice(he,1)}}},7393:(et,Ne,L)=>{"use strict";L.d(Ne,{L:()=>Ce});var b=L(9105),ne=L(6490),$=L(5319),ye=L(9181),me=L(2494),he=L(4449);class Ce extends $.w{constructor(k,H,J){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=ne.c;break;case 1:if(!k){this.destination=ne.c;break}if("object"==typeof k){k instanceof Ce?(this.syncErrorThrowable=k.syncErrorThrowable,this.destination=k,k.add(this)):(this.syncErrorThrowable=!0,this.destination=new Ie(this,k));break}default:this.syncErrorThrowable=!0,this.destination=new Ie(this,k,H,J)}}[ye.b](){return this}static create(k,H,J){const te=new Ce(k,H,J);return te.syncErrorThrowable=!1,te}next(k){this.isStopped||this._next(k)}error(k){this.isStopped||(this.isStopped=!0,this._error(k))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(k){this.destination.next(k)}_error(k){this.destination.error(k),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:k}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=k,this}}class Ie extends Ce{constructor(k,H,J,te){super(),this._parentSubscriber=k;let Y,ce=this;(0,b.m)(H)?Y=H:H&&(Y=H.next,J=H.error,te=H.complete,H!==ne.c&&(ce=Object.create(H),(0,b.m)(ce.unsubscribe)&&this.add(ce.unsubscribe.bind(ce)),ce.unsubscribe=this.unsubscribe.bind(this))),this._context=ce,this._next=Y,this._error=J,this._complete=te}next(k){if(!this.isStopped&&this._next){const{_parentSubscriber:H}=this;me.v.useDeprecatedSynchronousErrorHandling&&H.syncErrorThrowable?this.__tryOrSetError(H,this._next,k)&&this.unsubscribe():this.__tryOrUnsub(this._next,k)}}error(k){if(!this.isStopped){const{_parentSubscriber:H}=this,{useDeprecatedSynchronousErrorHandling:J}=me.v;if(this._error)J&&H.syncErrorThrowable?(this.__tryOrSetError(H,this._error,k),this.unsubscribe()):(this.__tryOrUnsub(this._error,k),this.unsubscribe());else if(H.syncErrorThrowable)J?(H.syncErrorValue=k,H.syncErrorThrown=!0):(0,he.z)(k),this.unsubscribe();else{if(this.unsubscribe(),J)throw k;(0,he.z)(k)}}}complete(){if(!this.isStopped){const{_parentSubscriber:k}=this;if(this._complete){const H=()=>this._complete.call(this._context);me.v.useDeprecatedSynchronousErrorHandling&&k.syncErrorThrowable?(this.__tryOrSetError(k,H),this.unsubscribe()):(this.__tryOrUnsub(H),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(k,H){try{k.call(this._context,H)}catch(J){if(this.unsubscribe(),me.v.useDeprecatedSynchronousErrorHandling)throw J;(0,he.z)(J)}}__tryOrSetError(k,H,J){if(!me.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{H.call(this._context,J)}catch(te){return me.v.useDeprecatedSynchronousErrorHandling?(k.syncErrorValue=te,k.syncErrorThrown=!0,!0):((0,he.z)(te),!0)}return!1}_unsubscribe(){const{_parentSubscriber:k}=this;this._context=null,this._parentSubscriber=null,k.unsubscribe()}}},5319:(et,Ne,L)=>{"use strict";L.d(Ne,{w:()=>he});var b=L(9796),ne=L(1555),$=L(9105);const me=(()=>{function Ie(ie){return Error.call(this),this.message=ie?`${ie.length} errors occurred during unsubscription:\n${ie.map((k,H)=>`${H+1}) ${k.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ie,this}return Ie.prototype=Object.create(Error.prototype),Ie})();class he{constructor(ie){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ie&&(this._ctorUnsubscribe=!0,this._unsubscribe=ie)}unsubscribe(){let ie;if(this.closed)return;let{_parentOrParents:k,_ctorUnsubscribe:H,_unsubscribe:J,_subscriptions:te}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,k instanceof he)k.remove(this);else if(null!==k)for(let Y=0;Y<k.length;++Y)k[Y].remove(this);if((0,$.m)(J)){H&&(this._unsubscribe=void 0);try{J.call(this)}catch(Y){ie=Y instanceof me?Ce(Y.errors):[Y]}}if((0,b.k)(te)){let Y=-1,ce=te.length;for(;++Y<ce;){const re=te[Y];if((0,ne.K)(re))try{re.unsubscribe()}catch(we){ie=ie||[],we instanceof me?ie=ie.concat(Ce(we.errors)):ie.push(we)}}}if(ie)throw new me(ie)}add(ie){let k=ie;if(!ie)return he.EMPTY;switch(typeof ie){case"function":k=new he(ie);case"object":if(k===this||k.closed||"function"!=typeof k.unsubscribe)return k;if(this.closed)return k.unsubscribe(),k;if(!(k instanceof he)){const te=k;k=new he,k._subscriptions=[te]}break;default:throw new Error("unrecognized teardown "+ie+" added to Subscription.")}let{_parentOrParents:H}=k;if(null===H)k._parentOrParents=this;else if(H instanceof he){if(H===this)return k;k._parentOrParents=[H,this]}else{if(-1!==H.indexOf(this))return k;H.push(this)}const J=this._subscriptions;return null===J?this._subscriptions=[k]:J.push(k),k}remove(ie){const k=this._subscriptions;if(k){const H=k.indexOf(ie);-1!==H&&k.splice(H,1)}}}var Ie;function Ce(Ie){return Ie.reduce((ie,k)=>ie.concat(k instanceof me?k.errors:k),[])}he.EMPTY=((Ie=new he).closed=!0,Ie)},2494:(et,Ne,L)=>{"use strict";L.d(Ne,{v:()=>ne});let b=!1;const ne={Promise:void 0,set useDeprecatedSynchronousErrorHandling($){if($){const ye=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ye.stack)}else b&&console.log("RxJS: Back to a better error behavior. Thank you. <3");b=$},get useDeprecatedSynchronousErrorHandling(){return b}}},5345:(et,Ne,L)=>{"use strict";L.d(Ne,{IY:()=>ye,Ds:()=>he,ft:()=>Ie});var b=L(7393),ne=L(7574),$=L(7444);class ye extends b.L{constructor(k){super(),this.parent=k}_next(k){this.parent.notifyNext(k)}_error(k){this.parent.notifyError(k),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class he extends b.L{notifyNext(k){this.destination.next(k)}notifyError(k){this.destination.error(k)}notifyComplete(){this.destination.complete()}}function Ie(ie,k){if(k.closed)return;if(ie instanceof ne.y)return ie.subscribe(k);let H;try{H=(0,$.s)(ie)(k)}catch(J){k.error(J)}return H}},9193:(et,Ne,L)=>{"use strict";L.d(Ne,{c:()=>$});var b=L(7574);const ne=new b.y(me=>me.complete());function $(me){return me?function(me){return new b.y(he=>me.schedule(()=>he.complete()))}(me):ne}},4402:(et,Ne,L)=>{"use strict";L.d(Ne,{D:()=>ce});var b=L(7574),ne=L(7444),$=L(5319),ye=L(6554),Ce=L(4087),Ie=L(377),H=L(4072),J=L(9489);function ce(re,we){return we?function(re,we){if(null!=re){if(function(re){return re&&"function"==typeof re[ye.L]}(re))return function(re,we){return new b.y(De=>{const Pe=new $.w;return Pe.add(we.schedule(()=>{const fe=re[ye.L]();Pe.add(fe.subscribe({next(Ve){Pe.add(we.schedule(()=>De.next(Ve)))},error(Ve){Pe.add(we.schedule(()=>De.error(Ve)))},complete(){Pe.add(we.schedule(()=>De.complete()))}}))})),Pe})}(re,we);if((0,H.t)(re))return function(re,we){return new b.y(De=>{const Pe=new $.w;return Pe.add(we.schedule(()=>re.then(fe=>{Pe.add(we.schedule(()=>{De.next(fe),Pe.add(we.schedule(()=>De.complete()))}))},fe=>{Pe.add(we.schedule(()=>De.error(fe)))}))),Pe})}(re,we);if((0,J.z)(re))return(0,Ce.r)(re,we);if(function(re){return re&&"function"==typeof re[Ie.hZ]}(re)||"string"==typeof re)return function(re,we){if(!re)throw new Error("Iterable cannot be null");return new b.y(De=>{const Pe=new $.w;let fe;return Pe.add(()=>{fe&&"function"==typeof fe.return&&fe.return()}),Pe.add(we.schedule(()=>{fe=re[Ie.hZ](),Pe.add(we.schedule(function(){if(De.closed)return;let Ve,qe;try{const Ct=fe.next();Ve=Ct.value,qe=Ct.done}catch(Ct){return void De.error(Ct)}qe?De.complete():(De.next(Ve),this.schedule())}))})),Pe})}(re,we)}throw new TypeError((null!==re&&typeof re||re)+" is not observable")}(re,we):re instanceof b.y?re:new b.y((0,ne.s)(re))}},6693:(et,Ne,L)=>{"use strict";L.d(Ne,{n:()=>ye});var b=L(7574),ne=L(5015),$=L(4087);function ye(me,he){return he?(0,$.r)(me,he):new b.y((0,ne.V)(me))}},6682:(et,Ne,L)=>{"use strict";L.d(Ne,{T:()=>me});var b=L(7574),ne=L(4869),$=L(840),ye=L(6693);function me(...he){let Ce=Number.POSITIVE_INFINITY,Ie=null,ie=he[he.length-1];return(0,ne.K)(ie)?(Ie=he.pop(),he.length>1&&"number"==typeof he[he.length-1]&&(Ce=he.pop())):"number"==typeof ie&&(Ce=he.pop()),null===Ie&&1===he.length&&he[0]instanceof b.y?he[0]:(0,$.J)(Ce)((0,ye.n)(he,Ie))}},5917:(et,Ne,L)=>{"use strict";L.d(Ne,{of:()=>ye});var b=L(4869),ne=L(6693),$=L(4087);function ye(...me){let he=me[me.length-1];return(0,b.K)(he)?(me.pop(),(0,$.r)(me,he)):(0,ne.n)(me)}},8002:(et,Ne,L)=>{"use strict";L.d(Ne,{U:()=>ne});var b=L(7393);function ne(me,he){return function(Ie){if("function"!=typeof me)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return Ie.lift(new $(me,he))}}class ${constructor(he,Ce){this.project=he,this.thisArg=Ce}call(he,Ce){return Ce.subscribe(new ye(he,this.project,this.thisArg))}}class ye extends b.L{constructor(he,Ce,Ie){super(he),this.project=Ce,this.count=0,this.thisArg=Ie||this}_next(he){let Ce;try{Ce=this.project.call(this.thisArg,he,this.count++)}catch(Ie){return void this.destination.error(Ie)}this.destination.next(Ce)}}},840:(et,Ne,L)=>{"use strict";L.d(Ne,{J:()=>ie});var b=L(8002),ne=L(4402),$=L(5345);function ye(k,H,J=Number.POSITIVE_INFINITY){return"function"==typeof H?te=>te.pipe(ye((Y,ce)=>(0,ne.D)(k(Y,ce)).pipe((0,b.U)((re,we)=>H(Y,re,ce,we))),J)):("number"==typeof H&&(J=H),te=>te.lift(new me(k,J)))}class me{constructor(H,J=Number.POSITIVE_INFINITY){this.project=H,this.concurrent=J}call(H,J){return J.subscribe(new he(H,this.project,this.concurrent))}}class he extends $.Ds{constructor(H,J,te=Number.POSITIVE_INFINITY){super(H),this.project=J,this.concurrent=te,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(H){this.active<this.concurrent?this._tryNext(H):this.buffer.push(H)}_tryNext(H){let J;const te=this.index++;try{J=this.project(H,te)}catch(Y){return void this.destination.error(Y)}this.active++,this._innerSub(J)}_innerSub(H){const J=new $.IY(this),te=this.destination;te.add(J);const Y=(0,$.ft)(H,J);Y!==J&&te.add(Y)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(H){this.destination.next(H)}notifyComplete(){const H=this.buffer;this.active--,H.length>0?this._next(H.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}var Ie=L(4487);function ie(k=Number.POSITIVE_INFINITY){return ye(Ie.y,k)}},309:(et,Ne,L)=>{"use strict";L.d(Ne,{ht:()=>H,QV:()=>ie});var b=L(7393),ne=L(9193),$=L(5917),ye=L(7574);class Ie{constructor(Y,ce,re){this.kind=Y,this.value=ce,this.error=re,this.hasValue="N"===Y}observe(Y){switch(this.kind){case"N":return Y.next&&Y.next(this.value);case"E":return Y.error&&Y.error(this.error);case"C":return Y.complete&&Y.complete()}}do(Y,ce,re){switch(this.kind){case"N":return Y&&Y(this.value);case"E":return ce&&ce(this.error);case"C":return re&&re()}}accept(Y,ce,re){return Y&&"function"==typeof Y.next?this.observe(Y):this.do(Y,ce,re)}toObservable(){switch(this.kind){case"N":return(0,$.of)(this.value);case"E":return te=this.error,new ye.y(ce=>ce.error(te));case"C":return(0,ne.c)()}var te;throw new Error("unexpected notification kind value")}static createNext(Y){return void 0!==Y?new Ie("N",Y):Ie.undefinedValueNotification}static createError(Y){return new Ie("E",void 0,Y)}static createComplete(){return Ie.completeNotification}}function ie(te,Y=0){return function(re){return re.lift(new k(te,Y))}}Ie.completeNotification=new Ie("C"),Ie.undefinedValueNotification=new Ie("N",void 0);class k{constructor(Y,ce=0){this.scheduler=Y,this.delay=ce}call(Y,ce){return ce.subscribe(new H(Y,this.scheduler,this.delay))}}class H extends b.L{constructor(Y,ce,re=0){super(Y),this.scheduler=ce,this.delay=re}static dispatch(Y){const{notification:ce,destination:re}=Y;ce.observe(re),this.unsubscribe()}scheduleMessage(Y){this.destination.add(this.scheduler.schedule(H.dispatch,this.delay,new J(Y,this.destination)))}_next(Y){this.scheduleMessage(Ie.createNext(Y))}_error(Y){this.scheduleMessage(Ie.createError(Y)),this.unsubscribe()}_complete(){this.scheduleMessage(Ie.createComplete()),this.unsubscribe()}}class J{constructor(Y,ce){this.notification=Y,this.destination=ce}}},3101:(et,Ne,L)=>{"use strict";L.d(Ne,{R:()=>we});var b=L(7574);let ne=1;const $=Promise.resolve(),ye={};function me(Pe){return Pe in ye&&(delete ye[Pe],!0)}const he={setImmediate(Pe){const fe=ne++;return ye[fe]=!0,$.then(()=>me(fe)&&Pe()),fe},clearImmediate(Pe){me(Pe)}};var Ie=L(6465),k=L(6102);const te=new class extends k.v{flush(fe){this.active=!0,this.scheduled=void 0;const{actions:Ve}=this;let qe,Ct=-1,Fe=Ve.length;fe=fe||Ve.shift();do{if(qe=fe.execute(fe.state,fe.delay))break}while(++Ct<Fe&&(fe=Ve.shift()));if(this.active=!1,qe){for(;++Ct<Fe&&(fe=Ve.shift());)fe.unsubscribe();throw qe}}}(class extends Ie.o{constructor(fe,Ve){super(fe,Ve),this.scheduler=fe,this.work=Ve}requestAsyncId(fe,Ve,qe=0){return null!==qe&&qe>0?super.requestAsyncId(fe,Ve,qe):(fe.actions.push(this),fe.scheduled||(fe.scheduled=he.setImmediate(fe.flush.bind(fe,null))))}recycleAsyncId(fe,Ve,qe=0){if(null!==qe&&qe>0||null===qe&&this.delay>0)return super.recycleAsyncId(fe,Ve,qe);0===fe.actions.length&&(he.clearImmediate(Ve),fe.scheduled=void 0)}});var Y=L(9796);class re extends b.y{constructor(fe,Ve=0,qe=te){var Pe;super(),this.source=fe,this.delayTime=Ve,this.scheduler=qe,(!(!(0,Y.k)(Pe=Ve)&&Pe-parseFloat(Pe)+1>=0)||Ve<0)&&(this.delayTime=0),(!qe||"function"!=typeof qe.schedule)&&(this.scheduler=te)}static create(fe,Ve=0,qe=te){return new re(fe,Ve,qe)}static dispatch(fe){const{source:Ve,subscriber:qe}=fe;return this.add(Ve.subscribe(qe))}_subscribe(fe){return this.scheduler.schedule(re.dispatch,this.delayTime,{source:this.source,subscriber:fe})}}function we(Pe,fe=0){return function(qe){return qe.lift(new De(Pe,fe))}}class De{constructor(fe,Ve){this.scheduler=fe,this.delay=Ve}call(fe,Ve){return new re(Ve,this.delay,this.scheduler).subscribe(fe)}}},4087:(et,Ne,L)=>{"use strict";L.d(Ne,{r:()=>$});var b=L(7574),ne=L(5319);function $(ye,me){return new b.y(he=>{const Ce=new ne.w;let Ie=0;return Ce.add(me.schedule(function(){Ie!==ye.length?(he.next(ye[Ie++]),he.closed||Ce.add(this.schedule())):he.complete()})),Ce})}},6465:(et,Ne,L)=>{"use strict";L.d(Ne,{o:()=>$});var b=L(5319);class ne extends b.w{constructor(me,he){super()}schedule(me,he=0){return this}}class $ extends ne{constructor(me,he){super(me,he),this.scheduler=me,this.work=he,this.pending=!1}schedule(me,he=0){if(this.closed)return this;this.state=me;const Ce=this.id,Ie=this.scheduler;return null!=Ce&&(this.id=this.recycleAsyncId(Ie,Ce,he)),this.pending=!0,this.delay=he,this.id=this.id||this.requestAsyncId(Ie,this.id,he),this}requestAsyncId(me,he,Ce=0){return setInterval(me.flush.bind(me,this),Ce)}recycleAsyncId(me,he,Ce=0){if(null!==Ce&&this.delay===Ce&&!1===this.pending)return he;clearInterval(he)}execute(me,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ce=this._execute(me,he);if(Ce)return Ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,he){let Ie,Ce=!1;try{this.work(me)}catch(ie){Ce=!0,Ie=!!ie&&ie||new Error(ie)}if(Ce)return this.unsubscribe(),Ie}_unsubscribe(){const me=this.id,he=this.scheduler,Ce=he.actions,Ie=Ce.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==Ie&&Ce.splice(Ie,1),null!=me&&(this.id=this.recycleAsyncId(he,me,null)),this.delay=null}}},6102:(et,Ne,L)=>{"use strict";L.d(Ne,{v:()=>ne});let b=(()=>{class ${constructor(me,he=$.now){this.SchedulerAction=me,this.now=he}schedule(me,he=0,Ce){return new this.SchedulerAction(this,me).schedule(Ce,he)}}return $.now=()=>Date.now(),$})();class ne extends b{constructor(ye,me=b.now){super(ye,()=>ne.delegate&&ne.delegate!==this?ne.delegate.now():me()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ye,me=0,he){return ne.delegate&&ne.delegate!==this?ne.delegate.schedule(ye,me,he):super.schedule(ye,me,he)}flush(ye){const{actions:me}=this;if(this.active)return void me.push(ye);let he;this.active=!0;do{if(he=ye.execute(ye.state,ye.delay))break}while(ye=me.shift());if(this.active=!1,he){for(;ye=me.shift();)ye.unsubscribe();throw he}}}},3637:(et,Ne,L)=>{"use strict";L.d(Ne,{z:()=>$,P:()=>ye});var b=L(6465);const $=new(L(6102).v)(b.o),ye=$},7771:(et,Ne,L)=>{"use strict";L.d(Ne,{c:()=>he,N:()=>me});var b=L(6465),$=L(6102);const me=new class extends $.v{}(class extends b.o{constructor(Ie,ie){super(Ie,ie),this.scheduler=Ie,this.work=ie}schedule(Ie,ie=0){return ie>0?super.schedule(Ie,ie):(this.delay=ie,this.state=Ie,this.scheduler.flush(this),this)}execute(Ie,ie){return ie>0||this.closed?super.execute(Ie,ie):this._execute(Ie,ie)}requestAsyncId(Ie,ie,k=0){return null!==k&&k>0||null===k&&this.delay>0?super.requestAsyncId(Ie,ie,k):Ie.flush(this)}}),he=me},377:(et,Ne,L)=>{"use strict";L.d(Ne,{hZ:()=>ne});const ne="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(et,Ne,L)=>{"use strict";L.d(Ne,{L:()=>b});const b="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(et,Ne,L)=>{"use strict";L.d(Ne,{b:()=>b});const b="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(et,Ne,L)=>{"use strict";L.d(Ne,{N:()=>ne});const ne=(()=>{function $(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return $.prototype=Object.create(Error.prototype),$})()},4449:(et,Ne,L)=>{"use strict";function b(ne){setTimeout(()=>{throw ne},0)}L.d(Ne,{z:()=>b})},4487:(et,Ne,L)=>{"use strict";function b(ne){return ne}L.d(Ne,{y:()=>b})},9796:(et,Ne,L)=>{"use strict";L.d(Ne,{k:()=>b});const b=Array.isArray||(ne=>ne&&"number"==typeof ne.length)},9489:(et,Ne,L)=>{"use strict";L.d(Ne,{z:()=>b});const b=ne=>ne&&"number"==typeof ne.length&&"function"!=typeof ne},9105:(et,Ne,L)=>{"use strict";function b(ne){return"function"==typeof ne}L.d(Ne,{m:()=>b})},1555:(et,Ne,L)=>{"use strict";function b(ne){return null!==ne&&"object"==typeof ne}L.d(Ne,{K:()=>b})},4072:(et,Ne,L)=>{"use strict";function b(ne){return!!ne&&"function"!=typeof ne.subscribe&&"function"==typeof ne.then}L.d(Ne,{t:()=>b})},4869:(et,Ne,L)=>{"use strict";function b(ne){return ne&&"function"==typeof ne.schedule}L.d(Ne,{K:()=>b})},7444:(et,Ne,L)=>{"use strict";L.d(Ne,{s:()=>H});var b=L(5015),ne=L(4449),ye=L(377),he=L(6554),Ie=L(9489),ie=L(4072),k=L(1555);const H=J=>{if(J&&"function"==typeof J[he.L])return(J=>te=>{const Y=J[he.L]();if("function"!=typeof Y.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Y.subscribe(te)})(J);if((0,Ie.z)(J))return(0,b.V)(J);if((0,ie.t)(J))return(J=>te=>(J.then(Y=>{te.closed||(te.next(Y),te.complete())},Y=>te.error(Y)).then(null,ne.z),te))(J);if(J&&"function"==typeof J[ye.hZ])return(J=>te=>{const Y=J[ye.hZ]();for(;;){let ce;try{ce=Y.next()}catch(re){return te.error(re),te}if(ce.done){te.complete();break}if(te.next(ce.value),te.closed)break}return"function"==typeof Y.return&&te.add(()=>{Y.return&&Y.return()}),te})(J);{const Y=`You provided ${(0,k.K)(J)?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Y)}}},5015:(et,Ne,L)=>{"use strict";L.d(Ne,{V:()=>b});const b=ne=>$=>{for(let ye=0,me=ne.length;ye<me&&!$.closed;ye++)$.next(ne[ye]);$.complete()}},493:(et,Ne,L)=>{"use strict";var b=L(4693);let ne=null;function $(){return ne}const Ce=new b.OlP("DocumentToken");var ae=(()=>((ae=ae||{})[ae.Zero=0]="Zero",ae[ae.One=1]="One",ae[ae.Two=2]="Two",ae[ae.Few=3]="Few",ae[ae.Many=4]="Many",ae[ae.Other=5]="Other",ae))();const Ft=b.kL8;class In{}let bt=(()=>{class i extends In{constructor(r){super(),this.locale=r}getPluralCategory(r,a){switch(Ft(a||this.locale)(r)){case ae.Zero:return"zero";case ae.One:return"one";case ae.Two:return"two";case ae.Few:return"few";case ae.Many:return"many";default:return"other"}}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(b.soG))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac}),i})();class bo{constructor(n,r,a,l){this.$implicit=n,this.ngForOf=r,this.index=a,this.count=l}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Xt=(()=>{class i{constructor(r,a,l){this._viewContainer=r,this._template=a,this._differs=l,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const r=this._ngForOf;if(!this._differ&&r)try{this._differ=this._differs.find(r).create(this.ngForTrackBy)}catch(a){throw new Error(`Cannot find a differ supporting object '${r}' of type '${function(i){return i.name||typeof i}(r)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){const a=[];r.forEachOperation((l,h,m)=>{if(null==l.previousIndex){const E=this._viewContainer.createEmbeddedView(this._template,new bo(null,this._ngForOf,-1,-1),null===m?void 0:m),T=new as(l,E);a.push(T)}else if(null==m)this._viewContainer.remove(null===h?void 0:h);else if(null!==h){const E=this._viewContainer.get(h);this._viewContainer.move(E,m);const T=new as(l,E);a.push(T)}});for(let l=0;l<a.length;l++)this._perViewChange(a[l].view,a[l].record);for(let l=0,h=this._viewContainer.length;l<h;l++){const m=this._viewContainer.get(l);m.context.index=l,m.context.count=h,m.context.ngForOf=this._ngForOf}r.forEachIdentityChange(l=>{this._viewContainer.get(l.currentIndex).context.$implicit=l.item})}_perViewChange(r,a){r.context.$implicit=a.item}static ngTemplateContextGuard(r,a){return!0}}return i.\u0275fac=function(r){return new(r||i)(b.Y36(b.s_b),b.Y36(b.Rgc),b.Y36(b.ZZ4))},i.\u0275dir=b.lG2({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),i})();class as{constructor(n,r){this.record=n,this.view=r}}let _t=(()=>{class i{constructor(r,a){this._viewContainer=r,this._context=new pa,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=a}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){Io("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){Io("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,a){return!0}}return i.\u0275fac=function(r){return new(r||i)(b.Y36(b.s_b),b.Y36(b.Rgc))},i.\u0275dir=b.lG2({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),i})();class pa{constructor(){this.$implicit=null,this.ngIf=null}}function Io(i,n){if(n&&!n.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${(0,b.AaK)(n)}'.`)}let Au=(()=>{class i{constructor(r,a,l){this._ngEl=r,this._differs=a,this._renderer=l,this._ngStyle=null,this._differ=null}set ngStyle(r){this._ngStyle=r,!this._differ&&r&&(this._differ=this._differs.find(r).create())}ngDoCheck(){if(this._differ){const r=this._differ.diff(this._ngStyle);r&&this._applyChanges(r)}}_setStyle(r,a){const[l,h]=r.split(".");null!=(a=null!=a&&h?`${a}${h}`:a)?this._renderer.setStyle(this._ngEl.nativeElement,l,a):this._renderer.removeStyle(this._ngEl.nativeElement,l)}_applyChanges(r){r.forEachRemovedItem(a=>this._setStyle(a.key,null)),r.forEachAddedItem(a=>this._setStyle(a.key,a.currentValue)),r.forEachChangedItem(a=>this._setStyle(a.key,a.currentValue))}}return i.\u0275fac=function(r){return new(r||i)(b.Y36(b.SBq),b.Y36(b.aQg),b.Y36(b.Qsj))},i.\u0275dir=b.lG2({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),i})(),K0=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=b.oAB({type:i}),i.\u0275inj=b.cJS({providers:[{provide:In,useClass:bt}]}),i})();function _a(i){return"server"===i}class va extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var i;i=new va,ne||(ne=i)}onAndCancel(n,r,a){return n.addEventListener(r,a,!1),()=>{n.removeEventListener(r,a,!1)}}dispatchEvent(n,r){n.dispatchEvent(r)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,r){return(r=r||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,r){return"window"===r?window:"document"===r?n:"body"===r?n.body:null}getBaseHref(n){const r=(Fs=Fs||document.querySelector("base"),Fs?Fs.getAttribute("href"):null);return null==r?null:function(i){Pu=Pu||document.createElement("a"),Pu.setAttribute("href",i);const n=Pu.pathname;return"/"===n.charAt(0)?n:`/${n}`}(r)}resetBaseElement(){Fs=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function(i,n){n=encodeURIComponent(n);for(const r of i.split(";")){const a=r.indexOf("="),[l,h]=-1==a?[r,""]:[r.slice(0,a),r.slice(a+1)];if(l.trim()===n)return decodeURIComponent(h)}return null}(document.cookie,n)}}let Pu,Fs=null;const ec=new b.OlP("TRANSITION_ID"),Ea=[{provide:b.ip1,useFactory:function(i,n,r){return()=>{r.get(b.CZH).donePromise.then(()=>{const a=$(),l=n.querySelectorAll(`style[ng-transition="${i}"]`);for(let h=0;h<l.length;h++)a.remove(l[h])})}},deps:[ec,Ce,b.zs3],multi:!0}];class Mu{static init(){(0,b.VLi)(new Mu)}addToWindow(n){b.dqk.getAngularTestability=(a,l=!0)=>{const h=n.findTestabilityInTree(a,l);if(null==h)throw new Error("Could not find testability for element.");return h},b.dqk.getAllAngularTestabilities=()=>n.getAllTestabilities(),b.dqk.getAllAngularRootElements=()=>n.getAllRootElements(),b.dqk.frameworkStabilizers||(b.dqk.frameworkStabilizers=[]),b.dqk.frameworkStabilizers.push(a=>{const l=b.dqk.getAllAngularTestabilities();let h=l.length,m=!1;const E=function(T){m=m||T,h--,0==h&&a(m)};l.forEach(function(T){T.whenStable(E)})})}findTestabilityInTree(n,r,a){if(null==r)return null;const l=n.getTestability(r);return null!=l?l:a?$().isShadowRoot(r)?this.findTestabilityInTree(n,r.host,!0):this.findTestabilityInTree(n,r.parentElement,!0):null}}let nc=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac}),i})();const us=new b.OlP("EventManagerPlugins");let ku=(()=>{class i{constructor(r,a){this._zone=a,this._eventNameToPlugin=new Map,r.forEach(l=>l.manager=this),this._plugins=r.slice().reverse()}addEventListener(r,a,l){return this._findPluginFor(a).addEventListener(r,a,l)}addGlobalEventListener(r,a,l){return this._findPluginFor(a).addGlobalEventListener(r,a,l)}getZone(){return this._zone}_findPluginFor(r){const a=this._eventNameToPlugin.get(r);if(a)return a;const l=this._plugins;for(let h=0;h<l.length;h++){const m=l[h];if(m.supports(r))return this._eventNameToPlugin.set(r,m),m}throw new Error(`No event manager plugin found for event ${r}`)}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(us),b.LFG(b.R0b))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac}),i})();class li{constructor(n){this._doc=n}addGlobalEventListener(n,r,a){const l=$().getGlobalEventTarget(this._doc,n);if(!l)throw new Error(`Unsupported event target ${l} for event ${r}`);return this.addEventListener(l,r,a)}}let rh=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(r){const a=new Set;r.forEach(l=>{this._stylesSet.has(l)||(this._stylesSet.add(l),a.add(l))}),this.onStylesAdded(a)}onStylesAdded(r){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac}),i})(),ls=(()=>{class i extends rh{constructor(r){super(),this._doc=r,this._hostNodes=new Map,this._hostNodes.set(r.head,[])}_addStylesToHost(r,a,l){r.forEach(h=>{const m=this._doc.createElement("style");m.textContent=h,l.push(a.appendChild(m))})}addHost(r){const a=[];this._addStylesToHost(this._stylesSet,r,a),this._hostNodes.set(r,a)}removeHost(r){const a=this._hostNodes.get(r);a&&a.forEach(ct),this._hostNodes.delete(r)}onStylesAdded(r){this._hostNodes.forEach((a,l)=>{this._addStylesToHost(r,l,a)})}ngOnDestroy(){this._hostNodes.forEach(r=>r.forEach(ct))}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(Ce))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac}),i})();function ct(i){$().remove(i)}const rc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ih=/%COMP%/g;function Tt(i,n,r){for(let a=0;a<n.length;a++){let l=n[a];Array.isArray(l)?Tt(i,l,r):(l=l.replace(ih,i),r.push(l))}return r}function oh(i){return n=>{if("__ngUnwrap__"===n)return i;!1===i(n)&&(n.preventDefault(),n.returnValue=!1)}}let Fu=(()=>{class i{constructor(r,a,l){this.eventManager=r,this.sharedStylesHost=a,this.appId=l,this.rendererByCompId=new Map,this.defaultRenderer=new cs(r)}createRenderer(r,a){if(!r||!a)return this.defaultRenderer;switch(a.encapsulation){case b.ifc.Emulated:{let l=this.rendererByCompId.get(a.id);return l||(l=new Lp(this.eventManager,this.sharedStylesHost,a,this.appId),this.rendererByCompId.set(a.id,l)),l.applyToHost(r),l}case 1:case b.ifc.ShadowDom:return new Jy(this.eventManager,this.sharedStylesHost,r,a);default:if(!this.rendererByCompId.has(a.id)){const l=Tt(a.id,a.styles,[]);this.sharedStylesHost.addStyles(l),this.rendererByCompId.set(a.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(ku),b.LFG(ls),b.LFG(b.AFp))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac}),i})();class cs{constructor(n){this.eventManager=n,this.data=Object.create(null)}destroy(){}createElement(n,r){return r?document.createElementNS(rc[r]||r,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,r){n.appendChild(r)}insertBefore(n,r,a){n&&n.insertBefore(r,a)}removeChild(n,r){n&&n.removeChild(r)}selectRootElement(n,r){let a="string"==typeof n?document.querySelector(n):n;if(!a)throw new Error(`The selector "${n}" did not match any elements`);return r||(a.textContent=""),a}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,r,a,l){if(l){r=l+":"+r;const h=rc[l];h?n.setAttributeNS(h,r,a):n.setAttribute(r,a)}else n.setAttribute(r,a)}removeAttribute(n,r,a){if(a){const l=rc[a];l?n.removeAttributeNS(l,r):n.removeAttribute(`${a}:${r}`)}else n.removeAttribute(r)}addClass(n,r){n.classList.add(r)}removeClass(n,r){n.classList.remove(r)}setStyle(n,r,a,l){l&(b.JOm.DashCase|b.JOm.Important)?n.style.setProperty(r,a,l&b.JOm.Important?"important":""):n.style[r]=a}removeStyle(n,r,a){a&b.JOm.DashCase?n.style.removeProperty(r):n.style[r]=""}setProperty(n,r,a){n[r]=a}setValue(n,r){n.nodeValue=r}listen(n,r,a){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,r,oh(a)):this.eventManager.addEventListener(n,r,oh(a))}}class Lp extends cs{constructor(n,r,a,l){super(n),this.component=a;const h=Tt(l+"-"+a.id,a.styles,[]);r.addStyles(h),this.contentAttr="_ngcontent-%COMP%".replace(ih,l+"-"+a.id),this.hostAttr=function(i){return"_nghost-%COMP%".replace(ih,i)}(l+"-"+a.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,r){const a=super.createElement(n,r);return super.setAttribute(a,this.contentAttr,""),a}}class Jy extends cs{constructor(n,r,a,l){super(n),this.sharedStylesHost=r,this.hostEl=a,this.shadowRoot=a.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const h=Tt(l.id,l.styles,[]);for(let m=0;m<h.length;m++){const E=document.createElement("style");E.textContent=h[m],this.shadowRoot.appendChild(E)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,r){return super.appendChild(this.nodeOrShadowRoot(n),r)}insertBefore(n,r,a){return super.insertBefore(this.nodeOrShadowRoot(n),r,a)}removeChild(n,r){return super.removeChild(this.nodeOrShadowRoot(n),r)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let Da=(()=>{class i extends li{constructor(r){super(r)}supports(r){return!0}addEventListener(r,a,l){return r.addEventListener(a,l,!1),()=>this.removeEventListener(r,a,l)}removeEventListener(r,a,l){return r.removeEventListener(a,l)}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(Ce))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac}),i})();const Up=["alt","control","meta","shift"],uh={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Bp={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},t_={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let n_=(()=>{class i extends li{constructor(r){super(r)}supports(r){return null!=i.parseEventName(r)}addEventListener(r,a,l){const h=i.parseEventName(a),m=i.eventCallback(h.fullKey,l,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>$().onAndCancel(r,h.domEventName,m))}static parseEventName(r){const a=r.toLowerCase().split("."),l=a.shift();if(0===a.length||"keydown"!==l&&"keyup"!==l)return null;const h=i._normalizeKey(a.pop());let m="";if(Up.forEach(T=>{const S=a.indexOf(T);S>-1&&(a.splice(S,1),m+=T+".")}),m+=h,0!=a.length||0===h.length)return null;const E={};return E.domEventName=l,E.fullKey=m,E}static getEventFullKey(r){let a="",l=function(i){let n=i.key;if(null==n){if(n=i.keyIdentifier,null==n)return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),3===i.location&&Bp.hasOwnProperty(n)&&(n=Bp[n]))}return uh[n]||n}(r);return l=l.toLowerCase()," "===l?l="space":"."===l&&(l="dot"),Up.forEach(h=>{h!=l&&t_[h](r)&&(a+=h+".")}),a+=l,a}static eventCallback(r,a,l){return h=>{i.getEventFullKey(h)===r&&l.runGuarded(()=>a(h))}}static _normalizeKey(r){switch(r){case"esc":return"escape";default:return r}}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(Ce))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac}),i})();const i_=(0,b.eFA)(b._c5,"browser",[{provide:b.Lbi,useValue:"browser"},{provide:b.g9A,useValue:function(){va.makeCurrent(),Mu.init()},multi:!0},{provide:Ce,useFactory:function(){return(0,b.RDi)(document),document},deps:[]}]),s_=[[],{provide:b.zSh,useValue:"root"},{provide:b.qLn,useFactory:function(){return new b.qLn},deps:[]},{provide:us,useClass:Da,multi:!0,deps:[Ce,b.R0b,b.Lbi]},{provide:us,useClass:n_,multi:!0,deps:[Ce]},[],{provide:Fu,useClass:Fu,deps:[ku,ls,b.AFp]},{provide:b.FYo,useExisting:Fu},{provide:rh,useExisting:ls},{provide:ls,useClass:ls,deps:[Ce]},{provide:b.dDg,useClass:b.dDg,deps:[b.R0b]},{provide:ku,useClass:ku,deps:[us,b.R0b]},{provide:class{},useClass:nc,deps:[]},[]];let Sa=(()=>{class i{constructor(r){if(r)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(r){return{ngModule:i,providers:[{provide:b.AFp,useValue:r.appId},{provide:ec,useExisting:b.AFp},Ea]}}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(i,12))},i.\u0275mod=b.oAB({type:i}),i.\u0275inj=b.cJS({providers:s_,imports:[K0,b.hGG]}),i})();"undefined"!=typeof window&&window;class xo{}const Er="*";function Ra(i,n){return{type:7,name:i,definitions:n,options:{}}}function Po(i,n=null){return{type:4,styles:n,timings:i}}function hc(i,n=null){return{type:2,steps:i,options:n}}function Si(i){return{type:6,styles:i,offset:null}}function di(i,n,r=null){return{type:1,expr:i,animation:n,options:r}}function fc(i){Promise.resolve(null).then(i)}class Us{constructor(n=0,r=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=n+r}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._onStartFns.push(n)}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){fc(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(a=>a()),r.length=0}}class ph{constructor(n){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=n;let r=0,a=0,l=0;const h=this.players.length;0==h?fc(()=>this._onFinish()):this.players.forEach(m=>{m.onDone(()=>{++r==h&&this._onFinish()}),m.onDestroy(()=>{++a==h&&this._onDestroy()}),m.onStart(()=>{++l==h&&this._onStart()})}),this.totalTime=this.players.reduce((m,E)=>Math.max(m,E.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const r=n*this.totalTime;this.players.forEach(a=>{const l=a.totalTime?Math.min(1,r/a.totalTime):1;a.setPosition(l)})}getPosition(){const n=this.players.reduce((r,a)=>null===r||a.totalTime>r.totalTime?a:r,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(a=>a()),r.length=0}}function ju(){return"undefined"!=typeof window&&void 0!==window.document}function gh(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Ai(i){switch(i.length){case 0:return new Us;case 1:return i[0];default:return new ph(i)}}function xa(i,n,r,a,l={},h={}){const m=[],E=[];let T=-1,S=null;if(a.forEach(R=>{const O=R.offset,V=O==T,q=V&&S||{};Object.keys(R).forEach(Z=>{let ge=Z,Re=R[Z];if("offset"!==Z)switch(ge=n.normalizePropertyName(ge,m),Re){case"!":Re=l[Z];break;case Er:Re=h[Z];break;default:Re=n.normalizeStyleValue(Z,ge,Re,m)}q[ge]=Re}),V||E.push(q),S=q,T=O}),m.length){const R="\n - ";throw new Error(`Unable to animate due to the following errors:${R}${m.join(R)}`)}return E}function Hu(i,n,r,a){switch(n){case"start":i.onStart(()=>a(r&&gc(r,"start",i)));break;case"done":i.onDone(()=>a(r&&gc(r,"done",i)));break;case"destroy":i.onDestroy(()=>a(r&&gc(r,"destroy",i)))}}function gc(i,n,r){const a=r.totalTime,h=mc(i.element,i.triggerName,i.fromState,i.toState,n||i.phaseName,null==a?i.totalTime:a,!!r.disabled),m=i._data;return null!=m&&(h._data=m),h}function mc(i,n,r,a,l="",h=0,m){return{element:i,triggerName:n,fromState:r,toState:a,phaseName:l,totalTime:h,disabled:!!m}}function jn(i,n,r){let a;return i instanceof Map?(a=i.get(n),a||i.set(n,a=r)):(a=i[n],a||(a=i[n]=r)),a}function zp(i){const n=i.indexOf(":");return[i.substring(1,n),i.substr(n+1)]}let $u=(i,n)=>!1,Bs=(i,n)=>!1,Mo=(i,n,r)=>[];const yc=gh();(yc||"undefined"!=typeof Element)&&($u=ju()?(i,n)=>{for(;n&&n!==document.documentElement;){if(n===i)return!0;n=n.parentNode||n.host}return!1}:(i,n)=>i.contains(n),Bs=(()=>{if(yc||Element.prototype.matches)return(i,n)=>i.matches(n);{const i=Element.prototype,n=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector;return n?(r,a)=>n.apply(r,[a]):Bs}})(),Mo=(i,n,r)=>{let a=[];if(r){const l=i.querySelectorAll(n);for(let h=0;h<l.length;h++)a.push(l[h])}else{const l=i.querySelector(n);l&&a.push(l)}return a});let Ma=null,yh=!1;function _h(i){Ma||(Ma=("undefined"!=typeof document?document.body:null)||{},yh=!!Ma.style&&"WebkitAppearance"in Ma.style);let n=!0;return Ma.style&&!function(i){return"ebkit"==i.substring(1,6)}(i)&&(n=i in Ma.style,!n&&yh&&(n="Webkit"+i.charAt(0).toUpperCase()+i.substr(1)in Ma.style)),n}const Oa=Bs,qt=$u,Zp=Mo;function Gu(i){const n={};return Object.keys(i).forEach(r=>{const a=r.replace(/([a-z])([A-Z])/g,"$1-$2");n[a]=i[r]}),n}let Wu=(()=>{class i{validateStyleProperty(r){return _h(r)}matchesElement(r,a){return Oa(r,a)}containsElement(r,a){return qt(r,a)}query(r,a,l){return Zp(r,a,l)}computeStyle(r,a,l){return l||""}animate(r,a,l,h,m,E=[],T){return new Us(l,h)}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac}),i})(),js=(()=>{class i{}return i.NOOP=new Wu,i})();const Yp="ng-enter",zu="ng-leave",Hs="ng-trigger",Ku=".ng-trigger",Cn="ng-animating",Oo=".ng-animating";function qi(i){if("number"==typeof i)return i;const n=i.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:_c(parseFloat(n[1]),n[2])}function _c(i,n){switch(n){case"s":return 1e3*i;default:return i}}function ka(i,n,r){return i.hasOwnProperty("duration")?i:function(i,n,r){let l,h=0,m="";if("string"==typeof i){const E=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===E)return n.push(`The provided timing value "${i}" is invalid.`),{duration:0,delay:0,easing:""};l=_c(parseFloat(E[1]),E[2]);const T=E[3];null!=T&&(h=_c(parseFloat(T),E[4]));const S=E[5];S&&(m=S)}else l=i;if(!r){let E=!1,T=n.length;l<0&&(n.push("Duration values below 0 are not allowed for this animation step."),E=!0),h<0&&(n.push("Delay values below 0 are not allowed for this animation step."),E=!0),E&&n.splice(T,0,`The provided timing value "${i}" is invalid.`)}return{duration:l,delay:h,easing:m}}(i,n,r)}function Qn(i,n={}){return Object.keys(i).forEach(r=>{n[r]=i[r]}),n}function Lr(i,n,r={}){if(n)for(let a in i)r[a]=i[a];else Qn(i,r);return r}function Ni(i,n,r){return r?n+":"+r+";":""}function Qu(i){let n="";for(let r=0;r<i.style.length;r++){const a=i.style.item(r);n+=Ni(0,a,i.style.getPropertyValue(a))}for(const r in i.style)i.style.hasOwnProperty(r)&&!r.startsWith("_")&&(n+=Ni(0,f_(r),i.style[r]));i.setAttribute("style",n)}function fi(i,n,r){i.style&&(Object.keys(n).forEach(a=>{const l=La(a);r&&!r.hasOwnProperty(a)&&(r[a]=i.style[l]),i.style[l]=n[a]}),gh()&&Qu(i))}function ko(i,n){i.style&&(Object.keys(n).forEach(r=>{const a=La(r);i.style[a]=""}),gh()&&Qu(i))}function Fa(i){return Array.isArray(i)?1==i.length?i[0]:hc(i):i}const vc=new RegExp("{{\\s*(.+?)\\s*}}","g");function Vr(i){let n=[];if("string"==typeof i){let r;for(;r=vc.exec(i);)n.push(r[1]);vc.lastIndex=0}return n}function $s(i,n,r){const a=i.toString(),l=a.replace(vc,(h,m)=>{let E=n[m];return n.hasOwnProperty(m)||(r.push(`Please provide a value for the animation param ${m}`),E=""),E.toString()});return l==a?i:l}function ps(i){const n=[];let r=i.next();for(;!r.done;)n.push(r.value),r=i.next();return n}const aw=/-+([a-z0-9])/g;function La(i){return i.replace(aw,(...n)=>n[1].toUpperCase())}function f_(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Jp(i,n){return 0===i||0===n}function Ec(i,n,r){const a=Object.keys(r);if(a.length&&n.length){let h=n[0],m=[];if(a.forEach(E=>{h.hasOwnProperty(E)||m.push(E),h[E]=r[E]}),m.length)for(var l=1;l<n.length;l++){let E=n[l];m.forEach(function(T){E[T]=Yu(i,T)})}}return n}function Kr(i,n,r){switch(n.type){case 7:return i.visitTrigger(n,r);case 0:return i.visitState(n,r);case 1:return i.visitTransition(n,r);case 2:return i.visitSequence(n,r);case 3:return i.visitGroup(n,r);case 4:return i.visitAnimate(n,r);case 5:return i.visitKeyframes(n,r);case 6:return i.visitStyle(n,r);case 8:return i.visitReference(n,r);case 9:return i.visitAnimateChild(n,r);case 10:return i.visitAnimateRef(n,r);case 11:return i.visitQuery(n,r);case 12:return i.visitStagger(n,r);default:throw new Error(`Unable to resolve animation metadata node #${n.type}`)}}function Yu(i,n){return window.getComputedStyle(i)[n]}function Ju(i,n){const r=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(a=>function(i,n,r){if(":"==i[0]){const T=function(i,n){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(r,a)=>parseFloat(a)>parseFloat(r);case":decrement":return(r,a)=>parseFloat(a)<parseFloat(r);default:return n.push(`The transition alias value "${i}" is not supported`),"* => *"}}(i,r);if("function"==typeof T)return void n.push(T);i=T}const a=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==a||a.length<4)return r.push(`The provided transition expression "${i}" is not supported`),n;const l=a[1],h=a[2],m=a[3];n.push(Gs(l,m));"<"==h[0]&&!("*"==l&&"*"==m)&&n.push(Gs(m,l))}(a,r,n)):r.push(i),r}const qs=new Set(["true","1"]),Fo=new Set(["false","0"]);function Gs(i,n){const r=qs.has(i)||Fo.has(i),a=qs.has(n)||Fo.has(n);return(l,h)=>{let m="*"==i||i==l,E="*"==n||n==h;return!m&&r&&"boolean"==typeof l&&(m=l?qs.has(i):Fo.has(i)),!E&&a&&"boolean"==typeof h&&(E=h?qs.has(n):Fo.has(n)),m&&E}}const p_=new RegExp("s*:selfs*,?","g");function wc(i,n,r){return new uw(i).build(n,r)}class uw{constructor(n){this._driver=n}build(n,r){const a=new Ws(r);return this._resetContextStyleTimingState(a),Kr(this,Fa(n),a)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles={},n.collectedStyles[""]={},n.currentTime=0}visitTrigger(n,r){let a=r.queryCount=0,l=r.depCount=0;const h=[],m=[];return"@"==n.name.charAt(0)&&r.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),n.definitions.forEach(E=>{if(this._resetContextStyleTimingState(r),0==E.type){const T=E,S=T.name;S.toString().split(/\s*,\s*/).forEach(R=>{T.name=R,h.push(this.visitState(T,r))}),T.name=S}else if(1==E.type){const T=this.visitTransition(E,r);a+=T.queryCount,l+=T.depCount,m.push(T)}else r.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:n.name,states:h,transitions:m,queryCount:a,depCount:l,options:null}}visitState(n,r){const a=this.visitStyle(n.styles,r),l=n.options&&n.options.params||null;if(a.containsDynamicStyles){const h=new Set,m=l||{};if(a.styles.forEach(E=>{if(an(E)){const T=E;Object.keys(T).forEach(S=>{Vr(T[S]).forEach(R=>{m.hasOwnProperty(R)||h.add(R)})})}}),h.size){const E=ps(h.values());r.errors.push(`state("${n.name}", ...) must define default values for all the following style substitutions: ${E.join(", ")}`)}}return{type:0,name:n.name,style:a,options:l?{params:l}:null}}visitTransition(n,r){r.queryCount=0,r.depCount=0;const a=Kr(this,Fa(n.animation),r);return{type:1,matchers:Ju(n.expr,r.errors),animation:a,queryCount:r.queryCount,depCount:r.depCount,options:Ua(n.options)}}visitSequence(n,r){return{type:2,steps:n.steps.map(a=>Kr(this,a,r)),options:Ua(n.options)}}visitGroup(n,r){const a=r.currentTime;let l=0;const h=n.steps.map(m=>{r.currentTime=a;const E=Kr(this,m,r);return l=Math.max(l,r.currentTime),E});return r.currentTime=l,{type:3,steps:h,options:Ua(n.options)}}visitAnimate(n,r){const a=function(i,n){let r=null;if(i.hasOwnProperty("duration"))r=i;else if("number"==typeof i)return pi(ka(i,n).duration,0,"");const a=i;if(a.split(/\s+/).some(h=>"{"==h.charAt(0)&&"{"==h.charAt(1))){const h=pi(0,0,"");return h.dynamic=!0,h.strValue=a,h}return r=r||ka(a,n),pi(r.duration,r.delay,r.easing)}(n.timings,r.errors);r.currentAnimateTimings=a;let l,h=n.styles?n.styles:Si({});if(5==h.type)l=this.visitKeyframes(h,r);else{let m=n.styles,E=!1;if(!m){E=!0;const S={};a.easing&&(S.easing=a.easing),m=Si(S)}r.currentTime+=a.duration+a.delay;const T=this.visitStyle(m,r);T.isEmptyStep=E,l=T}return r.currentAnimateTimings=null,{type:4,timings:a,style:l,options:null}}visitStyle(n,r){const a=this._makeStyleAst(n,r);return this._validateStyleAst(a,r),a}_makeStyleAst(n,r){const a=[];Array.isArray(n.styles)?n.styles.forEach(m=>{"string"==typeof m?m==Er?a.push(m):r.errors.push(`The provided style string value ${m} is not allowed.`):a.push(m)}):a.push(n.styles);let l=!1,h=null;return a.forEach(m=>{if(an(m)){const E=m,T=E.easing;if(T&&(h=T,delete E.easing),!l)for(let S in E)if(E[S].toString().indexOf("{{")>=0){l=!0;break}}}),{type:6,styles:a,easing:h,offset:n.offset,containsDynamicStyles:l,options:null}}_validateStyleAst(n,r){const a=r.currentAnimateTimings;let l=r.currentTime,h=r.currentTime;a&&h>0&&(h-=a.duration+a.delay),n.styles.forEach(m=>{"string"!=typeof m&&Object.keys(m).forEach(E=>{if(!this._driver.validateStyleProperty(E))return void r.errors.push(`The provided animation property "${E}" is not a supported CSS property for animations`);const T=r.collectedStyles[r.currentQuerySelector],S=T[E];let R=!0;S&&(h!=l&&h>=S.startTime&&l<=S.endTime&&(r.errors.push(`The CSS property "${E}" that exists between the times of "${S.startTime}ms" and "${S.endTime}ms" is also being animated in a parallel animation between the times of "${h}ms" and "${l}ms"`),R=!1),h=S.startTime),R&&(T[E]={startTime:h,endTime:l}),r.options&&function(i,n,r){const a=n.params||{},l=Vr(i);l.length&&l.forEach(h=>{a.hasOwnProperty(h)||r.push(`Unable to resolve the local animation param ${h} in the given list of values`)})}(m[E],r.options,r.errors)})})}visitKeyframes(n,r){const a={type:5,styles:[],options:null};if(!r.currentAnimateTimings)return r.errors.push("keyframes() must be placed inside of a call to animate()"),a;let h=0;const m=[];let E=!1,T=!1,S=0;const R=n.steps.map(We=>{const nt=this._makeStyleAst(We,r);let Ye=null!=nt.offset?nt.offset:function(i){if("string"==typeof i)return null;let n=null;if(Array.isArray(i))i.forEach(r=>{if(an(r)&&r.hasOwnProperty("offset")){const a=r;n=parseFloat(a.offset),delete a.offset}});else if(an(i)&&i.hasOwnProperty("offset")){const r=i;n=parseFloat(r.offset),delete r.offset}return n}(nt.styles),Je=0;return null!=Ye&&(h++,Je=nt.offset=Ye),T=T||Je<0||Je>1,E=E||Je<S,S=Je,m.push(Je),nt});T&&r.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),E&&r.errors.push("Please ensure that all keyframe offsets are in order");const O=n.steps.length;let V=0;h>0&&h<O?r.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==h&&(V=1/(O-1));const q=O-1,Z=r.currentTime,ge=r.currentAnimateTimings,Re=ge.duration;return R.forEach((We,nt)=>{const Ye=V>0?nt==q?1:V*nt:m[nt],Je=Ye*Re;r.currentTime=Z+ge.delay+Je,ge.duration=Je,this._validateStyleAst(We,r),We.offset=Ye,a.styles.push(We)}),a}visitReference(n,r){return{type:8,animation:Kr(this,Fa(n.animation),r),options:Ua(n.options)}}visitAnimateChild(n,r){return r.depCount++,{type:9,options:Ua(n.options)}}visitAnimateRef(n,r){return{type:10,animation:this.visitReference(n.animation,r),options:Ua(n.options)}}visitQuery(n,r){const a=r.currentQuerySelector,l=n.options||{};r.queryCount++,r.currentQuery=n;const[h,m]=function(i){const n=!!i.split(/\s*,\s*/).find(r=>":self"==r);return n&&(i=i.replace(p_,"")),[i=i.replace(/@\*/g,Ku).replace(/@\w+/g,r=>Ku+"-"+r.substr(1)).replace(/:animating/g,Oo),n]}(n.selector);r.currentQuerySelector=a.length?a+" "+h:h,jn(r.collectedStyles,r.currentQuerySelector,{});const E=Kr(this,Fa(n.animation),r);return r.currentQuery=null,r.currentQuerySelector=a,{type:11,selector:h,limit:l.limit||0,optional:!!l.optional,includeSelf:m,animation:E,originalSelector:n.selector,options:Ua(n.options)}}visitStagger(n,r){r.currentQuery||r.errors.push("stagger() can only be used inside of query()");const a="full"===n.timings?{duration:0,delay:0,easing:"full"}:ka(n.timings,r.errors,!0);return{type:12,animation:Kr(this,Fa(n.animation),r),timings:a,options:null}}}class Ws{constructor(n){this.errors=n,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function an(i){return!Array.isArray(i)&&"object"==typeof i}function Ua(i){return i?(i=Qn(i)).params&&(i.params=function(i){return i?Qn(i):null}(i.params)):i={},i}function pi(i,n,r){return{duration:i,delay:n,easing:r}}function Lo(i,n,r,a,l,h,m=null,E=!1){return{type:1,element:i,keyframes:n,preStyleProps:r,postStyleProps:a,duration:l,delay:h,totalTime:l+h,easing:m,subTimeline:E}}class bc{constructor(){this._map=new Map}consume(n){let r=this._map.get(n);return r?this._map.delete(n):r=[],r}append(n,r){let a=this._map.get(n);a||this._map.set(n,a=[]),a.push(...r)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const lw=new RegExp(":enter","g"),gs=new RegExp(":leave","g");function Ba(i,n,r,a,l,h={},m={},E,T,S=[]){return(new ms).buildKeyframes(i,n,r,a,l,h,m,E,T,S)}class ms{buildKeyframes(n,r,a,l,h,m,E,T,S,R=[]){S=S||new bc;const O=new Dc(n,r,S,l,h,R,[]);O.options=T,O.currentTimeline.setStyles([m],null,O.errors,T),Kr(this,a,O);const V=O.timelines.filter(q=>q.containsAnimation());if(V.length&&Object.keys(E).length){const q=V[V.length-1];q.allowOnlyTimelineStyles()||q.setStyles([E],null,O.errors,T)}return V.length?V.map(q=>q.buildKeyframes()):[Lo(r,[],[],[],0,0,"",!1)]}visitTrigger(n,r){}visitState(n,r){}visitTransition(n,r){}visitAnimateChild(n,r){const a=r.subInstructions.consume(r.element);if(a){const l=r.createSubContext(n.options),h=r.currentTimeline.currentTime,m=this._visitSubInstructions(a,l,l.options);h!=m&&r.transformIntoNewTimeline(m)}r.previousNode=n}visitAnimateRef(n,r){const a=r.createSubContext(n.options);a.transformIntoNewTimeline(),this.visitReference(n.animation,a),r.transformIntoNewTimeline(a.currentTimeline.currentTime),r.previousNode=n}_visitSubInstructions(n,r,a){let h=r.currentTimeline.currentTime;const m=null!=a.duration?qi(a.duration):null,E=null!=a.delay?qi(a.delay):null;return 0!==m&&n.forEach(T=>{const S=r.appendInstructionToTimeline(T,m,E);h=Math.max(h,S.duration+S.delay)}),h}visitReference(n,r){r.updateOptions(n.options,!0),Kr(this,n.animation,r),r.previousNode=n}visitSequence(n,r){const a=r.subContextCount;let l=r;const h=n.options;if(h&&(h.params||h.delay)&&(l=r.createSubContext(h),l.transformIntoNewTimeline(),null!=h.delay)){6==l.previousNode.type&&(l.currentTimeline.snapshotCurrentStyles(),l.previousNode=Ic);const m=qi(h.delay);l.delayNextStep(m)}n.steps.length&&(n.steps.forEach(m=>Kr(this,m,l)),l.currentTimeline.applyStylesToKeyframe(),l.subContextCount>a&&l.transformIntoNewTimeline()),r.previousNode=n}visitGroup(n,r){const a=[];let l=r.currentTimeline.currentTime;const h=n.options&&n.options.delay?qi(n.options.delay):0;n.steps.forEach(m=>{const E=r.createSubContext(n.options);h&&E.delayNextStep(h),Kr(this,m,E),l=Math.max(l,E.currentTimeline.currentTime),a.push(E.currentTimeline)}),a.forEach(m=>r.currentTimeline.mergeTimelineCollectedStyles(m)),r.transformIntoNewTimeline(l),r.previousNode=n}_visitTiming(n,r){if(n.dynamic){const a=n.strValue;return ka(r.params?$s(a,r.params,r.errors):a,r.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,r){const a=r.currentAnimateTimings=this._visitTiming(n.timings,r),l=r.currentTimeline;a.delay&&(r.incrementTime(a.delay),l.snapshotCurrentStyles());const h=n.style;5==h.type?this.visitKeyframes(h,r):(r.incrementTime(a.duration),this.visitStyle(h,r),l.applyStylesToKeyframe()),r.currentAnimateTimings=null,r.previousNode=n}visitStyle(n,r){const a=r.currentTimeline,l=r.currentAnimateTimings;!l&&a.getCurrentStyleProperties().length&&a.forwardFrame();const h=l&&l.easing||n.easing;n.isEmptyStep?a.applyEmptyStep(h):a.setStyles(n.styles,h,r.errors,r.options),r.previousNode=n}visitKeyframes(n,r){const a=r.currentAnimateTimings,l=r.currentTimeline.duration,h=a.duration,E=r.createSubContext().currentTimeline;E.easing=a.easing,n.styles.forEach(T=>{E.forwardTime((T.offset||0)*h),E.setStyles(T.styles,T.easing,r.errors,r.options),E.applyStylesToKeyframe()}),r.currentTimeline.mergeTimelineCollectedStyles(E),r.transformIntoNewTimeline(l+h),r.previousNode=n}visitQuery(n,r){const a=r.currentTimeline.currentTime,l=n.options||{},h=l.delay?qi(l.delay):0;h&&(6===r.previousNode.type||0==a&&r.currentTimeline.getCurrentStyleProperties().length)&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Ic);let m=a;const E=r.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!l.optional,r.errors);r.currentQueryTotal=E.length;let T=null;E.forEach((S,R)=>{r.currentQueryIndex=R;const O=r.createSubContext(n.options,S);h&&O.delayNextStep(h),S===r.element&&(T=O.currentTimeline),Kr(this,n.animation,O),O.currentTimeline.applyStylesToKeyframe(),m=Math.max(m,O.currentTimeline.currentTime)}),r.currentQueryIndex=0,r.currentQueryTotal=0,r.transformIntoNewTimeline(m),T&&(r.currentTimeline.mergeTimelineCollectedStyles(T),r.currentTimeline.snapshotCurrentStyles()),r.previousNode=n}visitStagger(n,r){const a=r.parentContext,l=r.currentTimeline,h=n.timings,m=Math.abs(h.duration),E=m*(r.currentQueryTotal-1);let T=m*r.currentQueryIndex;switch(h.duration<0?"reverse":h.easing){case"reverse":T=E-T;break;case"full":T=a.currentStaggerTime}const R=r.currentTimeline;T&&R.delayNextStep(T);const O=R.currentTime;Kr(this,n.animation,r),r.previousNode=n,a.currentStaggerTime=l.currentTime-O+(l.startTime-a.currentTimeline.startTime)}}const Ic={};class Dc{constructor(n,r,a,l,h,m,E,T){this._driver=n,this.element=r,this.subInstructions=a,this._enterClassName=l,this._leaveClassName=h,this.errors=m,this.timelines=E,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ic,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=T||new ja(this._driver,r,0),E.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,r){if(!n)return;const a=n;let l=this.options;null!=a.duration&&(l.duration=qi(a.duration)),null!=a.delay&&(l.delay=qi(a.delay));const h=a.params;if(h){let m=l.params;m||(m=this.options.params={}),Object.keys(h).forEach(E=>{(!r||!m.hasOwnProperty(E))&&(m[E]=$s(h[E],m,this.errors))})}}_copyOptions(){const n={};if(this.options){const r=this.options.params;if(r){const a=n.params={};Object.keys(r).forEach(l=>{a[l]=r[l]})}}return n}createSubContext(n=null,r,a){const l=r||this.element,h=new Dc(this._driver,l,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(l,a||0));return h.previousNode=this.previousNode,h.currentAnimateTimings=this.currentAnimateTimings,h.options=this._copyOptions(),h.updateOptions(n),h.currentQueryIndex=this.currentQueryIndex,h.currentQueryTotal=this.currentQueryTotal,h.parentContext=this,this.subContextCount++,h}transformIntoNewTimeline(n){return this.previousNode=Ic,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,r,a){const l={duration:null!=r?r:n.duration,delay:this.currentTimeline.currentTime+(null!=a?a:0)+n.delay,easing:""},h=new Tc(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,l,n.stretchStartingKeyframe);return this.timelines.push(h),l}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,r,a,l,h,m){let E=[];if(l&&E.push(this.element),n.length>0){n=(n=n.replace(lw,"."+this._enterClassName)).replace(gs,"."+this._leaveClassName);let S=this._driver.query(this.element,n,1!=a);0!==a&&(S=a<0?S.slice(S.length+a,S.length):S.slice(0,a)),E.push(...S)}return!h&&0==E.length&&m.push(`\`query("${r}")\` returned zero elements. (Use \`query("${r}", { optional: true })\` if you wish to allow this.)`),E}}class ja{constructor(n,r,a,l){this._driver=n,this.element=r,this.startTime=a,this._elementTimelineStylesLookup=l,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(r),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(r,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const r=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||r?(this.forwardTime(this.currentTime+n),r&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,r){return this.applyStylesToKeyframe(),new ja(this._driver,n,r||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,r){this._localTimelineStyles[n]=r,this._globalTimelineStyles[n]=r,this._styleSummary[n]={time:this.currentTime,value:r}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&(this._previousKeyframe.easing=n),Object.keys(this._globalTimelineStyles).forEach(r=>{this._backFill[r]=this._globalTimelineStyles[r]||Er,this._currentKeyframe[r]=Er}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,r,a,l){r&&(this._previousKeyframe.easing=r);const h=l&&l.params||{},m=function(i,n){const r={};let a;return i.forEach(l=>{"*"===l?(a=a||Object.keys(n),a.forEach(h=>{r[h]=Er})):Lr(l,!1,r)}),r}(n,this._globalTimelineStyles);Object.keys(m).forEach(E=>{const T=$s(m[E],h,a);this._pendingStyles[E]=T,this._localTimelineStyles.hasOwnProperty(E)||(this._backFill[E]=this._globalTimelineStyles.hasOwnProperty(E)?this._globalTimelineStyles[E]:Er),this._updateStyle(E,T)})}applyStylesToKeyframe(){const n=this._pendingStyles,r=Object.keys(n);0!=r.length&&(this._pendingStyles={},r.forEach(a=>{this._currentKeyframe[a]=n[a]}),Object.keys(this._localTimelineStyles).forEach(a=>{this._currentKeyframe.hasOwnProperty(a)||(this._currentKeyframe[a]=this._localTimelineStyles[a])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(n=>{const r=this._localTimelineStyles[n];this._pendingStyles[n]=r,this._updateStyle(n,r)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let r in this._currentKeyframe)n.push(r);return n}mergeTimelineCollectedStyles(n){Object.keys(n._styleSummary).forEach(r=>{const a=this._styleSummary[r],l=n._styleSummary[r];(!a||l.time>a.time)&&this._updateStyle(r,l.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,r=new Set,a=1===this._keyframes.size&&0===this.duration;let l=[];this._keyframes.forEach((E,T)=>{const S=Lr(E,!0);Object.keys(S).forEach(R=>{const O=S[R];"!"==O?n.add(R):O==Er&&r.add(R)}),a||(S.offset=T/this.duration),l.push(S)});const h=n.size?ps(n.values()):[],m=r.size?ps(r.values()):[];if(a){const E=l[0],T=Qn(E);E.offset=0,T.offset=1,l=[E,T]}return Lo(this.element,l,h,m,this.duration,this.startTime,this.easing,!1)}}class Tc extends ja{constructor(n,r,a,l,h,m,E=!1){super(n,r,m.delay),this.keyframes=a,this.preStyleProps=l,this.postStyleProps=h,this._stretchStartingKeyframe=E,this.timings={duration:m.duration,delay:m.delay,easing:m.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:r,duration:a,easing:l}=this.timings;if(this._stretchStartingKeyframe&&r){const h=[],m=a+r,E=r/m,T=Lr(n[0],!1);T.offset=0,h.push(T);const S=Lr(n[0],!1);S.offset=bh(E),h.push(S);const R=n.length-1;for(let O=1;O<=R;O++){let V=Lr(n[O],!1);V.offset=bh((r+V.offset*a)/m),h.push(V)}a=m,r=0,l="",n=h}return Lo(this.element,n,this.preStyleProps,this.postStyleProps,a,r,l,!0)}}function bh(i,n=3){const r=Math.pow(10,n-1);return Math.round(i*r)/r}class zs{}class m_ extends zs{normalizePropertyName(n,r){return La(n)}normalizeStyleValue(n,r,a,l){let h="";const m=a.toString().trim();if(rg[r]&&0!==a&&"0"!==a)if("number"==typeof a)h="px";else{const E=a.match(/^[+-]?[\d\.]+([a-z]*)$/);E&&0==E[1].length&&l.push(`Please provide a CSS unit value for ${n}:${a}`)}return m+h}}const rg=(()=>function(i){const n={};return i.forEach(r=>n[r]=!0),n}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function __(i,n,r,a,l,h,m,E,T,S,R,O,V){return{type:0,element:i,triggerName:n,isRemovalTransition:l,fromState:r,fromStyles:h,toState:a,toStyles:m,timelines:E,queriedElements:T,preStyleProps:S,postStyleProps:R,totalTime:O,errors:V}}const Sc={};class ig{constructor(n,r,a){this._triggerName=n,this.ast=r,this._stateStyles=a}match(n,r,a,l){return function(i,n,r,a,l){return i.some(h=>h(n,r,a,l))}(this.ast.matchers,n,r,a,l)}buildStyles(n,r,a){const l=this._stateStyles["*"],h=this._stateStyles[n],m=l?l.buildStyles(r,a):{};return h?h.buildStyles(r,a):m}build(n,r,a,l,h,m,E,T,S,R){const O=[],V=this.ast.options&&this.ast.options.params||Sc,Z=this.buildStyles(a,E&&E.params||Sc,O),ge=T&&T.params||Sc,Re=this.buildStyles(l,ge,O),We=new Set,nt=new Map,Ye=new Map,Je="void"===l,$t={params:Object.assign(Object.assign({},V),ge)},Un=R?[]:Ba(n,r,this.ast.animation,h,m,Z,Re,$t,S,O);let fr=0;if(Un.forEach(s=>{fr=Math.max(s.duration+s.delay,fr)}),O.length)return __(r,this._triggerName,a,l,Je,Z,Re,[],[],nt,Ye,fr,O);Un.forEach(s=>{const u=s.element,c=jn(nt,u,{});s.preStyleProps.forEach(f=>c[f]=!0);const d=jn(Ye,u,{});s.postStyleProps.forEach(f=>d[f]=!0),u!==r&&We.add(u)});const o=ps(We.values());return __(r,this._triggerName,a,l,Je,Z,Re,Un,o,nt,Ye,fr)}}class Ac{constructor(n,r,a){this.styles=n,this.defaultParams=r,this.normalizer=a}buildStyles(n,r){const a={},l=Qn(this.defaultParams);return Object.keys(n).forEach(h=>{const m=n[h];null!=m&&(l[h]=m)}),this.styles.styles.forEach(h=>{if("string"!=typeof h){const m=h;Object.keys(m).forEach(E=>{let T=m[E];T.length>1&&(T=$s(T,l,r));const S=this.normalizer.normalizePropertyName(E,r);T=this.normalizer.normalizeStyleValue(E,S,T,r),a[S]=T})}}),a}}class Ha{constructor(n,r,a){this.name=n,this.ast=r,this._normalizer=a,this.transitionFactories=[],this.states={},r.states.forEach(l=>{this.states[l.name]=new Ac(l.style,l.options&&l.options.params||{},a)}),sg(this.states,"true","1"),sg(this.states,"false","0"),r.transitions.forEach(l=>{this.transitionFactories.push(new ig(n,l,this.states))}),this.fallbackTransition=function(i,n,r){return new ig(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(m,E)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,r,a,l){return this.transitionFactories.find(m=>m.match(n,r,a,l))||null}matchStyles(n,r,a){return this.fallbackTransition.buildStyles(n,r,a)}}function sg(i,n,r){i.hasOwnProperty(n)?i.hasOwnProperty(r)||(i[r]=i[n]):i.hasOwnProperty(r)&&(i[n]=i[r])}const dw=new bc;class Ch{constructor(n,r,a){this.bodyNode=n,this._driver=r,this._normalizer=a,this._animations={},this._playersById={},this.players=[]}register(n,r){const a=[],l=wc(this._driver,r,a);if(a.length)throw new Error(`Unable to build the animation due to the following errors: ${a.join("\n")}`);this._animations[n]=l}_buildPlayer(n,r,a){const l=n.element,h=xa(0,this._normalizer,0,n.keyframes,r,a);return this._driver.animate(l,h,n.duration,n.delay,n.easing,[],!0)}create(n,r,a={}){const l=[],h=this._animations[n];let m;const E=new Map;if(h?(m=Ba(this._driver,r,h,Yp,zu,{},{},a,dw,l),m.forEach(R=>{const O=jn(E,R.element,{});R.postStyleProps.forEach(V=>O[V]=null)})):(l.push("The requested animation doesn't exist or has already been destroyed"),m=[]),l.length)throw new Error(`Unable to create the animation due to the following errors: ${l.join("\n")}`);E.forEach((R,O)=>{Object.keys(R).forEach(V=>{R[V]=this._driver.computeStyle(O,V,Er)})});const S=Ai(m.map(R=>{const O=E.get(R.element);return this._buildPlayer(R,{},O)}));return this._playersById[n]=S,S.onDestroy(()=>this.destroy(n)),this.players.push(S),S}destroy(n){const r=this._getPlayer(n);r.destroy(),delete this._playersById[n];const a=this.players.indexOf(r);a>=0&&this.players.splice(a,1)}_getPlayer(n){const r=this._playersById[n];if(!r)throw new Error(`Unable to find the timeline player referenced by ${n}`);return r}listen(n,r,a,l){const h=mc(r,"","","");return Hu(this._getPlayer(n),a,h,l),()=>{}}command(n,r,a,l){if("register"==a)return void this.register(n,l[0]);if("create"==a)return void this.create(n,r,l[0]||{});const h=this._getPlayer(n);switch(a){case"play":h.play();break;case"pause":h.pause();break;case"reset":h.reset();break;case"restart":h.restart();break;case"finish":h.finish();break;case"init":h.init();break;case"setPosition":h.setPosition(parseFloat(l[0]));break;case"destroy":this.destroy(n)}}}const Gi="ng-animate-queued",Sh="ng-animate-disabled",nl=".ng-animate-disabled",E_=[],ag={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Nh={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},gi="__ng_removed";class xi{constructor(n,r=""){this.namespaceId=r;const a=n&&n.hasOwnProperty("value");if(this.value=null!=(i=a?n.value:n)?i:null,a){const h=Qn(n);delete h.value,this.options=h}else this.options={};var i;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(n){const r=n.params;if(r){const a=this.options.params;Object.keys(r).forEach(l=>{null==a[l]&&(a[l]=r[l])})}}}const mi="void",Nc=new xi(mi);class w_{constructor(n,r,a){this.id=n,this.hostElement=r,this._engine=a,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+n,kn(r,this._hostClassName)}listen(n,r,a,l){if(!this._triggers.hasOwnProperty(r))throw new Error(`Unable to listen on the animation trigger event "${a}" because the animation trigger "${r}" doesn't exist!`);if(null==a||0==a.length)throw new Error(`Unable to listen on the animation trigger "${r}" because the provided event is undefined!`);if("start"!=(i=a)&&"done"!=i)throw new Error(`The provided animation trigger event "${a}" for the animation trigger "${r}" is not supported!`);var i;const h=jn(this._elementListeners,n,[]),m={name:r,phase:a,callback:l};h.push(m);const E=jn(this._engine.statesByElement,n,{});return E.hasOwnProperty(r)||(kn(n,Hs),kn(n,Hs+"-"+r),E[r]=Nc),()=>{this._engine.afterFlush(()=>{const T=h.indexOf(m);T>=0&&h.splice(T,1),this._triggers[r]||delete E[r]})}}register(n,r){return!this._triggers[n]&&(this._triggers[n]=r,!0)}_getTrigger(n){const r=this._triggers[n];if(!r)throw new Error(`The provided animation trigger "${n}" has not been registered!`);return r}trigger(n,r,a,l=!0){const h=this._getTrigger(r),m=new Rh(this.id,r,n);let E=this._engine.statesByElement.get(n);E||(kn(n,Hs),kn(n,Hs+"-"+r),this._engine.statesByElement.set(n,E={}));let T=E[r];const S=new xi(a,this.id);if(!(a&&a.hasOwnProperty("value"))&&T&&S.absorbOptions(T.options),E[r]=S,T||(T=Nc),S.value!==mi&&T.value===S.value){if(!function(i,n){const r=Object.keys(i),a=Object.keys(n);if(r.length!=a.length)return!1;for(let l=0;l<r.length;l++){const h=r[l];if(!n.hasOwnProperty(h)||i[h]!==n[h])return!1}return!0}(T.params,S.params)){const ge=[],Re=h.matchStyles(T.value,T.params,ge),We=h.matchStyles(S.value,S.params,ge);ge.length?this._engine.reportError(ge):this._engine.afterFlush(()=>{ko(n,Re),fi(n,We)})}return}const V=jn(this._engine.playersByElement,n,[]);V.forEach(ge=>{ge.namespaceId==this.id&&ge.triggerName==r&&ge.queued&&ge.destroy()});let q=h.matchTransition(T.value,S.value,n,S.params),Z=!1;if(!q){if(!l)return;q=h.fallbackTransition,Z=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:r,transition:q,fromState:T,toState:S,player:m,isFallbackTransition:Z}),Z||(kn(n,Gi),m.onStart(()=>{Bo(n,Gi)})),m.onDone(()=>{let ge=this.players.indexOf(m);ge>=0&&this.players.splice(ge,1);const Re=this._engine.playersByElement.get(n);if(Re){let We=Re.indexOf(m);We>=0&&Re.splice(We,1)}}),this.players.push(m),V.push(m),m}deregister(n){delete this._triggers[n],this._engine.statesByElement.forEach((r,a)=>{delete r[n]}),this._elementListeners.forEach((r,a)=>{this._elementListeners.set(a,r.filter(l=>l.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const r=this._engine.playersByElement.get(n);r&&(r.forEach(a=>a.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,r){const a=this._engine.driver.query(n,Ku,!0);a.forEach(l=>{if(l[gi])return;const h=this._engine.fetchNamespacesByElement(l);h.size?h.forEach(m=>m.triggerLeaveAnimation(l,r,!1,!0)):this.clearElementCache(l)}),this._engine.afterFlushAnimationsDone(()=>a.forEach(l=>this.clearElementCache(l)))}triggerLeaveAnimation(n,r,a,l){const h=this._engine.statesByElement.get(n);if(h){const m=[];if(Object.keys(h).forEach(E=>{if(this._triggers[E]){const T=this.trigger(n,E,mi,l);T&&m.push(T)}}),m.length)return this._engine.markElementAsRemoved(this.id,n,!0,r),a&&Ai(m).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const r=this._elementListeners.get(n),a=this._engine.statesByElement.get(n);if(r&&a){const l=new Set;r.forEach(h=>{const m=h.name;if(l.has(m))return;l.add(m);const T=this._triggers[m].fallbackTransition,S=a[m]||Nc,R=new xi(mi),O=new Rh(this.id,m,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:m,transition:T,fromState:S,toState:R,player:O,isFallbackTransition:!0})})}}removeNode(n,r){const a=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,r),this.triggerLeaveAnimation(n,r,!0))return;let l=!1;if(a.totalAnimations){const h=a.players.length?a.playersByQueriedElement.get(n):[];if(h&&h.length)l=!0;else{let m=n;for(;m=m.parentNode;)if(a.statesByElement.get(m)){l=!0;break}}}if(this.prepareLeaveAnimationListeners(n),l)a.markElementAsRemoved(this.id,n,!1,r);else{const h=n[gi];(!h||h===ag)&&(a.afterFlush(()=>this.clearElementCache(n)),a.destroyInnerAnimations(n),a._onRemovalComplete(n,r))}}insertNode(n,r){kn(n,this._hostClassName)}drainQueuedTransitions(n){const r=[];return this._queue.forEach(a=>{const l=a.player;if(l.destroyed)return;const h=a.element,m=this._elementListeners.get(h);m&&m.forEach(E=>{if(E.name==a.triggerName){const T=mc(h,a.triggerName,a.fromState.value,a.toState.value);T._data=n,Hu(a.player,E.phase,T,E.callback)}}),l.markedForDestroy?this._engine.afterFlush(()=>{l.destroy()}):r.push(a)}),this._queue=[],r.sort((a,l)=>{const h=a.transition.ast.depCount,m=l.transition.ast.depCount;return 0==h||0==m?h-m:this._engine.driver.containsElement(a.element,l.element)?1:-1})}destroy(n){this.players.forEach(r=>r.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}elementContainsData(n){let r=!1;return this._elementListeners.has(n)&&(r=!0),r=!!this._queue.find(a=>a.element===n)||r,r}}class b_{constructor(n,r,a){this.bodyNode=n,this.driver=r,this._normalizer=a,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(l,h)=>{}}_onRemovalComplete(n,r){this.onRemovalComplete(n,r)}get queuedPlayers(){const n=[];return this._namespaceList.forEach(r=>{r.players.forEach(a=>{a.queued&&n.push(a)})}),n}createNamespace(n,r){const a=new w_(n,r,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,r)?this._balanceNamespaceList(a,r):(this.newHostElements.set(r,a),this.collectEnterElement(r)),this._namespaceLookup[n]=a}_balanceNamespaceList(n,r){const a=this._namespaceList.length-1;if(a>=0){let l=!1;for(let h=a;h>=0;h--)if(this.driver.containsElement(this._namespaceList[h].hostElement,r)){this._namespaceList.splice(h+1,0,n),l=!0;break}l||this._namespaceList.splice(0,0,n)}else this._namespaceList.push(n);return this.namespacesByHostElement.set(r,n),n}register(n,r){let a=this._namespaceLookup[n];return a||(a=this.createNamespace(n,r)),a}registerTrigger(n,r,a){let l=this._namespaceLookup[n];l&&l.register(r,a)&&this.totalAnimations++}destroy(n,r){if(!n)return;const a=this._fetchNamespace(n);this.afterFlush(()=>{this.namespacesByHostElement.delete(a.hostElement),delete this._namespaceLookup[n];const l=this._namespaceList.indexOf(a);l>=0&&this._namespaceList.splice(l,1)}),this.afterFlushAnimationsDone(()=>a.destroy(r))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const r=new Set,a=this.statesByElement.get(n);if(a){const l=Object.keys(a);for(let h=0;h<l.length;h++){const m=a[l[h]].namespaceId;if(m){const E=this._fetchNamespace(m);E&&r.add(E)}}}return r}trigger(n,r,a,l){if(Uo(r)){const h=this._fetchNamespace(n);if(h)return h.trigger(r,a,l),!0}return!1}insertNode(n,r,a,l){if(!Uo(r))return;const h=r[gi];if(h&&h.setForRemoval){h.setForRemoval=!1,h.setForMove=!0;const m=this.collectedLeaveElements.indexOf(r);m>=0&&this.collectedLeaveElements.splice(m,1)}if(n){const m=this._fetchNamespace(n);m&&m.insertNode(r,a)}l&&this.collectEnterElement(r)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,r){r?this.disabledNodes.has(n)||(this.disabledNodes.add(n),kn(n,Sh)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),Bo(n,Sh))}removeNode(n,r,a,l){if(Uo(r)){const h=n?this._fetchNamespace(n):null;if(h?h.removeNode(r,l):this.markElementAsRemoved(n,r,!1,l),a){const m=this.namespacesByHostElement.get(r);m&&m.id!==n&&m.removeNode(r,l)}}else this._onRemovalComplete(r,l)}markElementAsRemoved(n,r,a,l){this.collectedLeaveElements.push(r),r[gi]={namespaceId:n,setForRemoval:l,hasAnimation:a,removedBeforeQueried:!1}}listen(n,r,a,l,h){return Uo(r)?this._fetchNamespace(n).listen(r,a,l,h):()=>{}}_buildInstruction(n,r,a,l,h){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,a,l,n.fromState.options,n.toState.options,r,h)}destroyInnerAnimations(n){let r=this.driver.query(n,Ku,!0);r.forEach(a=>this.destroyActiveAnimationsForElement(a)),0!=this.playersByQueriedElement.size&&(r=this.driver.query(n,Oo,!0),r.forEach(a=>this.finishActiveQueriedAnimationOnElement(a)))}destroyActiveAnimationsForElement(n){const r=this.playersByElement.get(n);r&&r.forEach(a=>{a.queued?a.markedForDestroy=!0:a.destroy()})}finishActiveQueriedAnimationOnElement(n){const r=this.playersByQueriedElement.get(n);r&&r.forEach(a=>a.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return Ai(this.players).onDone(()=>n());n()})}processLeaveNode(n){const r=n[gi];if(r&&r.setForRemoval){if(n[gi]=ag,r.namespaceId){this.destroyInnerAnimations(n);const a=this._fetchNamespace(r.namespaceId);a&&a.clearElementCache(n)}this._onRemovalComplete(n,r.setForRemoval)}this.driver.matchesElement(n,nl)&&this.markElementAsDisabled(n,!1),this.driver.query(n,nl,!0).forEach(a=>{this.markElementAsDisabled(a,!1)})}flush(n=-1){let r=[];if(this.newHostElements.size&&(this.newHostElements.forEach((a,l)=>this._balanceNamespaceList(a,l)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let a=0;a<this.collectedEnterElements.length;a++)kn(this.collectedEnterElements[a],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const a=[];try{r=this._flushAnimations(a,n)}finally{for(let l=0;l<a.length;l++)a[l]()}}else for(let a=0;a<this.collectedLeaveElements.length;a++)this.processLeaveNode(this.collectedLeaveElements[a]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(a=>a()),this._flushFns=[],this._whenQuietFns.length){const a=this._whenQuietFns;this._whenQuietFns=[],r.length?Ai(r).onDone(()=>{a.forEach(l=>l())}):a.forEach(l=>l())}}reportError(n){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${n.join("\n")}`)}_flushAnimations(n,r){const a=new bc,l=[],h=new Map,m=[],E=new Map,T=new Map,S=new Map,R=new Set;this.disabledNodes.forEach(I=>{R.add(I);const C=this.driver.query(I,".ng-animate-queued",!0);for(let A=0;A<C.length;A++)R.add(C[A])});const O=this.bodyNode,V=Array.from(this.statesByElement.keys()),q=xc(V,this.collectedEnterElements),Z=new Map;let ge=0;q.forEach((I,C)=>{const A=Yp+ge++;Z.set(C,A),I.forEach(x=>kn(x,A))});const Re=[],We=new Set,nt=new Set;for(let I=0;I<this.collectedLeaveElements.length;I++){const C=this.collectedLeaveElements[I],A=C[gi];A&&A.setForRemoval&&(Re.push(C),We.add(C),A.hasAnimation?this.driver.query(C,".ng-star-inserted",!0).forEach(x=>We.add(x)):nt.add(C))}const Ye=new Map,Je=xc(V,Array.from(We));Je.forEach((I,C)=>{const A=zu+ge++;Ye.set(C,A),I.forEach(x=>kn(x,A))}),n.push(()=>{q.forEach((I,C)=>{const A=Z.get(C);I.forEach(x=>Bo(x,A))}),Je.forEach((I,C)=>{const A=Ye.get(C);I.forEach(x=>Bo(x,A))}),Re.forEach(I=>{this.processLeaveNode(I)})});const $t=[],Un=[];for(let I=this._namespaceList.length-1;I>=0;I--)this._namespaceList[I].drainQueuedTransitions(r).forEach(A=>{const x=A.player,P=A.element;if($t.push(x),this.collectedEnterElements.length){const de=P[gi];if(de&&de.setForMove)return void x.destroy()}const F=!O||!this.driver.containsElement(O,P),B=Ye.get(P),ee=Z.get(P),z=this._buildInstruction(A,a,ee,B,F);if(z.errors&&z.errors.length)Un.push(z);else{if(F)return x.onStart(()=>ko(P,z.fromStyles)),x.onDestroy(()=>fi(P,z.toStyles)),void l.push(x);if(A.isFallbackTransition)return x.onStart(()=>ko(P,z.fromStyles)),x.onDestroy(()=>fi(P,z.toStyles)),void l.push(x);z.timelines.forEach(de=>de.stretchStartingKeyframe=!0),a.append(P,z.timelines),m.push({instruction:z,player:x,element:P}),z.queriedElements.forEach(de=>jn(E,de,[]).push(x)),z.preStyleProps.forEach((de,ze)=>{const at=Object.keys(de);if(at.length){let wt=T.get(ze);wt||T.set(ze,wt=new Set),at.forEach(Bn=>wt.add(Bn))}}),z.postStyleProps.forEach((de,ze)=>{const at=Object.keys(de);let wt=S.get(ze);wt||S.set(ze,wt=new Set),at.forEach(Bn=>wt.add(Bn))})}});if(Un.length){const I=[];Un.forEach(C=>{I.push(`@${C.triggerName} has failed due to:\n`),C.errors.forEach(A=>I.push(`- ${A}\n`))}),$t.forEach(C=>C.destroy()),this.reportError(I)}const fr=new Map,o=new Map;m.forEach(I=>{const C=I.element;a.has(C)&&(o.set(C,C),this._beforeAnimationBuild(I.player.namespaceId,I.instruction,fr))}),l.forEach(I=>{const C=I.element;this._getPreviousPlayers(C,!1,I.namespaceId,I.triggerName,null).forEach(x=>{jn(fr,C,[]).push(x),x.destroy()})});const s=Re.filter(I=>Ph(I,T,S)),u=new Map;Rc(u,this.driver,nt,S,Er).forEach(I=>{Ph(I,T,S)&&s.push(I)});const d=new Map;q.forEach((I,C)=>{Rc(d,this.driver,new Set(I),T,"!")}),s.forEach(I=>{const C=u.get(I),A=d.get(I);u.set(I,Object.assign(Object.assign({},C),A))});const f=[],_=[],v={};m.forEach(I=>{const{element:C,player:A,instruction:x}=I;if(a.has(C)){if(R.has(C))return A.onDestroy(()=>fi(C,x.toStyles)),A.disabled=!0,A.overrideTotalTime(x.totalTime),void l.push(A);let P=v;if(o.size>1){let B=C;const ee=[];for(;B=B.parentNode;){const z=o.get(B);if(z){P=z;break}ee.push(B)}ee.forEach(z=>o.set(z,P))}const F=this._buildAnimation(A.namespaceId,x,fr,h,d,u);if(A.setRealPlayer(F),P===v)f.push(A);else{const B=this.playersByElement.get(P);B&&B.length&&(A.parentPlayer=Ai(B)),l.push(A)}}else ko(C,x.fromStyles),A.onDestroy(()=>fi(C,x.toStyles)),_.push(A),R.has(C)&&l.push(A)}),_.forEach(I=>{const C=h.get(I.element);if(C&&C.length){const A=Ai(C);I.setRealPlayer(A)}}),l.forEach(I=>{I.parentPlayer?I.syncPlayerEvents(I.parentPlayer):I.destroy()});for(let I=0;I<Re.length;I++){const C=Re[I],A=C[gi];if(Bo(C,zu),A&&A.hasAnimation)continue;let x=[];if(E.size){let F=E.get(C);F&&F.length&&x.push(...F);let B=this.driver.query(C,Oo,!0);for(let ee=0;ee<B.length;ee++){let z=E.get(B[ee]);z&&z.length&&x.push(...z)}}const P=x.filter(F=>!F.destroyed);P.length?Wi(this,C,P):this.processLeaveNode(C)}return Re.length=0,f.forEach(I=>{this.players.push(I),I.onDone(()=>{I.destroy();const C=this.players.indexOf(I);this.players.splice(C,1)}),I.play()}),f}elementContainsData(n,r){let a=!1;const l=r[gi];return l&&l.setForRemoval&&(a=!0),this.playersByElement.has(r)&&(a=!0),this.playersByQueriedElement.has(r)&&(a=!0),this.statesByElement.has(r)&&(a=!0),this._fetchNamespace(n).elementContainsData(r)||a}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,r,a,l,h){let m=[];if(r){const E=this.playersByQueriedElement.get(n);E&&(m=E)}else{const E=this.playersByElement.get(n);if(E){const T=!h||h==mi;E.forEach(S=>{S.queued||!T&&S.triggerName!=l||m.push(S)})}}return(a||l)&&(m=m.filter(E=>!(a&&a!=E.namespaceId||l&&l!=E.triggerName))),m}_beforeAnimationBuild(n,r,a){const h=r.element,m=r.isRemovalTransition?void 0:n,E=r.isRemovalTransition?void 0:r.triggerName;for(const T of r.timelines){const S=T.element,R=S!==h,O=jn(a,S,[]);this._getPreviousPlayers(S,R,m,E,r.toState).forEach(q=>{const Z=q.getRealPlayer();Z.beforeDestroy&&Z.beforeDestroy(),q.destroy(),O.push(q)})}ko(h,r.fromStyles)}_buildAnimation(n,r,a,l,h,m){const E=r.triggerName,T=r.element,S=[],R=new Set,O=new Set,V=r.timelines.map(Z=>{const ge=Z.element;R.add(ge);const Re=ge[gi];if(Re&&Re.removedBeforeQueried)return new Us(Z.duration,Z.delay);const We=ge!==T,nt=function(i){const n=[];return Pc(i,n),n}((a.get(ge)||E_).map(fr=>fr.getRealPlayer())).filter(fr=>!!fr.element&&fr.element===ge),Ye=h.get(ge),Je=m.get(ge),$t=xa(0,this._normalizer,0,Z.keyframes,Ye,Je),Un=this._buildPlayer(Z,$t,nt);if(Z.subTimeline&&l&&O.add(ge),We){const fr=new Rh(n,E,ge);fr.setRealPlayer(Un),S.push(fr)}return Un});S.forEach(Z=>{jn(this.playersByQueriedElement,Z.element,[]).push(Z),Z.onDone(()=>function(i,n,r){let a;if(i instanceof Map){if(a=i.get(n),a){if(a.length){const l=a.indexOf(r);a.splice(l,1)}0==a.length&&i.delete(n)}}else if(a=i[n],a){if(a.length){const l=a.indexOf(r);a.splice(l,1)}0==a.length&&delete i[n]}return a}(this.playersByQueriedElement,Z.element,Z))}),R.forEach(Z=>kn(Z,Cn));const q=Ai(V);return q.onDestroy(()=>{R.forEach(Z=>Bo(Z,Cn)),fi(T,r.toStyles)}),O.forEach(Z=>{jn(l,Z,[]).push(q)}),q}_buildPlayer(n,r,a){return r.length>0?this.driver.animate(n.element,r,n.duration,n.delay,n.easing,a):new Us(n.duration,n.delay)}}class Rh{constructor(n,r,a){this.namespaceId=n,this.triggerName=r,this.element=a,this._player=new Us,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(n){this._containsRealPlayer||(this._player=n,Object.keys(this._queuedCallbacks).forEach(r=>{this._queuedCallbacks[r].forEach(a=>Hu(n,r,void 0,a))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const r=this._player;r.triggerCallback&&n.onStart(()=>r.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,r){jn(this._queuedCallbacks,n,[]).push(r)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const r=this._player;r.triggerCallback&&r.triggerCallback(n)}}function Uo(i){return i&&1===i.nodeType}function lg(i,n){const r=i.style.display;return i.style.display=null!=n?n:"none",r}function Rc(i,n,r,a,l){const h=[];r.forEach(T=>h.push(lg(T)));const m=[];a.forEach((T,S)=>{const R={};T.forEach(O=>{const V=R[O]=n.computeStyle(S,O,l);(!V||0==V.length)&&(S[gi]=Nh,m.push(S))}),i.set(S,R)});let E=0;return r.forEach(T=>lg(T,h[E++])),m}function xc(i,n){const r=new Map;if(i.forEach(E=>r.set(E,[])),0==n.length)return r;const l=new Set(n),h=new Map;function m(E){if(!E)return 1;let T=h.get(E);if(T)return T;const S=E.parentNode;return T=r.has(S)?S:l.has(S)?1:m(S),h.set(E,T),T}return n.forEach(E=>{const T=m(E);1!==T&&r.get(T).push(E)}),r}const xh="$$classes";function kn(i,n){if(i.classList)i.classList.add(n);else{let r=i[xh];r||(r=i[xh]={}),r[n]=!0}}function Bo(i,n){if(i.classList)i.classList.remove(n);else{let r=i[xh];r&&delete r[n]}}function Wi(i,n,r){Ai(r).onDone(()=>i.processLeaveNode(n))}function Pc(i,n){for(let r=0;r<i.length;r++){const a=i[r];a instanceof ph?Pc(a.players,n):n.push(a)}}function Ph(i,n,r){const a=r.get(i);if(!a)return!1;let l=n.get(i);return l?a.forEach(h=>l.add(h)):n.set(i,a),r.delete(i),!0}class Mh{constructor(n,r,a){this.bodyNode=n,this._driver=r,this._normalizer=a,this._triggerCache={},this.onRemovalComplete=(l,h)=>{},this._transitionEngine=new b_(n,r,a),this._timelineEngine=new Ch(n,r,a),this._transitionEngine.onRemovalComplete=(l,h)=>this.onRemovalComplete(l,h)}registerTrigger(n,r,a,l,h){const m=n+"-"+l;let E=this._triggerCache[m];if(!E){const T=[],S=wc(this._driver,h,T);if(T.length)throw new Error(`The animation trigger "${l}" has failed to build due to the following errors:\n - ${T.join("\n - ")}`);E=function(i,n,r){return new Ha(i,n,r)}(l,S,this._normalizer),this._triggerCache[m]=E}this._transitionEngine.registerTrigger(r,l,E)}register(n,r){this._transitionEngine.register(n,r)}destroy(n,r){this._transitionEngine.destroy(n,r)}onInsert(n,r,a,l){this._transitionEngine.insertNode(n,r,a,l)}onRemove(n,r,a,l){this._transitionEngine.removeNode(n,r,l||!1,a)}disableAnimations(n,r){this._transitionEngine.markElementAsDisabled(n,r)}process(n,r,a,l){if("@"==a.charAt(0)){const[h,m]=zp(a);this._timelineEngine.command(h,r,m,l)}else this._transitionEngine.trigger(n,r,a,l)}listen(n,r,a,l,h){if("@"==a.charAt(0)){const[m,E]=zp(a);return this._timelineEngine.listen(m,r,E,h)}return this._transitionEngine.listen(n,r,a,l,h)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function T_(i,n){let r=null,a=null;return Array.isArray(n)&&n.length?(r=il(n[0]),n.length>1&&(a=il(n[n.length-1]))):n&&(r=il(n)),r||a?new Oh(i,r,a):null}let Oh=(()=>{class i{constructor(r,a,l){this._element=r,this._startStyles=a,this._endStyles=l,this._state=0;let h=i.initialStylesByElement.get(r);h||i.initialStylesByElement.set(r,h={}),this._initialStyles=h}start(){this._state<1&&(this._startStyles&&fi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(fi(this._element,this._initialStyles),this._endStyles&&(fi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(ko(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ko(this._element,this._endStyles),this._endStyles=null),fi(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function il(i){let n=null;const r=Object.keys(i);for(let a=0;a<r.length;a++){const l=r[a];Mc(l)&&(n=n||{},n[l]=i[l])}return n}function Mc(i){return"display"===i||"position"===i}const C_="animation",S_="animationend";class hg{constructor(n,r,a,l,h,m,E){this._element=n,this._name=r,this._duration=a,this._delay=l,this._easing=h,this._fillMode=m,this._onDoneFn=E,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=T=>this._handleCallback(T)}apply(){(function(i,n){const r=kc(i,"").trim();let a=0;r.length&&(function(i,n){let r=0;for(let a=0;a<i.length;a++)","===i.charAt(a)&&r++;return r}(r)+1,n=`${r}, ${n}`),zi(i,"",n)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),wr(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Oc(this._element,this._name,"paused")}resume(){Oc(this._element,this._name,"running")}setPosition(n){const r=Lh(this._element,this._name);this._position=n*this._duration,zi(this._element,"Delay",`-${this._position}ms`,r)}getPosition(){return this._position}_handleCallback(n){const r=n._ngTestManualTimestamp||Date.now(),a=1e3*parseFloat(n.elapsedTime.toFixed(3));n.animationName==this._name&&Math.max(r-this._startTime,0)>=this._delay&&a>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),wr(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(i,n){const a=kc(i,"").split(","),l=Ks(a,n);l>=0&&(a.splice(l,1),zi(i,"",a.join(",")))}(this._element,this._name))}}function Oc(i,n,r){zi(i,"PlayState",r,Lh(i,n))}function Lh(i,n){const r=kc(i,"");return r.indexOf(",")>0?Ks(r.split(","),n):Ks([r],n)}function Ks(i,n){for(let r=0;r<i.length;r++)if(i[r].indexOf(n)>=0)return r;return-1}function wr(i,n,r){r?i.removeEventListener(S_,n):i.addEventListener(S_,n)}function zi(i,n,r,a){const l=C_+n;if(null!=a){const h=i.style[l];if(h.length){const m=h.split(",");m[a]=r,r=m.join(",")}}i.style[l]=r}function kc(i,n){return i.style[C_+n]||""}class Bh{constructor(n,r,a,l,h,m,E,T){this.element=n,this.keyframes=r,this.animationName=a,this._duration=l,this._delay=h,this._finalStyles=E,this._specialStyles=T,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=m||"linear",this.totalTime=l+h,this._buildStyler()}onStart(n){this._onStartFns.push(n)}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(n=>n()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(n){this._styler.setPosition(n)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new hg(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(n){const r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(a=>a()),r.length=0}beforeDestroy(){this.init();const n={};if(this.hasStarted()){const r=this._state>=3;Object.keys(this._finalStyles).forEach(a=>{"offset"!=a&&(n[a]=r?this._finalStyles[a]:Yu(this.element,a))})}this.currentSnapshot=n}}class jh extends Us{constructor(n,r){super(),this.element=n,this._startingStyles={},this.__initialized=!1,this._styles=Gu(r)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(n=>{this._startingStyles[n]=this.element.style[n]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(n=>this.element.style.setProperty(n,this._styles[n])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(n=>{const r=this._startingStyles[n];r?this.element.style.setProperty(n,r):this.element.style.removeProperty(n)}),this._startingStyles=null,super.destroy())}}class Hh{constructor(){this._count=0}validateStyleProperty(n){return _h(n)}matchesElement(n,r){return Oa(n,r)}containsElement(n,r){return qt(n,r)}query(n,r,a){return Zp(n,r,a)}computeStyle(n,r,a){return window.getComputedStyle(n)[r]}buildKeyframeElement(n,r,a){a=a.map(E=>Gu(E));let l=`@keyframes ${r} {\n`,h="";a.forEach(E=>{h=" ";const T=parseFloat(E.offset);l+=`${h}${100*T}% {\n`,h+=" ",Object.keys(E).forEach(S=>{const R=E[S];switch(S){case"offset":return;case"easing":return void(R&&(l+=`${h}animation-timing-function: ${R};\n`));default:return void(l+=`${h}${S}: ${R};\n`)}}),l+=`${h}}\n`}),l+="}\n";const m=document.createElement("style");return m.textContent=l,m}animate(n,r,a,l,h,m=[],E){const T=m.filter(Re=>Re instanceof Bh),S={};Jp(a,l)&&T.forEach(Re=>{let We=Re.currentSnapshot;Object.keys(We).forEach(nt=>S[nt]=We[nt])});const R=function(i){let n={};return i&&(Array.isArray(i)?i:[i]).forEach(a=>{Object.keys(a).forEach(l=>{"offset"==l||"easing"==l||(n[l]=a[l])})}),n}(r=Ec(n,r,S));if(0==a)return new jh(n,R);const O="gen_css_kf_"+this._count++,V=this.buildKeyframeElement(n,O,r);(function(i){var n;const r=null===(n=i.getRootNode)||void 0===n?void 0:n.call(i);return"undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot?r:document.head})(n).appendChild(V);const Z=T_(n,r),ge=new Bh(n,r,O,a,l,h,R,Z);return ge.onDestroy(()=>{var i;(i=V).parentNode.removeChild(i)}),ge}}class Hn{constructor(n,r,a,l){this.element=n,this.keyframes=r,this.options=a,this._specialStyles=l,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=a.duration,this._delay=a.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(n,r,a){return n.animate(r,a)}onStart(n){this._onStartFns.push(n)}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(r=>{"offset"!=r&&(n[r]=this._finished?this._finalKeyframe[r]:Yu(this.element,r))}),this.currentSnapshot=n}triggerCallback(n){const r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(a=>a()),r.length=0}}class sl{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test($h().toString()),this._cssKeyframesDriver=new Hh}validateStyleProperty(n){return _h(n)}matchesElement(n,r){return Oa(n,r)}containsElement(n,r){return qt(n,r)}query(n,r,a){return Zp(n,r,a)}computeStyle(n,r,a){return window.getComputedStyle(n)[r]}overrideWebAnimationsSupport(n){this._isNativeImpl=n}animate(n,r,a,l,h,m=[],E){if(!E&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(n,r,a,l,h,m);const R={duration:a,delay:l,fill:0==l?"both":"forwards"};h&&(R.easing=h);const O={},V=m.filter(Z=>Z instanceof Hn);Jp(a,l)&&V.forEach(Z=>{let ge=Z.currentSnapshot;Object.keys(ge).forEach(Re=>O[Re]=ge[Re])});const q=T_(n,r=Ec(n,r=r.map(Z=>Lr(Z,!1)),O));return new Hn(n,r,R,q)}}function $h(){return ju()&&Element.prototype.animate||{}}let tn=(()=>{class i extends xo{constructor(r,a){super(),this._nextAnimationId=0,this._renderer=r.createRenderer(a.body,{id:"0",encapsulation:b.ifc.None,styles:[],data:{animation:[]}})}build(r){const a=this._nextAnimationId.toString();this._nextAnimationId++;const l=Array.isArray(r)?hc(r):r;return qh(this._renderer,null,a,"register",[l]),new _s(a,this._renderer)}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(b.FYo),b.LFG(Ce))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac}),i})();class _s extends class{}{constructor(n,r){super(),this._id=n,this._renderer=r}create(n,r){return new Lc(this._id,n,r||{},this._renderer)}}class Lc{constructor(n,r,a,l){this.id=n,this.element=r,this._renderer=l,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",a)}_listen(n,r){return this._renderer.listen(this.element,`@@${this.id}:${n}`,r)}_command(n,...r){return qh(this._renderer,this.element,this.id,n,r)}onDone(n){this._listen("done",n)}onStart(n){this._listen("start",n)}onDestroy(n){this._listen("destroy",n)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(n){this._command("setPosition",n)}getPosition(){var n,r;return null!==(r=null===(n=this._renderer.engine.players[+this.id])||void 0===n?void 0:n.getPosition())&&void 0!==r?r:0}}function qh(i,n,r,a,l){return i.setProperty(n,`@@${r}:${a}`,l)}const Gh="@.disabled";let x_=(()=>{class i{constructor(r,a,l){this.delegate=r,this.engine=a,this._zone=l,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),a.onRemovalComplete=(h,m)=>{m&&m.parentNode(h)&&m.removeChild(h.parentNode,h)}}createRenderer(r,a){const h=this.delegate.createRenderer(r,a);if(!(r&&a&&a.data&&a.data.animation)){let R=this._rendererCache.get(h);return R||(R=new Wh("",h,this.engine),this._rendererCache.set(h,R)),R}const m=a.id,E=a.id+"-"+this._currentId;this._currentId++,this.engine.register(E,r);const T=R=>{Array.isArray(R)?R.forEach(T):this.engine.registerTrigger(m,E,r,R.name,R)};return a.data.animation.forEach(T),new P_(this,E,h,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(r,a,l){r>=0&&r<this._microtaskId?this._zone.run(()=>a(l)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(h=>{const[m,E]=h;m(E)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([a,l]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(b.FYo),b.LFG(Mh),b.LFG(b.R0b))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac}),i})();class Wh{constructor(n,r,a){this.namespaceId=n,this.delegate=r,this.engine=a,this.destroyNode=this.delegate.destroyNode?l=>r.destroyNode(l):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(n,r){return this.delegate.createElement(n,r)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,r){this.delegate.appendChild(n,r),this.engine.onInsert(this.namespaceId,r,n,!1)}insertBefore(n,r,a,l=!0){this.delegate.insertBefore(n,r,a),this.engine.onInsert(this.namespaceId,r,n,l)}removeChild(n,r,a){this.engine.onRemove(this.namespaceId,r,this.delegate,a)}selectRootElement(n,r){return this.delegate.selectRootElement(n,r)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,r,a,l){this.delegate.setAttribute(n,r,a,l)}removeAttribute(n,r,a){this.delegate.removeAttribute(n,r,a)}addClass(n,r){this.delegate.addClass(n,r)}removeClass(n,r){this.delegate.removeClass(n,r)}setStyle(n,r,a,l){this.delegate.setStyle(n,r,a,l)}removeStyle(n,r,a){this.delegate.removeStyle(n,r,a)}setProperty(n,r,a){"@"==r.charAt(0)&&r==Gh?this.disableAnimations(n,!!a):this.delegate.setProperty(n,r,a)}setValue(n,r){this.delegate.setValue(n,r)}listen(n,r,a){return this.delegate.listen(n,r,a)}disableAnimations(n,r){this.engine.disableAnimations(n,r)}}class P_ extends Wh{constructor(n,r,a,l){super(r,a,l),this.factory=n,this.namespaceId=r}setProperty(n,r,a){"@"==r.charAt(0)?"."==r.charAt(1)&&r==Gh?this.disableAnimations(n,a=void 0===a||!!a):this.engine.process(this.namespaceId,n,r.substr(1),a):this.delegate.setProperty(n,r,a)}listen(n,r,a){if("@"==r.charAt(0)){const l=function(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(n);let h=r.substr(1),m="";return"@"!=h.charAt(0)&&([h,m]=function(i){const n=i.indexOf(".");return[i.substring(0,n),i.substr(n+1)]}(h)),this.engine.listen(this.namespaceId,l,h,m,E=>{this.factory.scheduleListenerCallback(E._data||-1,a,E)})}return this.delegate.listen(n,r,a)}}let y=(()=>{class i extends Mh{constructor(r,a,l){super(r.body,a,l)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(Ce),b.LFG(js),b.LFG(zs))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac}),i})();const W=new b.OlP("AnimationModuleType"),le=[{provide:xo,useClass:tn},{provide:zs,useFactory:function(){return new m_}},{provide:Mh,useClass:y},{provide:b.FYo,useFactory:function(i,n,r){return new x_(i,n,r)},deps:[Fu,Mh,b.R0b]}],ke=[{provide:js,useFactory:function(){return"function"==typeof $h()?new sl:new Hh}},{provide:W,useValue:"BrowserAnimations"},...le],He=[{provide:js,useClass:Wu},{provide:W,useValue:"NoopAnimations"},...le];let st=(()=>{class i{static withConfig(r){return{ngModule:i,providers:r.disableAnimations?He:ke}}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=b.oAB({type:i}),i.\u0275inj=b.cJS({providers:ke,imports:[Sa]}),i})();var Lt=L(8939),Jn=L(3637),jo=L(7574),Pi=L(4402),Mi=L(5917),Gt=L(2993),gg=L(840);function Ur(...i){return(0,gg.J)(1)((0,Mi.of)(...i))}var zh=L(4869);function ol(...i){const n=i[i.length-1];return(0,zh.K)(n)?(i.pop(),r=>Ur(i,r,n)):r=>Ur(i,r)}var vs=L(7393);function Vc(){return i=>i.lift(new mg)}class mg{call(n,r){return r.subscribe(new yg(n))}}class yg extends vs.L{constructor(n){super(n),this.hasPrev=!1}_next(n){let r;this.hasPrev?r=[this.prev,n]:this.hasPrev=!0,this.prev=n,r&&this.destination.next(r)}}var Zr=L(8002);function M_(i,n){let r=!1;return arguments.length>=2&&(r=!0),function(l){return l.lift(new qT(i,n,r))}}class qT{constructor(n,r,a=!1){this.accumulator=n,this.seed=r,this.hasSeed=a}call(n,r){return r.subscribe(new Uc(n,this.accumulator,this.seed,this.hasSeed))}}class Uc extends vs.L{constructor(n,r,a,l){super(n),this.accumulator=r,this._seed=a,this.hasSeed=l,this.index=0}get seed(){return this._seed}set seed(n){this.hasSeed=!0,this._seed=n}_next(n){if(this.hasSeed)return this._tryNext(n);this.seed=n,this.destination.next(n)}_tryNext(n){const r=this.index++;let a;try{a=this.accumulator(this.seed,n,r)}catch(l){this.destination.error(l)}this.seed=a,this.destination.next(a)}}class ON{constructor(n,r){this.compare=n,this.keySelector=r}call(n,r){return r.subscribe(new kN(n,this.compare,this.keySelector))}}class kN extends vs.L{constructor(n,r,a){super(n),this.keySelector=a,this.hasKey=!1,"function"==typeof r&&(this.compare=r)}compare(n,r){return n===r}_next(n){let r;try{const{keySelector:l}=this;r=l?l(n):n}catch(l){return this.destination.error(l)}let a=!1;if(this.hasKey)try{const{compare:l}=this;a=l(this.key,r)}catch(l){return this.destination.error(l)}else this.hasKey=!0;a||(this.key=r,this.destination.next(n))}}function Kh(i,n){return function(a){return a.lift(new FN(i,n))}}class FN{constructor(n,r){this.predicate=n,this.thisArg=r}call(n,r){return r.subscribe(new Qs(n,this.predicate,this.thisArg))}}class Qs extends vs.L{constructor(n,r,a){super(n),this.predicate=r,this.thisArg=a,this.count=0}_next(n){let r;try{r=this.predicate.call(this.thisArg,n,this.count++)}catch(a){return void this.destination.error(a)}r&&this.destination.next(n)}}L(670);var je,_g=L(4486),pe=L(8239),al=L(5452),Ga=L(6034),Wa=L(5601),Et=L(3854),O_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Es={},gw=gw||{},ut=O_||self;function Bc(){}function vg(i){var n=typeof i;return"array"==(n="object"!=n?n:i?Array.isArray(i)?"array":n:"null")||"object"==n&&"number"==typeof i.length}function Zh(i){var n=typeof i;return"object"==n&&null!=i||"function"==n}var F_="closure_uid_"+(1e9*Math.random()>>>0),GT=0;function WT(i,n,r){return i.call.apply(i.bind,arguments)}function zT(i,n,r){if(!i)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var l=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(l,a),i.apply(n,l)}}return function(){return i.apply(n,arguments)}}function br(i,n,r){return(br=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?WT:zT).apply(null,arguments)}function Eg(i,n){var r=Array.prototype.slice.call(arguments,1);return function(){var a=r.slice();return a.push.apply(a,arguments),i.apply(this,a)}}function ir(i,n){function r(){}r.prototype=n.prototype,i.Z=n.prototype,i.prototype=new r,i.prototype.constructor=i,i.Vb=function(a,l,h){for(var m=Array(arguments.length-2),E=2;E<arguments.length;E++)m[E-2]=arguments[E];return n.prototype[l].apply(a,m)}}function Ys(){this.s=this.s,this.o=this.o}var L_={};Ys.prototype.s=!1,Ys.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function(i){return Object.prototype.hasOwnProperty.call(i,F_)&&i[F_]||(i[F_]=++GT)}(this);delete L_[i]}},Ys.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const yw=Array.prototype.indexOf?function(i,n){return Array.prototype.indexOf.call(i,n,void 0)}:function(i,n){if("string"==typeof i)return"string"!=typeof n||1!=n.length?-1:i.indexOf(n,0);for(let r=0;r<i.length;r++)if(r in i&&i[r]===n)return r;return-1},_w=Array.prototype.forEach?function(i,n,r){Array.prototype.forEach.call(i,n,r)}:function(i,n,r){const a=i.length,l="string"==typeof i?i.split(""):i;for(let h=0;h<a;h++)h in l&&n.call(r,l[h],h,i)};function V_(i){return Array.prototype.concat.apply([],arguments)}function Ho(i){const n=i.length;if(0<n){const r=Array(n);for(let a=0;a<n;a++)r[a]=i[a];return r}return[]}function Qh(i){return/^[\s\xa0]*$/.test(i)}var Yr,U_=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Qr(i,n){return-1!=i.indexOf(n)}function jc(i,n){return i<n?-1:i>n?1:0}e:{var B_=ut.navigator;if(B_){var j_=B_.userAgent;if(j_){Yr=j_;break e}}Yr=""}function wg(i,n,r){for(const a in i)n.call(r,i[a],a,i)}function bg(i){const n={};for(const r in i)n[r]=i[r];return n}var H_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Yh(i,n){let r,a;for(let l=1;l<arguments.length;l++){for(r in a=arguments[l],a)i[r]=a[r];for(let h=0;h<H_.length;h++)r=H_[h],Object.prototype.hasOwnProperty.call(a,r)&&(i[r]=a[r])}}function Hc(i){return Hc[" "](i),i}Hc[" "]=Bc;var Dg,i,$_=Qr(Yr,"Opera"),ul=Qr(Yr,"Trident")||Qr(Yr,"MSIE"),Ig=Qr(Yr,"Edge"),ll=Ig||ul,ww=Qr(Yr,"Gecko")&&!(Qr(Yr.toLowerCase(),"webkit")&&!Qr(Yr,"Edge"))&&!(Qr(Yr,"Trident")||Qr(Yr,"MSIE"))&&!Qr(Yr,"Edge"),bw=Qr(Yr.toLowerCase(),"webkit")&&!Qr(Yr,"Edge");function Iw(){var i=ut.document;return i?i.documentMode:void 0}e:{var Tg="",Jh=(i=Yr,ww?/rv:([^\);]+)(\)|;)/.exec(i):Ig?/Edge\/([\d\.]+)/.exec(i):ul?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):bw?/WebKit\/(\S+)/.exec(i):$_?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Jh&&(Tg=Jh?Jh[1]:""),ul){var Cg=Iw();if(null!=Cg&&Cg>parseFloat(Tg)){Dg=String(Cg);break e}}Dg=Tg}var LN={};function Dw(){return n=LN,Object.prototype.hasOwnProperty.call(n,9)?n[9]:n[9]=function(){let i=0;const n=U_(String(Dg)).split("."),r=U_("9").split("."),a=Math.max(n.length,r.length);for(let m=0;0==i&&m<a;m++){var l=n[m]||"",h=r[m]||"";do{if(l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],0==l[0].length&&0==h[0].length)break;i=jc(0==l[1].length?0:parseInt(l[1],10),0==h[1].length?0:parseInt(h[1],10))||jc(0==l[2].length,0==h[2].length)||jc(l[2],h[2]),l=l[3],h=h[3]}while(0==i)}return 0<=i}();var n}var KT=ut.document&&ul&&(Iw()||parseInt(Dg,10))||void 0,ZT=function(){if(!ut.addEventListener||!Object.defineProperty)return!1;var i=!1,n=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ut.addEventListener("test",Bc,n),ut.removeEventListener("test",Bc,n)}catch(r){}return i}();function nn(i,n){this.type=i,this.g=this.target=n,this.defaultPrevented=!1}function Xh(i,n){if(nn.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var r=this.type=i.type,a=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=n,n=i.relatedTarget){if(ww){e:{try{Hc(n.nodeName);var l=!0;break e}catch(h){}l=!1}l||(n=null)}}else"mouseover"==r?n=i.fromElement:"mouseout"==r&&(n=i.toElement);this.relatedTarget=n,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Tw[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Xh.Z.h.call(this)}}nn.prototype.h=function(){this.defaultPrevented=!0},ir(Xh,nn);var Tw={2:"touch",3:"pen",4:"mouse"};Xh.prototype.h=function(){Xh.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var ef="closure_listenable_"+(1e6*Math.random()|0),QT=0;function YT(i,n,r,a,l){this.listener=i,this.proxy=null,this.src=n,this.type=r,this.capture=!!a,this.ia=l,this.key=++QT,this.ca=this.fa=!1}function Sg(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function tf(i){this.src=i,this.g={},this.h=0}function W_(i,n){var r=n.type;if(r in i.g){var h,a=i.g[r],l=yw(a,n);(h=0<=l)&&Array.prototype.splice.call(a,l,1),h&&(Sg(n),0==i.g[r].length&&(delete i.g[r],i.h--))}}function z_(i,n,r,a){for(var l=0;l<i.length;++l){var h=i[l];if(!h.ca&&h.listener==n&&h.capture==!!r&&h.ia==a)return l}return-1}tf.prototype.add=function(i,n,r,a,l){var h=i.toString();(i=this.g[h])||(i=this.g[h]=[],this.h++);var m=z_(i,n,a,l);return-1<m?(n=i[m],r||(n.fa=!1)):((n=new YT(n,this.src,h,!!a,l)).fa=r,i.push(n)),n};var K_="closure_lm_"+(1e6*Math.random()|0),gt={};function Z_(i,n,r,a,l){if(a&&a.once)return Ki(i,n,r,a,l);if(Array.isArray(n)){for(var h=0;h<n.length;h++)Z_(i,n[h],r,a,l);return null}return r=rf(r),i&&i[ef]?i.N(n,r,Zh(a)?!!a.capture:!!a,l):Q_(i,n,r,!1,a,l)}function Q_(i,n,r,a,l,h){if(!n)throw Error("Invalid event type");var m=Zh(l)?!!l.capture:!!l,E=nf(i);if(E||(i[K_]=E=new tf(i)),(r=E.add(n,r,a,m,h)).proxy)return r;if(a=function(){var n=$o;return function i(r){return n.call(i.src,i.listener,r)}}(),r.proxy=a,a.src=i,a.listener=r,i.addEventListener)ZT||(l=m),void 0===l&&(l=!1),i.addEventListener(n.toString(),a,l);else if(i.attachEvent)i.attachEvent(Ng(n.toString()),a);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(a)}return r}function Ki(i,n,r,a,l){if(Array.isArray(n)){for(var h=0;h<n.length;h++)Ki(i,n[h],r,a,l);return null}return r=rf(r),i&&i[ef]?i.O(n,r,Zh(a)?!!a.capture:!!a,l):Q_(i,n,r,!0,a,l)}function Y_(i,n,r,a,l){if(Array.isArray(n))for(var h=0;h<n.length;h++)Y_(i,n[h],r,a,l);else a=Zh(a)?!!a.capture:!!a,r=rf(r),i&&i[ef]?(i=i.i,(n=String(n).toString())in i.g&&-1<(r=z_(h=i.g[n],r,a,l))&&(Sg(h[r]),Array.prototype.splice.call(h,r,1),0==h.length&&(delete i.g[n],i.h--))):i&&(i=nf(i))&&(n=i.g[n.toString()],i=-1,n&&(i=z_(n,r,a,l)),(r=-1<i?n[i]:null)&&J_(r))}function J_(i){if("number"!=typeof i&&i&&!i.ca){var n=i.src;if(n&&n[ef])W_(n.i,i);else{var r=i.type,a=i.proxy;n.removeEventListener?n.removeEventListener(r,a,i.capture):n.detachEvent?n.detachEvent(Ng(r),a):n.addListener&&n.removeListener&&n.removeListener(a),(r=nf(n))?(W_(r,i),0==r.h&&(r.src=null,n[K_]=null)):Sg(i)}}}function Ng(i){return i in gt?gt[i]:gt[i]="on"+i}function $o(i,n){if(i.ca)i=!0;else{n=new Xh(n,this);var r=i.listener,a=i.ia||i.src;i.fa&&J_(i),i=r.call(a,n)}return i}function nf(i){return(i=i[K_])instanceof tf?i:null}var Rg="__closure_events_fn_"+(1e9*Math.random()>>>0);function rf(i){return"function"==typeof i?i:(i[Rg]||(i[Rg]=function(n){return i.handleEvent(n)}),i[Rg])}function Ir(){Ys.call(this),this.i=new tf(this),this.P=this,this.I=null}function sr(i,n){var r,a=i.I;if(a)for(r=[];a;a=a.I)r.push(a);if(i=i.P,a=n.type||n,"string"==typeof n)n=new nn(n,i);else if(n instanceof nn)n.target=n.target||i;else{var l=n;Yh(n=new nn(a,i),l)}if(l=!0,r)for(var h=r.length-1;0<=h;h--){var m=n.g=r[h];l=X_(m,a,!0,n)&&l}if(l=X_(m=n.g=i,a,!0,n)&&l,l=X_(m,a,!1,n)&&l,r)for(h=0;h<r.length;h++)l=X_(m=n.g=r[h],a,!1,n)&&l}function X_(i,n,r,a){if(!(n=i.i.g[String(n)]))return!0;n=n.concat();for(var l=!0,h=0;h<n.length;++h){var m=n[h];if(m&&!m.ca&&m.capture==r){var E=m.listener,T=m.ia||m.src;m.fa&&W_(i.i,m),l=!1!==E.call(T,a)&&l}}return l&&!a.defaultPrevented}ir(Ir,Ys),Ir.prototype[ef]=!0,Ir.prototype.removeEventListener=function(i,n,r,a){Y_(this,i,n,r,a)},Ir.prototype.M=function(){if(Ir.Z.M.call(this),this.i){var n,i=this.i;for(n in i.g){for(var r=i.g[n],a=0;a<r.length;a++)Sg(r[a]);delete i.g[n],i.h--}}this.I=null},Ir.prototype.N=function(i,n,r,a){return this.i.add(String(i),n,!1,r,a)},Ir.prototype.O=function(i,n,r,a){return this.i.add(String(i),n,!0,r,a)};var ws=ut.JSON.stringify;function xg(){var i=ev;let n=null;return i.g&&(n=i.g,i.g=i.g.next,i.g||(i.h=null),n.next=null),n}var Cw,Mg=new class{constructor(i,n){this.i=i,this.j=n,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new VN,i=>i.reset());class VN{constructor(){this.next=this.g=this.h=null}set(n,r){this.h=n,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function JT(i){ut.setTimeout(()=>{throw i},0)}function Og(i,n){Cw||function(){var i=ut.Promise.resolve(void 0);Cw=function(){i.then(Aw)}}(),Sw||(Cw(),Sw=!0),ev.add(i,n)}var Sw=!1,ev=new class{constructor(){this.h=this.g=null}add(n,r){const a=Mg.get();a.set(n,r),this.h?this.h.next=a:this.g=a,this.h=a}};function Aw(){for(var i;i=xg();){try{i.h.call(i.g)}catch(r){JT(r)}var n=Mg;n.j(i),100>n.h&&(n.h++,i.next=n.g,n.g=i)}Sw=!1}function kg(i,n){Ir.call(this),this.h=i||1,this.g=n||ut,this.j=br(this.kb,this),this.l=Date.now()}function sf(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function Nw(i,n,r){if("function"==typeof i)r&&(i=br(i,r));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=br(i.handleEvent,i)}return 2147483647<Number(n)?-1:ut.setTimeout(i,n||0)}function eC(i){i.g=Nw(()=>{i.g=null,i.i&&(i.i=!1,eC(i))},i.j);const n=i.h;i.h=null,i.m.apply(null,n)}ir(kg,Ir),(je=kg.prototype).da=!1,je.S=null,je.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),sr(this,"tick"),this.da&&(sf(this),this.start()))}},je.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},je.M=function(){kg.Z.M.call(this),sf(this),delete this.g};class UN extends Ys{constructor(n,r){super(),this.m=n,this.j=r,this.h=null,this.i=!1,this.g=null}l(n){this.h=arguments,this.g?this.i=!0:eC(this)}M(){super.M(),this.g&&(ut.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fg(i){Ys.call(this),this.h=i,this.g={}}ir(Fg,Ys);var tC=[];function nC(i,n,r,a){Array.isArray(r)||(r&&(tC[0]=r.toString()),r=tC);for(var l=0;l<r.length;l++){var h=Z_(n,r[l],a||i.handleEvent,!1,i.h||i);if(!h)break;i.g[h.key]=h}}function rC(i){wg(i.g,function(n,r){this.g.hasOwnProperty(r)&&J_(n)},i),i.g={}}function tv(){this.g=!0}function of(i,n,r,a){i.info(function(){return"XMLHTTP TEXT ("+n+"): "+function(i,n){if(!i.g)return n;if(!n)return null;try{var r=JSON.parse(n);if(r)for(i=0;i<r.length;i++)if(Array.isArray(r[i])){var a=r[i];if(!(2>a.length)){var l=a[1];if(Array.isArray(l)&&!(1>l.length)){var h=l[0];if("noop"!=h&&"stop"!=h&&"close"!=h)for(var m=1;m<l.length;m++)l[m]=""}}}return ws(r)}catch(E){return n}}(i,r)+(a?" "+a:"")})}Fg.prototype.M=function(){Fg.Z.M.call(this),rC(this)},Fg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},tv.prototype.Aa=function(){this.g=!1},tv.prototype.info=function(){};var cl={},rv=null;function $c(){return rv=rv||new Ir}function iv(i){nn.call(this,cl.Ma,i)}function dl(i){const n=$c();sr(n,new iv(n,i))}function Rw(i,n){nn.call(this,cl.STAT_EVENT,i),this.stat=n}function Sn(i){const n=$c();sr(n,new Rw(n,i))}function sv(i,n){nn.call(this,cl.Na,i),this.size=n}function af(i,n){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ut.setTimeout(function(){i()},n)}cl.Ma="serverreachability",ir(iv,nn),cl.STAT_EVENT="statevent",ir(Rw,nn),cl.Na="timingevent",ir(sv,nn);var ov={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Lg={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function av(){}function xw(){}av.prototype.h=null;var lf,uf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function hl(){nn.call(this,"d")}function Ka(){nn.call(this,"c")}function qo(){}function Go(i,n,r,a){this.l=i,this.j=n,this.m=r,this.X=a||1,this.V=new Fg(this),this.P=iC,this.W=new kg(i=ll?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new fl}function fl(){this.i=null,this.g="",this.h=!1}ir(hl,nn),ir(Ka,nn),ir(qo,av),qo.prototype.g=function(){return new XMLHttpRequest},qo.prototype.i=function(){return{}},lf=new qo;var iC=45e3,Vg={},cf={};function df(i,n,r){i.K=1,i.v=Hg(Qa(n)),i.s=r,i.U=!0,Ug(i,null)}function Ug(i,n){i.F=Date.now(),qc(i),i.A=Qa(i.v);var r=i.A,a=i.X;Array.isArray(a)||(a=[String(a)]),kw(r.h,"t",a),i.C=0,r=i.l.H,i.h=new fl,i.g=Gw(i.l,r?n:null,!i.s),0<i.O&&(i.L=new UN(br(i.Ia,i,i.g),i.O)),nC(i.V,i.g,"readystatechange",i.gb),n=i.H?bg(i.H):{},i.s?(i.u||(i.u="POST"),n["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,n)):(i.u="GET",i.g.ea(i.A,i.u,null,n)),dl(1),function(i,n,r,a,l,h){i.info(function(){if(i.g)if(h)for(var m="",E=h.split("&"),T=0;T<E.length;T++){var S=E[T].split("=");if(1<S.length){var R=S[0];S=S[1];var O=R.split("_");m=2<=O.length&&"type"==O[1]?m+(R+"=")+S+"&":m+(R+"=redacted&")}}else m=null;else m=h;return"XMLHTTP REQ ("+a+") [attempt "+l+"]: "+n+"\n"+r+"\n"+m})}(i.j,i.u,i.A,i.m,i.X,i.s)}function lv(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function hf(i,n,r){let l,a=!0;for(;!i.I&&i.C<r.length;){if(l=sC(i,r),l==cf){4==n&&(i.o=4,Sn(14),a=!1),of(i.j,i.m,null,"[Incomplete Response]");break}if(l==Vg){i.o=4,Sn(15),of(i.j,i.m,r,"[Invalid Chunk]"),a=!1;break}of(i.j,i.m,l,null),Bg(i,l)}lv(i)&&l!=cf&&l!=Vg&&(i.h.g="",i.C=0),4!=n||0!=r.length||i.h.h||(i.o=1,Sn(16),a=!1),i.i=i.i&&a,a?0<r.length&&!i.aa&&(i.aa=!0,(n=i.l).g==i&&n.$&&!n.L&&(n.h.info("Great, no buffering proxy detected. Bytes received: "+r.length),Zg(n),n.L=!0,Sn(11))):(of(i.j,i.m,r,"[Invalid Chunked Response]"),pl(i),Gc(i))}function sC(i,n){var r=i.C,a=n.indexOf("\n",r);return-1==a?cf:(r=Number(n.substring(r,a)),isNaN(r)?Vg:(a+=1)+r>n.length?cf:(n=n.substr(a,r),i.C=a+r,n))}function qc(i){i.Y=Date.now()+i.P,oC(i,i.P)}function oC(i,n){if(null!=i.B)throw Error("WatchDog timer not null");i.B=af(br(i.eb,i),n)}function ff(i){i.B&&(ut.clearTimeout(i.B),i.B=null)}function Gc(i){0==i.l.G||i.I||_C(i.l,i)}function pl(i){ff(i);var n=i.L;n&&"function"==typeof n.na&&n.na(),i.L=null,sf(i.W),rC(i.V),i.g&&(n=i.g,i.g=null,n.abort(),n.na())}function Bg(i,n){try{var r=i.l;if(0!=r.G&&(r.g==i||mv(r.i,i)))if(r.I=i.N,!i.J&&mv(r.i,i)&&3==r.G){try{var a=r.Ca.g.parse(n)}catch(S){a=null}if(Array.isArray(a)&&3==a.length){var l=a;if(0==l[0])e:if(r.u)r.ta=l[1],0<r.ta-r.U&&37500>l[2]&&r.N&&0==r.A&&!r.v&&(r.v=af(br(r.ab,r),6e3));else{if(r.g){if(!(r.g.F+3e3<i.F))break e;Xc(r),If(r)}Tv(r),Sn(18)}if(1>=$g(r.i)&&r.ka){try{r.ka()}catch(S){}r.ka=void 0}}else zo(r,11)}else if((i.J||r.g==i)&&Xc(r),!Qh(n))for(l=r.Ca.g.parse(n),n=0;n<l.length;n++){let S=l[n];if(r.U=S[0],S=S[1],2==r.G)if("c"==S[0]){r.J=S[1],r.la=S[2];const R=S[3];null!=R&&(r.ma=R,r.h.info("VER="+r.ma));const O=S[4];null!=O&&(r.za=O,r.h.info("SVER="+r.za));const V=S[5];null!=V&&"number"==typeof V&&0<V&&(r.K=a=1.5*V,r.h.info("backChannelRequestTimeoutMs_="+a)),a=r;const q=i.g;if(q){const Z=q.g?q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var h=a.i;!h.g&&(Qr(Z,"spdy")||Qr(Z,"quic")||Qr(Z,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(_f(h,h.h),h.h=null))}if(a.D){const ge=q.g?q.g.getResponseHeader("X-HTTP-Session-Id"):null;ge&&(a.sa=ge,pn(a.F,a.D,ge))}}r.G=3,r.j&&r.j.xa(),r.$&&(r.O=Date.now()-i.F,r.h.info("Handshake RTT: "+r.O+"ms"));var m=i;if((a=r).oa=vC(a,a.H?a.la:null,a.W),m.J){qg(a.i,m);var E=m,T=a.K;T&&E.setTimeout(T),E.B&&(ff(E),qc(E)),a.g=m}else yC(a);0<r.l.length&&Wo(r)}else"stop"!=S[0]&&"close"!=S[0]||zo(r,7);else 3==r.G&&("stop"==S[0]||"close"==S[0]?"stop"==S[0]?zo(r,7):Ja(r):"noop"!=S[0]&&r.j&&r.j.wa(S),r.A=0)}dl(4)}catch(S){}}function cv(i,n){if(i.forEach&&"function"==typeof i.forEach)i.forEach(n,void 0);else if(vg(i)||"string"==typeof i)_w(i,n,void 0);else{if(i.T&&"function"==typeof i.T)var r=i.T();else if(i.R&&"function"==typeof i.R)r=void 0;else if(vg(i)||"string"==typeof i){r=[];for(var a=i.length,l=0;l<a;l++)r.push(l)}else for(l in r=[],a=0,i)r[a++]=l;l=(a=function(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(vg(i)){for(var n=[],r=i.length,a=0;a<r;a++)n.push(i[a]);return n}for(a in n=[],r=0,i)n[r++]=i[a];return n}(i)).length;for(var h=0;h<l;h++)n.call(void 0,a[h],r&&r[h],i)}}function or(i,n){this.h={},this.g=[],this.i=0;var r=arguments.length;if(1<r){if(r%2)throw Error("Uneven number of arguments");for(var a=0;a<r;a+=2)this.set(arguments[a],arguments[a+1])}else if(i)if(i instanceof or)for(r=i.T(),a=0;a<r.length;a++)this.set(r[a],i.get(r[a]));else for(a in i)this.set(a,i[a])}function dv(i){if(i.i!=i.g.length){for(var n=0,r=0;n<i.g.length;){var a=i.g[n];gl(i.h,a)&&(i.g[r++]=a),n++}i.g.length=r}if(i.i!=i.g.length){var l={};for(r=n=0;n<i.g.length;)gl(l,a=i.g[n])||(i.g[r++]=a,l[a]=1),n++;i.g.length=r}}function gl(i,n){return Object.prototype.hasOwnProperty.call(i,n)}(je=Go.prototype).setTimeout=function(i){this.P=i},je.gb=function(i){i=i.target;const n=this.L;n&&3==Xs(i)?n.l():this.Ia(i)},je.Ia=function(i){try{if(i==this.g)e:{const R=Xs(this.g);var n=this.g.Da();const O=this.g.ba();if(!(3>R)&&(3!=R||ll||this.g&&(this.h.h||this.g.ga()||jw(this.g)))){this.I||4!=R||7==n||dl(8==n||0>=O?3:2),ff(this);var r=this.g.ba();this.N=r;t:if(lv(this)){var a=jw(this.g);i="";var l=a.length,h=4==Xs(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){pl(this),Gc(this);var m="";break t}this.h.i=new ut.TextDecoder}for(n=0;n<l;n++)this.h.h=!0,i+=this.h.i.decode(a[n],{stream:h&&n==l-1});a.splice(0,l),this.h.g+=i,this.C=0,m=this.h.g}else m=this.g.ga();if(this.i=200==r,function(i,n,r,a,l,h,m){i.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+l+"]: "+n+"\n"+r+"\n"+h+" "+m})}(this.j,this.u,this.A,this.m,this.X,R,r),this.i){if(this.$&&!this.J){t:{if(this.g){var E,T=this.g;if((E=T.g?T.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Qh(E)){var S=E;break t}}S=null}if(!(r=S)){this.i=!1,this.o=3,Sn(12),pl(this),Gc(this);break e}of(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Bg(this,r)}this.U?(hf(this,R,m),ll&&this.i&&3==R&&(nC(this.V,this.W,"tick",this.fb),this.W.start())):(of(this.j,this.m,m,null),Bg(this,m)),4==R&&pl(this),this.i&&!this.I&&(4==R?_C(this.l,this):(this.i=!1,qc(this)))}else 400==r&&0<m.indexOf("Unknown SID")?(this.o=3,Sn(12)):(this.o=0,Sn(13)),pl(this),Gc(this)}}}catch(R){}},je.fb=function(){if(this.g){var i=Xs(this.g),n=this.g.ga();this.C<n.length&&(ff(this),hf(this,i,n),this.i&&4!=i&&qc(this))}},je.cancel=function(){this.I=!0,pl(this)},je.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function(i,n){i.info(function(){return"TIMEOUT: "+n})}(this.j,this.A),2!=this.K&&(dl(3),Sn(17)),pl(this),this.o=2,Gc(this)):oC(this,this.Y-i)},(je=or.prototype).R=function(){dv(this);for(var i=[],n=0;n<this.g.length;n++)i.push(this.h[this.g[n]]);return i},je.T=function(){return dv(this),this.g.concat()},je.get=function(i,n){return gl(this.h,i)?this.h[i]:n},je.set=function(i,n){gl(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=n},je.forEach=function(i,n){for(var r=this.T(),a=0;a<r.length;a++){var l=r[a],h=this.get(l);i.call(n,h,l,this)}};var uC=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Za(i,n){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof Za){this.g=void 0!==n?n:i.g,jg(this,i.j),this.s=i.s,Wc(this,i.i),pf(this,i.m),this.l=i.l,n=i.h;var r=new mf;r.i=n.i,n.g&&(r.g=new or(n.g),r.h=n.h),Pw(this,r),this.o=i.o}else i&&(r=String(i).match(uC))?(this.g=!!n,jg(this,r[1]||"",!0),this.s=zc(r[2]||""),Wc(this,r[3]||"",!0),pf(this,r[4]),this.l=zc(r[5]||"",!0),Pw(this,r[6]||"",!0),this.o=zc(r[7]||"")):(this.g=!!n,this.h=new mf(null,this.g))}function Qa(i){return new Za(i)}function jg(i,n,r){i.j=r?zc(n,!0):n,i.j&&(i.j=i.j.replace(/:$/,""))}function Wc(i,n,r){i.i=r?zc(n,!0):n}function pf(i,n){if(n){if(n=Number(n),isNaN(n)||0>n)throw Error("Bad port number "+n);i.m=n}else i.m=null}function Pw(i,n,r){n instanceof mf?(i.h=n,function(i,n){n&&!i.j&&(Ya(i),i.i=null,i.g.forEach(function(r,a){var l=a.toLowerCase();a!=l&&(hC(this,a),kw(this,l,r))},i)),i.j=n}(i.h,i.g)):(r||(n=gf(n,Js)),i.h=new mf(n,i.g))}function pn(i,n,r){i.h.set(n,r)}function Hg(i){return pn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function zc(i,n){return i?n?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function gf(i,n,r){return"string"==typeof i?(i=encodeURI(i).replace(n,cC),r&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function cC(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Za.prototype.toString=function(){var i=[],n=this.j;n&&i.push(gf(n,hv,!0),":");var r=this.i;return(r||"file"==n)&&(i.push("//"),(n=this.s)&&i.push(gf(n,hv,!0),"@"),i.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&i.push(":",String(r))),(r=this.l)&&(this.i&&"/"!=r.charAt(0)&&i.push("/"),i.push(gf(r,"/"==r.charAt(0)?dC:Ow,!0))),(r=this.h.toString())&&i.push("?",r),(r=this.o)&&i.push("#",gf(r,fv)),i.join("")};var hv=/[#\/\?@]/g,Ow=/[#\?:]/g,dC=/[#\?]/g,Js=/[#\?@]/g,fv=/#/g;function mf(i,n){this.h=this.g=null,this.i=i||null,this.j=!!n}function Ya(i){i.g||(i.g=new or,i.h=0,i.i&&function(i,n){if(i){i=i.split("&");for(var r=0;r<i.length;r++){var a=i[r].indexOf("="),l=null;if(0<=a){var h=i[r].substring(0,a);l=i[r].substring(a+1)}else h=i[r];n(h,l?decodeURIComponent(l.replace(/\+/g," ")):"")}}}(i.i,function(n,r){i.add(decodeURIComponent(n.replace(/\+/g," ")),r)}))}function hC(i,n){Ya(i),n=Kc(i,n),gl(i.g.h,n)&&(i.i=null,i.h-=i.g.get(n).length,gl((i=i.g).h,n)&&(delete i.h[n],i.i--,i.g.length>2*i.i&&dv(i)))}function pv(i,n){return Ya(i),n=Kc(i,n),gl(i.g.h,n)}function kw(i,n,r){hC(i,n),0<r.length&&(i.i=null,i.g.set(Kc(i,n),Ho(r)),i.h+=r.length)}function Kc(i,n){return n=String(n),i.j&&(n=n.toLowerCase()),n}function Fw(i){this.l=i||pC,i=ut.PerformanceNavigationTiming?0<(i=ut.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ut.g&&ut.g.Ea&&ut.g.Ea()&&ut.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(je=mf.prototype).add=function(i,n){Ya(this),this.i=null,i=Kc(this,i);var r=this.g.get(i);return r||this.g.set(i,r=[]),r.push(n),this.h+=1,this},je.forEach=function(i,n){Ya(this),this.g.forEach(function(r,a){_w(r,function(l){i.call(n,l,a,this)},this)},this)},je.T=function(){Ya(this);for(var i=this.g.R(),n=this.g.T(),r=[],a=0;a<n.length;a++)for(var l=i[a],h=0;h<l.length;h++)r.push(n[a]);return r},je.R=function(i){Ya(this);var n=[];if("string"==typeof i)pv(this,i)&&(n=V_(n,this.g.get(Kc(this,i))));else{i=this.g.R();for(var r=0;r<i.length;r++)n=V_(n,i[r])}return n},je.set=function(i,n){return Ya(this),this.i=null,pv(this,i=Kc(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[n]),this.h+=1,this},je.get=function(i,n){return i&&0<(i=this.R(i)).length?String(i[0]):n},je.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],n=this.g.T(),r=0;r<n.length;r++){var a=n[r],l=encodeURIComponent(String(a));a=this.R(a);for(var h=0;h<a.length;h++){var m=l;""!==a[h]&&(m+="="+encodeURIComponent(String(a[h]))),i.push(m)}}return this.i=i.join("&")};var pC=10;function yf(i){return!!i.h||!!i.g&&i.g.size>=i.j}function $g(i){return i.h?1:i.g?i.g.size:0}function mv(i,n){return i.h?i.h==n:!!i.g&&i.g.has(n)}function _f(i,n){i.g?i.g.add(n):i.h=n}function qg(i,n){i.h&&i.h==n?i.h=null:i.g&&i.g.has(n)&&i.g.delete(n)}function yv(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let n=i.i;for(const r of i.g.values())n=n.concat(r.D);return n}return Ho(i.i)}function _v(){}function gC(){this.g=new _v}function vv(i,n,r){const a=r||"";try{cv(i,function(l,h){let m=l;Zh(l)&&(m=ws(l)),n.push(a+h+"="+encodeURIComponent(m))})}catch(l){throw n.push(a+"type="+encodeURIComponent("_badmap")),l}}function Gg(i,n,r,a,l){try{n.onload=null,n.onerror=null,n.onabort=null,n.ontimeout=null,l(a)}catch(h){}}function Zc(i){this.l=i.$b||null,this.j=i.ib||!1}function vf(i,n){Ir.call(this),this.D=i,this.u=n,this.m=void 0,this.readyState=Wg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Fw.prototype.cancel=function(){if(this.i=yv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},_v.prototype.stringify=function(i){return ut.JSON.stringify(i,void 0)},_v.prototype.parse=function(i){return ut.JSON.parse(i,void 0)},ir(Zc,av),Zc.prototype.g=function(){return new vf(this.l,this.j)},Zc.prototype.i=function(i){return function(){return i}}({}),ir(vf,Ir);var Wg=0;function Ev(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function Qc(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Oi(i)}function Oi(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(je=vf.prototype).open=function(i,n){if(this.readyState!=Wg)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=n,this.readyState=1,Oi(this)},je.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const n={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(n.body=i),(this.D||ut).fetch(new Request(this.B,n)).then(this.Va.bind(this),this.ha.bind(this))},je.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Qc(this)),this.readyState=Wg},je.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Oi(this)),this.g&&(this.readyState=3,Oi(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ut.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ev(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},je.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var n=i.value?i.value:new Uint8Array(0);(n=this.A.decode(n,{stream:!i.done}))&&(this.response=this.responseText+=n)}i.done?Qc(this):Oi(this),3==this.readyState&&Ev(this)}},je.Ua=function(i){this.g&&(this.response=this.responseText=i,Qc(this))},je.Ta=function(i){this.g&&(this.response=i,Qc(this))},je.ha=function(){this.g&&Qc(this)},je.setRequestHeader=function(i,n){this.v.append(i,n)},je.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},je.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],n=this.h.entries();for(var r=n.next();!r.done;)i.push((r=r.value)[0]+": "+r[1]),r=n.next();return i.join("\r\n")},Object.defineProperty(vf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var zg=ut.JSON.parse;function $n(i){Ir.call(this),this.headers=new or,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Lw,this.K=this.L=!1}ir($n,Ir);var Lw="",qN=/^https?$/i,Yc=["POST","PUT"];function Ef(i){return"content-type"==i.toLowerCase()}function Jc(i,n){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=n,i.m=5,Uw(i),wf(i)}function Uw(i){i.D||(i.D=!0,sr(i,"complete"),sr(i,"error"))}function Kg(i){if(i.h&&void 0!==gw&&(!i.C[1]||4!=Xs(i)||2!=i.ba()))if(i.v&&4==Xs(i))Nw(i.Fa,0,i);else if(sr(i,"readystatechange"),4==Xs(i)){i.h=!1;try{const E=i.ba();e:switch(E){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var a;if(a=0===E){var l=String(i.H).match(uC)[1]||null;if(!l&&ut.self&&ut.self.location){var h=ut.self.location.protocol;l=h.substr(0,h.length-1)}a=!qN.test(l?l.toLowerCase():"")}r=a}if(r)sr(i,"complete"),sr(i,"success");else{i.m=6;try{var m=2<Xs(i)?i.g.statusText:""}catch(T){m=""}i.j=m+" ["+i.ba()+"]",Uw(i)}}finally{wf(i)}}}function wf(i,n){if(i.g){Bw(i);const r=i.g,a=i.C[0]?Bc:null;i.g=null,i.C=null,n||sr(i,"ready");try{r.onreadystatechange=a}catch(l){}}}function Bw(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(ut.clearTimeout(i.A),i.A=null)}function Xs(i){return i.g?i.g.readyState:0}function jw(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Lw:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(n){return null}}function bv(i,n,r){e:{for(a in r){var a=!1;break e}a=!0}a||(r=function(i){let n="";return wg(i,function(r,a){n+=a,n+=":",n+=r,n+="\r\n"}),n}(r),"string"==typeof i?null!=r&&encodeURIComponent(String(r)):pn(i,n,r))}function bf(i,n,r){return r&&r.internalChannelParams&&r.internalChannelParams[i]||n}function Iv(i){this.za=0,this.l=[],this.h=new tv,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=bf("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=bf("baseRetryDelayMs",5e3,i),this.$a=bf("retryDelaySeedMs",1e4,i),this.Ya=bf("forwardChannelMaxRetries",2,i),this.ra=bf("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new Fw(i&&i.concurrentRequestLimit),this.Ca=new gC,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function Ja(i){if(Hw(i),3==i.G){var n=i.V++,r=Qa(i.F);pn(r,"SID",i.J),pn(r,"RID",n),pn(r,"TYPE","terminate"),Df(i,r),(n=new Go(i,i.h,n,void 0)).K=2,n.v=Hg(Qa(r)),r=!1,ut.navigator&&ut.navigator.sendBeacon&&(r=ut.navigator.sendBeacon(n.v.toString(),"")),!r&&ut.Image&&((new Image).src=n.v,r=!0),r||(n.g=Gw(n.l,null),n.g.ea(n.v)),n.F=Date.now(),qc(n)}Qg(i)}function If(i){i.g&&(Zg(i),i.g.cancel(),i.g=null)}function Hw(i){If(i),i.u&&(ut.clearTimeout(i.u),i.u=null),Xc(i),i.i.cancel(),i.m&&("number"==typeof i.m&&ut.clearTimeout(i.m),i.m=null)}function Dv(i,n){i.l.push(new class{constructor(i,n){this.h=i,this.g=n}}(i.Za++,n)),3==i.G&&Wo(i)}function Wo(i){yf(i.i)||i.m||(i.m=!0,Og(i.Ha,i),i.C=0)}function $w(i,n){var r;r=n?n.m:i.V++;const a=Qa(i.F);pn(a,"SID",i.J),pn(a,"RID",r),pn(a,"AID",i.U),Df(i,a),i.o&&i.s&&bv(a,i.o,i.s),r=new Go(i,i.h,r,i.C+1),null===i.o&&(r.H=i.s),n&&(i.l=n.D.concat(i.l)),n=qw(i,r,1e3),r.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),_f(i.i,r),df(r,a,n)}function Df(i,n){i.j&&cv({},function(r,a){pn(n,a,r)})}function qw(i,n,r){r=Math.min(i.l.length,r);var a=i.j?br(i.j.Oa,i.j,i):null;e:{var l=i.l;let h=-1;for(;;){const m=["count="+r];-1==h?0<r?(h=l[0].h,m.push("ofs="+h)):h=0:m.push("ofs="+h);let E=!0;for(let T=0;T<r;T++){let S=l[T].h;const R=l[T].g;if(S-=h,0>S)h=Math.max(0,l[T].h-100),E=!1;else try{vv(R,m,"req"+S+"_")}catch(O){a&&a(R)}}if(E){a=m.join("&");break e}}}return i=i.l.splice(0,r),n.D=i,a}function yC(i){i.g||i.u||(i.Y=1,Og(i.Ga,i),i.A=0)}function Tv(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=af(br(i.Ga,i),eo(i,i.A)),i.A++,0))}function Zg(i){null!=i.B&&(ut.clearTimeout(i.B),i.B=null)}function un(i){i.g=new Go(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var n=Qa(i.oa);pn(n,"RID","rpc"),pn(n,"SID",i.J),pn(n,"CI",i.N?"0":"1"),pn(n,"AID",i.U),Df(i,n),pn(n,"TYPE","xmlhttp"),i.o&&i.s&&bv(n,i.o,i.s),i.K&&i.g.setTimeout(i.K);var r=i.g;i=i.la,r.K=1,r.v=Hg(Qa(n)),r.s=null,r.U=!0,Ug(r,i)}function Xc(i){null!=i.v&&(ut.clearTimeout(i.v),i.v=null)}function _C(i,n){var r=null;if(i.g==n){Xc(i),Zg(i),i.g=null;var a=2}else{if(!mv(i.i,n))return;r=n.D,qg(i.i,n),a=1}if(i.I=n.N,0!=i.G)if(n.i)if(1==a){r=n.s?n.s.length:0,n=Date.now()-n.F;var l=i.C;sr(a=$c(),new sv(a,r,n,l)),Wo(i)}else yC(i);else if(3==(l=n.o)||0==l&&0<i.I||!(1==a&&function(i,n){return!($g(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=n.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=af(br(i.Ha,i,n),eo(i,i.C)),i.C++,0)))}(i,n)||2==a&&Tv(i)))switch(r&&0<r.length&&(n=i.i,n.i=n.i.concat(r)),l){case 1:zo(i,5);break;case 4:zo(i,10);break;case 3:zo(i,6);break;default:zo(i,2)}}function eo(i,n){let r=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(r*=2),r*n}function zo(i,n){if(i.h.info("Error code "+n),2==n){var r=null;i.j&&(r=null);var a=br(i.jb,i);r||(r=new Za("//www.google.com/images/cleardot.gif"),ut.location&&"http"==ut.location.protocol||jg(r,"https"),Hg(r)),function(i,n){const r=new tv;if(ut.Image){const a=new Image;a.onload=Eg(Gg,r,a,"TestLoadImage: loaded",!0,n),a.onerror=Eg(Gg,r,a,"TestLoadImage: error",!1,n),a.onabort=Eg(Gg,r,a,"TestLoadImage: abort",!1,n),a.ontimeout=Eg(Gg,r,a,"TestLoadImage: timeout",!1,n),ut.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=i}else n(!1)}(r.toString(),a)}else Sn(2);i.G=0,i.j&&i.j.va(n),Qg(i),Hw(i)}function Qg(i){i.G=0,i.I=-1,i.j&&((0!=yv(i.i).length||0!=i.l.length)&&(i.i.i.length=0,Ho(i.l),i.l.length=0),i.j.ua())}function vC(i,n,r){let a=function(i){return i instanceof Za?Qa(i):new Za(i,void 0)}(r);if(""!=a.i)n&&Wc(a,n+"."+a.i),pf(a,a.m);else{const l=ut.location;a=function(i,n,r,a){var l=new Za(null,void 0);return i&&jg(l,i),n&&Wc(l,n),r&&pf(l,r),a&&(l.l=a),l}(l.protocol,n?n+"."+l.hostname:l.hostname,+l.port,r)}return i.aa&&wg(i.aa,function(l,h){pn(a,h,l)}),r=i.sa,(n=i.D)&&r&&pn(a,n,r),pn(a,"VER",i.ma),Df(i,a),a}function Gw(i,n,r){if(n&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(n=new $n(r&&i.Ba&&!i.qa?new Zc({ib:!0}):i.qa)).L=i.H,n}function Ww(){}function Tf(){if(ul&&!(10<=Number(KT)))throw Error("Environmental error: no available transport.")}function yi(i,n){Ir.call(this),this.g=new Iv(n),this.l=i,this.h=n&&n.messageUrlParams||null,i=n&&n.messageHeaders||null,n&&n.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=n&&n.initMessageHeaders||null,n&&n.messageContentType&&(i?i["X-WebChannel-Content-Type"]=n.messageContentType:i={"X-WebChannel-Content-Type":n.messageContentType}),n&&n.ya&&(i?i["X-WebChannel-Client-Profile"]=n.ya:i={"X-WebChannel-Client-Profile":n.ya}),this.g.P=i,(i=n&&n.httpHeadersOverwriteParam)&&!Qh(i)&&(this.g.o=i),this.A=n&&n.supportsCrossDomainXhr||!1,this.v=n&&n.sendRawJson||!1,(n=n&&n.httpSessionIdParam)&&!Qh(n)&&(this.g.D=n,null!==(i=this.h)&&n in i&&n in(i=this.h)&&delete i[n]),this.j=new ed(this)}function Cv(i){hl.call(this);var n=i.__sm__;if(n){e:{for(const r in n){i=r;break e}i=void 0}(this.i=i)&&(i=this.i,n=null!==n&&i in n?n[i]:void 0),this.data=n}else this.data=i}function Sv(){Ka.call(this),this.status=1}function ed(i){this.g=i}(je=$n.prototype).ea=function(i,n,r,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);n=n?n.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():lf.g(),this.C=function(i){return i.h||(i.h=i.i())}(this.u?this.u:lf),this.g.onreadystatechange=br(this.Fa,this);try{this.F=!0,this.g.open(n,String(i),!0),this.F=!1}catch(h){return void Jc(this,h)}i=r||"";const l=new or(this.headers);a&&cv(a,function(h,m){l.set(m,h)}),a=function(i){e:{var n=Ef;const r=i.length,a="string"==typeof i?i.split(""):i;for(let l=0;l<r;l++)if(l in a&&n.call(void 0,a[l],l,i)){n=l;break e}n=-1}return 0>n?null:"string"==typeof i?i.charAt(n):i[n]}(l.T()),r=ut.FormData&&i instanceof ut.FormData,!(0<=yw(Yc,n))||a||r||l.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),l.forEach(function(h,m){this.g.setRequestHeader(m,h)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Bw(this),0<this.B&&((this.K=function(i){return ul&&Dw()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=br(this.pa,this)):this.A=Nw(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(h){Jc(this,h)}},je.pa=function(){void 0!==gw&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,sr(this,"timeout"),this.abort(8))},je.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,sr(this,"complete"),sr(this,"abort"),wf(this))},je.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),wf(this,!0)),$n.Z.M.call(this)},je.Fa=function(){this.s||(this.F||this.v||this.l?Kg(this):this.cb())},je.cb=function(){Kg(this)},je.ba=function(){try{return 2<Xs(this)?this.g.status:-1}catch(i){return-1}},je.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},je.Qa=function(i){if(this.g){var n=this.g.responseText;return i&&0==n.indexOf(i)&&(n=n.substring(i.length)),zg(n)}},je.Da=function(){return this.m},je.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(je=Iv.prototype).ma=8,je.G=1,je.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(n){}},je.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const l=new Go(this,this.h,i,void 0);let h=this.s;if(this.P&&(h?(h=bg(h),Yh(h,this.P)):h=this.P),null===this.o&&(l.H=h),this.ja)e:{for(var n=0,r=0;r<this.l.length;r++){var a=this.l[r];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(n+=a)){n=r;break e}if(4096===n||r===this.l.length-1){n=r+1;break e}}n=1e3}else n=1e3;n=qw(this,l,n),pn(r=Qa(this.F),"RID",i),pn(r,"CVER",22),this.D&&pn(r,"X-HTTP-Session-Id",this.D),Df(this,r),this.o&&h&&bv(r,this.o,h),_f(this.i,l),this.Ra&&pn(r,"TYPE","init"),this.ja?(pn(r,"$req",n),pn(r,"SID","null"),l.$=!0,df(l,r,null)):df(l,r,n),this.G=2}}else 3==this.G&&(i?$w(this,i):0==this.l.length||yf(this.i)||$w(this))},je.Ga=function(){if(this.u=null,un(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=af(br(this.bb,this),i)}},je.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Sn(10),If(this),un(this))},je.ab=function(){null!=this.v&&(this.v=null,If(this),Tv(this),Sn(19))},je.jb=function(i){i?(this.h.info("Successfully pinged google.com"),Sn(2)):(this.h.info("Failed to ping google.com"),Sn(1))},(je=Ww.prototype).xa=function(){},je.wa=function(){},je.va=function(){},je.ua=function(){},je.Oa=function(){},Tf.prototype.g=function(i,n){return new yi(i,n)},ir(yi,Ir),yi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,n=this.l,r=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),Og(br(i.hb,i,n))),Sn(0),i.W=n,i.aa=r||{},i.N=i.X,i.F=vC(i,null,i.W),Wo(i)},yi.prototype.close=function(){Ja(this.g)},yi.prototype.u=function(i){if("string"==typeof i){var n={};n.__data__=i,Dv(this.g,n)}else this.v?((n={}).__data__=ws(i),Dv(this.g,n)):Dv(this.g,i)},yi.prototype.M=function(){this.g.j=null,delete this.j,Ja(this.g),delete this.g,yi.Z.M.call(this)},ir(Cv,hl),ir(Sv,Ka),ir(ed,Ww),ed.prototype.xa=function(){sr(this.g,"a")},ed.prototype.wa=function(i){sr(this.g,new Cv(i))},ed.prototype.va=function(i){sr(this.g,new Sv(i))},ed.prototype.ua=function(){sr(this.g,"b")},Tf.prototype.createWebChannel=Tf.prototype.g,yi.prototype.send=yi.prototype.u,yi.prototype.open=yi.prototype.m,yi.prototype.close=yi.prototype.close,ov.NO_ERROR=0,ov.TIMEOUT=8,ov.HTTP_ERROR=6,Lg.COMPLETE="complete",xw.EventType=uf,uf.OPEN="a",uf.CLOSE="b",uf.ERROR="c",uf.MESSAGE="d",Ir.prototype.listen=Ir.prototype.N,$n.prototype.listenOnce=$n.prototype.O,$n.prototype.getLastError=$n.prototype.La,$n.prototype.getLastErrorCode=$n.prototype.Da,$n.prototype.getStatus=$n.prototype.ba,$n.prototype.getResponseJson=$n.prototype.Qa,$n.prototype.getResponseText=$n.prototype.ga,$n.prototype.send=$n.prototype.ea;var EC=Es.createWebChannelTransport=function(){return new Tf},Cf=Es.getStatEventTarget=function(){return $c()},Sf=Es.ErrorCode=ov,zw=Es.EventType=Lg,Kw=Es.Event=cl,Av=Es.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Zw=Es.FetchXmlHttpFactory=Zc,Yg=Es.WebChannel=xw,wC=Es.XhrIo=$n;class Dr{constructor(n){this.uid=n}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(n){return n.uid===this.uid}}Dr.UNAUTHENTICATED=new Dr(null),Dr.GOOGLE_CREDENTIALS=new Dr("google-credentials-uid"),Dr.FIRST_PARTY=new Dr("first-party-uid"),Dr.MOCK_USER=new Dr("mock-user");let td="9.1.0";const Ko=new Wa.Yd("@firebase/firestore");function Qw(){return Ko.logLevel}function Me(i,...n){if(Ko.logLevel<=Wa.in.DEBUG){const r=n.map(Jw);Ko.debug(`Firestore (${td}): ${i}`,...r)}}function qn(i,...n){if(Ko.logLevel<=Wa.in.ERROR){const r=n.map(Jw);Ko.error(`Firestore (${td}): ${i}`,...r)}}function Jg(i,...n){if(Ko.logLevel<=Wa.in.WARN){const r=n.map(Jw);Ko.warn(`Firestore (${td}): ${i}`,...r)}}function Jw(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(r){return i}}function Qe(i="Unexpected state"){const n=`FIRESTORE (${td}) INTERNAL ASSERTION FAILED: `+i;throw qn(n),new Error(n)}function ht(i,n){i||Qe()}function Le(i,n){return i}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Error{constructor(n,r){super(r),this.code=n,this.message=r,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Tr{constructor(){this.promise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}}class bC{constructor(n,r){this.user=r,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${n}`}}class GN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(n,r){n.enqueueRetryable(()=>r(Dr.UNAUTHENTICATED))}shutdown(){}}class eb{constructor(n){this.token=n,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(n,r){this.changeListener=r,n.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class tb{constructor(n){this.t=n,this.currentUser=Dr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(n,r){var a=this;let l=this.i;const h=S=>this.i!==l?(l=this.i,r(S)):Promise.resolve();let m=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new Tr,n.enqueueRetryable(()=>h(this.currentUser))};const E=()=>{const S=m;n.enqueueRetryable((0,pe.Z)(function*(){yield S.promise,yield h(a.currentUser)}))},T=S=>{Me("FirebaseCredentialsProvider","Auth detected"),this.auth=S,this.auth.addAuthTokenListener(this.o),E()};this.t.onInit(S=>T(S)),setTimeout(()=>{if(!this.auth){const S=this.t.getImmediate({optional:!0});S?T(S):(Me("FirebaseCredentialsProvider","Auth not yet detected"),m.resolve(),m=new Tr)}},0),E()}getToken(){const n=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(a=>this.i!==n?(Me("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(ht("string"==typeof a.accessToken),new bC(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const n=this.auth&&this.auth.getUid();return ht(null===n||"string"==typeof n),new Dr(n)}}class nb{constructor(n,r,a){this.h=n,this.l=r,this.m=a,this.type="FirstParty",this.user=Dr.FIRST_PARTY}get authHeaders(){const n={"X-Goog-AuthUser":this.l},r=this.h.auth.getAuthHeaderValueForFirstParty([]);return r&&(n.Authorization=r),this.m&&(n["X-Goog-Iam-Authorization-Token"]=this.m),n}}class IC{constructor(n,r,a){this.h=n,this.l=r,this.m=a}getToken(){return Promise.resolve(new nb(this.h,this.l,this.m))}start(n,r){n.enqueueRetryable(()=>r(Dr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Zi{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=a=>this.g(a),this.p=a=>r.writeSequenceNumber(a))}g(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.p&&this.p(n),n}}function rb(i){const n="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(i);if(n&&"function"==typeof n.getRandomValues)n.getRandomValues(r);else for(let a=0;a<i;a++)r[a]=Math.floor(256*Math.random());return r}Zi.T=-1;class Nv{static I(){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/n.length)*n.length;let a="";for(;a.length<20;){const l=rb(40);for(let h=0;h<l.length;++h)a.length<20&&l[h]<r&&(a+=n.charAt(l[h]%n.length))}return a}}function Nt(i,n){return i<n?-1:i>n?1:0}function Xa(i,n,r){return i.length===n.length&&i.every((a,l)=>r(a,n[l]))}function ib(i){return i+"\0"}class ar{constructor(n,r){if(this.seconds=n,this.nanoseconds=r,r<0)throw new ve(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ve(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(n<-62135596800)throw new ve(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n);if(n>=253402300800)throw new ve(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n)}static now(){return ar.fromMillis(Date.now())}static fromDate(n){return ar.fromMillis(n.getTime())}static fromMillis(n){const r=Math.floor(n/1e3),a=Math.floor(1e6*(n-1e3*r));return new ar(r,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(n){return this.seconds===n.seconds?Nt(this.nanoseconds,n.nanoseconds):Nt(this.seconds,n.seconds)}isEqual(n){return n.seconds===this.seconds&&n.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class It{constructor(n){this.timestamp=n}static fromTimestamp(n){return new It(n)}static min(){return new It(new ar(0,0))}compareTo(n){return this.timestamp._compareTo(n.timestamp)}isEqual(n){return this.timestamp.isEqual(n.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function sb(i){let n=0;for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&n++;return n}function ml(i,n){for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&n(r,i[r])}function ob(i){for(const n in i)if(Object.prototype.hasOwnProperty.call(i,n))return!1;return!0}class eu{constructor(n,r,a){void 0===r?r=0:r>n.length&&Qe(),void 0===a?a=n.length-r:a>n.length-r&&Qe(),this.segments=n,this.offset=r,this.len=a}get length(){return this.len}isEqual(n){return 0===eu.comparator(this,n)}child(n){const r=this.segments.slice(this.offset,this.limit());return n instanceof eu?n.forEach(a=>{r.push(a)}):r.push(n),this.construct(r)}limit(){return this.offset+this.length}popFirst(n){return this.construct(this.segments,this.offset+(n=void 0===n?1:n),this.length-n)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(n){return this.segments[this.offset+n]}isEmpty(){return 0===this.length}isPrefixOf(n){if(n.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==n.get(r))return!1;return!0}isImmediateParentOf(n){if(this.length+1!==n.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==n.get(r))return!1;return!0}forEach(n){for(let r=this.offset,a=this.limit();r<a;r++)n(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(n,r){const a=Math.min(n.length,r.length);for(let l=0;l<a;l++){const h=n.get(l),m=r.get(l);if(h<m)return-1;if(h>m)return 1}return n.length<r.length?-1:n.length>r.length?1:0}}class Rt extends eu{construct(n,r,a){return new Rt(n,r,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...n){const r=[];for(const a of n){if(a.indexOf("//")>=0)throw new ve(oe.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);r.push(...a.split("/").filter(l=>l.length>0))}return new Rt(r)}static emptyPath(){return new Rt([])}}const ab=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends eu{construct(n,r,a){return new zt(n,r,a)}static isValidIdentifier(n){return ab.test(n)}canonicalString(){return this.toArray().map(n=>(n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(n)||(n="`"+n+"`"),n)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new zt(["__name__"])}static fromServerFormat(n){const r=[];let a="",l=0;const h=()=>{if(0===a.length)throw new ve(oe.INVALID_ARGUMENT,`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(a),a=""};let m=!1;for(;l<n.length;){const E=n[l];if("\\"===E){if(l+1===n.length)throw new ve(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+n);const T=n[l+1];if("\\"!==T&&"."!==T&&"`"!==T)throw new ve(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);a+=T,l+=2}else"`"===E?(m=!m,l++):"."!==E||m?(a+=E,l++):(h(),l++)}if(h(),m)throw new ve(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new zt(r)}static emptyPath(){return new zt([])}}class to{constructor(n){this.fields=n,n.sort(zt.comparator)}covers(n){for(const r of this.fields)if(r.isPrefixOf(n))return!0;return!1}isEqual(n){return Xa(this.fields,n.fields,(r,a)=>r.isEqual(a))}}class ur{constructor(n){this.binaryString=n}static fromBase64String(n){const r=atob(n);return new ur(r)}static fromUint8Array(n){const r=function(a){let l="";for(let h=0;h<a.length;++h)l+=String.fromCharCode(a[h]);return l}(n);return new ur(r)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(n){return Nt(this.binaryString,n.binaryString)}isEqual(n){return this.binaryString===n.binaryString}}ur.EMPTY_BYTE_STRING=new ur("");const Rv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cr(i){if(ht(!!i),"string"==typeof i){let n=0;const r=Rv.exec(i);if(ht(!!r),r[1]){let l=r[1];l=(l+"000000000").substr(0,9),n=Number(l)}const a=new Date(i);return{seconds:Math.floor(a.getTime()/1e3),nanos:n}}return{seconds:gn(i.seconds),nanos:gn(i.nanos)}}function gn(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Fn(i){return"string"==typeof i?ur.fromBase64String(i):ur.fromUint8Array(i)}function Zo(i){var n,r;return"server_timestamp"===(null===(r=((null===(n=null==i?void 0:i.mapValue)||void 0===n?void 0:n.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function Af(i){const n=i.mapValue.fields.__previous_value__;return Zo(n)?Af(n):n}function Br(i){const n=Cr(i.mapValue.fields.__local_write_time__.timestampValue);return new ar(n.seconds,n.nanos)}function tu(i){return null==i}function Qo(i){return 0===i&&1/i==-1/0}function yl(i){return"number"==typeof i&&Number.isInteger(i)&&!Qo(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class $e{constructor(n){this.path=n}static fromPath(n){return new $e(Rt.fromString(n))}static fromName(n){return new $e(Rt.fromString(n).popFirst(5))}hasCollectionId(n){return this.path.length>=2&&this.path.get(this.path.length-2)===n}isEqual(n){return null!==n&&0===Rt.comparator(this.path,n.path)}toString(){return this.path.toString()}static comparator(n,r){return Rt.comparator(n.path,r.path)}static isDocumentKey(n){return n.length%2==0}static fromSegments(n){return new $e(new Rt(n.slice()))}}function Qi(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Zo(i)?4:10:Qe()}function Jr(i,n){const r=Qi(i);if(r!==Qi(n))return!1;switch(r){case 0:return!0;case 1:return i.booleanValue===n.booleanValue;case 4:return Br(i).isEqual(Br(n));case 3:return function(a,l){if("string"==typeof a.timestampValue&&"string"==typeof l.timestampValue&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const h=Cr(a.timestampValue),m=Cr(l.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos}(i,n);case 5:return i.stringValue===n.stringValue;case 6:return l=n,Fn(i.bytesValue).isEqual(Fn(l.bytesValue));case 7:return i.referenceValue===n.referenceValue;case 8:return function(a,l){return gn(a.geoPointValue.latitude)===gn(l.geoPointValue.latitude)&&gn(a.geoPointValue.longitude)===gn(l.geoPointValue.longitude)}(i,n);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return gn(a.integerValue)===gn(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const h=gn(a.doubleValue),m=gn(l.doubleValue);return h===m?Qo(h)===Qo(m):isNaN(h)&&isNaN(m)}return!1}(i,n);case 9:return Xa(i.arrayValue.values||[],n.arrayValue.values||[],Jr);case 10:return function(a,l){const h=a.mapValue.fields||{},m=l.mapValue.fields||{};if(sb(h)!==sb(m))return!1;for(const E in h)if(h.hasOwnProperty(E)&&(void 0===m[E]||!Jr(h[E],m[E])))return!1;return!0}(i,n);default:return Qe()}var l}function no(i,n){return void 0!==(i.values||[]).find(r=>Jr(r,n))}function bs(i,n){const r=Qi(i),a=Qi(n);if(r!==a)return Nt(r,a);switch(r){case 0:return 0;case 1:return Nt(i.booleanValue,n.booleanValue);case 2:return function(l,h){const m=gn(l.integerValue||l.doubleValue),E=gn(h.integerValue||h.doubleValue);return m<E?-1:m>E?1:m===E?0:isNaN(m)?isNaN(E)?0:-1:1}(i,n);case 3:return _l(i.timestampValue,n.timestampValue);case 4:return _l(Br(i),Br(n));case 5:return Nt(i.stringValue,n.stringValue);case 6:return function(l,h){const m=Fn(l),E=Fn(h);return m.compareTo(E)}(i.bytesValue,n.bytesValue);case 7:return function(l,h){const m=l.split("/"),E=h.split("/");for(let T=0;T<m.length&&T<E.length;T++){const S=Nt(m[T],E[T]);if(0!==S)return S}return Nt(m.length,E.length)}(i.referenceValue,n.referenceValue);case 8:return function(l,h){const m=Nt(gn(l.latitude),gn(h.latitude));return 0!==m?m:Nt(gn(l.longitude),gn(h.longitude))}(i.geoPointValue,n.geoPointValue);case 9:return function(l,h){const m=l.values||[],E=h.values||[];for(let T=0;T<m.length&&T<E.length;++T){const S=bs(m[T],E[T]);if(S)return S}return Nt(m.length,E.length)}(i.arrayValue,n.arrayValue);case 10:return function(l,h){const m=l.fields||{},E=Object.keys(m),T=h.fields||{},S=Object.keys(T);E.sort(),S.sort();for(let R=0;R<E.length&&R<S.length;++R){const O=Nt(E[R],S[R]);if(0!==O)return O;const V=bs(m[E[R]],T[S[R]]);if(0!==V)return V}return Nt(E.length,S.length)}(i.mapValue,n.mapValue);default:throw Qe()}}function _l(i,n){if("string"==typeof i&&"string"==typeof n&&i.length===n.length)return Nt(i,n);const r=Cr(i),a=Cr(n),l=Nt(r.seconds,a.seconds);return 0!==l?l:Nt(r.nanos,a.nanos)}function nu(i){return Xg(i)}function Xg(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(a){const l=Cr(a);return`time(${l.seconds},${l.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Fn(i.bytesValue).toBase64():"referenceValue"in i?$e.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(n=i.geoPointValue).latitude},${n.longitude})`:"arrayValue"in i?function(a){let l="[",h=!0;for(const m of a.values||[])h?h=!1:l+=",",l+=Xg(m);return l+"]"}(i.arrayValue):"mapValue"in i?function(a){const l=Object.keys(a.fields||{}).sort();let h="{",m=!0;for(const E of l)m?m=!1:h+=",",h+=`${E}:${Xg(a.fields[E])}`;return h+"}"}(i.mapValue):Qe();var n}function Nf(i,n){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`}}function em(i){return!!i&&"integerValue"in i}function tm(i){return!!i&&"arrayValue"in i}function xv(i){return!!i&&"nullValue"in i}function Pv(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Rf(i){return!!i&&"mapValue"in i}function nd(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const n={mapValue:{fields:{}}};return ml(i.mapValue.fields,(r,a)=>n.mapValue.fields[r]=nd(a)),n}if(i.arrayValue){const n={arrayValue:{values:[]}};for(let r=0;r<(i.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=nd(i.arrayValue.values[r]);return n}return Object.assign({},i)}class Sr{constructor(n){this.value=n}static empty(){return new Sr({mapValue:{}})}field(n){if(n.isEmpty())return this.value;{let r=this.value;for(let a=0;a<n.length-1;++a)if(r=(r.mapValue.fields||{})[n.get(a)],!Rf(r))return null;return r=(r.mapValue.fields||{})[n.lastSegment()],r||null}}set(n,r){this.getFieldsMap(n.popLast())[n.lastSegment()]=nd(r)}setAll(n){let r=zt.emptyPath(),a={},l=[];n.forEach((m,E)=>{if(!r.isImmediateParentOf(E)){const T=this.getFieldsMap(r);this.applyChanges(T,a,l),a={},l=[],r=E.popLast()}m?a[E.lastSegment()]=nd(m):l.push(E.lastSegment())});const h=this.getFieldsMap(r);this.applyChanges(h,a,l)}delete(n){const r=this.field(n.popLast());Rf(r)&&r.mapValue.fields&&delete r.mapValue.fields[n.lastSegment()]}isEqual(n){return Jr(this.value,n.value)}getFieldsMap(n){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let a=0;a<n.length;++a){let l=r.mapValue.fields[n.get(a)];Rf(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},r.mapValue.fields[n.get(a)]=l),r=l}return r.mapValue.fields}applyChanges(n,r,a){ml(r,(l,h)=>n[l]=h);for(const l of a)delete n[l]}clone(){return new Sr(nd(this.value))}}function ub(i){const n=[];return ml(i.fields,(r,a)=>{const l=new zt([r]);if(Rf(a)){const h=ub(a.mapValue).fields;if(0===h.length)n.push(l);else for(const m of h)n.push(l.child(m))}else n.push(l)}),new to(n)}class ln{constructor(n,r,a,l,h){this.key=n,this.documentType=r,this.version=a,this.data=l,this.documentState=h}static newInvalidDocument(n){return new ln(n,0,It.min(),Sr.empty(),0)}static newFoundDocument(n,r,a){return new ln(n,1,r,a,0)}static newNoDocument(n,r){return new ln(n,2,r,Sr.empty(),0)}static newUnknownDocument(n,r){return new ln(n,3,r,Sr.empty(),2)}convertToFoundDocument(n,r){return this.version=n,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(n){return this.version=n,this.documentType=2,this.data=Sr.empty(),this.documentState=0,this}convertToUnknownDocument(n){return this.version=n,this.documentType=3,this.data=Sr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(n){return n instanceof ln&&this.key.isEqual(n.key)&&this.version.isEqual(n.version)&&this.documentType===n.documentType&&this.documentState===n.documentState&&this.data.isEqual(n.data)}clone(){return new ln(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class TC{constructor(n,r=null,a=[],l=[],h=null,m=null,E=null){this.path=n,this.collectionGroup=r,this.orderBy=a,this.filters=l,this.limit=h,this.startAt=m,this.endAt=E,this.A=null}}function Mv(i,n=null,r=[],a=[],l=null,h=null,m=null){return new TC(i,n,r,a,l,h,m)}function rd(i){const n=Le(i);if(null===n.A){let r=n.path.canonicalString();null!==n.collectionGroup&&(r+="|cg:"+n.collectionGroup),r+="|f:",r+=n.filters.map(a=>function(i){return i.field.canonicalString()+i.op.toString()+nu(i.value)}(a)).join(","),r+="|ob:",r+=n.orderBy.map(a=>{return(l=a).field.canonicalString()+l.dir;var l}).join(","),tu(n.limit)||(r+="|l:",r+=n.limit),n.startAt&&(r+="|lb:",r+=im(n.startAt)),n.endAt&&(r+="|ub:",r+=im(n.endAt)),n.A=r}return n.A}function Ov(i,n){if(i.limit!==n.limit||i.orderBy.length!==n.orderBy.length)return!1;for(let l=0;l<i.orderBy.length;l++)if(!PC(i.orderBy[l],n.orderBy[l]))return!1;if(i.filters.length!==n.filters.length)return!1;for(let l=0;l<i.filters.length;l++)if((r=i.filters[l]).op!==(a=n.filters[l]).op||!r.field.isEqual(a.field)||!Jr(r.value,a.value))return!1;var r,a;return i.collectionGroup===n.collectionGroup&&!!i.path.isEqual(n.path)&&!!sm(i.startAt,n.startAt)&&sm(i.endAt,n.endAt)}function nm(i){return $e.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}class jr extends class{}{constructor(n,r,a){super(),this.field=n,this.op=r,this.value=a}static create(n,r,a){return n.isKeyField()?"in"===r||"not-in"===r?this.R(n,r,a):new lb(n,r,a):"array-contains"===r?new xC(n,a):"in"===r?new cb(n,a):"not-in"===r?new WN(n,a):"array-contains-any"===r?new zN(n,a):new jr(n,r,a)}static R(n,r,a){return"in"===r?new AC(n,a):new NC(n,a)}matches(n){const r=n.data.field(this.field);return"!="===this.op?null!==r&&this.P(bs(r,this.value)):null!==r&&Qi(this.value)===Qi(r)&&this.P(bs(r,this.value))}P(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return 0===n;case"!=":return 0!==n;case">":return n>0;case">=":return n>=0;default:return Qe()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class lb extends jr{constructor(n,r,a){super(n,r,a),this.key=$e.fromName(a.referenceValue)}matches(n){const r=$e.comparator(n.key,this.key);return this.P(r)}}class AC extends jr{constructor(n,r){super(n,"in",r),this.keys=RC(0,r)}matches(n){return this.keys.some(r=>r.isEqual(n.key))}}class NC extends jr{constructor(n,r){super(n,"not-in",r),this.keys=RC(0,r)}matches(n){return!this.keys.some(r=>r.isEqual(n.key))}}function RC(i,n){var r;return((null===(r=n.arrayValue)||void 0===r?void 0:r.values)||[]).map(a=>$e.fromName(a.referenceValue))}class xC extends jr{constructor(n,r){super(n,"array-contains",r)}matches(n){const r=n.data.field(this.field);return tm(r)&&no(r.arrayValue,this.value)}}class cb extends jr{constructor(n,r){super(n,"in",r)}matches(n){const r=n.data.field(this.field);return null!==r&&no(this.value.arrayValue,r)}}class WN extends jr{constructor(n,r){super(n,"not-in",r)}matches(n){if(no(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=n.data.field(this.field);return null!==r&&!no(this.value.arrayValue,r)}}class zN extends jr{constructor(n,r){super(n,"array-contains-any",r)}matches(n){const r=n.data.field(this.field);return!(!tm(r)||!r.arrayValue.values)&&r.arrayValue.values.some(a=>no(this.value.arrayValue,a))}}class rm{constructor(n,r){this.position=n,this.before=r}}function im(i){return`${i.before?"b":"a"}:${i.position.map(n=>nu(n)).join(",")}`}class xf{constructor(n,r="asc"){this.field=n,this.dir=r}}function PC(i,n){return i.dir===n.dir&&i.field.isEqual(n.field)}function db(i,n,r){let a=0;for(let l=0;l<i.position.length;l++){const h=n[l],m=i.position[l];if(a=h.field.isKeyField()?$e.comparator($e.fromName(m.referenceValue),r.key):bs(m,r.data.field(h.field)),"desc"===h.dir&&(a*=-1),0!==a)break}return i.before?a<=0:a<0}function sm(i,n){if(null===i)return null===n;if(null===n||i.before!==n.before||i.position.length!==n.position.length)return!1;for(let r=0;r<i.position.length;r++)if(!Jr(i.position[r],n.position[r]))return!1;return!0}class Is{constructor(n,r=null,a=[],l=[],h=null,m="F",E=null,T=null){this.path=n,this.collectionGroup=r,this.explicitOrderBy=a,this.filters=l,this.limit=h,this.limitType=m,this.startAt=E,this.endAt=T,this.V=null,this.S=null}}function hb(i,n,r,a,l,h,m,E){return new Is(i,n,r,a,l,h,m,E)}function Pf(i){return new Is(i)}function kv(i){return!tu(i.limit)&&"F"===i.limitType}function Fv(i){return!tu(i.limit)&&"L"===i.limitType}function Lv(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function om(i){for(const n of i.filters)if(n.v())return n.field;return null}function fb(i){return null!==i.collectionGroup}function id(i){const n=Le(i);if(null===n.V){n.V=[];const r=om(n),a=Lv(n);if(null!==r&&null===a)r.isKeyField()||n.V.push(new xf(r)),n.V.push(new xf(zt.keyField(),"asc"));else{let l=!1;for(const h of n.explicitOrderBy)n.V.push(h),h.field.isKeyField()&&(l=!0);if(!l){const h=n.explicitOrderBy.length>0?n.explicitOrderBy[n.explicitOrderBy.length-1].dir:"asc";n.V.push(new xf(zt.keyField(),h))}}}return n.V}function Ar(i){const n=Le(i);if(!n.S)if("F"===n.limitType)n.S=Mv(n.path,n.collectionGroup,id(n),n.filters,n.limit,n.startAt,n.endAt);else{const r=[];for(const h of id(n))r.push(new xf(h.field,"desc"===h.dir?"asc":"desc"));const a=n.endAt?new rm(n.endAt.position,!n.endAt.before):null,l=n.startAt?new rm(n.startAt.position,!n.startAt.before):null;n.S=Mv(n.path,n.collectionGroup,r,n.filters,n.limit,a,l)}return n.S}function pb(i,n,r){return new Is(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),n,r,i.startAt,i.endAt)}function sd(i,n){return Ov(Ar(i),Ar(n))&&i.limitType===n.limitType}function gb(i){return`${rd(Ar(i))}|lt:${i.limitType}`}function am(i){return`Query(target=${function(i){let n=i.path.canonicalString();return null!==i.collectionGroup&&(n+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(n+=`, filters: [${i.filters.map(r=>{return`${(a=r).field.canonicalString()} ${a.op} ${nu(a.value)}`;var a}).join(", ")}]`),tu(i.limit)||(n+=", limit: "+i.limit),i.orderBy.length>0&&(n+=`, orderBy: [${i.orderBy.map(r=>{return`${(a=r).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),i.startAt&&(n+=", startAt: "+im(i.startAt)),i.endAt&&(n+=", endAt: "+im(i.endAt)),`Target(${n})`}(Ar(i))}; limitType=${i.limitType})`}function ru(i,n){return n.isFoundDocument()&&function(r,a){const l=a.key.path;return null!==r.collectionGroup?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):$e.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(i,n)&&function(r,a){for(const l of r.explicitOrderBy)if(!l.field.isKeyField()&&null===a.data.field(l.field))return!1;return!0}(i,n)&&function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0}(i,n)&&(a=n,!((r=i).startAt&&!db(r.startAt,id(r),a)||r.endAt&&db(r.endAt,id(r),a)));var r,a}function mb(i){return(n,r)=>{let a=!1;for(const l of id(i)){const h=yb(l,n,r);if(0!==h)return h;a=a||l.field.isKeyField()}return 0}}function yb(i,n,r){const a=i.field.isKeyField()?$e.comparator(n.key,r.key):function(l,h,m){const E=h.data.field(l),T=m.data.field(l);return null!==E&&null!==T?bs(E,T):Qe()}(i.field,n,r);switch(i.dir){case"asc":return a;case"desc":return-1*a;default:return Qe()}}function _b(i,n){if(i.D){if(isNaN(n))return{doubleValue:"NaN"};if(n===1/0)return{doubleValue:"Infinity"};if(n===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qo(n)?"-0":n}}function vb(i){return{integerValue:""+i}}function Eb(i,n){return yl(n)?vb(n):_b(i,n)}class um{constructor(){this._=void 0}}function MC(i,n,r){return i instanceof vl?function(a,l){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&(h.fields.__previous_value__=l),{mapValue:h}}(r,n):i instanceof iu?lm(i,n):i instanceof od?cm(i,n):function(a,l){const h=bb(a,l),m=OC(h)+OC(a.C);return em(h)&&em(a.C)?vb(m):_b(a.N,m)}(i,n)}function wb(i,n,r){return i instanceof iu?lm(i,n):i instanceof od?cm(i,n):r}function bb(i,n){return i instanceof ad?em(r=n)||(a=r)&&"doubleValue"in a?n:{integerValue:0}:null;var a,r}class vl extends um{}class iu extends um{constructor(n){super(),this.elements=n}}function lm(i,n){const r=ud(n);for(const a of i.elements)r.some(l=>Jr(l,a))||r.push(a);return{arrayValue:{values:r}}}class od extends um{constructor(n){super(),this.elements=n}}function cm(i,n){let r=ud(n);for(const a of i.elements)r=r.filter(l=>!Jr(l,a));return{arrayValue:{values:r}}}class ad extends um{constructor(n,r){super(),this.N=n,this.C=r}}function OC(i){return gn(i.integerValue||i.doubleValue)}function ud(i){return tm(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Mf{constructor(n,r){this.field=n,this.transform=r}}class Uv{constructor(n,r){this.version=n,this.transformResults=r}}class Gn{constructor(n,r){this.updateTime=n,this.exists=r}static none(){return new Gn}static exists(n){return new Gn(void 0,n)}static updateTime(n){return new Gn(n)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(n){return this.exists===n.exists&&(this.updateTime?!!n.updateTime&&this.updateTime.isEqual(n.updateTime):!n.updateTime)}}function ld(i,n){return void 0!==i.updateTime?n.isFoundDocument()&&n.version.isEqual(i.updateTime):void 0===i.exists||i.exists===n.isFoundDocument()}class cd{}function Ib(i,n,r){i instanceof Of?function(a,l,h){const m=a.value.clone(),E=Hv(a.fieldTransforms,l,h.transformResults);m.setAll(E),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(i,n,r):i instanceof Yo?function(a,l,h){if(!ld(a.precondition,l))return void l.convertToUnknownDocument(h.version);const m=Hv(a.fieldTransforms,l,h.transformResults),E=l.data;E.setAll(dm(a)),E.setAll(m),l.convertToFoundDocument(h.version,E).setHasCommittedMutations()}(i,n,r):n.convertToNoDocument(r.version).setHasCommittedMutations()}function Db(i,n,r){var l;i instanceof Of?function(a,l,h){if(!ld(a.precondition,l))return;const m=a.value.clone(),E=$v(a.fieldTransforms,h,l);m.setAll(E),l.convertToFoundDocument(jv(l),m).setHasLocalMutations()}(i,n,r):i instanceof Yo?function(a,l,h){if(!ld(a.precondition,l))return;const m=$v(a.fieldTransforms,h,l),E=l.data;E.setAll(dm(a)),E.setAll(m),l.convertToFoundDocument(jv(l),E).setHasLocalMutations()}(i,n,r):ld(i.precondition,l=n)&&l.convertToNoDocument(It.min())}function kC(i,n){let r=null;for(const a of i.fieldTransforms){const l=n.data.field(a.field),h=bb(a.transform,l||null);null!=h&&(null==r&&(r=Sr.empty()),r.set(a.field,h))}return r||null}function Bv(i,n){return i.type===n.type&&!!i.key.isEqual(n.key)&&!!i.precondition.isEqual(n.precondition)&&(a=n.fieldTransforms,!!(void 0===(r=i.fieldTransforms)&&void 0===a||r&&a&&Xa(r,a,(l,h)=>function(i,n){return i.field.isEqual(n.field)&&(a=n.transform,(r=i.transform)instanceof iu&&a instanceof iu||r instanceof od&&a instanceof od?Xa(r.elements,a.elements,Jr):r instanceof ad&&a instanceof ad?Jr(r.C,a.C):r instanceof vl&&a instanceof vl);var r,a}(l,h))))&&(0===i.type?i.value.isEqual(n.value):1!==i.type||i.data.isEqual(n.data)&&i.fieldMask.isEqual(n.fieldMask));var r,a}function jv(i){return i.isFoundDocument()?i.version:It.min()}class Of extends cd{constructor(n,r,a,l=[]){super(),this.key=n,this.value=r,this.precondition=a,this.fieldTransforms=l,this.type=0}}class Yo extends cd{constructor(n,r,a,l,h=[]){super(),this.key=n,this.data=r,this.fieldMask=a,this.precondition=l,this.fieldTransforms=h,this.type=1}}function dm(i){const n=new Map;return i.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const a=i.data.field(r);n.set(r,a)}}),n}function Hv(i,n,r){const a=new Map;ht(i.length===r.length);for(let l=0;l<r.length;l++){const h=i[l],m=h.transform,E=n.data.field(h.field);a.set(h.field,wb(m,E,r[l]))}return a}function $v(i,n,r){const a=new Map;for(const l of i){const h=l.transform,m=r.data.field(l.field);a.set(l.field,MC(h,m,n))}return a}class El extends cd{constructor(n,r){super(),this.key=n,this.precondition=r,this.type=2,this.fieldTransforms=[]}}class hm extends cd{constructor(n,r){super(),this.key=n,this.precondition=r,this.type=3,this.fieldTransforms=[]}}class FC{constructor(n){this.count=n}}var Ln,xt;function fm(i){switch(i){case oe.OK:return Qe();case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Qe()}}function qv(i){if(void 0===i)return qn("GRPC error has no .code"),oe.UNKNOWN;switch(i){case Ln.OK:return oe.OK;case Ln.CANCELLED:return oe.CANCELLED;case Ln.UNKNOWN:return oe.UNKNOWN;case Ln.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Ln.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Ln.INTERNAL:return oe.INTERNAL;case Ln.UNAVAILABLE:return oe.UNAVAILABLE;case Ln.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Ln.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Ln.NOT_FOUND:return oe.NOT_FOUND;case Ln.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Ln.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Ln.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Ln.ABORTED:return oe.ABORTED;case Ln.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Ln.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Ln.DATA_LOSS:return oe.DATA_LOSS;default:return Qe()}}(xt=Ln||(Ln={}))[xt.OK=0]="OK",xt[xt.CANCELLED=1]="CANCELLED",xt[xt.UNKNOWN=2]="UNKNOWN",xt[xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xt[xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xt[xt.NOT_FOUND=5]="NOT_FOUND",xt[xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",xt[xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",xt[xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",xt[xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xt[xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xt[xt.ABORTED=10]="ABORTED",xt[xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",xt[xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",xt[xt.INTERNAL=13]="INTERNAL",xt[xt.UNAVAILABLE=14]="UNAVAILABLE",xt[xt.DATA_LOSS=15]="DATA_LOSS";class Xn{constructor(n,r){this.comparator=n,this.root=r||Nr.EMPTY}insert(n,r){return new Xn(this.comparator,this.root.insert(n,r,this.comparator).copy(null,null,Nr.BLACK,null,null))}remove(n){return new Xn(this.comparator,this.root.remove(n,this.comparator).copy(null,null,Nr.BLACK,null,null))}get(n){let r=this.root;for(;!r.isEmpty();){const a=this.comparator(n,r.key);if(0===a)return r.value;a<0?r=r.left:a>0&&(r=r.right)}return null}indexOf(n){let r=0,a=this.root;for(;!a.isEmpty();){const l=this.comparator(n,a.key);if(0===l)return r+a.left.size;l<0?a=a.left:(r+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(n){return this.root.inorderTraversal(n)}forEach(n){this.inorderTraversal((r,a)=>(n(r,a),!1))}toString(){const n=[];return this.inorderTraversal((r,a)=>(n.push(`${r}:${a}`),!1)),`{${n.join(", ")}}`}reverseTraversal(n){return this.root.reverseTraversal(n)}getIterator(){return new pm(this.root,null,this.comparator,!1)}getIteratorFrom(n){return new pm(this.root,n,this.comparator,!1)}getReverseIterator(){return new pm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(n){return new pm(this.root,n,this.comparator,!0)}}class pm{constructor(n,r,a,l){this.isReverse=l,this.nodeStack=[];let h=1;for(;!n.isEmpty();)if(h=r?a(n.key,r):1,l&&(h*=-1),h<0)n=this.isReverse?n.left:n.right;else{if(0===h){this.nodeStack.push(n);break}this.nodeStack.push(n),n=this.isReverse?n.right:n.left}}getNext(){let n=this.nodeStack.pop();const r={key:n.key,value:n.value};if(this.isReverse)for(n=n.left;!n.isEmpty();)this.nodeStack.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack.push(n),n=n.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const n=this.nodeStack[this.nodeStack.length-1];return{key:n.key,value:n.value}}}class Nr{constructor(n,r,a,l,h){this.key=n,this.value=r,this.color=null!=a?a:Nr.RED,this.left=null!=l?l:Nr.EMPTY,this.right=null!=h?h:Nr.EMPTY,this.size=this.left.size+1+this.right.size}copy(n,r,a,l,h){return new Nr(null!=n?n:this.key,null!=r?r:this.value,null!=a?a:this.color,null!=l?l:this.left,null!=h?h:this.right)}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,a){let l=this;const h=a(n,l.key);return l=h<0?l.copy(null,null,null,l.left.insert(n,r,a),null):0===h?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(n,r,a)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Nr.EMPTY;let n=this;return n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.removeMin(),null),n.fixUp()}remove(n,r){let a,l=this;if(r(n,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(n,r),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),0===r(n,l.key)){if(l.right.isEmpty())return Nr.EMPTY;a=l.right.min(),l=l.copy(a.key,a.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(n,r))}return l.fixUp()}isRed(){return this.color}fixUp(){let n=this;return n.right.isRed()&&!n.left.isRed()&&(n=n.rotateLeft()),n.left.isRed()&&n.left.left.isRed()&&(n=n.rotateRight()),n.left.isRed()&&n.right.isRed()&&(n=n.colorFlip()),n}moveRedLeft(){let n=this.colorFlip();return n.right.left.isRed()&&(n=n.copy(null,null,null,null,n.right.rotateRight()),n=n.rotateLeft(),n=n.colorFlip()),n}moveRedRight(){let n=this.colorFlip();return n.left.left.isRed()&&(n=n.rotateRight(),n=n.colorFlip()),n}rotateLeft(){const n=this.copy(null,null,Nr.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight(){const n=this.copy(null,null,Nr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth(){const n=this.check();return Math.pow(2,n)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Qe();const n=this.left.check();if(n!==this.right.check())throw Qe();return n+(this.isRed()?0:1)}}Nr.EMPTY=null,Nr.RED=!0,Nr.BLACK=!1,Nr.EMPTY=new class{constructor(){this.size=0}get key(){throw Qe()}get value(){throw Qe()}get color(){throw Qe()}get left(){throw Qe()}get right(){throw Qe()}copy(i,n,r,a,l){return this}insert(i,n,r){return new Nr(i,n)}remove(i,n){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mn{constructor(n){this.comparator=n,this.data=new Xn(this.comparator)}has(n){return null!==this.data.get(n)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(n){return this.data.indexOf(n)}forEach(n){this.data.inorderTraversal((r,a)=>(n(r),!1))}forEachInRange(n,r){const a=this.data.getIteratorFrom(n[0]);for(;a.hasNext();){const l=a.getNext();if(this.comparator(l.key,n[1])>=0)return;r(l.key)}}forEachWhile(n,r){let a;for(a=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();a.hasNext();)if(!n(a.getNext().key))return}firstAfterOrEqual(n){const r=this.data.getIteratorFrom(n);return r.hasNext()?r.getNext().key:null}getIterator(){return new gm(this.data.getIterator())}getIteratorFrom(n){return new gm(this.data.getIteratorFrom(n))}add(n){return this.copy(this.data.remove(n).insert(n,!0))}delete(n){return this.has(n)?this.copy(this.data.remove(n)):this}isEmpty(){return this.data.isEmpty()}unionWith(n){let r=this;return r.size<n.size&&(r=n,n=this),n.forEach(a=>{r=r.add(a)}),r}isEqual(n){if(!(n instanceof mn)||this.size!==n.size)return!1;const r=this.data.getIterator(),a=n.data.getIterator();for(;r.hasNext();){const l=r.getNext().key,h=a.getNext().key;if(0!==this.comparator(l,h))return!1}return!0}toArray(){const n=[];return this.forEach(r=>{n.push(r)}),n}toString(){const n=[];return this.forEach(r=>n.push(r)),"SortedSet("+n.toString()+")"}copy(n){const r=new mn(this.comparator);return r.data=n,r}}class gm{constructor(n){this.iter=n}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const Tb=new Xn($e.comparator);function ki(){return Tb}const Cb=new Xn($e.comparator);function mm(){return Cb}const Sb=new Xn($e.comparator);function Gv(){return Sb}const Ab=new mn($e.comparator);function jt(...i){let n=Ab;for(const r of i)n=n.add(r);return n}const KN=new mn(Nt);function ym(){return KN}class kf{constructor(n,r,a,l,h){this.snapshotVersion=n,this.targetChanges=r,this.targetMismatches=a,this.documentUpdates=l,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(n,r){const a=new Map;return a.set(n,dd.createSynthesizedTargetChangeForCurrentChange(n,r)),new kf(It.min(),a,ym(),ki(),jt())}}class dd{constructor(n,r,a,l,h){this.resumeToken=n,this.current=r,this.addedDocuments=a,this.modifiedDocuments=l,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(n,r){return new dd(ur.EMPTY_BYTE_STRING,r,jt(),jt(),jt())}}class _m{constructor(n,r,a,l){this.k=n,this.removedTargetIds=r,this.key=a,this.$=l}}class Wn{constructor(n,r){this.targetId=n,this.O=r}}class Wv{constructor(n,r,a=ur.EMPTY_BYTE_STRING,l=null){this.state=n,this.targetIds=r,this.resumeToken=a,this.cause=l}}class Nb{constructor(){this.F=0,this.M=Rb(),this.L=ur.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(n){n.approximateByteSize()>0&&(this.U=!0,this.L=n)}W(){let n=jt(),r=jt(),a=jt();return this.M.forEach((l,h)=>{switch(h){case 0:n=n.add(l);break;case 2:r=r.add(l);break;case 1:a=a.add(l);break;default:Qe()}}),new dd(this.L,this.B,n,r,a)}G(){this.U=!1,this.M=Rb()}H(n,r){this.U=!0,this.M=this.M.insert(n,r)}J(n){this.U=!0,this.M=this.M.remove(n)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class LC{constructor(n){this.tt=n,this.et=new Map,this.nt=ki(),this.st=zv(),this.it=new mn(Nt)}rt(n){for(const r of n.k)n.$&&n.$.isFoundDocument()?this.ot(r,n.$):this.at(r,n.key,n.$);for(const r of n.removedTargetIds)this.at(r,n.key,n.$)}ct(n){this.forEachTarget(n,r=>{const a=this.ut(r);switch(n.state){case 0:this.ht(r)&&a.j(n.resumeToken);break;case 1:a.X(),a.q||a.G(),a.j(n.resumeToken);break;case 2:a.X(),a.q||this.removeTarget(r);break;case 3:this.ht(r)&&(a.Z(),a.j(n.resumeToken));break;case 4:this.ht(r)&&(this.lt(r),a.j(n.resumeToken));break;default:Qe()}})}forEachTarget(n,r){n.targetIds.length>0?n.targetIds.forEach(r):this.et.forEach((a,l)=>{this.ht(l)&&r(l)})}ft(n){const r=n.targetId,a=n.O.count,l=this.dt(r);if(l){const h=l.target;if(nm(h))if(0===a){const m=new $e(h.path);this.at(r,m,ln.newNoDocument(m,It.min()))}else ht(1===a);else this.wt(r)!==a&&(this.lt(r),this.it=this.it.add(r))}}_t(n){const r=new Map;this.et.forEach((h,m)=>{const E=this.dt(m);if(E){if(h.current&&nm(E.target)){const T=new $e(E.target.path);null!==this.nt.get(T)||this.gt(m,T)||this.at(m,T,ln.newNoDocument(T,n))}h.K&&(r.set(m,h.W()),h.G())}});let a=jt();this.st.forEach((h,m)=>{let E=!0;m.forEachWhile(T=>{const S=this.dt(T);return!S||2===S.purpose||(E=!1,!1)}),E&&(a=a.add(h))});const l=new kf(n,r,this.it,this.nt,a);return this.nt=ki(),this.st=zv(),this.it=new mn(Nt),l}ot(n,r){if(!this.ht(n))return;const a=this.gt(n,r.key)?2:0;this.ut(n).H(r.key,a),this.nt=this.nt.insert(r.key,r),this.st=this.st.insert(r.key,this.yt(r.key).add(n))}at(n,r,a){if(!this.ht(n))return;const l=this.ut(n);this.gt(n,r)?l.H(r,1):l.J(r),this.st=this.st.insert(r,this.yt(r).delete(n)),a&&(this.nt=this.nt.insert(r,a))}removeTarget(n){this.et.delete(n)}wt(n){const r=this.ut(n).W();return this.tt.getRemoteKeysForTarget(n).size+r.addedDocuments.size-r.removedDocuments.size}Y(n){this.ut(n).Y()}ut(n){let r=this.et.get(n);return r||(r=new Nb,this.et.set(n,r)),r}yt(n){let r=this.st.get(n);return r||(r=new mn(Nt),this.st=this.st.insert(n,r)),r}ht(n){const r=null!==this.dt(n);return r||Me("WatchChangeAggregator","Detected inactive target",n),r}dt(n){const r=this.et.get(n);return r&&r.q?null:this.tt.Et(n)}lt(n){this.et.set(n,new Nb),this.tt.getRemoteKeysForTarget(n).forEach(r=>{this.at(n,r,null)})}gt(n,r){return this.tt.getRemoteKeysForTarget(n).has(r)}}function zv(){return new Xn($e.comparator)}function Rb(){return new Xn($e.comparator)}const xb={asc:"ASCENDING",desc:"DESCENDING"},Pb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class hd{constructor(n,r){this.databaseId=n,this.D=r}}function Ff(i,n){return i.D?`${new Date(1e3*n.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+n.nanoseconds).slice(-9)}Z`:{seconds:""+n.seconds,nanos:n.nanoseconds}}function Mb(i,n){return i.D?n.toBase64():n.toUint8Array()}function Ob(i,n){return Ff(i,n.toTimestamp())}function lr(i){return ht(!!i),It.fromTimestamp(function(n){const r=Cr(n);return new ar(r.seconds,r.nanos)}(i))}function vm(i,n){return(r=i,new Rt(["projects",r.projectId,"databases",r.database])).child("documents").child(n).canonicalString();var r}function VC(i){const n=Rt.fromString(i);return ht(Qv(n)),n}function fd(i,n){return vm(i.databaseId,n.path)}function Ds(i,n){const r=VC(n);if(r.get(1)!==i.databaseId.projectId)throw new ve(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+i.databaseId.projectId);if(r.get(3)!==i.databaseId.database)throw new ve(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+i.databaseId.database);return new $e(Ts(r))}function Yi(i,n){return vm(i.databaseId,n)}function kb(i){const n=VC(i);return 4===n.length?Rt.emptyPath():Ts(n)}function Lf(i){return new Rt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Ts(i){return ht(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Ji(i,n,r){return{name:fd(i,n),fields:r.value.mapValue.fields}}function Xi(i,n,r){const a=Ds(i,n.name),l=lr(n.updateTime),h=new Sr({mapValue:{fields:n.fields}}),m=ln.newFoundDocument(a,l,h);return r&&m.setHasCommittedMutations(),r?m.setHasCommittedMutations():m}function Em(i,n){let r;if(n instanceof Of)r={update:Ji(i,n.key,n.value)};else if(n instanceof El)r={delete:fd(i,n.key)};else if(n instanceof Yo)r={update:Ji(i,n.key,n.data),updateMask:Im(n.fieldMask)};else{if(!(n instanceof hm))return Qe();r={verify:fd(i,n.key)}}return n.fieldTransforms.length>0&&(r.updateTransforms=n.fieldTransforms.map(a=>function(l,h){const m=h.transform;if(m instanceof vl)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof iu)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof od)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof ad)return{fieldPath:h.field.canonicalString(),increment:m.C};throw Qe()}(0,a))),n.precondition.isNone||(r.currentDocument=void 0!==(l=n.precondition).updateTime?{updateTime:Ob(i,l.updateTime)}:void 0!==l.exists?{exists:l.exists}:Qe()),r;var l}function Vb(i,n){const r=n.currentDocument?void 0!==(l=n.currentDocument).updateTime?Gn.updateTime(lr(l.updateTime)):void 0!==l.exists?Gn.exists(l.exists):Gn.none():Gn.none(),a=n.updateTransforms?n.updateTransforms.map(l=>function(h,m){let E=null;"setToServerValue"in m?(ht("REQUEST_TIME"===m.setToServerValue),E=new vl):"appendMissingElements"in m?E=new iu(m.appendMissingElements.values||[]):"removeAllFromArray"in m?E=new od(m.removeAllFromArray.values||[]):"increment"in m?E=new ad(h,m.increment):Qe();const T=zt.fromServerFormat(m.fieldPath);return new Mf(T,E)}(i,l)):[];var l;if(n.update){const l=Ds(i,n.update.name),h=new Sr({mapValue:{fields:n.update.fields}});if(n.updateMask){const m=new to((n.updateMask.fieldPaths||[]).map(S=>zt.fromServerFormat(S)));return new Yo(l,h,m,r,a)}return new Of(l,h,r,a)}if(n.delete){const l=Ds(i,n.delete);return new El(l,r)}if(n.verify){const l=Ds(i,n.verify);return new hm(l,r)}return Qe()}function Ub(i,n){return{documents:[Yi(i,n.path)]}}function wm(i,n){const r={structuredQuery:{}},a=n.path;null!==n.collectionGroup?(r.parent=Yi(i,a),r.structuredQuery.from=[{collectionId:n.collectionGroup,allDescendants:!0}]):(r.parent=Yi(i,a.popLast()),r.structuredQuery.from=[{collectionId:a.lastSegment()}]);const l=function(E){if(0===E.length)return;const T=E.map(S=>function(R){if("=="===R.op){if(Pv(R.value))return{unaryFilter:{field:gd(R.field),op:"IS_NAN"}};if(xv(R.value))return{unaryFilter:{field:gd(R.field),op:"IS_NULL"}}}else if("!="===R.op){if(Pv(R.value))return{unaryFilter:{field:gd(R.field),op:"IS_NOT_NAN"}};if(xv(R.value))return{unaryFilter:{field:gd(R.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gd(R.field),op:bm(R.op),value:R.value}}}(S));return 1===T.length?T[0]:{compositeFilter:{op:"AND",filters:T}}}(n.filters);l&&(r.structuredQuery.where=l);const h=function(E){if(0!==E.length)return E.map(T=>{return{field:gd((S=T).field),direction:jb(S.dir)};var S})}(n.orderBy);h&&(r.structuredQuery.orderBy=h);const m=(T=n.limit,i.D||tu(T)?T:{value:T});var T;return null!==m&&(r.structuredQuery.limit=m),n.startAt&&(r.structuredQuery.startAt=Bb(n.startAt)),n.endAt&&(r.structuredQuery.endAt=Bb(n.endAt)),r}function pd(i){let n=kb(i.parent);const r=i.structuredQuery,a=r.from?r.from.length:0;let l=null;if(a>0){ht(1===a);const R=r.from[0];R.allDescendants?l=R.collectionId:n=n.child(R.collectionId)}let h=[];r.where&&(h=Kv(r.where));let m=[];r.orderBy&&(m=r.orderBy.map(R=>{return new xf(wl((O=R).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let E=null;r.limit&&(E=function(R){let O;return O="object"==typeof R?R.value:R,tu(O)?null:O}(r.limit));let T=null;r.startAt&&(T=Zv(r.startAt));let S=null;return r.endAt&&(S=Zv(r.endAt)),hb(n,l,m,h,E,"F",T,S)}function Kv(i){return i?void 0!==i.unaryFilter?[$b(i)]:void 0!==i.fieldFilter?[Hb(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(n=>Kv(n)).reduce((n,r)=>n.concat(r)):Qe():[]}function Bb(i){return{before:i.before,values:i.position}}function Zv(i){return new rm(i.values||[],!!i.before)}function jb(i){return xb[i]}function bm(i){return Pb[i]}function gd(i){return{fieldPath:i.canonicalString()}}function wl(i){return zt.fromServerFormat(i.fieldPath)}function Hb(i){return jr.create(wl(i.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Qe()}}(i.fieldFilter.op),i.fieldFilter.value)}function $b(i){switch(i.unaryFilter.op){case"IS_NAN":const n=wl(i.unaryFilter.field);return jr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=wl(i.unaryFilter.field);return jr.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=wl(i.unaryFilter.field);return jr.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=wl(i.unaryFilter.field);return jr.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Qe()}}function Im(i){const n=[];return i.fields.forEach(r=>n.push(r.canonicalString())),{fieldPaths:n}}function Qv(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function es(i){let n="";for(let r=0;r<i.length;r++)n.length>0&&(n=Yv(n)),n=qb(i.get(r),n);return Yv(n)}function qb(i,n){let r=n;const a=i.length;for(let l=0;l<a;l++){const h=i.charAt(l);switch(h){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=h}}return r}function Yv(i){return i+"\x01\x01"}function ro(i){const n=i.length;if(ht(n>=2),2===n)return ht("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Rt.emptyPath();const r=n-2,a=[];let l="";for(let h=0;h<n;){const m=i.indexOf("\x01",h);switch((m<0||m>r)&&Qe(),i.charAt(m+1)){case"\x01":const E=i.substring(h,m);let T;0===l.length?T=E:(l+=E,T=l,l=""),a.push(T);break;case"\x10":l+=i.substring(h,m),l+="\0";break;case"\x11":l+=i.substring(h,m+1);break;default:Qe()}h=m+2}return new Rt(a)}class Gb{constructor(n,r){this.seconds=n,this.nanoseconds=r}}class _i{constructor(n,r,a){this.ownerId=n,this.allowTabSynchronization=r,this.leaseTimestampMs=a}}_i.store="owner",_i.key="owner";class Jo{constructor(n,r,a){this.userId=n,this.lastAcknowledgedBatchId=r,this.lastStreamToken=a}}Jo.store="mutationQueues",Jo.keyPath="userId";class cn{constructor(n,r,a,l,h){this.userId=n,this.batchId=r,this.localWriteTimeMs=a,this.baseMutations=l,this.mutations=h}}cn.store="mutations",cn.keyPath="batchId",cn.userMutationsIndex="userMutationsIndex",cn.userMutationsKeyPath=["userId","batchId"];class Hr{constructor(){}static prefixForUser(n){return[n]}static prefixForPath(n,r){return[n,es(r)]}static key(n,r,a){return[n,es(r),a]}}Hr.store="documentMutations",Hr.PLACEHOLDER=new Hr;class jC{constructor(n,r){this.path=n,this.readTime=r}}class HC{constructor(n,r){this.path=n,this.version=r}}class An{constructor(n,r,a,l,h,m){this.unknownDocument=n,this.noDocument=r,this.document=a,this.hasCommittedMutations=l,this.readTime=h,this.parentPath=m}}An.store="remoteDocuments",An.readTimeIndex="readTimeIndex",An.readTimeIndexPath="readTime",An.collectionReadTimeIndex="collectionReadTimeIndex",An.collectionReadTimeIndexPath=["parentPath","readTime"];class io{constructor(n){this.byteSize=n}}io.store="remoteDocumentGlobal",io.key="remoteDocumentGlobalKey";class vi{constructor(n,r,a,l,h,m,E){this.targetId=n,this.canonicalId=r,this.readTime=a,this.resumeToken=l,this.lastListenSequenceNumber=h,this.lastLimboFreeSnapshotVersion=m,this.query=E}}vi.store="targets",vi.keyPath="targetId",vi.queryTargetsIndexName="queryTargetsIndex",vi.queryTargetsKeyPath=["canonicalId","targetId"];class Rr{constructor(n,r,a){this.targetId=n,this.path=r,this.sequenceNumber=a}}Rr.store="targetDocuments",Rr.keyPath=["targetId","path"],Rr.documentTargetsIndex="documentTargetsIndex",Rr.documentTargetsKeyPath=["path","targetId"];class Fi{constructor(n,r,a,l){this.highestTargetId=n,this.highestListenSequenceNumber=r,this.lastRemoteSnapshotVersion=a,this.targetCount=l}}Fi.key="targetGlobalKey",Fi.store="targetGlobal";class bl{constructor(n,r){this.collectionId=n,this.parent=r}}bl.store="collectionParents",bl.keyPath=["collectionId","parent"];class Xo{constructor(n,r,a,l){this.clientId=n,this.updateTimeMs=r,this.networkEnabled=a,this.inForeground=l}}Xo.store="clientMetadata",Xo.keyPath="clientId";class md{constructor(n,r,a){this.bundleId=n,this.createTime=r,this.version=a}}md.store="bundles",md.keyPath="bundleId";class yd{constructor(n,r,a){this.name=n,this.readTime=r,this.bundledQuery=a}}yd.store="namedQueries",yd.keyPath="name";const $C=[Jo.store,cn.store,Hr.store,An.store,vi.store,_i.store,Fi.store,Rr.store,Xo.store,io.store,bl.store,md.store,yd.store],Wb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(n){this.onCommittedListeners.push(n)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(n=>n())}}class Ae{constructor(n){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,n(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(n){return this.next(void 0,n)}next(n,r){return this.callbackAttached&&Qe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(n,this.result):new Ae((a,l)=>{this.nextCallback=h=>{this.wrapSuccess(n,h).next(a,l)},this.catchCallback=h=>{this.wrapFailure(r,h).next(a,l)}})}toPromise(){return new Promise((n,r)=>{this.next(n,r)})}wrapUserFunction(n){try{const r=n();return r instanceof Ae?r:Ae.resolve(r)}catch(r){return Ae.reject(r)}}wrapSuccess(n,r){return n?this.wrapUserFunction(()=>n(r)):Ae.resolve(r)}wrapFailure(n,r){return n?this.wrapUserFunction(()=>n(r)):Ae.reject(r)}static resolve(n){return new Ae((r,a)=>{r(n)})}static reject(n){return new Ae((r,a)=>{a(n)})}static waitFor(n){return new Ae((r,a)=>{let l=0,h=0,m=!1;n.forEach(E=>{++l,E.next(()=>{++h,m&&h===l&&r()},T=>a(T))}),m=!0,h===l&&r()})}static or(n){let r=Ae.resolve(!1);for(const a of n)r=r.next(l=>l?Ae.resolve(l):a());return r}static forEach(n,r){const a=[];return n.forEach((l,h)=>{a.push(r.call(this,l,h))}),this.waitFor(a)}}class Dm{constructor(n,r){this.action=n,this.transaction=r,this.aborted=!1,this.Tt=new Tr,this.transaction.oncomplete=()=>{this.Tt.resolve()},this.transaction.onabort=()=>{r.error?this.Tt.reject(new _d(n,r.error)):this.Tt.resolve()},this.transaction.onerror=a=>{const l=Tm(a.target.error);this.Tt.reject(new _d(n,l))}}static open(n,r,a,l){try{return new Dm(r,n.transaction(l,a))}catch(h){throw new _d(r,h)}}get It(){return this.Tt.promise}abort(n){n&&this.Tt.reject(n),this.aborted||(Me("SimpleDb","Aborting transaction:",n?n.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(n){const r=this.transaction.objectStore(n);return new Zb(r)}}class ts{constructor(n,r,a){this.name=n,this.version=r,this.At=a,12.2===ts.Rt((0,Et.z$)())&&qn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(n){return Me("SimpleDb","Removing database:",n),ou(window.indexedDB.deleteDatabase(n)).toPromise()}static bt(){if(!(0,Et.hl)())return!1;if(ts.Pt())return!0;const n=(0,Et.z$)(),r=ts.Rt(n),a=0<r&&r<10,l=ts.vt(n),h=0<l&&l<4.5;return!(n.indexOf("MSIE ")>0||n.indexOf("Trident/")>0||n.indexOf("Edge/")>0||a||h)}static Pt(){var n;return"undefined"!=typeof process&&"YES"===(null===(n=process.env)||void 0===n?void 0:n.Vt)}static St(n,r){return n.store(r)}static Rt(n){const r=n.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(a)}static vt(n){const r=n.match(/Android ([\d.]+)/i),a=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(a)}Dt(n){var r=this;return(0,pe.Z)(function*(){return r.db||(Me("SimpleDb","Opening database:",r.name),r.db=yield new Promise((a,l)=>{const h=indexedDB.open(r.name,r.version);h.onsuccess=m=>{a(m.target.result)},h.onblocked=()=>{l(new _d(n,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},h.onerror=m=>{const E=m.target.error;l("VersionError"===E.name?new ve(oe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===E.name?new ve(oe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+E):new _d(n,E))},h.onupgradeneeded=m=>{Me("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',m.oldVersion),r.At.Ct(m.target.result,h.transaction,m.oldVersion,r.version).next(()=>{Me("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.Nt&&(r.db.onversionchange=a=>r.Nt(a)),r.db})()}xt(n){this.Nt=n,this.db&&(this.db.onversionchange=r=>n(r))}runTransaction(n,r,a,l){var h=this;return(0,pe.Z)(function*(){const m="readonly"===r;let E=0;for(;;){++E;try{h.db=yield h.Dt(n);const T=Dm.open(h.db,n,m?"readonly":"readwrite",a),S=l(T).catch(R=>(T.abort(R),Ae.reject(R))).toPromise();return S.catch(()=>{}),yield T.It,S}catch(T){const S="FirebaseError"!==T.name&&E<3;if(Me("SimpleDb","Transaction failed with error:",T.message,"Retrying:",S),h.close(),!S)return Promise.reject(T)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Kb{constructor(n){this.kt=n,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(n){this.kt=n}done(){this.$t=!0}Mt(n){this.Ot=n}delete(){return ou(this.kt.delete())}}class _d extends ve{constructor(n,r){super(oe.UNAVAILABLE,`IndexedDB transaction '${n}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function su(i){return"IndexedDbTransactionError"===i.name}class Zb{constructor(n){this.store=n}put(n,r){let a;return void 0!==r?(Me("SimpleDb","PUT",this.store.name,n,r),a=this.store.put(r,n)):(Me("SimpleDb","PUT",this.store.name,"<auto-key>",n),a=this.store.put(n)),ou(a)}add(n){return Me("SimpleDb","ADD",this.store.name,n,n),ou(this.store.add(n))}get(n){return ou(this.store.get(n)).next(r=>(void 0===r&&(r=null),Me("SimpleDb","GET",this.store.name,n,r),r))}delete(n){return Me("SimpleDb","DELETE",this.store.name,n),ou(this.store.delete(n))}count(){return Me("SimpleDb","COUNT",this.store.name),ou(this.store.count())}Lt(n,r){const a=this.cursor(this.options(n,r)),l=[];return this.Bt(a,(h,m)=>{l.push(m)}).next(()=>l)}Ut(n,r){Me("SimpleDb","DELETE ALL",this.store.name);const a=this.options(n,r);a.qt=!1;const l=this.cursor(a);return this.Bt(l,(h,m,E)=>E.delete())}Kt(n,r){let a;r?a=n:(a={},r=n);const l=this.cursor(a);return this.Bt(l,r)}jt(n){const r=this.cursor({});return new Ae((a,l)=>{r.onerror=h=>{const m=Tm(h.target.error);l(m)},r.onsuccess=h=>{const m=h.target.result;m?n(m.primaryKey,m.value).next(E=>{E?m.continue():a()}):a()}})}Bt(n,r){const a=[];return new Ae((l,h)=>{n.onerror=m=>{h(m.target.error)},n.onsuccess=m=>{const E=m.target.result;if(!E)return void l();const T=new Kb(E),S=r(E.primaryKey,E.value,T);if(S instanceof Ae){const R=S.catch(O=>(T.done(),Ae.reject(O)));a.push(R)}T.isDone?l():null===T.Ft?E.continue():E.continue(T.Ft)}}).next(()=>Ae.waitFor(a))}options(n,r){let a;return void 0!==n&&("string"==typeof n?a=n:r=n),{index:a,range:r}}cursor(n){let r="next";if(n.reverse&&(r="prev"),n.index){const a=this.store.index(n.index);return n.qt?a.openKeyCursor(n.range,r):a.openCursor(n.range,r)}return this.store.openCursor(n.range,r)}}function ou(i){return new Ae((n,r)=>{i.onsuccess=a=>{n(a.target.result)},i.onerror=a=>{const l=Tm(a.target.error);r(l)}})}let Jv=!1;function Tm(i){const n=ts.Rt((0,Et.z$)());if(n>=12.2&&n<13){const r="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(r)>=0){const a=new ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Jv||(Jv=!0,setTimeout(()=>{throw a},0)),a}}return i}class Xv extends zb{constructor(n,r){super(),this.Qt=n,this.currentSequenceNumber=r}}function Xr(i,n){const r=Le(i);return ts.St(r.Qt,n)}class Cm{constructor(n,r,a,l){this.batchId=n,this.localWriteTime=r,this.baseMutations=a,this.mutations=l}applyToRemoteDocument(n,r){const a=r.mutationResults;for(let l=0;l<this.mutations.length;l++){const h=this.mutations[l];h.key.isEqual(n.key)&&Ib(h,n,a[l])}}applyToLocalView(n){for(const r of this.baseMutations)r.key.isEqual(n.key)&&Db(r,n,this.localWriteTime);for(const r of this.mutations)r.key.isEqual(n.key)&&Db(r,n,this.localWriteTime)}applyToLocalDocumentSet(n){this.mutations.forEach(r=>{const a=n.get(r.key),l=a;this.applyToLocalView(l),a.isValidDocument()||l.convertToNoDocument(It.min())})}keys(){return this.mutations.reduce((n,r)=>n.add(r.key),jt())}isEqual(n){return this.batchId===n.batchId&&Xa(this.mutations,n.mutations,(r,a)=>Bv(r,a))&&Xa(this.baseMutations,n.baseMutations,(r,a)=>Bv(r,a))}}class ea{constructor(n,r,a,l){this.batch=n,this.commitVersion=r,this.mutationResults=a,this.docVersions=l}static from(n,r,a){ht(n.mutations.length===a.length);let l=Gv();const h=n.mutations;for(let m=0;m<h.length;m++)l=l.insert(h[m].key,a[m].version);return new ea(n,r,a,l)}}class au{constructor(n,r,a,l,h=It.min(),m=It.min(),E=ur.EMPTY_BYTE_STRING){this.target=n,this.targetId=r,this.purpose=a,this.sequenceNumber=l,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=E}withSequenceNumber(n){return new au(this.target,this.targetId,this.purpose,n,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(n,r){return new au(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,n)}withLastLimboFreeSnapshotVersion(n){return new au(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,n,this.resumeToken)}}class Qb{constructor(n){this.Wt=n}}function uu(i,n){if(n.document)return Xi(i.Wt,n.document,!!n.hasCommittedMutations);if(n.noDocument){const r=$e.fromSegments(n.noDocument.path),a=Dl(n.noDocument.readTime),l=ln.newNoDocument(r,a);return n.hasCommittedMutations?l.setHasCommittedMutations():l}if(n.unknownDocument){const r=$e.fromSegments(n.unknownDocument.path),a=Dl(n.unknownDocument.version);return ln.newUnknownDocument(r,a)}return Qe()}function qC(i,n,r){const a=Vf(r),l=n.key.path.popLast().toArray();if(n.isFoundDocument()){const h={name:fd(E=i.Wt,(T=n).key),fields:T.data.value.mapValue.fields,updateTime:Ff(E,T.version.toTimestamp())};return new An(null,null,h,n.hasCommittedMutations,a,l)}var E,T;if(n.isNoDocument()){const h=n.key.path.toArray(),m=Il(n.version),E=n.hasCommittedMutations;return new An(null,new jC(h,m),null,E,a,l)}if(n.isUnknownDocument()){const h=n.key.path.toArray(),m=Il(n.version);return new An(new HC(h,m),null,null,!0,a,l)}return Qe()}function Vf(i){const n=i.toTimestamp();return[n.seconds,n.nanoseconds]}function GC(i){const n=new ar(i[0],i[1]);return It.fromTimestamp(n)}function Il(i){const n=i.toTimestamp();return new Gb(n.seconds,n.nanoseconds)}function Dl(i){const n=new ar(i.seconds,i.nanoseconds);return It.fromTimestamp(n)}function Uf(i,n){const r=(n.baseMutations||[]).map(h=>Vb(i.Wt,h));for(let h=0;h<n.mutations.length-1;++h){const m=n.mutations[h];h+1<n.mutations.length&&void 0!==n.mutations[h+1].transform&&(m.updateTransforms=n.mutations[h+1].transform.fieldTransforms,n.mutations.splice(h+1,1),++h)}const a=n.mutations.map(h=>Vb(i.Wt,h)),l=ar.fromMillis(n.localWriteTimeMs);return new Cm(n.batchId,l,r,a)}function tt(i){const n=Dl(i.readTime),r=void 0!==i.lastLimboFreeSnapshotVersion?Dl(i.lastLimboFreeSnapshotVersion):It.min();let a;var l;return void 0!==i.query.documents?(ht(1===(l=i.query).documents.length),a=Ar(Pf(kb(l.documents[0])))):a=Ar(pd(i.query)),new au(a,i.targetId,0,i.lastListenSequenceNumber,n,r,ur.fromBase64String(i.resumeToken))}function Yb(i,n){const r=Il(n.snapshotVersion),a=Il(n.lastLimboFreeSnapshotVersion);let l;l=nm(n.target)?Ub(i.Wt,n.target):wm(i.Wt,n.target);const h=n.resumeToken.toBase64();return new vi(n.targetId,rd(n.target),r,h,n.sequenceNumber,a,l)}function eE(i){const n=pd({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?pb(n,n.limit,"L"):n}class WC{getBundleMetadata(n,r){return Bf(n).get(r).next(a=>{if(a)return{id:(l=a).bundleId,createTime:Dl(l.createTime),version:l.version};var l})}saveBundleMetadata(n,r){return Bf(n).put({bundleId:(a=r).id,createTime:Il(lr(a.createTime)),version:a.version});var a}getNamedQuery(n,r){return Jb(n).get(r).next(a=>{if(a)return{name:(l=a).name,query:eE(l.bundledQuery),readTime:Dl(l.readTime)};var l})}saveNamedQuery(n,r){return Jb(n).put({name:(a=r).name,readTime:Il(lr(a.readTime)),bundledQuery:a.bundledQuery});var a}}function Bf(i){return Xr(i,md.store)}function Jb(i){return Xr(i,yd.store)}class Sm{constructor(){this.Gt=new vd}addToCollectionParentIndex(n,r){return this.Gt.add(r),Ae.resolve()}getCollectionParents(n,r){return Ae.resolve(this.Gt.getEntries(r))}}class vd{constructor(){this.index={}}add(n){const r=n.lastSegment(),a=n.popLast(),l=this.index[r]||new mn(Rt.comparator),h=!l.has(a);return this.index[r]=l.add(a),h}has(n){const r=n.lastSegment(),a=n.popLast(),l=this.index[r];return l&&l.has(a)}getEntries(n){return(this.index[n]||new mn(Rt.comparator)).toArray()}}class Nn{constructor(){this.zt=new vd}addToCollectionParentIndex(n,r){if(!this.zt.has(r)){const a=r.lastSegment(),l=r.popLast();n.addOnCommittedListener(()=>{this.zt.add(r)});const h={collectionId:a,parent:es(l)};return zC(n).put(h)}return Ae.resolve()}getCollectionParents(n,r){const a=[],l=IDBKeyRange.bound([r,""],[ib(r),""],!1,!0);return zC(n).Lt(l).next(h=>{for(const m of h){if(m.collectionId!==r)break;a.push(ro(m.parent))}return a})}}function zC(i){return Xr(i,bl.store)}const tE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class $r{constructor(n,r,a){this.cacheSizeCollectionThreshold=n,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=a}static withCacheSize(n){return new $r(n,$r.DEFAULT_COLLECTION_PERCENTILE,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Xb(i,n,r){const a=i.store(cn.store),l=i.store(Hr.store),h=[],m=IDBKeyRange.only(r.batchId);let E=0;const T=a.Kt({range:m},(R,O,V)=>(E++,V.delete()));h.push(T.next(()=>{ht(1===E)}));const S=[];for(const R of r.mutations){const O=Hr.key(n,R.key.path,r.batchId);h.push(l.delete(O)),S.push(R.key)}return Ae.waitFor(h).next(()=>S)}function jf(i){if(!i)return 0;let n;if(i.document)n=i.document;else if(i.unknownDocument)n=i.unknownDocument;else{if(!i.noDocument)throw Qe();n=i.noDocument}return JSON.stringify(n).length}$r.DEFAULT_COLLECTION_PERCENTILE=10,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$r.DEFAULT=new $r(41943040,$r.DEFAULT_COLLECTION_PERCENTILE,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$r.DISABLED=new $r(-1,0,0);class Am{constructor(n,r,a,l){this.userId=n,this.N=r,this.Ht=a,this.referenceDelegate=l,this.Jt={}}static Yt(n,r,a,l){ht(""!==n.uid);const h=n.isAuthenticated()?n.uid:"";return new Am(h,r,a,l)}checkEmpty(n){let r=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ta(n).Kt({index:cn.userMutationsIndex,range:a},(l,h,m)=>{r=!1,m.done()}).next(()=>r)}addMutationBatch(n,r,a,l){const h=Ed(n),m=ta(n);return m.add({}).next(E=>{ht("number"==typeof E);const T=new Cm(E,r,a,l),S=function(V,q,Z){const ge=Z.baseMutations.map(We=>Em(V.Wt,We)),Re=Z.mutations.map(We=>Em(V.Wt,We));return new cn(q,Z.batchId,Z.localWriteTime.toMillis(),ge,Re)}(this.N,this.userId,T),R=[];let O=new mn((V,q)=>Nt(V.canonicalString(),q.canonicalString()));for(const V of l){const q=Hr.key(this.userId,V.key.path,E);O=O.add(V.key.path.popLast()),R.push(m.put(S)),R.push(h.put(q,Hr.PLACEHOLDER))}return O.forEach(V=>{R.push(this.Ht.addToCollectionParentIndex(n,V))}),n.addOnCommittedListener(()=>{this.Jt[E]=T.keys()}),Ae.waitFor(R).next(()=>T)})}lookupMutationBatch(n,r){return ta(n).get(r).next(a=>a?(ht(a.userId===this.userId),Uf(this.N,a)):null)}Xt(n,r){return this.Jt[r]?Ae.resolve(this.Jt[r]):this.lookupMutationBatch(n,r).next(a=>{if(a){const l=a.keys();return this.Jt[r]=l,l}return null})}getNextMutationBatchAfterBatchId(n,r){const a=r+1,l=IDBKeyRange.lowerBound([this.userId,a]);let h=null;return ta(n).Kt({index:cn.userMutationsIndex,range:l},(m,E,T)=>{E.userId===this.userId&&(ht(E.batchId>=a),h=Uf(this.N,E)),T.done()}).next(()=>h)}getHighestUnacknowledgedBatchId(n){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=-1;return ta(n).Kt({index:cn.userMutationsIndex,range:r,reverse:!0},(l,h,m)=>{a=h.batchId,m.done()}).next(()=>a)}getAllMutationBatches(n){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ta(n).Lt(cn.userMutationsIndex,r).next(a=>a.map(l=>Uf(this.N,l)))}getAllMutationBatchesAffectingDocumentKey(n,r){const a=Hr.prefixForPath(this.userId,r.path),l=IDBKeyRange.lowerBound(a),h=[];return Ed(n).Kt({range:l},(m,E,T)=>{const[S,R,O]=m,V=ro(R);if(S===this.userId&&r.path.isEqual(V))return ta(n).get(O).next(q=>{if(!q)throw Qe();ht(q.userId===this.userId),h.push(Uf(this.N,q))});T.done()}).next(()=>h)}getAllMutationBatchesAffectingDocumentKeys(n,r){let a=new mn(Nt);const l=[];return r.forEach(h=>{const m=Hr.prefixForPath(this.userId,h.path),E=IDBKeyRange.lowerBound(m),T=Ed(n).Kt({range:E},(S,R,O)=>{const[V,q,Z]=S,ge=ro(q);V===this.userId&&h.path.isEqual(ge)?a=a.add(Z):O.done()});l.push(T)}),Ae.waitFor(l).next(()=>this.Zt(n,a))}getAllMutationBatchesAffectingQuery(n,r){const a=r.path,l=a.length+1,h=Hr.prefixForPath(this.userId,a),m=IDBKeyRange.lowerBound(h);let E=new mn(Nt);return Ed(n).Kt({range:m},(T,S,R)=>{const[O,V,q]=T,Z=ro(V);O===this.userId&&a.isPrefixOf(Z)?Z.length===l&&(E=E.add(q)):R.done()}).next(()=>this.Zt(n,E))}Zt(n,r){const a=[],l=[];return r.forEach(h=>{l.push(ta(n).get(h).next(m=>{if(null===m)throw Qe();ht(m.userId===this.userId),a.push(Uf(this.N,m))}))}),Ae.waitFor(l).next(()=>a)}removeMutationBatch(n,r){return Xb(n.Qt,this.userId,r).next(a=>(n.addOnCommittedListener(()=>{this.te(r.batchId)}),Ae.forEach(a,l=>this.referenceDelegate.markPotentiallyOrphaned(n,l))))}te(n){delete this.Jt[n]}performConsistencyCheck(n){return this.checkEmpty(n).next(r=>{if(!r)return Ae.resolve();const a=IDBKeyRange.lowerBound(Hr.prefixForUser(this.userId)),l=[];return Ed(n).Kt({range:a},(h,m,E)=>{if(h[0]===this.userId){const T=ro(h[1]);l.push(T)}else E.done()}).next(()=>{ht(0===l.length)})})}containsKey(n,r){return nE(n,this.userId,r)}ee(n){return eI(n).get(this.userId).next(r=>r||new Jo(this.userId,-1,""))}}function nE(i,n,r){const a=Hr.prefixForPath(n,r.path),l=a[1],h=IDBKeyRange.lowerBound(a);let m=!1;return Ed(i).Kt({range:h,qt:!0},(E,T,S)=>{const[R,O,V]=E;R===n&&O===l&&(m=!0),S.done()}).next(()=>m)}function ta(i){return Xr(i,cn.store)}function Ed(i){return Xr(i,Hr.store)}function eI(i){return Xr(i,Jo.store)}class Tl{constructor(n){this.ne=n}next(){return this.ne+=2,this.ne}static se(){return new Tl(0)}static ie(){return new Tl(-1)}}class Hf{constructor(n,r){this.referenceDelegate=n,this.N=r}allocateTargetId(n){return this.re(n).next(r=>{const a=new Tl(r.highestTargetId);return r.highestTargetId=a.next(),this.oe(n,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(n){return this.re(n).next(r=>It.fromTimestamp(new ar(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(n){return this.re(n).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(n,r,a){return this.re(n).next(l=>(l.highestListenSequenceNumber=r,a&&(l.lastRemoteSnapshotVersion=a.toTimestamp()),r>l.highestListenSequenceNumber&&(l.highestListenSequenceNumber=r),this.oe(n,l)))}addTargetData(n,r){return this.ae(n,r).next(()=>this.re(n).next(a=>(a.targetCount+=1,this.ce(r,a),this.oe(n,a))))}updateTargetData(n,r){return this.ae(n,r)}removeTargetData(n,r){return this.removeMatchingKeysForTargetId(n,r.targetId).next(()=>wd(n).delete(r.targetId)).next(()=>this.re(n)).next(a=>(ht(a.targetCount>0),a.targetCount-=1,this.oe(n,a)))}removeTargets(n,r,a){let l=0;const h=[];return wd(n).Kt((m,E)=>{const T=tt(E);T.sequenceNumber<=r&&null===a.get(T.targetId)&&(l++,h.push(this.removeTargetData(n,T)))}).next(()=>Ae.waitFor(h)).next(()=>l)}forEachTarget(n,r){return wd(n).Kt((a,l)=>{const h=tt(l);r(h)})}re(n){return tI(n).get(Fi.key).next(r=>(ht(null!==r),r))}oe(n,r){return tI(n).put(Fi.key,r)}ae(n,r){return wd(n).put(Yb(this.N,r))}ce(n,r){let a=!1;return n.targetId>r.highestTargetId&&(r.highestTargetId=n.targetId,a=!0),n.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n.sequenceNumber,a=!0),a}getTargetCount(n){return this.re(n).next(r=>r.targetCount)}getTargetData(n,r){const a=rd(r),l=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let h=null;return wd(n).Kt({range:l,index:vi.queryTargetsIndexName},(m,E,T)=>{const S=tt(E);Ov(r,S.target)&&(h=S,T.done())}).next(()=>h)}addMatchingKeys(n,r,a){const l=[],h=lu(n);return r.forEach(m=>{const E=es(m.path);l.push(h.put(new Rr(a,E))),l.push(this.referenceDelegate.addReference(n,a,m))}),Ae.waitFor(l)}removeMatchingKeys(n,r,a){const l=lu(n);return Ae.forEach(r,h=>{const m=es(h.path);return Ae.waitFor([l.delete([a,m]),this.referenceDelegate.removeReference(n,a,h)])})}removeMatchingKeysForTargetId(n,r){const a=lu(n),l=IDBKeyRange.bound([r],[r+1],!1,!0);return a.delete(l)}getMatchingKeysForTargetId(n,r){const a=IDBKeyRange.bound([r],[r+1],!1,!0),l=lu(n);let h=jt();return l.Kt({range:a,qt:!0},(m,E,T)=>{const S=ro(m[1]),R=new $e(S);h=h.add(R)}).next(()=>h)}containsKey(n,r){const a=es(r.path),l=IDBKeyRange.bound([a],[ib(a)],!1,!0);let h=0;return lu(n).Kt({index:Rr.documentTargetsIndex,qt:!0,range:l},([m,E],T,S)=>{0!==m&&(h++,S.done())}).next(()=>h>0)}Et(n,r){return wd(n).get(r).next(a=>a?tt(a):null)}}function wd(i){return Xr(i,vi.store)}function tI(i){return Xr(i,Fi.store)}function lu(i){return Xr(i,Rr.store)}function so(i){return Nm.apply(this,arguments)}function Nm(){return(Nm=(0,pe.Z)(function*(i){if(i.code!==oe.FAILED_PRECONDITION||i.message!==Wb)throw i;Me("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function rE([i,n],[r,a]){const l=Nt(i,r);return 0===l?Nt(n,a):l}class nI{constructor(n){this.ue=n,this.buffer=new mn(rE),this.he=0}le(){return++this.he}fe(n){const r=[n,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(r);else{const a=this.buffer.last();rE(r,a)<0&&(this.buffer=this.buffer.delete(a).add(r))}}get maxValue(){return this.buffer.last()[0]}}class KC{constructor(n,r){this.garbageCollector=n,this.asyncQueue=r,this.de=!1,this.we=null}start(n){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(n)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(n){var r=this;const a=this.de?3e5:6e4;Me("LruGarbageCollector",`Garbage collection scheduled in ${a}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",a,(0,pe.Z)(function*(){r.we=null,r.de=!0;try{yield n.collectGarbage(r.garbageCollector)}catch(l){su(l)?Me("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",l):yield so(l)}yield r._e(n)}))}}class $f{constructor(n,r){this.me=n,this.params=r}calculateTargetCount(n,r){return this.me.ge(n).next(a=>Math.floor(r/100*a))}nthSequenceNumber(n,r){if(0===r)return Ae.resolve(Zi.T);const a=new nI(r);return this.me.forEachTarget(n,l=>a.fe(l.sequenceNumber)).next(()=>this.me.ye(n,l=>a.fe(l))).next(()=>a.maxValue)}removeTargets(n,r,a){return this.me.removeTargets(n,r,a)}removeOrphanedDocuments(n,r){return this.me.removeOrphanedDocuments(n,r)}collect(n,r){return-1===this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),Ae.resolve(tE)):this.getCacheSize(n).next(a=>a<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tE):this.pe(n,r))}getCacheSize(n){return this.me.getCacheSize(n)}pe(n,r){let a,l,h,m,E,T,S;const R=Date.now();return this.calculateTargetCount(n,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),l=this.params.maximumSequenceNumbersToCollect):l=O,m=Date.now(),this.nthSequenceNumber(n,l))).next(O=>(a=O,E=Date.now(),this.removeTargets(n,a,r))).next(O=>(h=O,T=Date.now(),this.removeOrphanedDocuments(n,a))).next(O=>(S=Date.now(),Qw()<=Wa.in.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${m-R}ms\n\tDetermined least recently used ${l} in `+(E-m)+`ms\n\tRemoved ${h} targets in `+(T-E)+`ms\n\tRemoved ${O} documents in `+(S-T)+`ms\nTotal Duration: ${S-R}ms`),Ae.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:h,documentsRemoved:O})))}}class qf{constructor(n,r){this.db=n,this.garbageCollector=new $f(this,r)}ge(n){const r=this.Ee(n);return this.db.getTargetCache().getTargetCount(n).next(a=>r.next(l=>a+l))}Ee(n){let r=0;return this.ye(n,a=>{r++}).next(()=>r)}forEachTarget(n,r){return this.db.getTargetCache().forEachTarget(n,r)}ye(n,r){return this.Te(n,(a,l)=>r(l))}addReference(n,r,a){return Rm(n,a)}removeReference(n,r,a){return Rm(n,a)}removeTargets(n,r,a){return this.db.getTargetCache().removeTargets(n,r,a)}markPotentiallyOrphaned(n,r){return Rm(n,r)}Ie(n,r){return function(a,l){let h=!1;return eI(a).jt(m=>nE(a,m,l).next(E=>(E&&(h=!0),Ae.resolve(!E)))).next(()=>h)}(n,r)}removeOrphanedDocuments(n,r){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),l=[];let h=0;return this.Te(n,(m,E)=>{if(E<=r){const T=this.Ie(n,m).next(S=>{if(!S)return h++,a.getEntry(n,m).next(()=>(a.removeEntry(m),lu(n).delete([0,es(m.path)])))});l.push(T)}}).next(()=>Ae.waitFor(l)).next(()=>a.apply(n)).next(()=>h)}removeTarget(n,r){const a=r.withSequenceNumber(n.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(n,a)}updateLimboDocument(n,r){return Rm(n,r)}Te(n,r){const a=lu(n);let l,h=Zi.T;return a.Kt({index:Rr.documentTargetsIndex},([m,E],{path:T,sequenceNumber:S})=>{0===m?(h!==Zi.T&&r(new $e(ro(l)),h),h=S,l=T):h=Zi.T}).next(()=>{h!==Zi.T&&r(new $e(ro(l)),h)})}getCacheSize(n){return this.db.getRemoteDocumentCache().getSize(n)}}function Rm(i,n){return lu(i).put((a=i.currentSequenceNumber,new Rr(0,es(n.path),a)));var a}class bd{constructor(n,r){this.mapKeyFn=n,this.equalsFn=r,this.inner={}}get(n){const r=this.mapKeyFn(n),a=this.inner[r];if(void 0!==a)for(const[l,h]of a)if(this.equalsFn(l,n))return h}has(n){return void 0!==this.get(n)}set(n,r){const a=this.mapKeyFn(n),l=this.inner[a];if(void 0!==l){for(let h=0;h<l.length;h++)if(this.equalsFn(l[h][0],n))return void(l[h]=[n,r]);l.push([n,r])}else this.inner[a]=[[n,r]]}delete(n){const r=this.mapKeyFn(n),a=this.inner[r];if(void 0===a)return!1;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],n))return 1===a.length?delete this.inner[r]:a.splice(l,1),!0;return!1}forEach(n){ml(this.inner,(r,a)=>{for(const[l,h]of a)n(l,h)})}isEmpty(){return ob(this.inner)}}class rI{constructor(){this.changes=new bd(n=>n.toString(),(n,r)=>n.isEqual(r)),this.changesApplied=!1}getReadTime(n){const r=this.changes.get(n);return r?r.readTime:It.min()}addEntry(n,r){this.assertNotApplied(),this.changes.set(n.key,{document:n,readTime:r})}removeEntry(n,r=null){this.assertNotApplied(),this.changes.set(n,{document:ln.newInvalidDocument(n),readTime:r})}getEntry(n,r){this.assertNotApplied();const a=this.changes.get(r);return void 0!==a?Ae.resolve(a.document):this.getFromCache(n,r)}getEntries(n,r){return this.getAllFromCache(n,r)}apply(n){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(n)}assertNotApplied(){}}class iI{constructor(n,r){this.N=n,this.Ht=r}addEntry(n,r,a){return cu(n).put(Gf(r),a)}removeEntry(n,r){const a=cu(n),l=Gf(r);return a.delete(l)}updateMetadata(n,r){return this.getMetadata(n).next(a=>(a.byteSize+=r,this.Ae(n,a)))}getEntry(n,r){return cu(n).get(Gf(r)).next(a=>this.Re(r,a))}be(n,r){return cu(n).get(Gf(r)).next(a=>({document:this.Re(r,a),size:jf(a)}))}getEntries(n,r){let a=ki();return this.Pe(n,r,(l,h)=>{const m=this.Re(l,h);a=a.insert(l,m)}).next(()=>a)}ve(n,r){let a=ki(),l=new Xn($e.comparator);return this.Pe(n,r,(h,m)=>{const E=this.Re(h,m);a=a.insert(h,E),l=l.insert(h,jf(m))}).next(()=>({documents:a,Ve:l}))}Pe(n,r,a){if(r.isEmpty())return Ae.resolve();const l=IDBKeyRange.bound(r.first().path.toArray(),r.last().path.toArray()),h=r.getIterator();let m=h.getNext();return cu(n).Kt({range:l},(E,T,S)=>{const R=$e.fromSegments(E);for(;m&&$e.comparator(m,R)<0;)a(m,null),m=h.getNext();m&&m.isEqual(R)&&(a(m,T),m=h.hasNext()?h.getNext():null),m?S.Mt(m.path.toArray()):S.done()}).next(()=>{for(;m;)a(m,null),m=h.hasNext()?h.getNext():null})}getDocumentsMatchingQuery(n,r,a){let l=ki();const h=r.path.length+1,m={};if(a.isEqual(It.min())){const E=r.path.toArray();m.range=IDBKeyRange.lowerBound(E)}else{const E=r.path.toArray(),T=Vf(a);m.range=IDBKeyRange.lowerBound([E,T],!0),m.index=An.collectionReadTimeIndex}return cu(n).Kt(m,(E,T,S)=>{if(E.length!==h)return;const R=uu(this.N,T);r.path.isPrefixOf(R.key.path)?ru(r,R)&&(l=l.insert(R.key,R)):S.done()}).next(()=>l)}newChangeBuffer(n){return new sI(this,!!n&&n.trackRemovals)}getSize(n){return this.getMetadata(n).next(r=>r.byteSize)}getMetadata(n){return iE(n).get(io.key).next(r=>(ht(!!r),r))}Ae(n,r){return iE(n).put(io.key,r)}Re(n,r){if(r){const a=uu(this.N,r);if(!a.isNoDocument()||!a.version.isEqual(It.min()))return a}return ln.newInvalidDocument(n)}}class sI extends rI{constructor(n,r){super(),this.Se=n,this.trackRemovals=r,this.De=new bd(a=>a.toString(),(a,l)=>a.isEqual(l))}applyChanges(n){const r=[];let a=0,l=new mn((h,m)=>Nt(h.canonicalString(),m.canonicalString()));return this.changes.forEach((h,m)=>{const E=this.De.get(h);if(m.document.isValidDocument()){const T=qC(this.Se.N,m.document,this.getReadTime(h));l=l.add(h.path.popLast()),a+=jf(T)-E,r.push(this.Se.addEntry(n,h,T))}else if(a-=E,this.trackRemovals){const T=qC(this.Se.N,ln.newNoDocument(h,It.min()),this.getReadTime(h));r.push(this.Se.addEntry(n,h,T))}else r.push(this.Se.removeEntry(n,h))}),l.forEach(h=>{r.push(this.Se.Ht.addToCollectionParentIndex(n,h))}),r.push(this.Se.updateMetadata(n,a)),Ae.waitFor(r)}getFromCache(n,r){return this.Se.be(n,r).next(a=>(this.De.set(r,a.size),a.document))}getAllFromCache(n,r){return this.Se.ve(n,r).next(({documents:a,Ve:l})=>(l.forEach((h,m)=>{this.De.set(h,m)}),a))}}function iE(i){return Xr(i,io.store)}function cu(i){return Xr(i,An.store)}function Gf(i){return i.path.toArray()}class ZC{constructor(n){this.N=n}Ct(n,r,a,l){ht(a<l&&a>=0&&l<=11);const h=new Dm("createOrUpgrade",r);var E;a<1&&l>=1&&(n.createObjectStore(_i.store),(E=n).createObjectStore(Jo.store,{keyPath:Jo.keyPath}),E.createObjectStore(cn.store,{keyPath:cn.keyPath,autoIncrement:!0}).createIndex(cn.userMutationsIndex,cn.userMutationsKeyPath,{unique:!0}),E.createObjectStore(Hr.store),oI(n),function(E){E.createObjectStore(An.store)}(n));let m=Ae.resolve();return a<3&&l>=3&&(0!==a&&(function(E){E.deleteObjectStore(Rr.store),E.deleteObjectStore(vi.store),E.deleteObjectStore(Fi.store)}(n),oI(n)),m=m.next(()=>function(E){const T=E.store(Fi.store),S=new Fi(0,0,It.min().toTimestamp(),0);return T.put(Fi.key,S)}(h))),a<4&&l>=4&&(0!==a&&(m=m.next(()=>function(E,T){return T.store(cn.store).Lt().next(S=>{E.deleteObjectStore(cn.store),E.createObjectStore(cn.store,{keyPath:cn.keyPath,autoIncrement:!0}).createIndex(cn.userMutationsIndex,cn.userMutationsKeyPath,{unique:!0});const R=T.store(cn.store),O=S.map(V=>R.put(V));return Ae.waitFor(O)})}(n,h))),m=m.next(()=>{!function(E){E.createObjectStore(Xo.store,{keyPath:Xo.keyPath})}(n)})),a<5&&l>=5&&(m=m.next(()=>this.Ce(h))),a<6&&l>=6&&(m=m.next(()=>(function(E){E.createObjectStore(io.store)}(n),this.Ne(h)))),a<7&&l>=7&&(m=m.next(()=>this.xe(h))),a<8&&l>=8&&(m=m.next(()=>this.ke(n,h))),a<9&&l>=9&&(m=m.next(()=>{(function(E){E.objectStoreNames.contains("remoteDocumentChanges")&&E.deleteObjectStore("remoteDocumentChanges")})(n),function(E){const T=E.objectStore(An.store);T.createIndex(An.readTimeIndex,An.readTimeIndexPath,{unique:!1}),T.createIndex(An.collectionReadTimeIndex,An.collectionReadTimeIndexPath,{unique:!1})}(r)})),a<10&&l>=10&&(m=m.next(()=>this.$e(h))),a<11&&l>=11&&(m=m.next(()=>{(function(E){E.createObjectStore(md.store,{keyPath:md.keyPath})})(n),function(E){E.createObjectStore(yd.store,{keyPath:yd.keyPath})}(n)})),m}Ne(n){let r=0;return n.store(An.store).Kt((a,l)=>{r+=jf(l)}).next(()=>{const a=new io(r);return n.store(io.store).put(io.key,a)})}Ce(n){const r=n.store(Jo.store),a=n.store(cn.store);return r.Lt().next(l=>Ae.forEach(l,h=>{const m=IDBKeyRange.bound([h.userId,-1],[h.userId,h.lastAcknowledgedBatchId]);return a.Lt(cn.userMutationsIndex,m).next(E=>Ae.forEach(E,T=>{ht(T.userId===h.userId);const S=Uf(this.N,T);return Xb(n,h.userId,S).next(()=>{})}))}))}xe(n){const r=n.store(Rr.store),a=n.store(An.store);return n.store(Fi.store).get(Fi.key).next(l=>{const h=[];return a.Kt((m,E)=>{const T=new Rt(m),S=[0,es(T)];h.push(r.get(S).next(R=>R?Ae.resolve():r.put(new Rr(0,es(T),l.highestListenSequenceNumber))))}).next(()=>Ae.waitFor(h))})}ke(n,r){n.createObjectStore(bl.store,{keyPath:bl.keyPath});const a=r.store(bl.store),l=new vd,h=m=>{if(l.add(m)){const E=m.lastSegment(),T=m.popLast();return a.put({collectionId:E,parent:es(T)})}};return r.store(An.store).Kt({qt:!0},(m,E)=>{const T=new Rt(m);return h(T.popLast())}).next(()=>r.store(Hr.store).Kt({qt:!0},([m,E,T],S)=>{const R=ro(E);return h(R.popLast())}))}$e(n){const r=n.store(vi.store);return r.Kt((a,l)=>{const h=tt(l),m=Yb(this.N,h);return r.put(m)})}}function oI(i){i.createObjectStore(Rr.store,{keyPath:Rr.keyPath}).createIndex(Rr.documentTargetsIndex,Rr.documentTargetsKeyPath,{unique:!0}),i.createObjectStore(vi.store,{keyPath:vi.keyPath}).createIndex(vi.queryTargetsIndexName,vi.queryTargetsKeyPath,{unique:!0}),i.createObjectStore(Fi.store)}const aI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class uI{constructor(n,r,a,l,h,m,E,T,S,R){if(this.allowTabSynchronization=n,this.persistenceKey=r,this.clientId=a,this.Oe=h,this.window=m,this.document=E,this.Fe=S,this.Me=R,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=O=>Promise.resolve(),!uI.bt())throw new ve(oe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qf(this,l),this.We=r+"main",this.N=new Qb(T),this.Ge=new ts(this.We,11,new ZC(this.N)),this.ze=new Hf(this.referenceDelegate,this.N),this.Ht=new Nn,this.He=new iI(this.N,this.Ht),this.Je=new WC,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===R&&qn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ve(oe.FAILED_PRECONDITION,aI);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",n=>this.ze.getHighestSequenceNumber(n))}).then(n=>{this.Le=new Zi(n,this.Fe)}).then(()=>{this.Be=!0}).catch(n=>(this.Ge&&this.Ge.close(),Promise.reject(n)))}nn(n){var r=this;return this.Qe=function(){var a=(0,pe.Z)(function*(l){if(r.started)return n(l)});return function(l){return a.apply(this,arguments)}}(),n(this.isPrimary)}setDatabaseDeletedListener(n){this.Ge.xt(function(){var r=(0,pe.Z)(function*(a){null===a.newVersion&&(yield n())});return function(a){return r.apply(this,arguments)}}())}setNetworkEnabled(n){var r=this;this.networkEnabled!==n&&(this.networkEnabled=n,this.Oe.enqueueAndForget((0,pe.Z)(function*(){r.started&&(yield r.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",n=>sE(n).put(new Xo(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(n).next(r=>{r||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(n)).next(r=>this.isPrimary&&!r?this.on(n).next(()=>!1):!!r&&this.an(n).next(()=>!0))).catch(n=>{if(su(n))return Me("IndexedDbPersistence","Failed to extend owner lease: ",n),this.isPrimary;if(!this.allowTabSynchronization)throw n;return Me("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(n=>{this.isPrimary!==n&&this.Oe.enqueueRetryable(()=>this.Qe(n)),this.isPrimary=n})}sn(n){return xm(n).get(_i.key).next(r=>Ae.resolve(this.cn(r)))}un(n){return sE(n).delete(this.clientId)}hn(){var n=this;return(0,pe.Z)(function*(){if(n.isPrimary&&!n.ln(n.je,18e5)){n.je=Date.now();const r=yield n.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",a=>{const l=Xr(a,Xo.store);return l.Lt().next(h=>{const m=n.fn(h,18e5),E=h.filter(T=>-1===m.indexOf(T));return Ae.forEach(E,T=>l.delete(T.clientId)).next(()=>E)})}).catch(()=>[]);if(n.Ye)for(const a of r)n.Ye.removeItem(n.dn(a.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(n){return!!n&&n.ownerId===this.clientId}rn(n){return this.Me?Ae.resolve(!0):xm(n).get(_i.key).next(r=>{if(null!==r&&this.ln(r.leaseTimestampMs,5e3)&&!this.wn(r.ownerId)){if(this.cn(r)&&this.networkEnabled)return!0;if(!this.cn(r)){if(!r.allowTabSynchronization)throw new ve(oe.FAILED_PRECONDITION,aI);return!1}}return!(!this.networkEnabled||!this.inForeground)||sE(n).Lt().next(a=>void 0===this.fn(a,5e3).find(l=>{if(this.clientId!==l.clientId){const m=!this.inForeground&&l.inForeground,E=this.networkEnabled===l.networkEnabled;if(!this.networkEnabled&&l.networkEnabled||m&&E)return!0}return!1}))}).next(r=>(this.isPrimary!==r&&Me("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var n=this;return(0,pe.Z)(function*(){n.Be=!1,n._n(),n.Ke&&(n.Ke.cancel(),n.Ke=null),n.mn(),n.gn(),yield n.Ge.runTransaction("shutdown","readwrite",[_i.store,Xo.store],r=>{const a=new Xv(r,Zi.T);return n.on(a).next(()=>n.un(a))}),n.Ge.close(),n.yn()})()}fn(n,r){return n.filter(a=>this.ln(a.updateTimeMs,r)&&!this.wn(a.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",n=>sE(n).Lt().next(r=>this.fn(r,18e5).map(a=>a.clientId)))}get started(){return this.Be}getMutationQueue(n){return Am.Yt(n,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(n,r,a){let h;return Me("IndexedDbPersistence","Starting transaction:",n),this.Ge.runTransaction(n,"readonly"===r?"readonly":"readwrite",$C,m=>(h=new Xv(m,this.Le?this.Le.next():Zi.T),"readwrite-primary"===r?this.sn(h).next(E=>!!E||this.rn(h)).next(E=>{if(!E)throw qn(`Failed to obtain primary lease for action '${n}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new ve(oe.FAILED_PRECONDITION,Wb);return a(h)}).next(E=>this.an(h).next(()=>E)):this.En(h).next(()=>a(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}En(n){return xm(n).get(_i.key).next(r=>{if(null!==r&&this.ln(r.leaseTimestampMs,5e3)&&!this.wn(r.ownerId)&&!this.cn(r)&&!(this.Me||this.allowTabSynchronization&&r.allowTabSynchronization))throw new ve(oe.FAILED_PRECONDITION,aI)})}an(n){const r=new _i(this.clientId,this.allowTabSynchronization,Date.now());return xm(n).put(_i.key,r)}static bt(){return ts.bt()}on(n){const r=xm(n);return r.get(_i.key).next(a=>this.cn(a)?(Me("IndexedDbPersistence","Releasing primary lease."),r.delete(_i.key)):Ae.resolve())}ln(n,r){const a=Date.now();return!(n<a-r||n>a&&(qn(`Detected an update time that is in the future: ${n} > ${a}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var n;"function"==typeof(null===(n=this.window)||void 0===n?void 0:n.addEventListener)&&(this.Ue=()=>{this._n(),(0,Et.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(n){var r;try{const a=null!==(null===(r=this.Ye)||void 0===r?void 0:r.getItem(this.dn(n)));return Me("IndexedDbPersistence",`Client '${n}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return qn("IndexedDbPersistence","Failed to get zombied client id.",a),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(n){qn("Failed to set zombie client id.",n)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(n){}}dn(n){return`firestore_zombie_${this.persistenceKey}_${n}`}}function xm(i){return Xr(i,_i.store)}function sE(i){return Xr(i,Xo.store)}function Pm(i,n){let r=i.projectId;return i.isDefaultDatabase||(r+="."+i.database),"firestore/"+n+"/"+r+"/"}class Mm{constructor(n,r){this.progress=n,this.Tn=r}}class lI{constructor(n,r,a){this.He=n,this.In=r,this.Ht=a}An(n,r){return this.In.getAllMutationBatchesAffectingDocumentKey(n,r).next(a=>this.Rn(n,r,a))}Rn(n,r,a){return this.He.getEntry(n,r).next(l=>{for(const h of a)h.applyToLocalView(l);return l})}bn(n,r){n.forEach((a,l)=>{for(const h of r)h.applyToLocalView(l)})}Pn(n,r){return this.He.getEntries(n,r).next(a=>this.vn(n,a).next(()=>a))}vn(n,r){return this.In.getAllMutationBatchesAffectingDocumentKeys(n,r).next(a=>this.bn(r,a))}getDocumentsMatchingQuery(n,r,a){return $e.isDocumentKey((l=r).path)&&null===l.collectionGroup&&0===l.filters.length?this.Vn(n,r.path):fb(r)?this.Sn(n,r,a):this.Dn(n,r,a);var l}Vn(n,r){return this.An(n,new $e(r)).next(a=>{let l=mm();return a.isFoundDocument()&&(l=l.insert(a.key,a)),l})}Sn(n,r,a){const l=r.collectionGroup;let h=mm();return this.Ht.getCollectionParents(n,l).next(m=>Ae.forEach(m,E=>{const T=(S=r,R=E.child(l),new Is(R,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt));var S,R;return this.Dn(n,T,a).next(S=>{S.forEach((R,O)=>{h=h.insert(R,O)})})}).next(()=>h))}Dn(n,r,a){let l,h;return this.He.getDocumentsMatchingQuery(n,r,a).next(m=>(l=m,this.In.getAllMutationBatchesAffectingQuery(n,r))).next(m=>(h=m,this.Cn(n,h,l).next(E=>{l=E;for(const T of h)for(const S of T.mutations){const R=S.key;let O=l.get(R);null==O&&(O=ln.newInvalidDocument(R),l=l.insert(R,O)),Db(S,O,T.localWriteTime),O.isFoundDocument()||(l=l.remove(R))}}))).next(()=>(l.forEach((m,E)=>{ru(r,E)||(l=l.remove(m))}),l))}Cn(n,r,a){let l=jt();for(const m of r)for(const E of m.mutations)E instanceof Yo&&null===a.get(E.key)&&(l=l.add(E.key));let h=a;return this.He.getEntries(n,l).next(m=>(m.forEach((E,T)=>{T.isFoundDocument()&&(h=h.insert(E,T))}),h))}}class oE{constructor(n,r,a,l){this.targetId=n,this.fromCache=r,this.Nn=a,this.xn=l}static kn(n,r){let a=jt(),l=jt();for(const h of r.docChanges)switch(h.type){case 0:a=a.add(h.doc.key);break;case 1:l=l.add(h.doc.key)}return new oE(n,r.fromCache,a,l)}}class aE{$n(n){this.On=n}getDocumentsMatchingQuery(n,r,a,l){return 0===(h=r).filters.length&&null===h.limit&&null==h.startAt&&null==h.endAt&&(0===h.explicitOrderBy.length||1===h.explicitOrderBy.length&&h.explicitOrderBy[0].field.isKeyField())||a.isEqual(It.min())?this.Fn(n,r):this.On.Pn(n,l).next(h=>{const m=this.Mn(r,h);return(kv(r)||Fv(r))&&this.Ln(r.limitType,m,l,a)?this.Fn(n,r):(Qw()<=Wa.in.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),am(r)),this.On.getDocumentsMatchingQuery(n,r,a).next(E=>(m.forEach(T=>{E=E.insert(T.key,T)}),E)))});var h}Mn(n,r){let a=new mn(mb(n));return r.forEach((l,h)=>{ru(n,h)&&(a=a.add(h))}),a}Ln(n,r,a,l){if(a.size!==r.size)return!0;const h="F"===n?r.last():r.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(l)>0)}Fn(n,r){return Qw()<=Wa.in.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",am(r)),this.On.getDocumentsMatchingQuery(n,r,It.min())}}class Wf{constructor(n,r,a,l){this.persistence=n,this.Bn=r,this.N=l,this.Un=new Xn(Nt),this.qn=new bd(h=>rd(h),Ov),this.Kn=It.min(),this.In=n.getMutationQueue(a),this.jn=n.getRemoteDocumentCache(),this.ze=n.getTargetCache(),this.Qn=new lI(this.jn,this.In,this.persistence.getIndexManager()),this.Je=n.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(n){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>n.collect(r,this.Un))}}function cI(i,n,r,a){return new Wf(i,n,r,a)}function dI(i,n){return uE.apply(this,arguments)}function uE(){return(uE=(0,pe.Z)(function*(i,n){const r=Le(i);let a=r.In,l=r.Qn;const h=yield r.persistence.runTransaction("Handle user change","readonly",m=>{let E;return r.In.getAllMutationBatches(m).next(T=>(E=T,a=r.persistence.getMutationQueue(n),l=new lI(r.jn,a,r.persistence.getIndexManager()),a.getAllMutationBatches(m))).next(T=>{const S=[],R=[];let O=jt();for(const V of E){S.push(V.batchId);for(const q of V.mutations)O=O.add(q.key)}for(const V of T){R.push(V.batchId);for(const q of V.mutations)O=O.add(q.key)}return l.Pn(m,O).next(V=>({Wn:V,removedBatchIds:S,addedBatchIds:R}))})});return r.In=a,r.Qn=l,r.Bn.$n(r.Qn),h})).apply(this,arguments)}function QC(i,n){const r=Le(i);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const l=n.batch.keys(),h=r.jn.newChangeBuffer({trackRemovals:!0});return function(m,E,T,S){const R=T.batch,O=R.keys();let V=Ae.resolve();return O.forEach(q=>{V=V.next(()=>S.getEntry(E,q)).next(Z=>{const ge=T.docVersions.get(q);ht(null!==ge),Z.version.compareTo(ge)<0&&(R.applyToRemoteDocument(Z,T),Z.isValidDocument()&&S.addEntry(Z,T.commitVersion))})}),V.next(()=>m.In.removeMutationBatch(E,R))}(r,a,n,h).next(()=>h.apply(a)).next(()=>r.In.performConsistencyCheck(a)).next(()=>r.Qn.Pn(a,l))})}function hI(i){const n=Le(i);return n.persistence.runTransaction("Get last remote snapshot version","readonly",r=>n.ze.getLastRemoteSnapshotVersion(r))}function fI(i,n){const r=Le(i),a=n.snapshotVersion;let l=r.Un;return r.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const m=r.jn.newChangeBuffer({trackRemovals:!0});l=r.Un;const E=[];n.targetChanges.forEach((S,R)=>{const O=l.get(R);if(!O)return;E.push(r.ze.removeMatchingKeys(h,S.removedDocuments,R).next(()=>r.ze.addMatchingKeys(h,S.addedDocuments,R)));const V=S.resumeToken;if(V.approximateByteSize()>0){const q=O.withResumeToken(V,a).withSequenceNumber(h.currentSequenceNumber);l=l.insert(R,q),Z=O,Re=S,ht((ge=q).resumeToken.approximateByteSize()>0),(0===Z.resumeToken.approximateByteSize()||ge.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||Re.addedDocuments.size+Re.modifiedDocuments.size+Re.removedDocuments.size>0)&&E.push(r.ze.updateTargetData(h,q))}var Z,ge,Re});let T=ki();if(n.documentUpdates.forEach((S,R)=>{n.resolvedLimboDocuments.has(S)&&E.push(r.persistence.referenceDelegate.updateLimboDocument(h,S))}),E.push(pI(h,m,n.documentUpdates,a,void 0).next(S=>{T=S})),!a.isEqual(It.min())){const S=r.ze.getLastRemoteSnapshotVersion(h).next(R=>r.ze.setTargetsMetadata(h,h.currentSequenceNumber,a));E.push(S)}return Ae.waitFor(E).next(()=>m.apply(h)).next(()=>r.Qn.vn(h,T)).next(()=>T)}).then(h=>(r.Un=l,h))}function pI(i,n,r,a,l){let h=jt();return r.forEach(m=>h=h.add(m)),n.getEntries(i,h).next(m=>{let E=ki();return r.forEach((T,S)=>{const R=m.get(T),O=(null==l?void 0:l.get(T))||a;S.isNoDocument()&&S.version.isEqual(It.min())?(n.removeEntry(T,O),E=E.insert(T,S)):!R.isValidDocument()||S.version.compareTo(R.version)>0||0===S.version.compareTo(R.version)&&R.hasPendingWrites?(n.addEntry(S,O),E=E.insert(T,S)):Me("LocalStore","Ignoring outdated watch update for ",T,". Current version:",R.version," Watch version:",S.version)}),E})}function YC(i,n){const r=Le(i);return r.persistence.runTransaction("Get next mutation batch","readonly",a=>(void 0===n&&(n=-1),r.In.getNextMutationBatchAfterBatchId(a,n)))}function Cs(i,n){const r=Le(i);return r.persistence.runTransaction("Allocate target","readwrite",a=>{let l;return r.ze.getTargetData(a,n).next(h=>h?(l=h,Ae.resolve(l)):r.ze.allocateTargetId(a).next(m=>(l=new au(n,m,0,a.currentSequenceNumber),r.ze.addTargetData(a,l).next(()=>l))))}).then(a=>{const l=r.Un.get(a.targetId);return(null===l||a.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(r.Un=r.Un.insert(a.targetId,a),r.qn.set(n,a.targetId)),a})}function Id(i,n,r){return Om.apply(this,arguments)}function Om(){return(Om=(0,pe.Z)(function*(i,n,r){const a=Le(i),l=a.Un.get(n),h=r?"readwrite":"readwrite-primary";try{r||(yield a.persistence.runTransaction("Release target",h,m=>a.persistence.referenceDelegate.removeTarget(m,l)))}catch(m){if(!su(m))throw m;Me("LocalStore",`Failed to update sequence numbers for target ${n}: ${m}`)}a.Un=a.Un.remove(n),a.qn.delete(l.target)})).apply(this,arguments)}function km(i,n,r){const a=Le(i);let l=It.min(),h=jt();return a.persistence.runTransaction("Execute query","readonly",m=>function(E,T,S){const R=Le(E),O=R.qn.get(S);return void 0!==O?Ae.resolve(R.Un.get(O)):R.ze.getTargetData(T,S)}(a,m,Ar(n)).next(E=>{if(E)return l=E.lastLimboFreeSnapshotVersion,a.ze.getMatchingKeysForTargetId(m,E.targetId).next(T=>{h=T})}).next(()=>a.Bn.getDocumentsMatchingQuery(m,n,r?l:It.min(),r?h:jt())).next(E=>({documents:E,Gn:h})))}function lE(i,n){const r=Le(i),a=Le(r.ze),l=r.Un.get(n);return l?Promise.resolve(l.target):r.persistence.runTransaction("Get target data","readonly",h=>a.Et(h,n).next(m=>m?m.target:null))}function gI(i){const n=Le(i);return n.persistence.runTransaction("Get new document changes","readonly",r=>function(a,l,h){const m=Le(a);let E=ki(),T=Vf(h);const S=cu(l),R=IDBKeyRange.lowerBound(T,!0);return S.Kt({index:An.readTimeIndex,range:R},(O,V)=>{const q=uu(m.N,V);E=E.insert(q.key,q),T=V.readTime}).next(()=>({Tn:E,readTime:GC(T)}))}(n.jn,r,n.Kn)).then(({Tn:r,readTime:a})=>(n.Kn=a,r))}function cE(){return(cE=(0,pe.Z)(function*(i){const n=Le(i);return n.persistence.runTransaction("Synchronize last document change read time","readonly",r=>function(a){const l=cu(a);let h=It.min();return l.Kt({index:An.readTimeIndex,reverse:!0},(m,E,T)=>{E.readTime&&(h=GC(E.readTime)),T.done()}).next(()=>h)}(r)).then(r=>{n.Kn=r})})).apply(this,arguments)}function hE(){return(hE=(0,pe.Z)(function*(i,n,r,a){const l=Le(i);let h=jt(),m=ki(),E=Gv();for(const R of r){const O=n.zn(R.metadata.name);R.document&&(h=h.add(O)),m=m.insert(O,n.Hn(R)),E=E.insert(O,n.Jn(R.metadata.readTime))}const T=l.jn.newChangeBuffer({trackRemovals:!0}),S=yield Cs(l,(R=a,Ar(Pf(Rt.fromString(`__bundle__/docs/${R}`)))));var R;return l.persistence.runTransaction("Apply bundle documents","readwrite",R=>pI(R,T,m,It.min(),E).next(O=>(T.apply(R),O)).next(O=>l.ze.removeMatchingKeysForTargetId(R,S.targetId).next(()=>l.ze.addMatchingKeys(R,h,S.targetId)).next(()=>l.Qn.vn(R,O)).next(()=>O)))})).apply(this,arguments)}function yI(i,n){return Fm.apply(this,arguments)}function Fm(){return(Fm=(0,pe.Z)(function*(i,n,r=jt()){const a=yield Cs(i,Ar(eE(n.bundledQuery))),l=Le(i);return l.persistence.runTransaction("Save named query","readwrite",h=>{const m=lr(n.readTime);if(a.snapshotVersion.compareTo(m)>=0)return l.Je.saveNamedQuery(h,n);const E=a.withResumeToken(ur.EMPTY_BYTE_STRING,m);return l.Un=l.Un.insert(E.targetId,E),l.ze.updateTargetData(h,E).next(()=>l.ze.removeMatchingKeysForTargetId(h,a.targetId)).next(()=>l.ze.addMatchingKeys(h,r,a.targetId)).next(()=>l.Je.saveNamedQuery(h,n))})})).apply(this,arguments)}class JC{constructor(n){this.N=n,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(n,r){return Ae.resolve(this.Yn.get(r))}saveBundleMetadata(n,r){var a;return this.Yn.set(r.id,{id:(a=r).id,version:a.version,createTime:lr(a.createTime)}),Ae.resolve()}getNamedQuery(n,r){return Ae.resolve(this.Xn.get(r))}saveNamedQuery(n,r){return this.Xn.set(r.name,{name:(a=r).name,query:eE(a.bundledQuery),readTime:lr(a.readTime)}),Ae.resolve();var a}}class fE{constructor(){this.Zn=new mn(cr.ts),this.es=new mn(cr.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(n,r){const a=new cr(n,r);this.Zn=this.Zn.add(a),this.es=this.es.add(a)}ss(n,r){n.forEach(a=>this.addReference(a,r))}removeReference(n,r){this.rs(new cr(n,r))}os(n,r){n.forEach(a=>this.removeReference(a,r))}cs(n){const r=new $e(new Rt([])),a=new cr(r,n),l=new cr(r,n+1),h=[];return this.es.forEachInRange([a,l],m=>{this.rs(m),h.push(m.key)}),h}us(){this.Zn.forEach(n=>this.rs(n))}rs(n){this.Zn=this.Zn.delete(n),this.es=this.es.delete(n)}hs(n){const r=new $e(new Rt([])),a=new cr(r,n),l=new cr(r,n+1);let h=jt();return this.es.forEachInRange([a,l],m=>{h=h.add(m.key)}),h}containsKey(n){const r=new cr(n,0),a=this.Zn.firstAfterOrEqual(r);return null!==a&&n.isEqual(a.key)}}class cr{constructor(n,r){this.key=n,this.ls=r}static ts(n,r){return $e.comparator(n.key,r.key)||Nt(n.ls,r.ls)}static ns(n,r){return Nt(n.ls,r.ls)||$e.comparator(n.key,r.key)}}class pE{constructor(n,r){this.Ht=n,this.referenceDelegate=r,this.In=[],this.fs=1,this.ds=new mn(cr.ts)}checkEmpty(n){return Ae.resolve(0===this.In.length)}addMutationBatch(n,r,a,l){const h=this.fs;this.fs++;const m=new Cm(h,r,a,l);this.In.push(m);for(const E of l)this.ds=this.ds.add(new cr(E.key,h)),this.Ht.addToCollectionParentIndex(n,E.key.path.popLast());return Ae.resolve(m)}lookupMutationBatch(n,r){return Ae.resolve(this.ws(r))}getNextMutationBatchAfterBatchId(n,r){const l=this._s(r+1),h=l<0?0:l;return Ae.resolve(this.In.length>h?this.In[h]:null)}getHighestUnacknowledgedBatchId(){return Ae.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(n){return Ae.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(n,r){const a=new cr(r,0),l=new cr(r,Number.POSITIVE_INFINITY),h=[];return this.ds.forEachInRange([a,l],m=>{const E=this.ws(m.ls);h.push(E)}),Ae.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(n,r){let a=new mn(Nt);return r.forEach(l=>{const h=new cr(l,0),m=new cr(l,Number.POSITIVE_INFINITY);this.ds.forEachInRange([h,m],E=>{a=a.add(E.ls)})}),Ae.resolve(this.gs(a))}getAllMutationBatchesAffectingQuery(n,r){const a=r.path,l=a.length+1;let h=a;$e.isDocumentKey(h)||(h=h.child(""));const m=new cr(new $e(h),0);let E=new mn(Nt);return this.ds.forEachWhile(T=>{const S=T.key.path;return!!a.isPrefixOf(S)&&(S.length===l&&(E=E.add(T.ls)),!0)},m),Ae.resolve(this.gs(E))}gs(n){const r=[];return n.forEach(a=>{const l=this.ws(a);null!==l&&r.push(l)}),r}removeMutationBatch(n,r){ht(0===this.ys(r.batchId,"removed")),this.In.shift();let a=this.ds;return Ae.forEach(r.mutations,l=>{const h=new cr(l.key,r.batchId);return a=a.delete(h),this.referenceDelegate.markPotentiallyOrphaned(n,l.key)}).next(()=>{this.ds=a})}te(n){}containsKey(n,r){const a=new cr(r,0),l=this.ds.firstAfterOrEqual(a);return Ae.resolve(r.isEqual(l&&l.key))}performConsistencyCheck(n){return Ae.resolve()}ys(n,r){return this._s(n)}_s(n){return 0===this.In.length?0:n-this.In[0].batchId}ws(n){const r=this._s(n);return r<0||r>=this.In.length?null:this.In[r]}}class XC{constructor(n,r){this.Ht=n,this.ps=r,this.docs=new Xn($e.comparator),this.size=0}addEntry(n,r,a){const l=r.key,h=this.docs.get(l),m=h?h.size:0,E=this.ps(r);return this.docs=this.docs.insert(l,{document:r.clone(),size:E,readTime:a}),this.size+=E-m,this.Ht.addToCollectionParentIndex(n,l.path.popLast())}removeEntry(n){const r=this.docs.get(n);r&&(this.docs=this.docs.remove(n),this.size-=r.size)}getEntry(n,r){const a=this.docs.get(r);return Ae.resolve(a?a.document.clone():ln.newInvalidDocument(r))}getEntries(n,r){let a=ki();return r.forEach(l=>{const h=this.docs.get(l);a=a.insert(l,h?h.document.clone():ln.newInvalidDocument(l))}),Ae.resolve(a)}getDocumentsMatchingQuery(n,r,a){let l=ki();const h=new $e(r.path.child("")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:E,value:{document:T,readTime:S}}=m.getNext();if(!r.path.isPrefixOf(E.path))break;S.compareTo(a)<=0||ru(r,T)&&(l=l.insert(T.key,T.clone()))}return Ae.resolve(l)}Es(n,r){return Ae.forEach(this.docs,a=>r(a))}newChangeBuffer(n){return new _I(this)}getSize(n){return Ae.resolve(this.size)}}class _I extends rI{constructor(n){super(),this.Se=n}applyChanges(n){const r=[];return this.changes.forEach((a,l)=>{l.document.isValidDocument()?r.push(this.Se.addEntry(n,l.document,this.getReadTime(a))):this.Se.removeEntry(a)}),Ae.waitFor(r)}getFromCache(n,r){return this.Se.getEntry(n,r)}getAllFromCache(n,r){return this.Se.getEntries(n,r)}}class eS{constructor(n){this.persistence=n,this.Ts=new bd(r=>rd(r),Ov),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.Is=0,this.As=new fE,this.targetCount=0,this.Rs=Tl.se()}forEachTarget(n,r){return this.Ts.forEach((a,l)=>r(l)),Ae.resolve()}getLastRemoteSnapshotVersion(n){return Ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(n){return Ae.resolve(this.Is)}allocateTargetId(n){return this.highestTargetId=this.Rs.next(),Ae.resolve(this.highestTargetId)}setTargetsMetadata(n,r,a){return a&&(this.lastRemoteSnapshotVersion=a),r>this.Is&&(this.Is=r),Ae.resolve()}ae(n){this.Ts.set(n.target,n);const r=n.targetId;r>this.highestTargetId&&(this.Rs=new Tl(r),this.highestTargetId=r),n.sequenceNumber>this.Is&&(this.Is=n.sequenceNumber)}addTargetData(n,r){return this.ae(r),this.targetCount+=1,Ae.resolve()}updateTargetData(n,r){return this.ae(r),Ae.resolve()}removeTargetData(n,r){return this.Ts.delete(r.target),this.As.cs(r.targetId),this.targetCount-=1,Ae.resolve()}removeTargets(n,r,a){let l=0;const h=[];return this.Ts.forEach((m,E)=>{E.sequenceNumber<=r&&null===a.get(E.targetId)&&(this.Ts.delete(m),h.push(this.removeMatchingKeysForTargetId(n,E.targetId)),l++)}),Ae.waitFor(h).next(()=>l)}getTargetCount(n){return Ae.resolve(this.targetCount)}getTargetData(n,r){const a=this.Ts.get(r)||null;return Ae.resolve(a)}addMatchingKeys(n,r,a){return this.As.ss(r,a),Ae.resolve()}removeMatchingKeys(n,r,a){this.As.os(r,a);const l=this.persistence.referenceDelegate,h=[];return l&&r.forEach(m=>{h.push(l.markPotentiallyOrphaned(n,m))}),Ae.waitFor(h)}removeMatchingKeysForTargetId(n,r){return this.As.cs(r),Ae.resolve()}getMatchingKeysForTargetId(n,r){const a=this.As.hs(r);return Ae.resolve(a)}containsKey(n,r){return Ae.resolve(this.As.containsKey(r))}}class tS{constructor(n,r){this.bs={},this.Le=new Zi(0),this.Be=!1,this.Be=!0,this.referenceDelegate=n(this),this.ze=new eS(this),this.Ht=new Sm,this.He=new XC(this.Ht,a=>this.referenceDelegate.Ps(a)),this.N=new Qb(r),this.Je=new JC(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(n){let r=this.bs[n.toKey()];return r||(r=new pE(this.Ht,this.referenceDelegate),this.bs[n.toKey()]=r),r}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(n,r,a){Me("MemoryPersistence","Starting transaction:",n);const l=new nS(this.Le.next());return this.referenceDelegate.vs(),a(l).next(h=>this.referenceDelegate.Vs(l).next(()=>h)).toPromise().then(h=>(l.raiseOnCommittedEvent(),h))}Ss(n,r){return Ae.or(Object.values(this.bs).map(a=>()=>a.containsKey(n,r)))}}class nS extends zb{constructor(n){super(),this.currentSequenceNumber=n}}class gE{constructor(n){this.persistence=n,this.Ds=new fE,this.Cs=null}static Ns(n){return new gE(n)}get xs(){if(this.Cs)return this.Cs;throw Qe()}addReference(n,r,a){return this.Ds.addReference(a,r),this.xs.delete(a.toString()),Ae.resolve()}removeReference(n,r,a){return this.Ds.removeReference(a,r),this.xs.add(a.toString()),Ae.resolve()}markPotentiallyOrphaned(n,r){return this.xs.add(r.toString()),Ae.resolve()}removeTarget(n,r){this.Ds.cs(r.targetId).forEach(l=>this.xs.add(l.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(n,r.targetId).next(l=>{l.forEach(h=>this.xs.add(h.toString()))}).next(()=>a.removeTargetData(n,r))}vs(){this.Cs=new Set}Vs(n){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ae.forEach(this.xs,a=>{const l=$e.fromPath(a);return this.ks(n,l).next(h=>{h||r.removeEntry(l)})}).next(()=>(this.Cs=null,r.apply(n)))}updateLimboDocument(n,r){return this.ks(n,r).next(a=>{a?this.xs.delete(r.toString()):this.xs.add(r.toString())})}Ps(n){return 0}ks(n,r){return Ae.or([()=>Ae.resolve(this.Ds.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(n,r),()=>this.persistence.Ss(n,r)])}}function vI(i,n){return`firestore_clients_${i}_${n}`}function EI(i,n,r){let a=`firestore_mutations_${i}_${r}`;return n.isAuthenticated()&&(a+=`_${n.uid}`),a}function mE(i,n){return`firestore_targets_${i}_${n}`}class Lm{constructor(n,r,a,l){this.user=n,this.batchId=r,this.state=a,this.error=l}static $s(n,r,a){const l=JSON.parse(a);let h,m="object"==typeof l&&-1!==["pending","acknowledged","rejected"].indexOf(l.state)&&(void 0===l.error||"object"==typeof l.error);return m&&l.error&&(m="string"==typeof l.error.message&&"string"==typeof l.error.code,m&&(h=new ve(l.error.code,l.error.message))),m?new Lm(n,r,l.state,h):(qn("SharedClientState",`Failed to parse mutation state for ID '${r}': ${a}`),null)}Os(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class Dd{constructor(n,r,a){this.targetId=n,this.state=r,this.error=a}static $s(n,r){const a=JSON.parse(r);let l,h="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return h&&a.error&&(h="string"==typeof a.error.message&&"string"==typeof a.error.code,h&&(l=new ve(a.error.code,a.error.message))),h?new Dd(n,a.state,l):(qn("SharedClientState",`Failed to parse target state for ID '${n}': ${r}`),null)}Os(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class zf{constructor(n,r){this.clientId=n,this.activeTargetIds=r}static $s(n,r){const a=JSON.parse(r);let l="object"==typeof a&&a.activeTargetIds instanceof Array,h=ym();for(let m=0;l&&m<a.activeTargetIds.length;++m)l=yl(a.activeTargetIds[m]),h=h.add(a.activeTargetIds[m]);return l?new zf(n,h):(qn("SharedClientState",`Failed to parse client data for instance '${n}': ${r}`),null)}}class yE{constructor(n,r){this.clientId=n,this.onlineState=r}static $s(n){const r=JSON.parse(n);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new yE(r.clientId,r.onlineState):(qn("SharedClientState",`Failed to parse online state: ${n}`),null)}}class _E{constructor(){this.activeTargetIds=ym()}Fs(n){this.activeTargetIds=this.activeTargetIds.add(n)}Ms(n){this.activeTargetIds=this.activeTargetIds.delete(n)}Os(){const n={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(n)}}class Vm{constructor(n,r,a,l,h){this.window=n,this.Oe=r,this.persistenceKey=a,this.Ls=l,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Xn(Nt),this.started=!1,this.Ks=[];const m=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=h,this.js=vI(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new _E),this.Ws=new RegExp(`^firestore_clients_${m}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${m}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${m}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(E){return`firestore_bundle_loaded_${E}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(n){return!(!n||!n.localStorage)}start(){var n=this;return(0,pe.Z)(function*(){const r=yield n.syncEngine.pn();for(const l of r){if(l===n.Ls)continue;const h=n.getItem(vI(n.persistenceKey,l));if(h){const m=zf.$s(l,h);m&&(n.qs=n.qs.insert(m.clientId,m))}}n.Ys();const a=n.storage.getItem(n.Hs);if(a){const l=n.Xs(a);l&&n.Zs(l)}for(const l of n.Ks)n.Us(l);n.Ks=[],n.window.addEventListener("pagehide",()=>n.shutdown()),n.started=!0})()}writeSequenceNumber(n){this.setItem(this.Qs,JSON.stringify(n))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(n){let r=!1;return this.qs.forEach((a,l)=>{l.activeTargetIds.has(n)&&(r=!0)}),r}addPendingMutation(n){this.ei(n,"pending")}updateMutationState(n,r,a){this.ei(n,r,a),this.ni(n)}addLocalQueryTarget(n){let r="not-current";if(this.isActiveQueryTarget(n)){const a=this.storage.getItem(mE(this.persistenceKey,n));if(a){const l=Dd.$s(n,a);l&&(r=l.state)}}return this.si.Fs(n),this.Ys(),r}removeLocalQueryTarget(n){this.si.Ms(n),this.Ys()}isLocalQueryTarget(n){return this.si.activeTargetIds.has(n)}clearQueryState(n){this.removeItem(mE(this.persistenceKey,n))}updateQueryState(n,r,a){this.ii(n,r,a)}handleUserChange(n,r,a){r.forEach(l=>{this.ni(l)}),this.currentUser=n,a.forEach(l=>{this.addPendingMutation(l)})}setOnlineState(n){this.ri(n)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(n){const r=this.storage.getItem(n);return Me("SharedClientState","READ",n,r),r}setItem(n,r){Me("SharedClientState","SET",n,r),this.storage.setItem(n,r)}removeItem(n){Me("SharedClientState","REMOVE",n),this.storage.removeItem(n)}Us(n){var r=this;const a=n;if(a.storageArea===this.storage){if(Me("SharedClientState","EVENT",a.key,a.newValue),a.key===this.js)return void qn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,pe.Z)(function*(){if(r.started){if(null!==a.key)if(r.Ws.test(a.key)){if(null==a.newValue){const l=r.ai(a.key);return r.ci(l,null)}{const l=r.ui(a.key,a.newValue);if(l)return r.ci(l.clientId,l)}}else if(r.Gs.test(a.key)){if(null!==a.newValue){const l=r.hi(a.key,a.newValue);if(l)return r.li(l)}}else if(r.zs.test(a.key)){if(null!==a.newValue){const l=r.fi(a.key,a.newValue);if(l)return r.di(l)}}else if(a.key===r.Hs){if(null!==a.newValue){const l=r.Xs(a.newValue);if(l)return r.Zs(l)}}else if(a.key===r.Qs){const l=function(h){let m=Zi.T;if(null!=h)try{const E=JSON.parse(h);ht("number"==typeof E),m=E}catch(E){qn("SharedClientState","Failed to read sequence number from WebStorage",E)}return m}(a.newValue);l!==Zi.T&&r.sequenceNumberHandler(l)}else if(a.key===r.Js)return r.syncEngine.wi()}else r.Ks.push(a)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(n,r,a){const l=new Lm(this.currentUser,n,r,a),h=EI(this.persistenceKey,this.currentUser,n);this.setItem(h,l.Os())}ni(n){const r=EI(this.persistenceKey,this.currentUser,n);this.removeItem(r)}ri(n){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:n}))}ii(n,r,a){const l=mE(this.persistenceKey,n),h=new Dd(n,r,a);this.setItem(l,h.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(n){const r=this.Ws.exec(n);return r?r[1]:null}ui(n,r){const a=this.ai(n);return zf.$s(a,r)}hi(n,r){const a=this.Gs.exec(n),l=Number(a[1]);return Lm.$s(new Dr(void 0!==a[2]?a[2]:null),l,r)}fi(n,r){const a=this.zs.exec(n),l=Number(a[1]);return Dd.$s(l,r)}Xs(n){return yE.$s(n)}li(n){var r=this;return(0,pe.Z)(function*(){if(n.user.uid===r.currentUser.uid)return r.syncEngine._i(n.batchId,n.state,n.error);Me("SharedClientState",`Ignoring mutation for non-active user ${n.user.uid}`)})()}di(n){return this.syncEngine.mi(n.targetId,n.state,n.error)}ci(n,r){const a=r?this.qs.insert(n,r):this.qs.remove(n),l=this.ti(this.qs),h=this.ti(a),m=[],E=[];return h.forEach(T=>{l.has(T)||m.push(T)}),l.forEach(T=>{h.has(T)||E.push(T)}),this.syncEngine.gi(m,E).then(()=>{this.qs=a})}Zs(n){this.qs.get(n.clientId)&&this.onlineStateHandler(n.onlineState)}ti(n){let r=ym();return n.forEach((a,l)=>{r=r.unionWith(l.activeTargetIds)}),r}}class wI{constructor(){this.yi=new _E,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(n){}updateMutationState(n,r,a){}addLocalQueryTarget(n){return this.yi.Fs(n),this.pi[n]||"not-current"}updateQueryState(n,r,a){this.pi[n]=r}removeLocalQueryTarget(n){this.yi.Ms(n)}isLocalQueryTarget(n){return this.yi.activeTargetIds.has(n)}clearQueryState(n){delete this.pi[n]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(n){return this.yi.activeTargetIds.has(n)}start(){return this.yi=new _E,Promise.resolve()}handleUserChange(n,r,a){}setOnlineState(n){}shutdown(){}writeSequenceNumber(n){}notifyBundleLoaded(){}}class rS{Ei(n){}shutdown(){}}class bI{constructor(){this.Ti=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ei(n){this.bi.push(n)}shutdown(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}Ii(){Me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const n of this.bi)n(0)}Ri(){Me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const n of this.bi)n(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const vE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class EE{constructor(n){this.vi=n.vi,this.Vi=n.Vi}Si(n){this.Di=n}Ci(n){this.Ni=n}onMessage(n){this.xi=n}close(){this.Vi()}send(n){this.vi(n)}ki(){this.Di()}$i(n){this.Ni(n)}Oi(n){this.xi(n)}}class II extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId,this.Fi=(n.ssl?"https":"http")+"://"+n.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(n,r,a,l){const h=this.Bi(n,r);Me("RestConnection","Sending: ",h,a);const m={};return this.Ui(m,l),this.qi(n,h,m,a).then(E=>(Me("RestConnection","Received: ",E),E),E=>{throw Jg("RestConnection",`${n} failed with error: `,E,"url: ",h,"request:",a),E})}Ki(n,r,a,l){return this.Li(n,r,a,l)}Ui(n,r){if(n["X-Goog-Api-Client"]="gl-js/ fire/"+td,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r)for(const a in r.authHeaders)r.authHeaders.hasOwnProperty(a)&&(n[a]=r.authHeaders[a])}Bi(n,r){return`${this.Fi}/v1/${r}:${vE[n]}`}}{constructor(n){super(n),this.forceLongPolling=n.forceLongPolling,this.autoDetectLongPolling=n.autoDetectLongPolling,this.useFetchStreams=n.useFetchStreams}qi(n,r,a,l){return new Promise((h,m)=>{const E=new wC;E.listenOnce(zw.COMPLETE,()=>{try{switch(E.getLastErrorCode()){case Sf.NO_ERROR:const S=E.getResponseJson();Me("Connection","XHR received:",JSON.stringify(S)),h(S);break;case Sf.TIMEOUT:Me("Connection",'RPC "'+n+'" timed out'),m(new ve(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Sf.HTTP_ERROR:const R=E.getStatus();if(Me("Connection",'RPC "'+n+'" failed with status:',R,"response text:",E.getResponseText()),R>0){const O=E.getResponseJson().error;if(O&&O.status&&O.message){const V=function(q){const Z=q.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(Z)>=0?Z:oe.UNKNOWN}(O.status);m(new ve(V,O.message))}else m(new ve(oe.UNKNOWN,"Server responded with status "+E.getStatus()))}else m(new ve(oe.UNAVAILABLE,"Connection failed."));break;default:Qe()}}finally{Me("Connection",'RPC "'+n+'" completed.')}});const T=JSON.stringify(l);E.send(r,"POST",T,a,15)})}ji(n,r){const a=[this.Fi,"/","google.firestore.v1.Firestore","/",n,"/channel"],l=EC(),h=Cf(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new Zw({})),this.Ui(m.initMessageHeaders,r),(0,Et.uI)()||(0,Et.b$)()||(0,Et.d)()||(0,Et.w1)()||(0,Et.Mn)()||(0,Et.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const E=a.join("");Me("Connection","Creating WebChannel: "+E,m);const T=l.createWebChannel(E,m);let S=!1,R=!1;const O=new EE({vi:q=>{R?Me("Connection","Not sending because WebChannel is closed:",q):(S||(Me("Connection","Opening WebChannel transport."),T.open(),S=!0),Me("Connection","WebChannel sending:",q),T.send(q))},Vi:()=>T.close()}),V=(q,Z,ge)=>{q.listen(Z,Re=>{try{ge(Re)}catch(We){setTimeout(()=>{throw We},0)}})};return V(T,Yg.EventType.OPEN,()=>{R||Me("Connection","WebChannel transport opened.")}),V(T,Yg.EventType.CLOSE,()=>{R||(R=!0,Me("Connection","WebChannel transport closed"),O.$i())}),V(T,Yg.EventType.ERROR,q=>{R||(R=!0,Jg("Connection","WebChannel transport errored:",q),O.$i(new ve(oe.UNAVAILABLE,"The operation could not be completed")))}),V(T,Yg.EventType.MESSAGE,q=>{var Z;if(!R){const ge=q.data[0];ht(!!ge);const Re=ge,We=Re.error||(null===(Z=Re[0])||void 0===Z?void 0:Z.error);if(We){Me("Connection","WebChannel received error:",We);const nt=We.status;let Ye=function($t){const Un=Ln[$t];if(void 0!==Un)return qv(Un)}(nt),Je=We.message;void 0===Ye&&(Ye=oe.INTERNAL,Je="Unknown error status: "+nt+" with message "+We.message),R=!0,O.$i(new ve(Ye,Je)),T.close()}else Me("Connection","WebChannel received:",ge),O.Oi(ge)}}),V(h,Kw.STAT_EVENT,q=>{q.stat===Av.PROXY?Me("Connection","Detected buffering proxy"):q.stat===Av.NOPROXY&&Me("Connection","Detected no buffering proxy")}),setTimeout(()=>{O.ki()},0),O}}function Um(){return"undefined"!=typeof window?window:null}function Bm(){return"undefined"!=typeof document?document:null}function Kf(i){return new hd(i,!0)}class Zf{constructor(n,r,a=1e3,l=1.5,h=6e4){this.Oe=n,this.timerId=r,this.Qi=a,this.Wi=l,this.Gi=h,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(n){this.cancel();const r=Math.floor(this.zi+this.Zi()),a=Math.max(0,Date.now()-this.Ji),l=Math.max(0,r-a);l>0&&Me("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.zi} ms, delay with jitter: ${r} ms, last attempt: ${a} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,l,()=>(this.Ji=Date.now(),n())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class DI{constructor(n,r,a,l,h,m){this.Oe=n,this.er=a,this.nr=l,this.credentialsProvider=h,this.listener=m,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Zf(n,r)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var n=this;return(0,pe.Z)(function*(){n.ar()&&(yield n.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(n){this._r(),this.stream.send(n)}dr(){var n=this;return(0,pe.Z)(function*(){if(n.cr())return n.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(n,r){var a=this;return(0,pe.Z)(function*(){a._r(),a.rr.cancel(),a.sr++,3!==n?a.rr.reset():r&&r.code===oe.RESOURCE_EXHAUSTED?(qn(r.toString()),qn("Using maximum backoff delay to prevent overloading the backend."),a.rr.Yi()):r&&r.code===oe.UNAUTHENTICATED&&a.credentialsProvider.invalidateToken(),null!==a.stream&&(a.mr(),a.stream.close(),a.stream=null),a.state=n,yield a.listener.Ci(r)})()}mr(){}auth(){this.state=1;const n=this.gr(this.sr),r=this.sr;this.credentialsProvider.getToken().then(a=>{this.sr===r&&this.yr(a)},a=>{n(()=>{const l=new ve(oe.UNKNOWN,"Fetching auth token failed: "+a.message);return this.pr(l)})})}yr(n){const r=this.gr(this.sr);this.stream=this.Er(n),this.stream.Si(()=>{r(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(a=>{r(()=>this.pr(a))}),this.stream.onMessage(a=>{r(()=>this.onMessage(a))})}ur(){var n=this;this.state=4,this.rr.Xi((0,pe.Z)(function*(){n.state=0,n.start()}))}pr(n){return Me("PersistentStream",`close with error: ${n}`),this.stream=null,this.close(3,n)}gr(n){return r=>{this.Oe.enqueueAndForget(()=>this.sr===n?r():(Me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iS extends DI{constructor(n,r,a,l,h){super(n,"listen_stream_connection_backoff","listen_stream_idle",r,a,h),this.N=l}Er(n){return this.nr.ji("Listen",n)}onMessage(n){this.rr.reset();const r=function(i,n){let r;if("targetChange"in n){const a="NO_CHANGE"===(T=n.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===T?1:"REMOVE"===T?2:"CURRENT"===T?3:"RESET"===T?4:Qe(),l=n.targetChange.targetIds||[],h=function(T,S){return T.D?(ht(void 0===S||"string"==typeof S),ur.fromBase64String(S||"")):(ht(void 0===S||S instanceof Uint8Array),ur.fromUint8Array(S||new Uint8Array))}(i,n.targetChange.resumeToken),m=n.targetChange.cause,E=m&&function(T){const S=void 0===T.code?oe.UNKNOWN:qv(T.code);return new ve(S,T.message||"")}(m);r=new Wv(a,l,h,E||null)}else if("documentChange"in n){const a=n.documentChange,l=Ds(i,a.document.name),h=lr(a.document.updateTime),m=new Sr({mapValue:{fields:a.document.fields}}),E=ln.newFoundDocument(l,h,m);r=new _m(a.targetIds||[],a.removedTargetIds||[],E.key,E)}else if("documentDelete"in n){const a=n.documentDelete,l=Ds(i,a.document),h=a.readTime?lr(a.readTime):It.min(),m=ln.newNoDocument(l,h);r=new _m([],a.removedTargetIds||[],m.key,m)}else if("documentRemove"in n){const a=n.documentRemove,l=Ds(i,a.document);r=new _m([],a.removedTargetIds||[],l,null)}else{if(!("filter"in n))return Qe();{const a=n.filter,h=new FC(a.count||0);r=new Wn(a.targetId,h)}}var T;return r}(this.N,n),a=function(l){if(!("targetChange"in l))return It.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?It.min():h.readTime?lr(h.readTime):It.min()}(n);return this.listener.Tr(r,a)}Ir(n){const r={};r.database=Lf(this.N),r.addTarget=function(l,h){let m;const E=h.target;return m=nm(E)?{documents:Ub(l,E)}:{query:wm(l,E)},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0?m.resumeToken=Mb(l,h.resumeToken):h.snapshotVersion.compareTo(It.min())>0&&(m.readTime=Ff(l,h.snapshotVersion.toTimestamp())),m}(this.N,n);const a=function(i,n){const r=function(a,l){switch(l){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Qe()}}(0,n.purpose);return null==r?null:{"goog-listen-tags":r}}(0,n);a&&(r.labels=a),this.wr(r)}Ar(n){const r={};r.database=Lf(this.N),r.removeTarget=n,this.wr(r)}}class sS extends DI{constructor(n,r,a,l,h){super(n,"write_stream_connection_backoff","write_stream_idle",r,a,h),this.N=l,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Er(n){return this.nr.ji("Write",n)}onMessage(n){if(ht(!!n.streamToken),this.lastStreamToken=n.streamToken,this.Rr){this.rr.reset();const r=function(i,n){return i&&i.length>0?(ht(void 0!==n),i.map(r=>function(a,l){let h=lr(a.updateTime?a.updateTime:l);return h.isEqual(It.min())&&(h=lr(l)),new Uv(h,a.transformResults||[])}(r,n))):[]}(n.writeResults,n.commitTime),a=lr(n.commitTime);return this.listener.vr(a,r)}return ht(!n.writeResults||0===n.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const n={};n.database=Lf(this.N),this.wr(n)}Pr(n){const r={streamToken:this.lastStreamToken,writes:n.map(a=>Em(this.N,a))};this.wr(r)}}class TI extends class{}{constructor(n,r,a){super(),this.credentials=n,this.nr=r,this.N=a,this.Dr=!1}Cr(){if(this.Dr)throw new ve(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Li(n,r,a){return this.Cr(),this.credentials.getToken().then(l=>this.nr.Li(n,r,a,l)).catch(l=>{throw"FirebaseError"===l.name?(l.code===oe.UNAUTHENTICATED&&this.credentials.invalidateToken(),l):new ve(oe.UNKNOWN,l.toString())})}Ki(n,r,a){return this.Cr(),this.credentials.getToken().then(l=>this.nr.Ki(n,r,a,l)).catch(l=>{throw"FirebaseError"===l.name?(l.code===oe.UNAUTHENTICATED&&this.credentials.invalidateToken(),l):new ve(oe.UNKNOWN,l.toString())})}terminate(){this.Dr=!0}}class CI{constructor(n,r){this.asyncQueue=n,this.onlineStateHandler=r,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(n){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${n.toString()}`),this.Fr("Offline")))}set(n){this.Br(),this.Nr=0,"Online"===n&&(this.$r=!1),this.Fr(n)}Fr(n){n!==this.state&&(this.state=n,this.onlineStateHandler(n))}Mr(n){const r=`Could not reach Cloud Firestore backend. ${n}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(qn(r),this.$r=!1):Me("OnlineStateTracker",r)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class SI{constructor(n,r,a,l,h){var m=this;this.localStore=n,this.datastore=r,this.asyncQueue=a,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=h,this.Qr.Ei(E=>{a.enqueueAndForget((0,pe.Z)(function*(){var T;hu(m)&&(Me("RemoteStore","Restarting streams for network reachability change."),yield(T=(0,pe.Z)(function*(S){const R=Le(S);R.Kr.add(4),yield Ss(R),R.Wr.set("Unknown"),R.Kr.delete(4),yield jm(R)}),function(S){return T.apply(this,arguments)})(m))}))}),this.Wr=new CI(a,l)}}function jm(i){return wE.apply(this,arguments)}function wE(){return(wE=(0,pe.Z)(function*(i){if(hu(i))for(const n of i.jr)yield n(!0)})).apply(this,arguments)}function Ss(i){return AI.apply(this,arguments)}function AI(){return(AI=(0,pe.Z)(function*(i){for(const n of i.jr)yield n(!1)})).apply(this,arguments)}function Td(i,n){const r=Le(i);r.qr.has(n.targetId)||(r.qr.set(n.targetId,n),NI(r)?IE(r):Sd(r).cr()&&bE(r,n))}function du(i,n){const r=Le(i),a=Sd(r);r.qr.delete(n),a.cr()&&Cl(r,n),0===r.qr.size&&(a.cr()?a.lr():hu(r)&&r.Wr.set("Unknown"))}function bE(i,n){i.Gr.Y(n.targetId),Sd(i).Ir(n)}function Cl(i,n){i.Gr.Y(n),Sd(i).Ar(n)}function IE(i){i.Gr=new LC({getRemoteKeysForTarget:n=>i.remoteSyncer.getRemoteKeysForTarget(n),Et:n=>i.qr.get(n)||null}),Sd(i).start(),i.Wr.Or()}function NI(i){return hu(i)&&!Sd(i).ar()&&i.qr.size>0}function hu(i){return 0===Le(i).Kr.size}function As(i){i.Gr=void 0}function RI(i){return xI.apply(this,arguments)}function xI(){return(xI=(0,pe.Z)(function*(i){i.qr.forEach((n,r)=>{bE(i,n)})})).apply(this,arguments)}function Hm(i,n){return DE.apply(this,arguments)}function DE(){return(DE=(0,pe.Z)(function*(i,n){As(i),NI(i)?(i.Wr.Lr(n),IE(i)):i.Wr.set("Unknown")})).apply(this,arguments)}function oS(i,n,r){return PI.apply(this,arguments)}function PI(){return(PI=(0,pe.Z)(function*(i,n,r){if(i.Wr.set("Online"),n instanceof Wv&&2===n.state&&n.cause)try{yield(a=(0,pe.Z)(function*(l,h){const m=h.cause;for(const E of h.targetIds)l.qr.has(E)&&(yield l.remoteSyncer.rejectListen(E,m),l.qr.delete(E),l.Gr.removeTarget(E))}),function(l,h){return a.apply(this,arguments)})(i,n)}catch(a){Me("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),a),yield $m(i,a)}else if(n instanceof _m?i.Gr.rt(n):n instanceof Wn?i.Gr.ft(n):i.Gr.ct(n),!r.isEqual(It.min()))try{const a=yield hI(i.localStore);r.compareTo(a)>=0&&(yield function(l,h){const m=l.Gr._t(h);return m.targetChanges.forEach((E,T)=>{if(E.resumeToken.approximateByteSize()>0){const S=l.qr.get(T);S&&l.qr.set(T,S.withResumeToken(E.resumeToken,h))}}),m.targetMismatches.forEach(E=>{const T=l.qr.get(E);if(!T)return;l.qr.set(E,T.withResumeToken(ur.EMPTY_BYTE_STRING,T.snapshotVersion)),Cl(l,E);const S=new au(T.target,E,1,T.sequenceNumber);bE(l,S)}),l.remoteSyncer.applyRemoteEvent(m)}(i,r))}catch(a){Me("RemoteStore","Failed to raise snapshot:",a),yield $m(i,a)}var a})).apply(this,arguments)}function $m(i,n,r){return TE.apply(this,arguments)}function TE(){return(TE=(0,pe.Z)(function*(i,n,r){if(!su(n))throw n;i.Kr.add(1),yield Ss(i),i.Wr.set("Offline"),r||(r=()=>hI(i.localStore)),i.asyncQueue.enqueueRetryable((0,pe.Z)(function*(){Me("RemoteStore","Retrying IndexedDB access"),yield r(),i.Kr.delete(1),yield jm(i)}))})).apply(this,arguments)}function MI(i,n){return n().catch(r=>$m(i,r,n))}function fu(i){return qm.apply(this,arguments)}function qm(){return(qm=(0,pe.Z)(function*(i){const n=Le(i),r=na(n);let a=n.Ur.length>0?n.Ur[n.Ur.length-1].batchId:-1;for(;CE(n);)try{const l=yield YC(n.localStore,a);if(null===l){0===n.Ur.length&&r.lr();break}a=l.batchId,OI(n,l)}catch(l){yield $m(n,l)}kI(n)&&aS(n)})).apply(this,arguments)}function CE(i){return hu(i)&&i.Ur.length<10}function OI(i,n){i.Ur.push(n);const r=na(i);r.cr()&&r.br&&r.Pr(n.mutations)}function kI(i){return hu(i)&&!na(i).ar()&&i.Ur.length>0}function aS(i){na(i).start()}function uS(i){return SE.apply(this,arguments)}function SE(){return(SE=(0,pe.Z)(function*(i){na(i).Sr()})).apply(this,arguments)}function lS(i){return Gm.apply(this,arguments)}function Gm(){return(Gm=(0,pe.Z)(function*(i){const n=na(i);for(const r of i.Ur)n.Pr(r.mutations)})).apply(this,arguments)}function FI(i,n,r){return Wm.apply(this,arguments)}function Wm(){return(Wm=(0,pe.Z)(function*(i,n,r){const a=i.Ur.shift(),l=ea.from(a,n,r);yield MI(i,()=>i.remoteSyncer.applySuccessfulWrite(l)),yield fu(i)})).apply(this,arguments)}function cS(i,n){return AE.apply(this,arguments)}function AE(){return(AE=(0,pe.Z)(function*(i,n){var r;n&&na(i).br&&(yield(r=(0,pe.Z)(function*(a,l){if(fm(h=l.code)&&h!==oe.ABORTED){const m=a.Ur.shift();na(a).hr(),yield MI(a,()=>a.remoteSyncer.rejectFailedWrite(m.batchId,l)),yield fu(a)}var h}),function(a,l){return r.apply(this,arguments)})(i,n)),kI(i)&&aS(i)})).apply(this,arguments)}function zm(i,n){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,pe.Z)(function*(i,n){const r=Le(i);n?(r.Kr.delete(2),yield jm(r)):n||(r.Kr.add(2),yield Ss(r),r.Wr.set("Unknown"))})).apply(this,arguments)}function Sd(i){return i.zr||(i.zr=function(n,r,a){const l=Le(n);return l.Cr(),new iS(r,l.nr,l.credentials,l.N,a)}(i.datastore,i.asyncQueue,{Si:RI.bind(null,i),Ci:Hm.bind(null,i),Tr:oS.bind(null,i)}),i.jr.push(function(){var n=(0,pe.Z)(function*(r){r?(i.zr.hr(),NI(i)?IE(i):i.Wr.set("Unknown")):(yield i.zr.stop(),As(i))});return function(r){return n.apply(this,arguments)}}())),i.zr}function na(i){return i.Hr||(i.Hr=function(n,r,a){const l=Le(n);return l.Cr(),new sS(r,l.nr,l.credentials,l.N,a)}(i.datastore,i.asyncQueue,{Si:uS.bind(null,i),Ci:cS.bind(null,i),Vr:lS.bind(null,i),vr:FI.bind(null,i)}),i.jr.push(function(){var n=(0,pe.Z)(function*(r){r?(i.Hr.hr(),yield fu(i)):(yield i.Hr.stop(),i.Ur.length>0&&(Me("RemoteStore",`Stopping write stream with ${i.Ur.length} pending writes`),i.Ur=[]))});return function(r){return n.apply(this,arguments)}}())),i.Hr}class Ad{constructor(n,r,a,l,h){this.asyncQueue=n,this.timerId=r,this.targetTimeMs=a,this.op=l,this.removalCallback=h,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(m=>{})}static createAndSchedule(n,r,a,l,h){const m=Date.now()+a,E=new Ad(n,r,m,l,h);return E.start(a),E}start(n){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),n)}skipDelay(){return this.handleDelayElapsed()}cancel(n){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ve(oe.CANCELLED,"Operation cancelled"+(n?": "+n:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(n=>this.deferred.resolve(n))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ra(i,n){if(qn("AsyncQueue",`${n}: ${i}`),su(i))return new ve(oe.UNAVAILABLE,`${n}: ${i}`);throw i}class oo{constructor(n){this.comparator=n?(r,a)=>n(r,a)||$e.comparator(r.key,a.key):(r,a)=>$e.comparator(r.key,a.key),this.keyedMap=mm(),this.sortedSet=new Xn(this.comparator)}static emptySet(n){return new oo(n.comparator)}has(n){return null!=this.keyedMap.get(n)}get(n){return this.keyedMap.get(n)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(n){const r=this.keyedMap.get(n);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(n){this.sortedSet.inorderTraversal((r,a)=>(n(r),!1))}add(n){const r=this.delete(n.key);return r.copy(r.keyedMap.insert(n.key,n),r.sortedSet.insert(n,null))}delete(n){const r=this.get(n);return r?this.copy(this.keyedMap.remove(n),this.sortedSet.remove(r)):this}isEqual(n){if(!(n instanceof oo)||this.size!==n.size)return!1;const r=this.sortedSet.getIterator(),a=n.sortedSet.getIterator();for(;r.hasNext();){const l=r.getNext().key,h=a.getNext().key;if(!l.isEqual(h))return!1}return!0}toString(){const n=[];return this.forEach(r=>{n.push(r.toString())}),0===n.length?"DocumentSet ()":"DocumentSet (\n  "+n.join("  \n")+"\n)"}copy(n,r){const a=new oo;return a.comparator=this.comparator,a.keyedMap=n,a.sortedSet=r,a}}class LI{constructor(){this.Jr=new Xn($e.comparator)}track(n){const r=n.doc.key,a=this.Jr.get(r);a?0!==n.type&&3===a.type?this.Jr=this.Jr.insert(r,n):3===n.type&&1!==a.type?this.Jr=this.Jr.insert(r,{type:a.type,doc:n.doc}):2===n.type&&2===a.type?this.Jr=this.Jr.insert(r,{type:2,doc:n.doc}):2===n.type&&0===a.type?this.Jr=this.Jr.insert(r,{type:0,doc:n.doc}):1===n.type&&0===a.type?this.Jr=this.Jr.remove(r):1===n.type&&2===a.type?this.Jr=this.Jr.insert(r,{type:1,doc:a.doc}):0===n.type&&1===a.type?this.Jr=this.Jr.insert(r,{type:2,doc:n.doc}):Qe():this.Jr=this.Jr.insert(r,n)}Yr(){const n=[];return this.Jr.inorderTraversal((r,a)=>{n.push(a)}),n}}class Nd{constructor(n,r,a,l,h,m,E,T){this.query=n,this.docs=r,this.oldDocs=a,this.docChanges=l,this.mutatedKeys=h,this.fromCache=m,this.syncStateChanged=E,this.excludesMetadataChanges=T}static fromInitialDocuments(n,r,a,l){const h=[];return r.forEach(m=>{h.push({type:0,doc:m})}),new Nd(n,r,oo.emptySet(r),h,a,l,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(n){if(!(this.fromCache===n.fromCache&&this.syncStateChanged===n.syncStateChanged&&this.mutatedKeys.isEqual(n.mutatedKeys)&&sd(this.query,n.query)&&this.docs.isEqual(n.docs)&&this.oldDocs.isEqual(n.oldDocs)))return!1;const r=this.docChanges,a=n.docChanges;if(r.length!==a.length)return!1;for(let l=0;l<r.length;l++)if(r[l].type!==a[l].type||!r[l].doc.isEqual(a[l].doc))return!1;return!0}}class ZN{constructor(){this.Xr=void 0,this.listeners=[]}}class dS{constructor(){this.queries=new bd(n=>gb(n),sd),this.onlineState="Unknown",this.Zr=new Set}}function NE(i,n){return RE.apply(this,arguments)}function RE(){return(RE=(0,pe.Z)(function*(i,n){const r=Le(i),a=n.query;let l=!1,h=r.queries.get(a);if(h||(l=!0,h=new ZN),l)try{h.Xr=yield r.onListen(a)}catch(m){const E=ra(m,`Initialization of query '${am(n.query)}' failed`);return void n.onError(E)}r.queries.set(a,h),h.listeners.push(n),n.eo(r.onlineState),h.Xr&&n.no(h.Xr)&&ME(r)})).apply(this,arguments)}function xE(i,n){return PE.apply(this,arguments)}function PE(){return(PE=(0,pe.Z)(function*(i,n){const r=Le(i),a=n.query;let l=!1;const h=r.queries.get(a);if(h){const m=h.listeners.indexOf(n);m>=0&&(h.listeners.splice(m,1),l=0===h.listeners.length)}if(l)return r.queries.delete(a),r.onUnlisten(a)})).apply(this,arguments)}function hS(i,n){const r=Le(i);let a=!1;for(const l of n){const m=r.queries.get(l.query);if(m){for(const E of m.listeners)E.no(l)&&(a=!0);m.Xr=l}}a&&ME(r)}function fS(i,n,r){const a=Le(i),l=a.queries.get(n);if(l)for(const h of l.listeners)h.onError(r);a.queries.delete(n)}function ME(i){i.Zr.forEach(n=>{n.next()})}class OE{constructor(n,r,a){this.query=n,this.so=r,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=a||{}}no(n){if(!this.options.includeMetadataChanges){const a=[];for(const l of n.docChanges)3!==l.type&&a.push(l);n=new Nd(n.query,n.docs,n.oldDocs,a,n.mutatedKeys,n.fromCache,n.syncStateChanged,!0)}let r=!1;return this.io?this.oo(n)&&(this.so.next(n),r=!0):this.ao(n,this.onlineState)&&(this.co(n),r=!0),this.ro=n,r}onError(n){this.so.error(n)}eo(n){this.onlineState=n;let r=!1;return this.ro&&!this.io&&this.ao(this.ro,n)&&(this.co(this.ro),r=!0),r}ao(n,r){return!n.fromCache||!(this.options.uo&&"Offline"!==r||n.docs.isEmpty()&&"Offline"!==r)}oo(n){return n.docChanges.length>0||!!(n.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==n.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(n){n=Nd.fromInitialDocuments(n.query,n.docs,n.mutatedKeys,n.fromCache),this.io=!0,this.so.next(n)}}class QN{constructor(n,r){this.payload=n,this.byteLength=r}ho(){return"metadata"in this.payload}}class VI{constructor(n){this.N=n}zn(n){return Ds(this.N,n)}Hn(n){return n.metadata.exists?Xi(this.N,n.document,!1):ln.newNoDocument(this.zn(n.metadata.name),this.Jn(n.metadata.readTime))}Jn(n){return lr(n)}}class Qf{constructor(n,r,a){this.lo=n,this.localStore=r,this.N=a,this.queries=[],this.documents=[],this.progress=UI(n)}fo(n){this.progress.bytesLoaded+=n.byteLength;let r=this.progress.documentsLoaded;return n.payload.namedQuery?this.queries.push(n.payload.namedQuery):n.payload.documentMetadata?(this.documents.push({metadata:n.payload.documentMetadata}),n.payload.documentMetadata.exists||++r):n.payload.document&&(this.documents[this.documents.length-1].document=n.payload.document,++r),r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}wo(n){const r=new Map,a=new VI(this.N);for(const l of n)if(l.metadata.queries){const h=a.zn(l.metadata.name);for(const m of l.metadata.queries){const E=(r.get(m)||jt()).add(h);r.set(m,E)}}return r}complete(){var n=this;return(0,pe.Z)(function*(){const r=yield function(i,n,r,a){return hE.apply(this,arguments)}(n.localStore,new VI(n.N),n.documents,n.lo.id),a=n.wo(n.documents);for(const l of n.queries)yield yI(n.localStore,l,a.get(l.name));return n.progress.taskState="Success",new Mm(Object.assign({},n.progress),r)})()}}function UI(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class BI{constructor(n){this.key=n}}class jI{constructor(n){this.key=n}}class Yf{constructor(n,r){this.query=n,this._o=r,this.mo=null,this.current=!1,this.yo=jt(),this.mutatedKeys=jt(),this.po=mb(n),this.Eo=new oo(this.po)}get To(){return this._o}Io(n,r){const a=r?r.Ao:new LI,l=r?r.Eo:this.Eo;let h=r?r.mutatedKeys:this.mutatedKeys,m=l,E=!1;const T=kv(this.query)&&l.size===this.query.limit?l.last():null,S=Fv(this.query)&&l.size===this.query.limit?l.first():null;if(n.inorderTraversal((R,O)=>{const V=l.get(R),q=ru(this.query,O)?O:null,Z=!!V&&this.mutatedKeys.has(V.key),ge=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let Re=!1;V&&q?V.data.isEqual(q.data)?Z!==ge&&(a.track({type:3,doc:q}),Re=!0):this.Ro(V,q)||(a.track({type:2,doc:q}),Re=!0,(T&&this.po(q,T)>0||S&&this.po(q,S)<0)&&(E=!0)):!V&&q?(a.track({type:0,doc:q}),Re=!0):V&&!q&&(a.track({type:1,doc:V}),Re=!0,(T||S)&&(E=!0)),Re&&(q?(m=m.add(q),h=ge?h.add(R):h.delete(R)):(m=m.delete(R),h=h.delete(R)))}),kv(this.query)||Fv(this.query))for(;m.size>this.query.limit;){const R=kv(this.query)?m.last():m.first();m=m.delete(R.key),h=h.delete(R.key),a.track({type:1,doc:R})}return{Eo:m,Ao:a,Ln:E,mutatedKeys:h}}Ro(n,r){return n.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(n,r,a){const l=this.Eo;this.Eo=n.Eo,this.mutatedKeys=n.mutatedKeys;const h=n.Ao.Yr();h.sort((S,R)=>function(O,V){const q=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qe()}};return q(O)-q(V)}(S.type,R.type)||this.po(S.doc,R.doc)),this.bo(a);const m=r?this.Po():[],E=0===this.yo.size&&this.current?1:0,T=E!==this.mo;return this.mo=E,0!==h.length||T?{snapshot:new Nd(this.query,n.Eo,l,h,n.mutatedKeys,0===E,T,!1),vo:m}:{vo:m}}eo(n){return this.current&&"Offline"===n?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new LI,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(n){return!this._o.has(n)&&!!this.Eo.has(n)&&!this.Eo.get(n).hasLocalMutations}bo(n){n&&(n.addedDocuments.forEach(r=>this._o=this._o.add(r)),n.modifiedDocuments.forEach(r=>{}),n.removedDocuments.forEach(r=>this._o=this._o.delete(r)),this.current=n.current)}Po(){if(!this.current)return[];const n=this.yo;this.yo=jt(),this.Eo.forEach(a=>{this.Vo(a.key)&&(this.yo=this.yo.add(a.key))});const r=[];return n.forEach(a=>{this.yo.has(a)||r.push(new jI(a))}),this.yo.forEach(a=>{n.has(a)||r.push(new BI(a))}),r}So(n){this._o=n.Gn,this.yo=jt();const r=this.Io(n.documents);return this.applyChanges(r,!0)}Do(){return Nd.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}class Sl{constructor(n,r,a){this.query=n,this.targetId=r,this.view=a}}class pS{constructor(n){this.key=n,this.Co=!1}}class gS{constructor(n,r,a,l,h,m){this.localStore=n,this.remoteStore=r,this.eventManager=a,this.sharedClientState=l,this.currentUser=h,this.maxConcurrentLimboResolutions=m,this.No={},this.xo=new bd(E=>gb(E),sd),this.ko=new Map,this.$o=new Set,this.Oo=new Xn($e.comparator),this.Fo=new Map,this.Mo=new fE,this.Lo={},this.Bo=new Map,this.Uo=Tl.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function YN(i,n){return kE.apply(this,arguments)}function kE(){return(kE=(0,pe.Z)(function*(i,n){const r=tp(i);let a,l;const h=r.xo.get(n);if(h)a=h.targetId,r.sharedClientState.addLocalQueryTarget(a),l=h.view.Do();else{const m=yield Cs(r.localStore,Ar(n)),E=r.sharedClientState.addLocalQueryTarget(m.targetId);a=m.targetId,l=yield Rd(r,n,a,"current"===E),r.isPrimaryClient&&Td(r.remoteStore,m)}return l})).apply(this,arguments)}function Rd(i,n,r,a){return FE.apply(this,arguments)}function FE(){return(FE=(0,pe.Z)(function*(i,n,r,a){i.Ko=(R,O,V)=>{return(q=(0,pe.Z)(function*(Z,ge,Re,We){let nt=ge.view.Io(Re);nt.Ln&&(nt=yield km(Z.localStore,ge.query,!1).then(({documents:$t})=>ge.view.Io($t,nt)));const Ye=We&&We.targetChanges.get(ge.targetId),Je=ge.view.applyChanges(nt,Z.isPrimaryClient,Ye);return qI(Z,ge.targetId,Je.vo),Je.snapshot}),function(Z,ge,Re,We){return q.apply(this,arguments)})(i,R,O,V);var q};const l=yield km(i.localStore,n,!0),h=new Yf(n,l.Gn),m=h.Io(l.documents),E=dd.createSynthesizedTargetChangeForCurrentChange(r,a&&"Offline"!==i.onlineState),T=h.applyChanges(m,i.isPrimaryClient,E);qI(i,r,T.vo);const S=new Sl(n,r,h);return i.xo.set(n,S),i.ko.has(r)?i.ko.get(r).push(n):i.ko.set(r,[n]),T.snapshot})).apply(this,arguments)}function mS(i,n){return Km.apply(this,arguments)}function Km(){return(Km=(0,pe.Z)(function*(i,n){const r=Le(i),a=r.xo.get(n),l=r.ko.get(a.targetId);if(l.length>1)return r.ko.set(a.targetId,l.filter(h=>!sd(h,n))),void r.xo.delete(n);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||(yield Id(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),du(r.remoteStore,a.targetId),Ns(r,a.targetId)}).catch(so))):(Ns(r,a.targetId),yield Id(r.localStore,a.targetId,!0))})).apply(this,arguments)}function Jf(){return(Jf=(0,pe.Z)(function*(i,n,r){const a=Rl(i);try{const l=yield function(h,m){const E=Le(h),T=ar.now(),S=m.reduce((O,V)=>O.add(V.key),jt());let R;return E.persistence.runTransaction("Locally write mutations","readwrite",O=>E.Qn.Pn(O,S).next(V=>{R=V;const q=[];for(const Z of m){const ge=kC(Z,R.get(Z.key));null!=ge&&q.push(new Yo(Z.key,ge,ub(ge.value.mapValue),Gn.exists(!0)))}return E.In.addMutationBatch(O,T,q,m)})).then(O=>(O.applyToLocalDocumentSet(R),{batchId:O.batchId,changes:R}))}(a.localStore,n);a.sharedClientState.addPendingMutation(l.batchId),function(h,m,E){let T=h.Lo[h.currentUser.toKey()];T||(T=new Xn(Nt)),T=T.insert(m,E),h.Lo[h.currentUser.toKey()]=T}(a,l.batchId,r),yield Rs(a,l.changes),yield fu(a.remoteStore)}catch(l){const h=ra(l,"Failed to persist write");r.reject(h)}})).apply(this,arguments)}function LE(i,n){return Zm.apply(this,arguments)}function Zm(){return(Zm=(0,pe.Z)(function*(i,n){const r=Le(i);try{const a=yield fI(r.localStore,n);n.targetChanges.forEach((l,h)=>{const m=r.Fo.get(h);m&&(ht(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1),l.addedDocuments.size>0?m.Co=!0:l.modifiedDocuments.size>0?ht(m.Co):l.removedDocuments.size>0&&(ht(m.Co),m.Co=!1))}),yield Rs(r,a,n)}catch(a){yield so(a)}})).apply(this,arguments)}function $I(i,n,r){const a=Le(i);if(a.isPrimaryClient&&0===r||!a.isPrimaryClient&&1===r){const l=[];a.xo.forEach((h,m)=>{const E=m.view.eo(n);E.snapshot&&l.push(E.snapshot)}),function(h,m){const E=Le(h);E.onlineState=m;let T=!1;E.queries.forEach((S,R)=>{for(const O of R.listeners)O.eo(m)&&(T=!0)}),T&&ME(E)}(a.eventManager,n),l.length&&a.No.Tr(l),a.onlineState=n,a.isPrimaryClient&&a.sharedClientState.setOnlineState(n)}}function yS(i,n,r){return Qm.apply(this,arguments)}function Qm(){return(Qm=(0,pe.Z)(function*(i,n,r){const a=Le(i);a.sharedClientState.updateQueryState(n,"rejected",r);const l=a.Fo.get(n),h=l&&l.key;if(h){let m=new Xn($e.comparator);m=m.insert(h,ln.newNoDocument(h,It.min()));const E=jt().add(h),T=new kf(It.min(),new Map,new mn(Nt),m,E);yield LE(a,T),a.Oo=a.Oo.remove(h),a.Fo.delete(n),Ei(a)}else yield Id(a.localStore,n,!1).then(()=>Ns(a,n,r)).catch(so)})).apply(this,arguments)}function _S(i,n){return Ym.apply(this,arguments)}function Ym(){return(Ym=(0,pe.Z)(function*(i,n){const r=Le(i),a=n.batch.batchId;try{const l=yield QC(r.localStore,n);ao(r,a,null),Vt(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),yield Rs(r,l)}catch(l){yield so(l)}})).apply(this,arguments)}function Jm(i,n,r){return xd.apply(this,arguments)}function xd(){return(xd=(0,pe.Z)(function*(i,n,r){const a=Le(i);try{const l=yield function(h,m){const E=Le(h);return E.persistence.runTransaction("Reject batch","readwrite-primary",T=>{let S;return E.In.lookupMutationBatch(T,m).next(R=>(ht(null!==R),S=R.keys(),E.In.removeMutationBatch(T,R))).next(()=>E.In.performConsistencyCheck(T)).next(()=>E.Qn.Pn(T,S))})}(a.localStore,n);ao(a,n,r),Vt(a,n),a.sharedClientState.updateMutationState(n,"rejected",r),yield Rs(a,l)}catch(l){yield so(l)}})).apply(this,arguments)}function Al(){return(Al=(0,pe.Z)(function*(i,n){const r=Le(i);hu(r.remoteStore)||Me("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const a=yield function(h){const m=Le(h);return m.persistence.runTransaction("Get highest unacknowledged batch id","readonly",E=>m.In.getHighestUnacknowledgedBatchId(E))}(r.localStore);if(-1===a)return void n.resolve();const l=r.Bo.get(a)||[];l.push(n),r.Bo.set(a,l)}catch(a){const l=ra(a,"Initialization of waitForPendingWrites() operation failed");n.reject(l)}})).apply(this,arguments)}function Vt(i,n){(i.Bo.get(n)||[]).forEach(r=>{r.resolve()}),i.Bo.delete(n)}function ao(i,n,r){const a=Le(i);let l=a.Lo[a.currentUser.toKey()];if(l){const h=l.get(n);h&&(r?h.reject(r):h.resolve(),l=l.remove(n)),a.Lo[a.currentUser.toKey()]=l}}function Ns(i,n,r=null){i.sharedClientState.removeLocalQueryTarget(n);for(const a of i.ko.get(n))i.xo.delete(a),r&&i.No.jo(a,r);i.ko.delete(n),i.isPrimaryClient&&i.Mo.cs(n).forEach(a=>{i.Mo.containsKey(a)||Pd(i,a)})}function Pd(i,n){i.$o.delete(n.path.canonicalString());const r=i.Oo.get(n);null!==r&&(du(i.remoteStore,r),i.Oo=i.Oo.remove(n),i.Fo.delete(r),Ei(i))}function qI(i,n,r){for(const a of r)a instanceof BI?(i.Mo.addReference(a.key,n),vt(i,a)):a instanceof jI?(Me("SyncEngine","Document no longer in limbo: "+a.key),i.Mo.removeReference(a.key,n),i.Mo.containsKey(a.key)||Pd(i,a.key)):Qe()}function vt(i,n){const r=n.key,a=r.path.canonicalString();i.Oo.get(r)||i.$o.has(a)||(Me("SyncEngine","New document in limbo: "+r),i.$o.add(a),Ei(i))}function Ei(i){for(;i.$o.size>0&&i.Oo.size<i.maxConcurrentLimboResolutions;){const n=i.$o.values().next().value;i.$o.delete(n);const r=new $e(Rt.fromString(n)),a=i.Uo.next();i.Fo.set(a,new pS(r)),i.Oo=i.Oo.insert(r,a),Td(i.remoteStore,new au(Ar(Pf(r.path)),a,2,Zi.T))}}function Rs(i,n,r){return ia.apply(this,arguments)}function ia(){return(ia=(0,pe.Z)(function*(i,n,r){const a=Le(i),l=[],h=[],m=[];var E;a.xo.isEmpty()||(a.xo.forEach((E,T)=>{m.push(a.Ko(T,n,r).then(S=>{if(S){a.isPrimaryClient&&a.sharedClientState.updateQueryState(T.targetId,S.fromCache?"not-current":"current"),l.push(S);const R=oE.kn(T.targetId,S);h.push(R)}}))}),yield Promise.all(m),a.No.Tr(l),yield(E=(0,pe.Z)(function*(T,S){const R=Le(T);try{yield R.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>Ae.forEach(S,V=>Ae.forEach(V.Nn,q=>R.persistence.referenceDelegate.addReference(O,V.targetId,q)).next(()=>Ae.forEach(V.xn,q=>R.persistence.referenceDelegate.removeReference(O,V.targetId,q)))))}catch(O){if(!su(O))throw O;Me("LocalStore","Failed to update sequence numbers: "+O)}for(const O of S){const V=O.targetId;if(!O.fromCache){const q=R.Un.get(V),ge=q.withLastLimboFreeSnapshotVersion(q.snapshotVersion);R.Un=R.Un.insert(V,ge)}}}),function(T,S){return E.apply(this,arguments)})(a.localStore,h))})).apply(this,arguments)}function XN(i,n){return Xm.apply(this,arguments)}function Xm(){return(Xm=(0,pe.Z)(function*(i,n){const r=Le(i);if(!r.currentUser.isEqual(n)){Me("SyncEngine","User change. New user:",n.toKey());const a=yield dI(r.localStore,n);r.currentUser=n,(l=r).Bo.forEach(m=>{m.forEach(E=>{E.reject(new ve(oe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),l.Bo.clear(),r.sharedClientState.handleUserChange(n,a.removedBatchIds,a.addedBatchIds),yield Rs(r,a.Wn)}var l})).apply(this,arguments)}function GI(i,n){const r=Le(i),a=r.Fo.get(n);if(a&&a.Co)return jt().add(a.key);{let l=jt();const h=r.ko.get(n);if(!h)return l;for(const m of h){const E=r.xo.get(m);l=l.unionWith(E.view.To)}return l}}function eR(i,n){return VE.apply(this,arguments)}function VE(){return(VE=(0,pe.Z)(function*(i,n){const r=Le(i),a=yield km(r.localStore,n.query,!0),l=n.view.So(a);return r.isPrimaryClient&&qI(r,n.targetId,l.vo),l})).apply(this,arguments)}function vS(i){return wi.apply(this,arguments)}function wi(){return(wi=(0,pe.Z)(function*(i){const n=Le(i);return gI(n.localStore).then(r=>Rs(n,r))})).apply(this,arguments)}function wn(i,n,r,a){return Li.apply(this,arguments)}function Li(){return(Li=(0,pe.Z)(function*(i,n,r,a){const l=Le(i),h=yield function(m,E){const T=Le(m),S=Le(T.In);return T.persistence.runTransaction("Lookup mutation documents","readonly",R=>S.Xt(R,E).next(O=>O?T.Qn.Pn(R,O):Ae.resolve(null)))}(l.localStore,n);var E;null!==h?("pending"===r?yield fu(l.remoteStore):"acknowledged"===r||"rejected"===r?(ao(l,n,a||null),Vt(l,n),E=n,Le(Le(l.localStore).In).te(E)):Qe(),yield Rs(l,h)):Me("SyncEngine","Cannot apply mutation batch with id: "+n)})).apply(this,arguments)}function UE(){return(UE=(0,pe.Z)(function*(i,n){const r=Le(i);if(tp(r),Rl(r),!0===n&&!0!==r.qo){const a=r.sharedClientState.getAllActiveQueryTargets(),l=yield BE(r,a.toArray());r.qo=!0,yield zm(r.remoteStore,!0);for(const h of l)Td(r.remoteStore,h)}else if(!1===n&&!1!==r.qo){const a=[];let l=Promise.resolve();r.ko.forEach((h,m)=>{r.sharedClientState.isLocalQueryTarget(m)?a.push(m):l=l.then(()=>(Ns(r,m),Id(r.localStore,m,!0))),du(r.remoteStore,m)}),yield l,yield BE(r,a),function(h){const m=Le(h);m.Fo.forEach((E,T)=>{du(m.remoteStore,T)}),m.Mo.us(),m.Fo=new Map,m.Oo=new Xn($e.comparator)}(r),r.qo=!1,yield zm(r.remoteStore,!1)}})).apply(this,arguments)}function BE(i,n,r){return Xf.apply(this,arguments)}function Xf(){return(Xf=(0,pe.Z)(function*(i,n,r){const a=Le(i),l=[],h=[];for(const m of n){let E;const T=a.ko.get(m);if(T&&0!==T.length){E=yield Cs(a.localStore,Ar(T[0]));for(const S of T){const R=a.xo.get(S),O=yield eR(a,R);O.snapshot&&h.push(O.snapshot)}}else{const S=yield lE(a.localStore,m);E=yield Cs(a.localStore,S),yield Rd(a,Nl(S),m,!1)}l.push(E)}return a.No.Tr(h),l})).apply(this,arguments)}function Nl(i){return hb(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function ep(i){const n=Le(i);return Le(Le(n.localStore).persistence).pn()}function ES(i,n,r,a){return sa.apply(this,arguments)}function sa(){return(sa=(0,pe.Z)(function*(i,n,r,a){const l=Le(i);if(l.qo)Me("SyncEngine","Ignoring unexpected query state notification.");else if(l.ko.has(n))switch(r){case"current":case"not-current":{const h=yield gI(l.localStore),m=kf.createSynthesizedRemoteEventForCurrentChange(n,"current"===r);yield Rs(l,h,m);break}case"rejected":yield Id(l.localStore,n,!0),Ns(l,n,a);break;default:Qe()}})).apply(this,arguments)}function wS(i,n,r){return ey.apply(this,arguments)}function ey(){return(ey=(0,pe.Z)(function*(i,n,r){const a=tp(i);if(a.qo){for(const l of n){if(a.ko.has(l)){Me("SyncEngine","Adding an already active target "+l);continue}const h=yield lE(a.localStore,l),m=yield Cs(a.localStore,h);yield Rd(a,Nl(h),m.targetId,!1),Td(a.remoteStore,m)}for(const l of r)a.ko.has(l)&&(yield Id(a.localStore,l,!1).then(()=>{du(a.remoteStore,l),Ns(a,l)}).catch(so))}})).apply(this,arguments)}function tp(i){const n=Le(i);return n.remoteStore.remoteSyncer.applyRemoteEvent=LE.bind(null,n),n.remoteStore.remoteSyncer.getRemoteKeysForTarget=GI.bind(null,n),n.remoteStore.remoteSyncer.rejectListen=yS.bind(null,n),n.No.Tr=hS.bind(null,n.eventManager),n.No.jo=fS.bind(null,n.eventManager),n}function Rl(i){const n=Le(i);return n.remoteStore.remoteSyncer.applySuccessfulWrite=_S.bind(null,n),n.remoteStore.remoteSyncer.rejectFailedWrite=Jm.bind(null,n),n}class HE{constructor(){this.synchronizeTabs=!1}initialize(n){var r=this;return(0,pe.Z)(function*(){r.N=Kf(n.databaseInfo.databaseId),r.sharedClientState=r.Wo(n),r.persistence=r.Go(n),yield r.persistence.start(),r.gcScheduler=r.zo(n),r.localStore=r.Ho(n)})()}zo(n){return null}Ho(n){return cI(this.persistence,new aE,n.initialUser,this.N)}Go(n){return new tS(gE.Ns,this.N)}Wo(n){return new wI}terminate(){var n=this;return(0,pe.Z)(function*(){n.gcScheduler&&n.gcScheduler.stop(),yield n.sharedClientState.shutdown(),yield n.persistence.shutdown()})()}}class xl extends HE{constructor(n,r,a){super(),this.Jo=n,this.cacheSizeBytes=r,this.forceOwnership=a,this.synchronizeTabs=!1}initialize(n){var r=()=>super.initialize,a=this;return(0,pe.Z)(function*(){yield r().call(a,n),yield function(i){return cE.apply(this,arguments)}(a.localStore),yield a.Jo.initialize(a,n),yield Rl(a.Jo.syncEngine),yield fu(a.Jo.remoteStore),yield a.persistence.nn(()=>(a.gcScheduler&&!a.gcScheduler.started&&a.gcScheduler.start(a.localStore),Promise.resolve()))})()}Ho(n){return cI(this.persistence,new aE,n.initialUser,this.N)}zo(n){return new KC(this.persistence.referenceDelegate.garbageCollector,n.asyncQueue)}Go(n){const r=Pm(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?$r.withCacheSize(this.cacheSizeBytes):$r.DEFAULT;return new uI(this.synchronizeTabs,r,n.clientId,a,n.asyncQueue,Um(),Bm(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(n){return new wI}}class bS extends xl{constructor(n,r){super(n,r,!1),this.Jo=n,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(n){var r=()=>super.initialize,a=this;return(0,pe.Z)(function*(){yield r().call(a,n);const l=a.Jo.syncEngine;a.sharedClientState instanceof Vm&&(a.sharedClientState.syncEngine={_i:wn.bind(null,l),mi:ES.bind(null,l),gi:wS.bind(null,l),pn:ep.bind(null,l),wi:vS.bind(null,l)},yield a.sharedClientState.start()),yield a.persistence.nn(function(){var h=(0,pe.Z)(function*(m){yield function(i,n){return UE.apply(this,arguments)}(a.Jo.syncEngine,m),a.gcScheduler&&(m&&!a.gcScheduler.started?a.gcScheduler.start(a.localStore):m||a.gcScheduler.stop())});return function(m){return h.apply(this,arguments)}}())})()}Wo(n){const r=Um();if(!Vm.bt(r))throw new ve(oe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const a=Pm(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new Vm(r,n.asyncQueue,a,n.clientId,n.initialUser)}}class Md{initialize(n,r){var a=this;return(0,pe.Z)(function*(){a.localStore||(a.localStore=n.localStore,a.sharedClientState=n.sharedClientState,a.datastore=a.createDatastore(r),a.remoteStore=a.createRemoteStore(r),a.eventManager=a.createEventManager(r),a.syncEngine=a.createSyncEngine(r,!n.synchronizeTabs),a.sharedClientState.onlineStateHandler=l=>$I(a.syncEngine,l,1),a.remoteStore.remoteSyncer.handleCredentialChange=XN.bind(null,a.syncEngine),yield zm(a.remoteStore,a.syncEngine.isPrimaryClient))})()}createEventManager(n){return new dS}createDatastore(n){const r=Kf(n.databaseInfo.databaseId),a=new II(n.databaseInfo);return new TI(n.credentials,a,r)}createRemoteStore(n){return r=this.localStore,a=this.datastore,l=n.asyncQueue,h=E=>$I(this.syncEngine,E,0),m=bI.bt()?new bI:new rS,new SI(r,a,l,h,m);var r,a,l,h,m}createSyncEngine(n,r){return function(a,l,h,m,E,T,S){const R=new gS(a,l,h,m,E,T);return S&&(R.qo=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return(n=(0,pe.Z)(function*(r){const a=Le(r);Me("RemoteStore","RemoteStore shutting down."),a.Kr.add(5),yield Ss(a),a.Qr.shutdown(),a.Wr.set("Unknown")}),function(r){return n.apply(this,arguments)})(this.remoteStore);var n}}function $E(i,n=10240){let r=0;return{read:()=>(0,pe.Z)(function*(){if(r<i.byteLength){const a={value:i.slice(r,r+n),done:!1};return r+=n,a}return{done:!0}})(),cancel:()=>(0,pe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class np{constructor(n){this.observer=n,this.muted=!1}next(n){this.observer.next&&this.Yo(this.observer.next,n)}error(n){this.observer.error?this.Yo(this.observer.error,n):console.error("Uncaught Error in snapshot listener:",n)}Xo(){this.muted=!0}Yo(n,r){this.muted||setTimeout(()=>{this.muted||n(r)},0)}}class zI{constructor(n,r){this.Zo=n,this.N=r,this.metadata=new Tr,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(a=>{a&&a.ho()?this.metadata.resolve(a.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==a?void 0:a.payload)}`))},a=>this.metadata.reject(a))}close(){return this.Zo.cancel()}getMetadata(){var n=this;return(0,pe.Z)(function*(){return n.metadata.promise})()}Qo(){var n=this;return(0,pe.Z)(function*(){return yield n.getMetadata(),n.ea()})()}ea(){var n=this;return(0,pe.Z)(function*(){const r=yield n.na();if(null===r)return null;const a=n.ta.decode(r),l=Number(a);isNaN(l)&&n.sa(`length string (${a}) is not valid number`);const h=yield n.ia(l);return new QN(JSON.parse(h),r.length+l)})()}ra(){return this.buffer.findIndex(n=>n==="{".charCodeAt(0))}na(){var n=this;return(0,pe.Z)(function*(){for(;n.ra()<0&&!(yield n.oa()););if(0===n.buffer.length)return null;const r=n.ra();r<0&&n.sa("Reached the end of bundle when a length string is expected.");const a=n.buffer.slice(0,r);return n.buffer=n.buffer.slice(r),a})()}ia(n){var r=this;return(0,pe.Z)(function*(){for(;r.buffer.length<n;)(yield r.oa())&&r.sa("Reached the end of bundle when more is expected.");const a=r.ta.decode(r.buffer.slice(0,n));return r.buffer=r.buffer.slice(n),a})()}sa(n){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${n}`)}oa(){var n=this;return(0,pe.Z)(function*(){const r=yield n.Zo.read();if(!r.done){const a=new Uint8Array(n.buffer.length+r.value.length);a.set(n.buffer),a.set(r.value,n.buffer.length),n.buffer=a}return r.done})()}}class ty{constructor(n){this.datastore=n,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(n){var r=this;return(0,pe.Z)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw new ve(oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const a=yield(l=(0,pe.Z)(function*(h,m){const E=Le(h),T=Lf(E.N)+"/documents",S={documents:m.map(q=>fd(E.N,q))},R=yield E.Ki("BatchGetDocuments",T,S),O=new Map;R.forEach(q=>{const Z=function(i,n){return"found"in n?function(r,a){ht(!!a.found);const l=Ds(r,a.found.name),h=lr(a.found.updateTime),m=new Sr({mapValue:{fields:a.found.fields}});return ln.newFoundDocument(l,h,m)}(i,n):"missing"in n?function(r,a){ht(!!a.missing),ht(!!a.readTime);const l=Ds(r,a.missing),h=lr(a.readTime);return ln.newNoDocument(l,h)}(i,n):Qe()}(E.N,q);O.set(Z.key.toString(),Z)});const V=[];return m.forEach(q=>{const Z=O.get(q.toString());ht(!!Z),V.push(Z)}),V}),function(h,m){return l.apply(this,arguments)})(r.datastore,n);var l;return a.forEach(l=>r.recordVersion(l)),a})()}set(n,r){this.write(r.toMutation(n,this.precondition(n))),this.writtenDocs.add(n.toString())}update(n,r){try{this.write(r.toMutation(n,this.preconditionForUpdate(n)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(n.toString())}delete(n){this.write(new El(n,this.precondition(n))),this.writtenDocs.add(n.toString())}commit(){var n=this;return(0,pe.Z)(function*(){if(n.ensureCommitNotCalled(),n.lastWriteError)throw n.lastWriteError;const r=n.readVersions;var a;n.mutations.forEach(a=>{r.delete(a.key.toString())}),r.forEach((a,l)=>{const h=$e.fromPath(l);n.mutations.push(new hm(h,n.precondition(h)))}),yield(a=(0,pe.Z)(function*(l,h){const m=Le(l),E=Lf(m.N)+"/documents",T={writes:h.map(S=>Em(m.N,S))};yield m.Li("Commit",E,T)}),function(l,h){return a.apply(this,arguments)})(n.datastore,n.mutations),n.committed=!0})()}recordVersion(n){let r;if(n.isFoundDocument())r=n.version;else{if(!n.isNoDocument())throw Qe();r=It.min()}const a=this.readVersions.get(n.key.toString());if(a){if(!r.isEqual(a))throw new ve(oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(n.key.toString(),r)}precondition(n){const r=this.readVersions.get(n.toString());return!this.writtenDocs.has(n.toString())&&r?Gn.updateTime(r):Gn.none()}preconditionForUpdate(n){const r=this.readVersions.get(n.toString());if(!this.writtenDocs.has(n.toString())&&r){if(r.isEqual(It.min()))throw new ve(oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gn.updateTime(r)}return Gn.exists(!0)}write(n){this.ensureCommitNotCalled(),this.mutations.push(n)}ensureCommitNotCalled(){}}class IS{constructor(n,r,a,l){this.asyncQueue=n,this.datastore=r,this.updateFunction=a,this.deferred=l,this.aa=5,this.rr=new Zf(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var n=this;this.rr.Xi((0,pe.Z)(function*(){const r=new ty(n.datastore),a=n.ua(r);a&&a.then(l=>{n.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{n.deferred.resolve(l)}).catch(h=>{n.ha(h)}))}).catch(l=>{n.ha(l)})}))}ua(n){try{const r=this.updateFunction(n);return!tu(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}ha(n){this.aa>0&&this.la(n)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(n)}la(n){if("FirebaseError"===n.name){const r=n.code;return"aborted"===r||"failed-precondition"===r||!fm(r)}return!1}}class qE{constructor(n,r,a){var l=this;this.credentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=Dr.UNAUTHENTICATED,this.clientId=Nv.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(r,function(){var h=(0,pe.Z)(function*(m){Me("FirestoreClient","Received user=",m.uid),yield l.credentialListener(m),l.user=m});return function(m){return h.apply(this,arguments)}}())}getConfiguration(){var n=this;return(0,pe.Z)(function*(){return{asyncQueue:n.asyncQueue,databaseInfo:n.databaseInfo,clientId:n.clientId,credentials:n.credentials,initialUser:n.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(n){this.credentialListener=n}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ve(oe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var n=this;this.asyncQueue.enterRestrictedMode();const r=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{n.onlineComponents&&(yield n.onlineComponents.terminate()),n.offlineComponents&&(yield n.offlineComponents.terminate()),n.credentials.shutdown(),r.resolve()}catch(a){const l=ra(a,"Failed to shutdown persistence");r.reject(l)}})),r.promise}}function ny(i,n){return KI.apply(this,arguments)}function KI(){return(KI=(0,pe.Z)(function*(i,n){i.asyncQueue.verifyOperationInProgress(),Me("FirestoreClient","Initializing OfflineComponentProvider");const r=yield i.getConfiguration();yield n.initialize(r);let a=r.initialUser;i.setCredentialChangeListener(function(){var l=(0,pe.Z)(function*(h){a.isEqual(h)||(yield dI(n.localStore,h),a=h)});return function(h){return l.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=n})).apply(this,arguments)}function DS(i,n){return ft.apply(this,arguments)}function ft(){return(ft=(0,pe.Z)(function*(i,n){i.asyncQueue.verifyOperationInProgress();const r=yield ZI(i);Me("FirestoreClient","Initializing OnlineComponentProvider");const a=yield i.getConfiguration();yield n.initialize(r,a),i.setCredentialChangeListener(l=>{return(h=(0,pe.Z)(function*(m,E){const T=Le(m);T.asyncQueue.verifyOperationInProgress(),Me("RemoteStore","RemoteStore received new credentials");const S=hu(T);T.Kr.add(3),yield Ss(T),S&&T.Wr.set("Unknown"),yield T.remoteSyncer.handleCredentialChange(E),T.Kr.delete(3),yield jm(T)}),function(m,E){return h.apply(this,arguments)})(n.remoteStore,l);var h}),i.onlineComponents=n})).apply(this,arguments)}function ZI(i){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,pe.Z)(function*(i){return i.offlineComponents||(Me("FirestoreClient","Using default OfflineComponentProvider"),yield ny(i,new HE)),i.offlineComponents})).apply(this,arguments)}function ry(i){return GE.apply(this,arguments)}function GE(){return(GE=(0,pe.Z)(function*(i){return i.onlineComponents||(Me("FirestoreClient","Using default OnlineComponentProvider"),yield DS(i,new Md)),i.onlineComponents})).apply(this,arguments)}function QI(i){return ZI(i).then(n=>n.persistence)}function YI(i){return ZI(i).then(n=>n.localStore)}function TS(i){return ry(i).then(n=>n.remoteStore)}function WE(i){return ry(i).then(n=>n.syncEngine)}function Vn(i){return zE.apply(this,arguments)}function zE(){return(zE=(0,pe.Z)(function*(i){const n=yield ry(i),r=n.eventManager;return r.onListen=YN.bind(null,n.syncEngine),r.onUnlisten=mS.bind(null,n.syncEngine),r})).apply(this,arguments)}function JI(i,n,r={}){const a=new Tr;return i.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(l,h,m,E,T){const S=new np({next:O=>{h.enqueueAndForget(()=>xE(l,R));const V=O.docs.has(m);!V&&O.fromCache?T.reject(new ve(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&O.fromCache&&E&&"server"===E.source?T.reject(new ve(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):T.resolve(O)},error:O=>T.reject(O)}),R=new OE(Pf(m.path),S,{includeMetadataChanges:!0,uo:!0});return NE(l,R)}(yield Vn(i),i.asyncQueue,n,r,a)})),a.promise}function XI(i,n,r={}){const a=new Tr;return i.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(l,h,m,E,T){const S=new np({next:O=>{h.enqueueAndForget(()=>xE(l,R)),O.fromCache&&"server"===E.source?T.reject(new ve(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):T.resolve(O)},error:O=>T.reject(O)}),R=new OE(m,S,{includeMetadataChanges:!0,uo:!0});return NE(l,R)}(yield Vn(i),i.asyncQueue,n,r,a)})),a.promise}class PS{constructor(n,r,a,l,h,m,E,T){this.databaseId=n,this.appId=r,this.persistenceKey=a,this.host=l,this.ssl=h,this.forceLongPolling=m,this.autoDetectLongPolling=E,this.useFetchStreams=T}}class Ml{constructor(n,r){this.projectId=n,this.database=r||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(n){return n instanceof Ml&&n.projectId===this.projectId&&n.database===this.database}}const iy=new Map;function QE(i,n,r){if(!r)throw new ve(oe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${n}.`)}function MS(i,n,r,a){if(!0===n&&!0===a)throw new ve(oe.INVALID_ARGUMENT,`${i} and ${r} cannot be used together.`)}function eD(i){if(!$e.isDocumentKey(i))throw new ve(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function tD(i){if($e.isDocumentKey(i))throw new ve(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function sy(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const n=(r=i).constructor?r.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var r;return"function"==typeof i?"a function":Qe()}function kt(i,n){if("_delegate"in i&&(i=i._delegate),!(i instanceof n)){if(n.name===i.constructor.name)throw new ve(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=sy(i);throw new ve(oe.INVALID_ARGUMENT,`Expected type '${n.name}', but it was: ${r}`)}}return i}function nD(i,n){if(n<=0)throw new ve(oe.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${n}.`)}class rD{constructor(n){var r;if(void 0===n.host){if(void 0!==n.ssl)throw new ve(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=n.host,this.ssl=null===(r=n.ssl)||void 0===r||r;if(this.credentials=n.credentials,this.ignoreUndefinedProperties=!!n.ignoreUndefinedProperties,void 0===n.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==n.cacheSizeBytes&&n.cacheSizeBytes<1048576)throw new ve(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=n.cacheSizeBytes}this.experimentalForceLongPolling=!!n.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!n.experimentalAutoDetectLongPolling,this.useFetchStreams=!!n.useFetchStreams,MS("experimentalForceLongPolling",n.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",n.experimentalAutoDetectLongPolling)}isEqual(n){return this.host===n.host&&this.ssl===n.ssl&&this.credentials===n.credentials&&this.cacheSizeBytes===n.cacheSizeBytes&&this.experimentalForceLongPolling===n.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===n.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===n.ignoreUndefinedProperties&&this.useFetchStreams===n.useFetchStreams}}class oa{constructor(n,r){this._credentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rD({}),this._settingsFrozen=!1,n instanceof Ml?this._databaseId=n:(this._app=n,this._databaseId=function(a){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new ve(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ml(a.options.projectId)}(n))}get app(){if(!this._app)throw new ve(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(n){if(this._settingsFrozen)throw new ve(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rD(n),void 0!==n.credentials&&(this._credentials=function(r){if(!r)return new GN;switch(r.type){case"gapi":const a=r.client;return ht(!("object"!=typeof a||null===a||!a.auth||!a.auth.getAuthHeaderValueForFirstParty)),new IC(a,r.sessionIndex||"0",r.iamToken||null);case"provider":return r.client;default:throw new ve(oe.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(n.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=iy.get(n);r&&(Me("ComponentProvider","Removing Datastore"),iy.delete(n),r.terminate())}(this),Promise.resolve()}}class dn{constructor(n,r,a){this.converter=r,this._key=a,this.type="document",this.firestore=n}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bi(this.firestore,this.converter,this._key.path.popLast())}withConverter(n){return new dn(this.firestore,n,this._key)}}class xr{constructor(n,r,a){this.converter=r,this._query=a,this.type="query",this.firestore=n}withConverter(n){return new xr(this.firestore,n,this._query)}}class bi extends xr{constructor(n,r,a){super(n,r,Pf(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const n=this._path.popLast();return n.isEmpty()?null:new dn(this.firestore,null,new $e(n))}withConverter(n){return new bi(this.firestore,n,this._path)}}function kS(i,n,...r){if(i=(0,Et.m9)(i),QE("collection","path",n),i instanceof oa){const a=Rt.fromString(n,...r);return tD(a),new bi(i,null,a)}{if(!(i instanceof dn||i instanceof bi))throw new ve(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(Rt.fromString(n,...r));return tD(a),new bi(i.firestore,null,a)}}function oy(i,n,...r){if(i=(0,Et.m9)(i),1===arguments.length&&(n=Nv.I()),QE("doc","path",n),i instanceof oa){const a=Rt.fromString(n,...r);return eD(a),new dn(i,null,new $e(a))}{if(!(i instanceof dn||i instanceof bi))throw new ve(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(Rt.fromString(n,...r));return eD(a),new dn(i.firestore,i instanceof bi?i.converter:null,new $e(a))}}function sD(i,n){return i=(0,Et.m9)(i),n=(0,Et.m9)(n),(i instanceof dn||i instanceof bi)&&(n instanceof dn||n instanceof bi)&&i.firestore===n.firestore&&i.path===n.path&&i.converter===n.converter}function oD(i,n){return i=(0,Et.m9)(i),n=(0,Et.m9)(n),i instanceof xr&&n instanceof xr&&i.firestore===n.firestore&&sd(i._query,n._query)&&i.converter===n.converter}class FS{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new Zf(this,"async_queue_retry"),this.Ea=()=>{const r=Bm();r&&Me("AsyncQueue","Visibility state changed to "+r.visibilityState),this.rr.tr()};const n=Bm();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(n){this.enqueue(n)}enqueueAndForgetEvenWhileRestricted(n){this.Ta(),this.Ia(n)}enterRestrictedMode(n){if(!this.wa){this.wa=!0,this.ya=n||!1;const r=Bm();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Ea)}}enqueue(n){if(this.Ta(),this.wa)return new Promise(()=>{});const r=new Tr;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(n().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(n){this.enqueueAndForget(()=>(this.da.push(n),this.Aa()))}Aa(){var n=this;return(0,pe.Z)(function*(){if(0!==n.da.length){try{yield n.da[0](),n.da.shift(),n.rr.reset()}catch(r){if(!su(r))throw r;Me("AsyncQueue","Operation failed with retryable error: "+r)}n.da.length>0&&n.rr.Xi(()=>n.Aa())}})()}Ia(n){const r=this.fa.then(()=>(this.ga=!0,n().catch(a=>{throw this.ma=a,this.ga=!1,qn("INTERNAL UNHANDLED ERROR: ",function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),h}(a)),a}).then(a=>(this.ga=!1,a))));return this.fa=r,r}enqueueAfterDelay(n,r,a){this.Ta(),this.pa.indexOf(n)>-1&&(r=0);const l=Ad.createAndSchedule(this,n,r,a,h=>this.Ra(h));return this._a.push(l),l}Ta(){this.ma&&Qe()}verifyOperationInProgress(){}ba(){var n=this;return(0,pe.Z)(function*(){let r;do{r=n.fa,yield r}while(r!==n.fa)})()}Pa(n){for(const r of this._a)if(r.timerId===n)return!0;return!1}va(n){return this.ba().then(()=>{this._a.sort((r,a)=>r.targetTimeMs-a.targetTimeMs);for(const r of this._a)if(r.skipDelay(),"all"!==n&&r.timerId===n)break;return this.ba()})}Va(n){this.pa.push(n)}Ra(n){const r=this._a.indexOf(n);this._a.splice(r,1)}}function YE(i){return function(n,r){if("object"!=typeof n||null===n)return!1;const a=n;for(const l of["next","error","complete"])if(l in a&&"function"==typeof a[l])return!0;return!1}(i)}class aD{constructor(){this._progressObserver={},this._taskCompletionResolver=new Tr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(n,r,a){this._progressObserver={next:n,error:r,complete:a}}catch(n){return this._taskCompletionResolver.promise.catch(n)}then(n,r){return this._taskCompletionResolver.promise.then(n,r)}_completeWith(n){this._updateProgress(n),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(n)}_failWith(n){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(n),this._taskCompletionResolver.reject(n)}_updateProgress(n){this._lastProgress=n,this._progressObserver.next&&this._progressObserver.next(n)}}class Rn extends oa{constructor(n,r){super(n,r),this.type="firestore",this._queue=new FS,this._persistenceKey="name"in n?n.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||ay(this),this._firestoreClient.terminate()}}function dr(i){return i._firestoreClient||ay(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function ay(i){var n;const r=i._freezeSettings(),a=(h=(null===(n=i._app)||void 0===n?void 0:n.options.appId)||"",new PS(i._databaseId,h,i._persistenceKey,(E=r).host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,E.useFetchStreams));var h,E;i._firestoreClient=new qE(i._credentials,i._queue,a)}function uD(i,n,r){const a=new Tr;return i.asyncQueue.enqueue((0,pe.Z)(function*(){try{yield ny(i,r),yield DS(i,n),a.resolve()}catch(l){if(!("FirebaseError"===(h=l).name?h.code===oe.FAILED_PRECONDITION||h.code===oe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&h instanceof DOMException)||22===h.code||20===h.code||11===h.code))throw l;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+l),a.reject(l)}var h})).then(()=>a.promise)}function Pr(i){if(i._initialized||i._terminated)throw new ve(oe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class uo{constructor(...n){for(let r=0;r<n.length;++r)if(0===n[r].length)throw new ve(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(n)}isEqual(n){return this._internalPath.isEqual(n._internalPath)}}class ns{constructor(n){this._byteString=n}static fromBase64String(n){try{return new ns(ur.fromBase64String(n))}catch(r){throw new ve(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(n){return new ns(ur.fromUint8Array(n))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(n){return this._byteString.isEqual(n._byteString)}}class Ol{constructor(n){this._methodName=n}}class rp{constructor(n,r){if(!isFinite(n)||n<-90||n>90)throw new ve(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+n);if(!isFinite(r)||r<-180||r>180)throw new ve(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=n,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(n){return this._lat===n._lat&&this._long===n._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(n){return Nt(this._lat,n._lat)||Nt(this._long,n._long)}}const dD=/^__.*__$/;class hD{constructor(n,r,a){this.data=n,this.fieldMask=r,this.fieldTransforms=a}toMutation(n,r){return null!==this.fieldMask?new Yo(n,this.data,this.fieldMask,r,this.fieldTransforms):new Of(n,this.data,r,this.fieldTransforms)}}class fD{constructor(n,r,a){this.data=n,this.fieldMask=r,this.fieldTransforms=a}toMutation(n,r){return new Yo(n,this.data,this.fieldMask,r,this.fieldTransforms)}}function pD(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qe()}}class uy{constructor(n,r,a,l,h,m){this.settings=n,this.databaseId=r,this.N=a,this.ignoreUndefinedProperties=l,void 0===h&&this.Sa(),this.fieldTransforms=h||[],this.fieldMask=m||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(n){return new uy(Object.assign(Object.assign({},this.settings),n),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(n){var r;const a=null===(r=this.path)||void 0===r?void 0:r.child(n),l=this.Ca({path:a,xa:!1});return l.ka(n),l}$a(n){var r;const a=null===(r=this.path)||void 0===r?void 0:r.child(n),l=this.Ca({path:a,xa:!1});return l.Sa(),l}Oa(n){return this.Ca({path:void 0,xa:!0})}Fa(n){return dy(n,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(n){return void 0!==this.fieldMask.find(r=>n.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>n.isPrefixOf(r.field))}Sa(){if(this.path)for(let n=0;n<this.path.length;n++)this.ka(this.path.get(n))}ka(n){if(0===n.length)throw this.Fa("Document fields must not be empty");if(pD(this.Da)&&dD.test(n))throw this.Fa('Document fields cannot begin and end with "__"')}}class gD{constructor(n,r,a){this.databaseId=n,this.ignoreUndefinedProperties=r,this.N=a||Kf(n)}Ba(n,r,a,l=!1){return new uy({Da:n,methodName:r,La:a,path:zt.emptyPath(),xa:!1,Ma:l},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function kl(i){const n=i._freezeSettings(),r=Kf(i._databaseId);return new gD(i._databaseId,!!n.ignoreUndefinedProperties,r)}function JE(i,n,r,a,l,h={}){const m=i.Ba(h.merge||h.mergeFields?2:0,n,r,l);cy("Data must be an object, but it was:",m,a);const E=ED(a,m);let T,S;if(h.merge)T=new to(m.fieldMask),S=m.fieldTransforms;else if(h.mergeFields){const R=[];for(const O of h.mergeFields){const V=e0(n,O,r);if(!m.contains(V))throw new ve(oe.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);wD(R,V)||R.push(V)}T=new to(R),S=m.fieldTransforms.filter(O=>T.covers(O.field))}else T=null,S=m.fieldTransforms;return new hD(new Sr(E),T,S)}class ip extends Ol{_toFieldTransform(n){if(2!==n.Da)throw n.Fa(1===n.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return n.fieldMask.push(n.path),null}isEqual(n){return n instanceof ip}}function mD(i,n,r){return new uy({Da:3,La:n.settings.La,methodName:i._methodName,xa:r},n.databaseId,n.N,n.ignoreUndefinedProperties)}class pu extends Ol{_toFieldTransform(n){return new Mf(n.path,new vl)}isEqual(n){return n instanceof pu}}class tR extends Ol{constructor(n,r){super(n),this.Ua=r}_toFieldTransform(n){const r=mD(this,n,!0),a=this.Ua.map(h=>aa(h,r)),l=new iu(a);return new Mf(n.path,l)}isEqual(n){return this===n}}class yD extends Ol{constructor(n,r){super(n),this.Ua=r}_toFieldTransform(n){const r=mD(this,n,!0),a=this.Ua.map(h=>aa(h,r)),l=new od(a);return new Mf(n.path,l)}isEqual(n){return this===n}}class qS extends Ol{constructor(n,r){super(n),this.qa=r}_toFieldTransform(n){const r=new ad(n.N,Eb(n.N,this.qa));return new Mf(n.path,r)}isEqual(n){return this===n}}function _D(i,n,r,a){const l=i.Ba(1,n,r);cy("Data must be an object, but it was:",l,a);const h=[],m=Sr.empty();ml(a,(T,S)=>{const R=t0(n,T,r);S=(0,Et.m9)(S);const O=l.$a(R);if(S instanceof ip)h.push(R);else{const V=aa(S,O);null!=V&&(h.push(R),m.set(R,V))}});const E=new to(h);return new fD(m,E,l.fieldTransforms)}function ly(i,n,r,a,l,h){const m=i.Ba(1,n,r),E=[e0(n,a,r)],T=[l];if(h.length%2!=0)throw new ve(oe.INVALID_ARGUMENT,`Function ${n}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<h.length;V+=2)E.push(e0(n,h[V])),T.push(h[V+1]);const S=[],R=Sr.empty();for(let V=E.length-1;V>=0;--V)if(!wD(S,E[V])){const q=E[V];let Z=T[V];Z=(0,Et.m9)(Z);const ge=m.$a(q);if(Z instanceof ip)S.push(q);else{const Re=aa(Z,ge);null!=Re&&(S.push(q),R.set(q,Re))}}const O=new to(S);return new fD(R,O,m.fieldTransforms)}function vD(i,n,r,a=!1){return aa(r,i.Ba(a?4:3,n))}function aa(i,n){if(XE(i=(0,Et.m9)(i)))return cy("Unsupported field value:",n,i),ED(i,n);if(i instanceof Ol)return function(r,a){if(!pD(a.Da))throw a.Fa(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Fa(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(i,n),null;if(void 0===i&&n.ignoreUndefinedProperties)return null;if(n.path&&n.fieldMask.push(n.path),i instanceof Array){if(n.settings.xa&&4!==n.Da)throw n.Fa("Nested arrays are not supported");return function(r,a){const l=[];let h=0;for(const m of r){let E=aa(m,a.Oa(h));null==E&&(E={nullValue:"NULL_VALUE"}),l.push(E),h++}return{arrayValue:{values:l}}}(i,n)}return function(r,a){if(null===(r=(0,Et.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return Eb(a.N,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const l=ar.fromDate(r);return{timestampValue:Ff(a.N,l)}}if(r instanceof ar){const l=new ar(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ff(a.N,l)}}if(r instanceof rp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ns)return{bytesValue:Mb(a.N,r._byteString)};if(r instanceof dn){const l=a.databaseId,h=r.firestore._databaseId;if(!h.isEqual(l))throw a.Fa(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:vm(r.firestore._databaseId||a.databaseId,r._key.path)}}throw a.Fa(`Unsupported field value: ${sy(r)}`)}(i,n)}function ED(i,n){const r={};return ob(i)?n.path&&n.path.length>0&&n.fieldMask.push(n.path):ml(i,(a,l)=>{const h=aa(l,n.Na(a));null!=h&&(r[a]=h)}),{mapValue:{fields:r}}}function XE(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof ar||i instanceof rp||i instanceof ns||i instanceof dn||i instanceof Ol)}function cy(i,n,r){if(!XE(r)||"object"!=typeof(a=r)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const a=sy(r);throw n.Fa("an object"===a?i+" a custom object":i+" "+a)}var a}function e0(i,n,r){if((n=(0,Et.m9)(n))instanceof uo)return n._internalPath;if("string"==typeof n)return t0(i,n);throw dy("Field path arguments must be of type string or FieldPath.",i,!1,void 0,r)}const GS=new RegExp("[~\\*/\\[\\]]");function t0(i,n,r){if(n.search(GS)>=0)throw dy(`Invalid field path (${n}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,r);try{return new uo(...n.split("."))._internalPath}catch(a){throw dy(`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,r)}}function dy(i,n,r,a,l){const h=a&&!a.isEmpty(),m=void 0!==l;let E=`Function ${n}() called with invalid data`;r&&(E+=" (via `toFirestore()`)"),E+=". ";let T="";return(h||m)&&(T+=" (found",h&&(T+=` in field ${a}`),m&&(T+=` in document ${l}`),T+=")"),new ve(oe.INVALID_ARGUMENT,E+i+T)}function wD(i,n){return i.some(r=>r.isEqual(n))}class sp{constructor(n,r,a,l,h){this._firestore=n,this._userDataWriter=r,this._key=a,this._document=l,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new dn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const n=new WS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(n)}return this._userDataWriter.convertValue(this._document.data.value)}}get(n){if(this._document){const r=this._document.data.field(gu("DocumentSnapshot.get",n));if(null!==r)return this._userDataWriter.convertValue(r)}}}class WS extends sp{data(){return super.data()}}function gu(i,n){return"string"==typeof n?t0(i,n):n instanceof uo?n._internalPath:n._delegate._internalPath}class mu{constructor(n,r){this.hasPendingWrites=n,this.fromCache=r}isEqual(n){return this.hasPendingWrites===n.hasPendingWrites&&this.fromCache===n.fromCache}}class co extends sp{constructor(n,r,a,l,h,m){super(n,r,a,l,m),this._firestore=n,this._firestoreImpl=n,this.metadata=h}exists(){return super.exists()}data(n={}){if(this._document){if(this._converter){const r=new kd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}}get(n,r={}){if(this._document){const a=this._document.data.field(gu("DocumentSnapshot.get",n));if(null!==a)return this._userDataWriter.convertValue(a,r.serverTimestamps)}}}class kd extends co{data(n={}){return super.data(n)}}class ua{constructor(n,r,a,l){this._firestore=n,this._userDataWriter=r,this._snapshot=l,this.metadata=new mu(l.hasPendingWrites,l.fromCache),this.query=a}get docs(){const n=[];return this.forEach(r=>n.push(r)),n}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(n,r){this._snapshot.docs.forEach(a=>{n.call(r,new kd(this._firestore,this._userDataWriter,a.key,a,new mu(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(n={}){const r=!!n.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ve(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let h=0;return a._snapshot.docChanges.map(m=>({type:"added",doc:new kd(a._firestore,a._userDataWriter,m.doc.key,m.doc,new mu(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:h++}))}{let h=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(m=>l||3!==m.type).map(m=>{const E=new kd(a._firestore,a._userDataWriter,m.doc.key,m.doc,new mu(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let T=-1,S=-1;return 0!==m.type&&(T=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),1!==m.type&&(h=h.add(m.doc),S=h.indexOf(m.doc.key)),{type:bD(m.type),doc:E,oldIndex:T,newIndex:S}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function bD(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qe()}}function ID(i,n){return i instanceof co&&n instanceof co?i._firestore===n._firestore&&i._key.isEqual(n._key)&&(null===i._document?null===n._document:i._document.isEqual(n._document))&&i._converter===n._converter:i instanceof ua&&n instanceof ua&&i._firestore===n._firestore&&oD(i.query,n.query)&&i.metadata.isEqual(n.metadata)&&i._snapshot.isEqual(n._snapshot)}function DD(i){if(Fv(i)&&0===i.explicitOrderBy.length)throw new ve(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class op{}function yu(i,...n){for(const r of n)i=r._apply(i);return i}class zS extends op{constructor(n,r,a){super(),this.Ka=n,this.ja=r,this.Qa=a,this.type="where"}_apply(n){const r=kl(n.firestore),a=function(l,h,m,E,T,S,R){let O;if(T.isKeyField()){if("array-contains"===S||"array-contains-any"===S)throw new ve(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on FieldPath.documentId().`);if("in"===S||"not-in"===S){r0(R,S);const q=[];for(const Z of R)q.push(py(E,l,Z));O={arrayValue:{values:q}}}else O=py(E,l,R)}else"in"!==S&&"not-in"!==S&&"array-contains-any"!==S||r0(R,S),O=vD(m,"where",R,"in"===S||"not-in"===S);const V=jr.create(T,S,O);return function(q,Z){if(Z.v()){const Re=om(q);if(null!==Re&&!Re.isEqual(Z.field))throw new ve(oe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Re.toString()}' and '${Z.field.toString()}'`);const We=Lv(q);null!==We&&gy(0,Z.field,We)}const ge=function(Re,We){for(const nt of Re.filters)if(We.indexOf(nt.op)>=0)return nt.op;return null}(q,function(Re){switch(Re){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Z.op));if(null!==ge)throw new ve(oe.INVALID_ARGUMENT,ge===Z.op?`Invalid query. You cannot use more than one '${Z.op.toString()}' filter.`:`Invalid query. You cannot use '${Z.op.toString()}' filters with '${ge.toString()}' filters.`)}(l,V),V}(n._query,0,r,n.firestore._databaseId,this.Ka,this.ja,this.Qa);return new xr(n.firestore,n.converter,function(l,h){const m=l.filters.concat([h]);return new Is(l.path,l.collectionGroup,l.explicitOrderBy.slice(),m,l.limit,l.limitType,l.startAt,l.endAt)}(n._query,a))}}class ZS extends op{constructor(n,r){super(),this.Ka=n,this.Wa=r,this.type="orderBy"}_apply(n){const r=function(a,l,h){if(null!==a.startAt)throw new ve(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new ve(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const m=new xf(l,h);return function(E,T){if(null===Lv(E)){const S=om(E);null!==S&&gy(0,S,T.field)}}(a,m),m}(n._query,this.Ka,this.Wa);return new xr(n.firestore,n.converter,function(a,l){const h=a.explicitOrderBy.concat([l]);return new Is(a.path,a.collectionGroup,h,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(n._query,r))}}class Fd extends op{constructor(n,r,a){super(),this.type=n,this.Ga=r,this.za=a}_apply(n){return new xr(n.firestore,n.converter,pb(n._query,this.Ga,this.za))}}class xs extends op{constructor(n,r,a){super(),this.type=n,this.Ha=r,this.Ja=a}_apply(n){const r=fy(n,this.type,this.Ha,this.Ja);return new xr(n.firestore,n.converter,(l=r,new Is((a=n._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)));var a,l}}class TD extends op{constructor(n,r,a){super(),this.type=n,this.Ha=r,this.Ja=a}_apply(n){const r=fy(n,this.type,this.Ha,this.Ja);return new xr(n.firestore,n.converter,(l=r,new Is((a=n._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,l)));var a,l}}function fy(i,n,r,a){if(r[0]=(0,Et.m9)(r[0]),r[0]instanceof sp)return function(l,h,m,E,T){if(!E)throw new ve(oe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${m}().`);const S=[];for(const R of id(l))if(R.field.isKeyField())S.push(Nf(h,E.key));else{const O=E.data.field(R.field);if(Zo(O))throw new ve(oe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+R.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const V=R.field.canonicalString();throw new ve(oe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}S.push(O)}return new rm(S,T)}(i._query,i.firestore._databaseId,n,r[0]._document,a);{const l=kl(i.firestore);return function(h,m,E,T,S,R){const O=h.explicitOrderBy;if(S.length>O.length)throw new ve(oe.INVALID_ARGUMENT,`Too many arguments provided to ${T}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let q=0;q<S.length;q++){const Z=S[q];if(O[q].field.isKeyField()){if("string"!=typeof Z)throw new ve(oe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${T}(), but got a ${typeof Z}`);if(!fb(h)&&-1!==Z.indexOf("/"))throw new ve(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${T}() must be a plain document ID, but '${Z}' contains a slash.`);const ge=h.path.child(Rt.fromString(Z));if(!$e.isDocumentKey(ge))throw new ve(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${T}() must result in a valid document path, but '${ge}' is not because it contains an odd number of segments.`);const Re=new $e(ge);V.push(Nf(m,Re))}else{const ge=vD(E,T,Z);V.push(ge)}}return new rm(V,R)}(i._query,i.firestore._databaseId,l,n,r,a)}}function py(i,n,r){if("string"==typeof(r=(0,Et.m9)(r))){if(""===r)throw new ve(oe.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!fb(n)&&-1!==r.indexOf("/"))throw new ve(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const a=n.path.child(Rt.fromString(r));if(!$e.isDocumentKey(a))throw new ve(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Nf(i,new $e(a))}if(r instanceof dn)return Nf(i,r._key);throw new ve(oe.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${sy(r)}.`)}function r0(i,n){if(!Array.isArray(i)||0===i.length)throw new ve(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${n.toString()}' filters.`);if(i.length>10)throw new ve(oe.INVALID_ARGUMENT,`Invalid Query. '${n.toString()}' filters support a maximum of 10 elements in the value array.`)}function gy(i,n,r){if(!r.isEqual(n))throw new ve(oe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${n.toString()}' and so you must also use '${n.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}class up{convertValue(n,r="none"){switch(Qi(n)){case 0:return null;case 1:return n.booleanValue;case 2:return gn(n.integerValue||n.doubleValue);case 3:return this.convertTimestamp(n.timestampValue);case 4:return this.convertServerTimestamp(n,r);case 5:return n.stringValue;case 6:return this.convertBytes(Fn(n.bytesValue));case 7:return this.convertReference(n.referenceValue);case 8:return this.convertGeoPoint(n.geoPointValue);case 9:return this.convertArray(n.arrayValue,r);case 10:return this.convertObject(n.mapValue,r);default:throw Qe()}}convertObject(n,r){const a={};return ml(n.fields,(l,h)=>{a[l]=this.convertValue(h,r)}),a}convertGeoPoint(n){return new rp(gn(n.latitude),gn(n.longitude))}convertArray(n,r){return(n.values||[]).map(a=>this.convertValue(a,r))}convertServerTimestamp(n,r){switch(r){case"previous":const a=Af(n);return null==a?null:this.convertValue(a,r);case"estimate":return this.convertTimestamp(Br(n));default:return null}}convertTimestamp(n){const r=Cr(n);return new ar(r.seconds,r.nanos)}convertDocumentKey(n,r){const a=Rt.fromString(n);ht(Qv(a));const l=new Ml(a.get(1),a.get(3)),h=new $e(a.popFirst(5));return l.isEqual(r)||qn(`Document ${h} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),h}}function my(i,n,r){let a;return a=i?r&&(r.merge||r.mergeFields)?i.toFirestore(n,r):i.toFirestore(n):n,a}class XS extends up{constructor(n){super(),this.firestore=n}convertBytes(n){return new ns(n)}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return new dn(this.firestore,null,r)}}class CD{constructor(n,r){this._firestore=n,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=kl(n)}set(n,r,a){this._verifyNotCommitted();const l=_u(n,this._firestore),h=my(l.converter,r,a),m=JE(this._dataReader,"WriteBatch.set",l._key,h,null!==l.converter,a);return this._mutations.push(m.toMutation(l._key,Gn.none())),this}update(n,r,a,...l){this._verifyNotCommitted();const h=_u(n,this._firestore);let m;return m="string"==typeof(r=(0,Et.m9)(r))||r instanceof uo?ly(this._dataReader,"WriteBatch.update",h._key,r,a,l):_D(this._dataReader,"WriteBatch.update",h._key,r),this._mutations.push(m.toMutation(h._key,Gn.exists(!0))),this}delete(n){this._verifyNotCommitted();const r=_u(n,this._firestore);return this._mutations=this._mutations.concat(new El(r._key,Gn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ve(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _u(i,n){if((i=(0,Et.m9)(i)).firestore!==n)throw new ve(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class la extends up{constructor(n){super(),this.firestore=n}convertBytes(n){return new ns(n)}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return new dn(this.firestore,null,r)}}function s0(i,n,r){i=kt(i,dn);const a=kt(i.firestore,Rn),l=my(i.converter,n,r);return zn(a,[JE(kl(a),"setDoc",i._key,l,null!==i.converter,r).toMutation(i._key,Gn.none())])}function o0(i,n,r,...a){i=kt(i,dn);const l=kt(i.firestore,Rn),h=kl(l);let m;return m="string"==typeof(n=(0,Et.m9)(n))||n instanceof uo?ly(h,"updateDoc",i._key,n,r,a):_D(h,"updateDoc",i._key,n),zn(l,[m.toMutation(i._key,Gn.exists(!0))])}function a0(i,...n){var r,a,l;i=(0,Et.m9)(i);let h={includeMetadataChanges:!1},m=0;"object"!=typeof n[m]||YE(n[m])||(h=n[m],m++);const E={includeMetadataChanges:h.includeMetadataChanges};if(YE(n[m])){const O=n[m];n[m]=null===(r=O.next)||void 0===r?void 0:r.bind(O),n[m+1]=null===(a=O.error)||void 0===a?void 0:a.bind(O),n[m+2]=null===(l=O.complete)||void 0===l?void 0:l.bind(O)}let T,S,R;if(i instanceof dn)S=kt(i.firestore,Rn),R=Pf(i._key.path),T={next:O=>{n[m]&&n[m](vu(S,i,O))},error:n[m+1],complete:n[m+2]};else{const O=kt(i,xr);S=kt(O.firestore,Rn),R=O._query;const V=new la(S);T={next:q=>{n[m]&&n[m](new ua(S,V,O,q))},error:n[m+1],complete:n[m+2]},DD(i._query)}return function(O,V,q,Z){const ge=new np(Z),Re=new OE(V,ge,q);return O.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return NE(yield Vn(O),Re)})),()=>{ge.Xo(),O.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return xE(yield Vn(O),Re)}))}}(dr(S),R,E,T)}function zn(i,n){return function(r,a){const l=new Tr;return r.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(i,n,r){return Jf.apply(this,arguments)}(yield WE(r),a,l)})),l.promise}(dr(i),n)}function vu(i,n,r){const a=r.docs.get(n._key),l=new la(i);return new co(i,l,n._key,a,new mu(r.hasPendingWrites,r.fromCache),n.converter)}class rA extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=kl(n)}get(n){const r=_u(n,this._firestore),a=new XS(this._firestore);return this._transaction.lookup([r._key]).then(l=>{if(!l||1!==l.length)return Qe();const h=l[0];if(h.isFoundDocument())return new sp(this._firestore,a,h.key,h,r.converter);if(h.isNoDocument())return new sp(this._firestore,a,r._key,null,r.converter);throw Qe()})}set(n,r,a){const l=_u(n,this._firestore),h=my(l.converter,r,a),m=JE(this._dataReader,"Transaction.set",l._key,h,null!==l.converter,a);return this._transaction.set(l._key,m),this}update(n,r,a,...l){const h=_u(n,this._firestore);let m;return m="string"==typeof(r=(0,Et.m9)(r))||r instanceof uo?ly(this._dataReader,"Transaction.update",h._key,r,a,l):_D(this._dataReader,"Transaction.update",h._key,r),this._transaction.update(h._key,m),this}delete(n){const r=_u(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(n,r){super(n,r),this._firestore=n}get(n){const r=_u(n,this._firestore),a=new la(this._firestore);return super.get(n).then(l=>new co(this._firestore,a,r._key,l._document,new mu(!1,!1),r.converter))}}function yy(i,n){if(void 0===n)return{merge:!1};if(void 0!==n.mergeFields&&void 0!==n.merge)throw new ve("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return n}function c0(){if("undefined"==typeof Uint8Array)throw new ve("unimplemented","Uint8Arrays are not available in this environment.")}function cp(){if("undefined"==typeof atob)throw new ve("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(i){td=i})(al.SDK_VERSION),(0,al._registerComponent)(new Ga.wA("firestore",(i,{options:n})=>{const r=i.getProvider("app").getImmediate(),a=new Rn(r,new tb(i.getProvider("auth-internal")));return n=Object.assign({useFetchStreams:!0},n),a._setSettings(n),a},"PUBLIC")),(0,al.registerVersion)("@firebase/firestore","3.1.0",void 0);class Fl{constructor(n){this._delegate=n}static fromBase64String(n){return cp(),new Fl(ns.fromBase64String(n))}static fromUint8Array(n){return c0(),new Fl(ns.fromUint8Array(n))}toBase64(){return cp(),this._delegate.toBase64()}toUint8Array(){return c0(),this._delegate.toUint8Array()}isEqual(n){return this._delegate.isEqual(n._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function PD(i){return function(i,n){if("object"!=typeof i||null===i)return!1;const r=i;for(const a of["next","error","complete"])if(a in r&&"function"==typeof r[a])return!0;return!1}(i)}class cA{enableIndexedDbPersistence(n,r){return function(i,n){Pr(i=kt(i,Rn));const r=dr(i),a=i._freezeSettings(),l=new Md;return uD(r,l,new xl(l,a.cacheSizeBytes,null==n?void 0:n.forceOwnership))}(n._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(n){return function(i){Pr(i=kt(i,Rn));const n=dr(i),r=i._freezeSettings(),a=new Md;return uD(n,a,new bS(a,r.cacheSizeBytes))}(n._delegate)}clearIndexedDbPersistence(n){return function(i){if(i._initialized&&!i._terminated)throw new ve(oe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const n=new Tr;return i._queue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{yield(r=(0,pe.Z)(function*(a){if(!ts.bt())return Promise.resolve();const l=a+"main";yield ts.delete(l)}),function(a){return r.apply(this,arguments)})(Pm(i._databaseId,i._persistenceKey)),n.resolve()}catch(r){n.reject(r)}var r})),n.promise}(n._delegate)}}class d0{constructor(n,r,a){this._delegate=r,this._persistenceProvider=a,this.INTERNAL={delete:()=>this.terminate()},n instanceof Ml||(this._appCompat=n)}get _databaseId(){return this._delegate._databaseId}settings(n){const r=this._delegate._getSettings();!n.merge&&r.host!==n.host&&Jg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),n.merge&&delete(n=Object.assign(Object.assign({},r),n)).merge,this._delegate._setSettings(n)}useEmulator(n,r,a={}){!function(i,n,r,a={}){var l;const h=(i=kt(i,oa))._getSettings();if("firestore.googleapis.com"!==h.host&&h.host!==n&&Jg("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},h),{host:`${n}:${r}`,ssl:!1})),a.mockUserToken){let m,E;if("string"==typeof a.mockUserToken)m=a.mockUserToken,E=Dr.MOCK_USER;else{m=(0,Et.Sg)(a.mockUserToken,null===(l=i._app)||void 0===l?void 0:l.options.projectId);const T=a.mockUserToken.sub||a.mockUserToken.user_id;if(!T)throw new ve(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Dr(T)}i._credentials=new eb(new bC(m,E))}}(this._delegate,n,r,a)}enableNetwork(){return function(i){return function(i){return i.asyncQueue.enqueue((0,pe.Z)(function*(){const n=yield QI(i),r=yield TS(i);return n.setNetworkEnabled(!0),function(a){const l=Le(a);return l.Kr.delete(0),jm(l)}(r)}))}(dr(i=kt(i,Rn)))}(this._delegate)}disableNetwork(){return function(i){return function(i){return i.asyncQueue.enqueue((0,pe.Z)(function*(){const n=yield QI(i),r=yield TS(i);return n.setNetworkEnabled(!1),(a=(0,pe.Z)(function*(l){const h=Le(l);h.Kr.add(0),yield Ss(h),h.Wr.set("Offline")}),function(l){return a.apply(this,arguments)})(r);var a}))}(dr(i=kt(i,Rn)))}(this._delegate)}enablePersistence(n){let r=!1,a=!1;return n&&(r=!!n.synchronizeTabs,a=!!n.experimentalForceOwningTab,MS("synchronizeTabs",r,"experimentalForceOwningTab",a)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,a)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(i){return function(n){const r=new Tr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(i,n){return Al.apply(this,arguments)}(yield WE(n),r)})),r.promise}(dr(i=kt(i,Rn)))}(this._delegate)}onSnapshotsInSync(n){return function(i,n){return function(i,n){const r=new np(n);return i.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return a=yield Vn(i),l=r,Le(a).Zr.add(l),void l.next();var a,l})),()=>{r.Xo(),i.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return a=yield Vn(i),l=r,void Le(a).Zr.delete(l);var a,l}))}}(dr(i=kt(i,Rn)),YE(n)?n:{next:n})}(this._delegate,n)}get app(){if(!this._appCompat)throw new ve("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(n){try{return new Vd(this,kS(this._delegate,n))}catch(r){throw ei(r,"collection()","Firestore.collection()")}}doc(n){try{return new rs(this,oy(this._delegate,n))}catch(r){throw ei(r,"doc()","Firestore.doc()")}}collectionGroup(n){try{return new qr(this,function(i,n){if(i=kt(i,oa),QE("collectionGroup","collection id",n),n.indexOf("/")>=0)throw new ve(oe.INVALID_ARGUMENT,`Invalid collection ID '${n}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xr(i,null,(r=n,new Is(Rt.emptyPath(),r)));var r}(this._delegate,n))}catch(r){throw ei(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(n){return function(i,n){return function(i,n){const r=new Tr;return i.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){const a=yield(l=i,ry(l).then(h=>h.datastore));var l;new IS(i.asyncQueue,a,n,r).run()})),r.promise}(dr(i),r=>n(new rA(i,r)))}(this._delegate,r=>n(new kD(this,r)))}batch(){return dr(this._delegate),new _y(new CD(this._delegate,n=>zn(this._delegate,n)))}loadBundle(n){return function(i,n){const r=dr(i=kt(i,Rn)),a=new aD;return function(i,n,r,a){const l=function(h,m){let E;return E="string"==typeof h?(new TextEncoder).encode(h):h,T=function(T,S){if(T instanceof Uint8Array)return $E(T,S);if(T instanceof ArrayBuffer)return $E(new Uint8Array(T),S);if(T instanceof ReadableStream)return T.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(E),new zI(T,m);var T}(r,Kf(n));i.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){!function(i,n,r){const a=Le(i);var l;(l=(0,pe.Z)(function*(h,m,E){try{const T=yield m.getMetadata();if(yield function(V,q){const Z=Le(V),ge=lr(q.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",Re=>Z.Je.getBundleMetadata(Re,q.id)).then(Re=>!!Re&&Re.createTime.compareTo(ge)>=0)}(h.localStore,T))return yield m.close(),void E._completeWith((V=T,{taskState:"Success",documentsLoaded:V.totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}));E._updateProgress(UI(T));const S=new Qf(T,h.localStore,m.N);let R=yield m.Qo();for(;R;){const V=yield S.fo(R);V&&E._updateProgress(V),R=yield m.Qo()}const O=yield S.complete();yield Rs(h,O.Tn,void 0),yield function(V,q){const Z=Le(V);return Z.persistence.runTransaction("Save bundle","readwrite",ge=>Z.Je.saveBundleMetadata(ge,q))}(h.localStore,T),E._completeWith(O.progress)}catch(T){Jg("SyncEngine",`Loading bundle failed with ${T}`),E._failWith(T)}var V}),function(h,m,E){return l.apply(this,arguments)})(a,n,r).then(()=>{a.sharedClientState.notifyBundleLoaded()})}(yield WE(i),l,a)}))}(r,i._databaseId,n,a),a}(this._delegate,n)}namedQuery(n){return function(i,n){return function(i,n){return i.asyncQueue.enqueue((0,pe.Z)(function*(){return function(r,a){const l=Le(r);return l.persistence.runTransaction("Get named query","readonly",h=>l.Je.getNamedQuery(h,a))}(yield YI(i),n)}))}(dr(i=kt(i,Rn)),n).then(r=>r?new xr(i,null,r.query):null)}(this._delegate,n).then(r=>r?new qr(this,r):null)}}class Ll extends up{constructor(n){super(),this.firestore=n}convertBytes(n){return new Fl(new ns(n))}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return rs.forKey(r,this.firestore,null)}}class kD{constructor(n,r){this._firestore=n,this._delegate=r,this._userDataWriter=new Ll(n)}get(n){const r=Eu(n);return this._delegate.get(r).then(a=>new Ld(this._firestore,new co(this._firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,r.converter)))}set(n,r,a){const l=Eu(n);return a?(yy("Transaction.set",a),this._delegate.set(l,r,a)):this._delegate.set(l,r),this}update(n,r,a,...l){const h=Eu(n);return 2===arguments.length?this._delegate.update(h,r):this._delegate.update(h,r,a,...l),this}delete(n){const r=Eu(n);return this._delegate.delete(r),this}}class _y{constructor(n){this._delegate=n}set(n,r,a){const l=Eu(n);return a?(yy("WriteBatch.set",a),this._delegate.set(l,r,a)):this._delegate.set(l,r),this}update(n,r,a,...l){const h=Eu(n);return 2===arguments.length?this._delegate.update(h,r):this._delegate.update(h,r,a,...l),this}delete(n){const r=Eu(n);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class ca{constructor(n,r,a){this._firestore=n,this._userDataWriter=r,this._delegate=a}fromFirestore(n,r){const a=new kd(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,null);return this._delegate.fromFirestore(new dp(this._firestore,a),null!=r?r:{})}toFirestore(n,r){return r?this._delegate.toFirestore(n,r):this._delegate.toFirestore(n)}static getInstance(n,r){const a=ca.INSTANCES;let l=a.get(n);l||(l=new WeakMap,a.set(n,l));let h=l.get(r);return h||(h=new ca(n,new Ll(n),r),l.set(r,h)),h}}ca.INSTANCES=new WeakMap;class rs{constructor(n,r){this.firestore=n,this._delegate=r,this._userDataWriter=new Ll(n)}static forPath(n,r,a){if(n.length%2!=0)throw new ve("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${n.canonicalString()} has ${n.length}`);return new rs(r,new dn(r._delegate,a,new $e(n)))}static forKey(n,r,a){return new rs(r,new dn(r._delegate,a,n))}get id(){return this._delegate.id}get parent(){return new Vd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(n){try{return new Vd(this.firestore,kS(this._delegate,n))}catch(r){throw ei(r,"collection()","DocumentReference.collection()")}}isEqual(n){return(n=(0,Et.m9)(n))instanceof dn&&sD(this._delegate,n)}set(n,r){r=yy("DocumentReference.set",r);try{return r?s0(this._delegate,n,r):s0(this._delegate,n)}catch(a){throw ei(a,"setDoc()","DocumentReference.set()")}}update(n,r,...a){try{return 1===arguments.length?o0(this._delegate,n):o0(this._delegate,n,r,...a)}catch(l){throw ei(l,"updateDoc()","DocumentReference.update()")}}delete(){return function(i){return zn(kt(i.firestore,Rn),[new El(i._key,Gn.none())])}(this._delegate)}onSnapshot(...n){const r=h0(n),a=f0(n,l=>new Ld(this.firestore,new co(this.firestore._delegate,this._userDataWriter,l._key,l._document,l.metadata,this._delegate.converter)));return a0(this._delegate,r,a)}get(n){let r;return r="cache"===(null==n?void 0:n.source)?function(i){i=kt(i,dn);const n=kt(i.firestore,Rn),r=dr(n),a=new la(n);return function(i,n){const r=new Tr;return i.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(a=(0,pe.Z)(function*(l,h,m){try{const E=yield function(T,S){const R=Le(T);return R.persistence.runTransaction("read document","readonly",O=>R.Qn.An(O,S))}(l,h);E.isFoundDocument()?m.resolve(E):E.isNoDocument()?m.resolve(null):m.reject(new ve(oe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(E){const T=ra(E,`Failed to get document '${h} from cache`);m.reject(T)}}),function(l,h,m){return a.apply(this,arguments)})(yield YI(i),n,r);var a})),r.promise}(r,i._key).then(l=>new co(n,a,i._key,l,new mu(null!==l&&l.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==n?void 0:n.source)?function(i){i=kt(i,dn);const n=kt(i.firestore,Rn);return JI(dr(n),i._key,{source:"server"}).then(r=>vu(n,i,r))}(this._delegate):function(i){i=kt(i,dn);const n=kt(i.firestore,Rn);return JI(dr(n),i._key).then(r=>vu(n,i,r))}(this._delegate),r.then(a=>new Ld(this.firestore,new co(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)))}withConverter(n){return new rs(this.firestore,this._delegate.withConverter(n?ca.getInstance(this.firestore,n):null))}}function ei(i,n,r){return i.message=i.message.replace(n,r),i}function h0(i){for(const n of i)if("object"==typeof n&&!PD(n))return n;return{}}function f0(i,n){var r,a;let l;return l=PD(i[0])?i[0]:PD(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:h=>{l.next&&l.next(n(h))},error:null===(r=l.error)||void 0===r?void 0:r.bind(l),complete:null===(a=l.complete)||void 0===a?void 0:a.bind(l)}}class Ld{constructor(n,r){this._firestore=n,this._delegate=r}get ref(){return new rs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(n){return this._delegate.data(n)}get(n,r){return this._delegate.get(n,r)}isEqual(n){return ID(this._delegate,n._delegate)}}class dp extends Ld{data(n){const r=this._delegate.data(n);return function(i,n){i||Qe()}(void 0!==r),r}}class qr{constructor(n,r){this.firestore=n,this._delegate=r,this._userDataWriter=new Ll(n)}where(n,r,a){try{return new qr(this.firestore,yu(this._delegate,function(i,n,r){const a=n,l=gu("where",i);return new zS(l,a,r)}(n,r,a)))}catch(l){throw ei(l,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(n,r){try{return new qr(this.firestore,yu(this._delegate,function(i,n="asc"){const r=n,a=gu("orderBy",i);return new ZS(a,r)}(n,r)))}catch(a){throw ei(a,/(orderBy|where)\(\)/,"Query.$1()")}}limit(n){try{return new qr(this.firestore,yu(this._delegate,function(i){return nD("limit",i),new Fd("limit",i,"F")}(n)))}catch(r){throw ei(r,"limit()","Query.limit()")}}limitToLast(n){try{return new qr(this.firestore,yu(this._delegate,function(i){return nD("limitToLast",i),new Fd("limitToLast",i,"L")}(n)))}catch(r){throw ei(r,"limitToLast()","Query.limitToLast()")}}startAt(...n){try{return new qr(this.firestore,yu(this._delegate,function(...i){return new xs("startAt",i,!0)}(...n)))}catch(r){throw ei(r,"startAt()","Query.startAt()")}}startAfter(...n){try{return new qr(this.firestore,yu(this._delegate,function(...i){return new xs("startAfter",i,!1)}(...n)))}catch(r){throw ei(r,"startAfter()","Query.startAfter()")}}endBefore(...n){try{return new qr(this.firestore,yu(this._delegate,function(...i){return new TD("endBefore",i,!0)}(...n)))}catch(r){throw ei(r,"endBefore()","Query.endBefore()")}}endAt(...n){try{return new qr(this.firestore,yu(this._delegate,function(...i){return new TD("endAt",i,!1)}(...n)))}catch(r){throw ei(r,"endAt()","Query.endAt()")}}isEqual(n){return oD(this._delegate,n._delegate)}get(n){let r;return r="cache"===(null==n?void 0:n.source)?function(i){i=kt(i,xr);const n=kt(i.firestore,Rn),r=dr(n),a=new la(n);return function(i,n){const r=new Tr;return i.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(a=(0,pe.Z)(function*(l,h,m){try{const E=yield km(l,h,!0),T=new Yf(h,E.Gn),S=T.Io(E.documents),R=T.applyChanges(S,!1);m.resolve(R.snapshot)}catch(E){const T=ra(E,`Failed to execute query '${h} against cache`);m.reject(T)}}),function(l,h,m){return a.apply(this,arguments)})(yield YI(i),n,r);var a})),r.promise}(r,i._query).then(l=>new ua(n,a,i,l))}(this._delegate):"server"===(null==n?void 0:n.source)?function(i){i=kt(i,xr);const n=kt(i.firestore,Rn),r=dr(n),a=new la(n);return XI(r,i._query,{source:"server"}).then(l=>new ua(n,a,i,l))}(this._delegate):function(i){i=kt(i,xr);const n=kt(i.firestore,Rn),r=dr(n),a=new la(n);return DD(i._query),XI(r,i._query).then(l=>new ua(n,a,i,l))}(this._delegate),r.then(a=>new p0(this.firestore,new ua(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)))}onSnapshot(...n){const r=h0(n),a=f0(n,l=>new p0(this.firestore,new ua(this.firestore._delegate,this._userDataWriter,this._delegate,l._snapshot)));return a0(this._delegate,r,a)}withConverter(n){return new qr(this.firestore,this._delegate.withConverter(n?ca.getInstance(this.firestore,n):null))}}class FD{constructor(n,r){this._firestore=n,this._delegate=r}get type(){return this._delegate.type}get doc(){return new dp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class p0{constructor(n,r){this._firestore=n,this._delegate=r}get query(){return new qr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(n=>new dp(this._firestore,n))}docChanges(n){return this._delegate.docChanges(n).map(r=>new FD(this._firestore,r))}forEach(n,r){this._delegate.forEach(a=>{n.call(r,new dp(this._firestore,a))})}isEqual(n){return ID(this._delegate,n._delegate)}}class Vd extends qr{constructor(n,r){super(n,r),this.firestore=n,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const n=this._delegate.parent;return n?new rs(this.firestore,n):null}doc(n){try{return new rs(this.firestore,void 0===n?oy(this._delegate):oy(this._delegate,n))}catch(r){throw ei(r,"doc()","CollectionReference.doc()")}}add(n){return function(i,n){const r=kt(i.firestore,Rn),a=oy(i),l=my(i.converter,n);return zn(r,[JE(kl(i.firestore),"addDoc",a._key,l,null!==i.converter,{}).toMutation(a._key,Gn.exists(!1))]).then(()=>a)}(this._delegate,n).then(r=>new rs(this.firestore,r))}isEqual(n){return sD(this._delegate,n._delegate)}withConverter(n){return new Vd(this.firestore,this._delegate.withConverter(n?ca.getInstance(this.firestore,n):null))}}function Eu(i){return kt(i,dn)}class g0{constructor(...n){this._delegate=new uo(...n)}static documentId(){return new g0(zt.keyField().canonicalString())}isEqual(n){return(n=(0,Et.m9)(n))instanceof uo&&this._delegate._internalPath.isEqual(n._internalPath)}}class wu{constructor(n){this._delegate=n}static serverTimestamp(){const n=new pu("serverTimestamp");return n._methodName="FieldValue.serverTimestamp",new wu(n)}static delete(){const n=new ip("deleteField");return n._methodName="FieldValue.delete",new wu(n)}static arrayUnion(...n){const r=function(...i){return new tR("arrayUnion",i)}(...n);return r._methodName="FieldValue.arrayUnion",new wu(r)}static arrayRemove(...n){const r=function(...i){return new yD("arrayRemove",i)}(...n);return r._methodName="FieldValue.arrayRemove",new wu(r)}static increment(n){const r=function(i){return new qS("increment",i)}(n);return r._methodName="FieldValue.increment",new wu(r)}isEqual(n){return this._delegate.isEqual(n._delegate)}}const LD={Firestore:d0,GeoPoint:rp,Timestamp:ar,Blob:Fl,Transaction:kD,WriteBatch:_y,DocumentReference:rs,DocumentSnapshot:Ld,Query:qr,QueryDocumentSnapshot:dp,QuerySnapshot:p0,CollectionReference:Vd,FieldPath:g0,FieldValue:wu,setLogLevel:function(i){!function(i){Ko.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function(i){(function(i,n){i.INTERNAL.registerComponent(new Ga.wA("firestore-compat",r=>((n,r)=>new d0(n,r,new cA))(r.getProvider("app-compat").getImmediate(),r.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},LD)))})(i),i.registerVersion("@firebase/firestore-compat","0.1.3")}(_g.Z);var BD=L(9765),dA=L(6682),hp=L(309),vy=L(5345);function ho(i,n){return"function"==typeof n?r=>r.pipe(ho((a,l)=>(0,Pi.D)(i(a,l)).pipe((0,Zr.U)((h,m)=>n(a,h,l,m))))):r=>r.lift(new sR(i))}class sR{constructor(n){this.project=n}call(n,r){return r.subscribe(new oR(n,this.project))}}class oR extends vy.Ds{constructor(n,r){super(n),this.project=r,this.index=0}_next(n){let r;const a=this.index++;try{r=this.project(n,a)}catch(l){return void this.destination.error(l)}this._innerSub(r)}_innerSub(n){const r=this.innerSubscription;r&&r.unsubscribe();const a=new vy.IY(this),l=this.destination;l.add(a),this.innerSubscription=(0,vy.ft)(n,a),this.innerSubscription!==a&&l.add(this.innerSubscription)}_complete(){const{innerSubscription:n}=this;(!n||n.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(n){this.destination.next(n)}}var aR=L(7771),uR=L(5319),lR=L(7971),cR=L(8858);class dR extends BD.xQ{constructor(n=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,a){super(),this.scheduler=a,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=n<1?1:n,this._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(n){if(!this.isStopped){const r=this._events;r.push(n),r.length>this._bufferSize&&r.shift()}super.next(n)}nextTimeWindow(n){this.isStopped||(this._events.push(new hR(this._getNow(),n)),this._trimBufferThenGetEvents()),super.next(n)}_subscribe(n){const r=this._infiniteTimeWindow,a=r?this._events:this._trimBufferThenGetEvents(),l=this.scheduler,h=a.length;let m;if(this.closed)throw new lR.N;if(this.isStopped||this.hasError?m=uR.w.EMPTY:(this.observers.push(n),m=new cR.W(this,n)),l&&n.add(n=new hp.ht(n,l)),r)for(let E=0;E<h&&!n.closed;E++)n.next(a[E]);else for(let E=0;E<h&&!n.closed;E++)n.next(a[E].value);return this.hasError?n.error(this.thrownError):this.isStopped&&n.complete(),m}_getNow(){return(this.scheduler||aR.c).now()}_trimBufferThenGetEvents(){const n=this._getNow(),r=this._bufferSize,a=this._windowTime,l=this._events,h=l.length;let m=0;for(;m<h&&!(n-l[m].time<a);)m++;return h>r&&(m=Math.max(m,h-r)),m>0&&l.splice(0,m),l}}class hR{constructor(n,r){this.time=n,this.value=r}}function hA(i,n,r){let a;return a=i&&"object"==typeof i?i:{bufferSize:i,windowTime:n,refCount:!1,scheduler:r},l=>l.lift(function({bufferSize:i=Number.POSITIVE_INFINITY,windowTime:n=Number.POSITIVE_INFINITY,refCount:r,scheduler:a}){let l,m,h=0,E=!1,T=!1;return function(R){let O;h++,!l||E?(E=!1,l=new dR(i,n,a),O=l.subscribe(this),m=R.subscribe({next(V){l.next(V)},error(V){E=!0,l.error(V)},complete(){T=!0,m=void 0,l.complete()}}),T&&(m=void 0)):O=l.subscribe(this),this.add(()=>{h--,O.unsubscribe(),O=void 0,m&&!T&&r&&0===h&&(m.unsubscribe(),m=void 0,l=void 0)})}}(a))}const fA=(()=>{function i(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return i.prototype=Object.create(Error.prototype),i})(),pR=(()=>{function i(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return i.prototype=Object.create(Error.prototype),i})();var gR=L(9193);function mR(i){return n=>0===i?(0,gR.c)():n.lift(new pA(i))}class pA{constructor(n){if(this.total=n,this.total<0)throw new pR}call(n,r){return r.subscribe(new gA(n,this.total))}}class gA extends vs.L{constructor(n,r){super(n),this.total=r,this.count=0}_next(n){const r=this.total,a=++this.count;a<=r&&(this.destination.next(n),a===r&&(this.destination.complete(),this.unsubscribe()))}}function mA(i=null){return n=>n.lift(new yR(i))}class yR{constructor(n){this.defaultValue=n}call(n,r){return r.subscribe(new _R(n,this.defaultValue))}}class _R extends vs.L{constructor(n,r){super(n),this.defaultValue=r,this.isEmpty=!0}_next(n){this.isEmpty=!1,this.destination.next(n)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function vR(i=vA){return n=>n.lift(new yA(i))}class yA{constructor(n){this.errorFactory=n}call(n,r){return r.subscribe(new _A(n,this.errorFactory))}}class _A extends vs.L{constructor(n,r){super(n),this.errorFactory=r,this.hasValue=!1}_next(n){this.hasValue=!0,this.destination.next(n)}_complete(){if(this.hasValue)return this.destination.complete();{let n;try{n=this.errorFactory()}catch(r){n=r}this.destination.error(n)}}}function vA(){return new fA}var ER=L(4487);function EA(i,n){return n?ho(()=>i,n):ho(()=>i)}var jD=L(3101),m0=L(7841);const HD=new b.OlP("angularfire2.auth.use-emulator"),Ey=new b.OlP("angularfire2.auth.settings"),Vl=new b.OlP("angularfire2.auth.tenant-id"),y0=new b.OlP("angularfire2.auth.langugage-code"),$D=new b.OlP("angularfire2.auth.use-device-language"),qD=new b.OlP("angularfire.auth.persistence"),wy=(i,n,r,a,l,h,m,E)=>(0,Gt.cc)(`${i.name}.auth`,"AngularFireAuth",i.name,()=>{const T=n.runOutsideAngular(()=>i.auth());if(r&&T.useEmulator(...r),a&&(T.tenantId=a),T.languageCode=l,h&&T.useDeviceLanguage(),m)for(const[S,R]of Object.entries(m))T.settings[S]=R;return E&&T.setPersistence(E),T},[r,a,l,h,m,E]);let by=(()=>{class i{constructor(r,a,l,h,m,E,T,S,R,O,V){const q=new BD.xQ,Z=(0,Mi.of)(void 0).pipe((0,hp.QV)(m.outsideAngular),ho(()=>h.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,670)))),(0,Zr.U)(()=>(0,Lt.on)(r,h,a)),(0,Zr.U)(ge=>wy(ge,h,E,S,R,O,T,V)),hA({bufferSize:1,refCount:!1}));if(_a(l))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Mi.of)(null);else{Z.pipe(function(i,n){const r=arguments.length>=2;return a=>a.pipe(i?Kh((l,h)=>i(l,h,a)):ER.y,mR(1),r?mA(n):vR(()=>new fA))}()).subscribe();const Re=Z.pipe(ho(Ye=>Ye.getRedirectResult().then(Je=>Je,()=>null)),Gt.iC,hA({bufferSize:1,refCount:!1})),We=Z.pipe(ho(Ye=>new jo.y(Je=>({unsubscribe:h.runOutsideAngular(()=>Ye.onAuthStateChanged($t=>Je.next($t),$t=>Je.error($t),()=>Je.complete()))})))),nt=Z.pipe(ho(Ye=>new jo.y(Je=>({unsubscribe:h.runOutsideAngular(()=>Ye.onIdTokenChanged($t=>Je.next($t),$t=>Je.error($t),()=>Je.complete()))}))));this.authState=Re.pipe(EA(We),(0,jD.R)(m.outsideAngular),(0,hp.QV)(m.insideAngular)),this.user=Re.pipe(EA(nt),(0,jD.R)(m.outsideAngular),(0,hp.QV)(m.insideAngular)),this.idToken=this.user.pipe(ho(Ye=>Ye?(0,Pi.D)(Ye.getIdToken()):(0,Mi.of)(null))),this.idTokenResult=this.user.pipe(ho(Ye=>Ye?(0,Pi.D)(Ye.getIdTokenResult()):(0,Mi.of)(null))),this.credential=(0,dA.T)(Re,q,this.authState.pipe(Kh(Ye=>!Ye))).pipe((0,Zr.U)(Ye=>(null==Ye?void 0:Ye.user)?Ye:null),(0,jD.R)(m.outsideAngular),(0,hp.QV)(m.insideAngular))}return(0,Lt.pX)(this,Z,h,{spy:{apply:(ge,Re,We)=>{(ge.startsWith("signIn")||ge.startsWith("createUser"))&&We.then(nt=>q.next(nt))}}})}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(Lt.Dh),b.LFG(Lt.xv,8),b.LFG(b.Lbi),b.LFG(b.R0b),b.LFG(Gt.HU),b.LFG(HD,8),b.LFG(Ey,8),b.LFG(Vl,8),b.LFG(y0,8),b.LFG($D,8),b.LFG(qD,8))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),GD=(()=>{class i{constructor(){m0.Z.registerVersion("angularfire",Gt.q4.full,"auth-compat")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=b.oAB({type:i}),i.\u0275inj=b.cJS({providers:[by]}),i})();function bA(i,n){return function(i,n=Jn.z){return new jo.y(r=>{let a;return null!=n?n.schedule(()=>{a=i.onSnapshot({includeMetadataChanges:!0},r)}):a=i.onSnapshot({includeMetadataChanges:!0},r),()=>{null!=a&&a()}})}(i,n)}function Ud(i,n){return bA(i,n).pipe((0,Zr.U)(r=>({payload:r,type:"query"})))}function fp(i,n){return Ud(i,n).pipe(ol(void 0),Vc(),(0,Zr.U)(([r,a])=>{const l=a.payload.docChanges(),h=l.map(m=>({type:m.type,payload:m}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(a.payload.metadata)&&a.payload.docs.forEach((m,E)=>{const T=l.find(R=>R.doc.ref.isEqual(m.ref)),S=null==r?void 0:r.payload.docs.find(R=>R.ref.isEqual(m.ref));T&&JSON.stringify(T.doc.metadata)===JSON.stringify(m.metadata)||!T&&S&&JSON.stringify(S.metadata)===JSON.stringify(m.metadata)||h.push({type:"modified",payload:{oldIndex:E,newIndex:E,type:"modified",doc:m}})}),h}))}function IA(i,n,r){return fp(i,r).pipe(M_((a,l)=>function(i,n,r){return n.forEach(a=>{r.indexOf(a.type)>-1&&(i=function(i,n){switch(n.type){case"added":if(!i[n.newIndex]||!i[n.newIndex].doc.ref.isEqual(n.doc.ref))return zD(i,n.newIndex,0,n);break;case"modified":if(null==i[n.oldIndex]||i[n.oldIndex].doc.ref.isEqual(n.doc.ref)){if(n.oldIndex!==n.newIndex){const r=i.slice();return r.splice(n.oldIndex,1),r.splice(n.newIndex,0,n),r}return zD(i,n.newIndex,1,n)}break;case"removed":if(i[n.oldIndex]&&i[n.oldIndex].doc.ref.isEqual(n.doc.ref))return zD(i,n.oldIndex,1)}return i}(i,a))}),i}(a,l.map(h=>h.payload),n),[]),r=>r.lift(new ON(void 0,void 0)),(0,Zr.U)(a=>a.map(l=>({type:l.type,payload:l}))))}function zD(i,n,r,...a){const l=i.slice();return l.splice(n,r,...a),l}function TA(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class pp{constructor(n,r,a){this.ref=n,this.query=r,this.afs=a}stateChanges(n){let r=fp(this.query,this.afs.schedulers.outsideAngular);return n&&n.length>0&&(r=r.pipe((0,Zr.U)(a=>a.filter(l=>n.indexOf(l.type)>-1)))),r.pipe(ol(void 0),Vc(),Kh(([a,l])=>l.length>0||!a),(0,Zr.U)(([a,l])=>l),Gt.iC)}auditTrail(n){return this.stateChanges(n).pipe(M_((r,a)=>[...r,...a],[]))}snapshotChanges(n){const r=TA(n);return IA(this.query,r,this.afs.schedulers.outsideAngular).pipe(Gt.iC)}valueChanges(n={}){return Ud(this.query,this.afs.schedulers.outsideAngular).pipe((0,Zr.U)(r=>r.payload.docs.map(a=>n.idField?Object.assign(Object.assign({},a.data()),{[n.idField]:a.id}):a.data())),Gt.iC)}get(n){return(0,Pi.D)(this.query.get(n)).pipe(Gt.iC)}add(n){return this.ref.add(n)}doc(n){return new KD(this.ref.doc(n),this.afs)}}class KD{constructor(n,r){this.ref=n,this.afs=r}set(n,r){return this.ref.set(n,r)}update(n){return this.ref.update(n)}delete(){return this.ref.delete()}collection(n,r){const a=this.ref.collection(n),{ref:l,query:h}=AA(a,r);return new pp(l,h,this.afs)}snapshotChanges(){return function(i,n){return bA(i,n).pipe(ol(void 0),Vc(),(0,Zr.U)(([r,a])=>a.exists?(null==r?void 0:r.exists)?{payload:a,type:"modified"}:{payload:a,type:"added"}:{payload:a,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Gt.iC)}valueChanges(n={}){return this.snapshotChanges().pipe((0,Zr.U)(({payload:r})=>n.idField?Object.assign(Object.assign({},r.data()),{[n.idField]:r.id}):r.data()))}get(n){return(0,Pi.D)(this.ref.get(n)).pipe(Gt.iC)}}class DR{constructor(n,r){this.query=n,this.afs=r}stateChanges(n){return n&&0!==n.length?fp(this.query,this.afs.schedulers.outsideAngular).pipe((0,Zr.U)(r=>r.filter(a=>n.indexOf(a.type)>-1)),Kh(r=>r.length>0),Gt.iC):fp(this.query,this.afs.schedulers.outsideAngular).pipe(Gt.iC)}auditTrail(n){return this.stateChanges(n).pipe(M_((r,a)=>[...r,...a],[]))}snapshotChanges(n){const r=TA(n);return IA(this.query,r,this.afs.schedulers.outsideAngular).pipe(Gt.iC)}valueChanges(n={}){return Ud(this.query,this.afs.schedulers.outsideAngular).pipe((0,Zr.U)(a=>a.payload.docs.map(l=>n.idField?Object.assign({[n.idField]:l.id},l.data()):l.data())),Gt.iC)}get(n){return(0,Pi.D)(this.query.get(n)).pipe(Gt.iC)}}const CA=new b.OlP("angularfire2.enableFirestorePersistence"),Iy=new b.OlP("angularfire2.firestore.persistenceSettings"),SA=new b.OlP("angularfire2.firestore.settings"),TR=new b.OlP("angularfire2.firestore.use-emulator");function AA(i,n=(r=>r)){return{query:n(i),ref:i}}let _0=(()=>{class i{constructor(r,a,l,h,m,E,T,S,R,O,V,q,Z,ge,Re,We){this.schedulers=T;const nt=(0,Lt.on)(r,E,a),Ye=R;O&&wy(nt,E,V,Z,ge,Re,q,We),[this.firestore,this.persistenceEnabled$]=(0,Gt.cc)(`${nt.name}.firestore`,"AngularFirestore",nt.name,()=>{const Je=E.runOutsideAngular(()=>nt.firestore());if(h&&Je.settings(h),Ye&&Je.useEmulator(...Ye),l&&!_a(m)){const $t=()=>{try{return(0,Pi.D)(Je.enablePersistence(S||void 0).then(()=>!0,()=>!1))}catch(Un){return"undefined"!=typeof console&&console.warn(Un),(0,Mi.of)(!1)}};return[Je,E.runOutsideAngular($t)]}return[Je,(0,Mi.of)(!1)]},[h,Ye,l])}collection(r,a){let l;l="string"==typeof r?this.firestore.collection(r):r;const{ref:h,query:m}=AA(l,a),E=this.schedulers.ngZone.run(()=>h);return new pp(E,m,this)}collectionGroup(r,a){const l=a||(m=>m),h=this.firestore.collectionGroup(r);return new DR(l(h),this)}doc(r){let a;a="string"==typeof r?this.firestore.doc(r):r;const l=this.schedulers.ngZone.run(()=>a);return new KD(l,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(Lt.Dh),b.LFG(Lt.xv,8),b.LFG(CA,8),b.LFG(SA,8),b.LFG(b.Lbi),b.LFG(b.R0b),b.LFG(Gt.HU),b.LFG(Iy,8),b.LFG(TR,8),b.LFG(by,8),b.LFG(HD,8),b.LFG(Ey,8),b.LFG(Vl,8),b.LFG(y0,8),b.LFG($D,8),b.LFG(qD,8))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),CR=(()=>{class i{constructor(){m0.Z.registerVersion("angularfire",Gt.q4.full,"fst-compat")}static enablePersistence(r){return{ngModule:i,providers:[{provide:CA,useValue:!0},{provide:Iy,useValue:r}]}}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=b.oAB({type:i}),i.\u0275inj=b.cJS({providers:[_0]}),i})();class NA{constructor(n,r){this.dueTime=n,this.scheduler=r}call(n,r){return r.subscribe(new SR(n,this.dueTime,this.scheduler))}}class SR extends vs.L{constructor(n,r,a){super(n),this.dueTime=r,this.scheduler=a,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(n){this.clearDebounce(),this.lastValue=n,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(AR,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:n}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(n)}}clearDebounce(){const n=this.debouncedSubscription;null!==n&&(this.remove(n),n.unsubscribe(),this.debouncedSubscription=null)}}function AR(i){i.debouncedNext()}var bu=(()=>(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"}(bu||(bu={})),bu))();const gp="firebasestorage.googleapis.com",QD="storageBucket";class yn extends Et.ZR{constructor(n,r){super(v0(n),`Firebase Storage: ${r} (${v0(n)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yn.prototype)}_codeEquals(n){return v0(n)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(n){this.customData.serverResponse=n,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function v0(i){return"storage/"+i}function ti(){return new yn("unknown","An unknown error occurred, please check the error payload for server response.")}function b0(){return new yn("canceled","User canceled the upload/download.")}function eT(){return new yn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function I0(){return new yn("no-download-url","The given file does not have any download URLs.")}function Ul(i){return new yn("invalid-argument",i)}function D0(){return new yn("app-deleted","The Firebase app was deleted.")}function Dy(i){return new yn("invalid-root-operation","The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function mp(i,n){return new yn("invalid-format","String does not match format '"+i+"': "+n)}function Ii(i){throw new yn("internal-error","Internal error: "+i)}class LA{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=bu.NO_ERROR,this.sendPromise_=new Promise(n=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=bu.ABORT,n()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=bu.NETWORK_ERROR,n()}),this.xhr_.addEventListener("load",()=>{n()})})}send(n,r,a,l){if(this.sent_)throw Ii("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,n,!0),void 0!==l)for(const h in l)l.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,l[h].toString());return void 0!==a?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ii("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ii("cannot .getStatus() before sending");try{return this.xhr_.status}catch(n){return-1}}getResponseText(){if(!this.sent_)throw Ii("cannot .getResponseText() before sending");return this.xhr_.responseText}abort(){this.xhr_.abort()}getResponseHeader(n){return this.xhr_.getResponseHeader(n)}addUploadProgressListener(n){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",n)}removeUploadProgressListener(n){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",n)}}class VA{createConnection(){return new LA}}class ni{constructor(n,r){this.bucket=n,this.path_=r}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const n=encodeURIComponent;return"/b/"+n(this.bucket)+"/o/"+n(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(n,r){let a;try{a=ni.makeFromUrl(n,r)}catch(l){return new ni(n,"")}if(""===a.path)return a;throw function(i){return new yn("invalid-default-bucket","Invalid default bucket '"+i+"'.")}(n)}static makeFromUrl(n,r){let a=null;const l="([A-Za-z0-9.\\-_]+)",E=new RegExp("^gs://"+l+"(/(.*))?$","i");function S(Je){Je.path_=decodeURIComponent(Je.path)}const O=r.replace(/[.]/g,"\\."),Ye=[{regex:E,indices:{bucket:1,path:3},postModify:function(Je){"/"===Je.path.charAt(Je.path.length-1)&&(Je.path_=Je.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${O}/v[A-Za-z0-9_]+/b/${l}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:S},{regex:new RegExp(`^https?://${r===gp?"(?:storage.googleapis.com|storage.cloud.google.com)":r}/${l}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:S}];for(let Je=0;Je<Ye.length;Je++){const $t=Ye[Je],Un=$t.regex.exec(n);if(Un){let o=Un[$t.indices.path];o||(o=""),a=new ni(Un[$t.indices.bucket],o),$t.postModify(a);break}}if(null==a)throw function(i){return new yn("invalid-url","Invalid URL '"+i+"'.")}(n);return a}}class UA{constructor(n){this.promise_=Promise.reject(n)}getPromise(){return this.promise_}cancel(n=!1){}}function Ty(i){return"string"==typeof i||i instanceof String}function nT(i){return Cy()&&i instanceof Blob}function Cy(){return"undefined"!=typeof Blob}function T0(i,n,r,a){if(a<n)throw Ul(`Invalid value for '${i}'. Expected ${n} or greater.`);if(a>r)throw Ul(`Invalid value for '${i}'. Expected ${r} or less.`)}function Bl(i,n,r){let a=n;return null==r&&(a=`https://${n}`),`${r}://${a}/v0${i}`}function C0(i){const n=encodeURIComponent;let r="?";for(const a in i)i.hasOwnProperty(a)&&(r=r+(n(a)+"=")+n(i[a])+"&");return r=r.slice(0,-1),r}class rT{constructor(n,r,a,l,h,m,E,T,S,R,O){this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=n,this.method_=r,this.headers_=a,this.body_=l,this.successCodes_=h.slice(),this.additionalRetryCodes_=m.slice(),this.callback_=E,this.errorCallback_=T,this.progressCallback_=R,this.timeout_=S,this.pool_=O,this.promise_=new Promise((V,q)=>{this.resolve_=V,this.reject_=q,this.start_()})}start_(){const n=this;function a(l,h){const m=n.resolve_,E=n.reject_,T=h.connection;if(h.wasSuccessCode)try{const S=n.callback_(T,T.getResponseText());!function(i){return void 0!==i}(S)?m():m(S)}catch(S){E(S)}else if(null!==T){const S=ti();S.serverResponse=T.getResponseText(),E(n.errorCallback_?n.errorCallback_(T,S):S)}else E(h.canceled?n.appDelete_?D0():b0():new yn("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?a(0,new Sy(!1,null,!0)):this.backoffId_=function(i,n,r){let a=1,l=null,h=!1,m=0;function E(){return 2===m}let T=!1;function S(...Z){T||(T=!0,n.apply(null,Z))}function R(Z){l=setTimeout(()=>{l=null,i(O,E())},Z)}function O(Z,...ge){if(T)return;if(Z)return void S.call(null,Z,...ge);if(E()||h)return void S.call(null,Z,...ge);let We;a<64&&(a*=2),1===m?(m=2,We=0):We=1e3*(a+Math.random()),R(We)}let V=!1;function q(Z){V||(V=!0,!T&&(null!==l?(Z||(m=2),clearTimeout(l),R(0)):Z||(m=1)))}return R(0),setTimeout(()=>{h=!0,q(!0)},r),q}(function(l,h){if(h)return void l(!1,new Sy(!1,null,!0));const m=n.pool_.createConnection();function E(T){null!==n.progressCallback_&&n.progressCallback_(T.loaded,T.lengthComputable?T.total:-1)}n.pendingConnection_=m,null!==n.progressCallback_&&m.addUploadProgressListener(E),m.send(n.url_,n.method_,n.body_,n.headers_).then(()=>{null!==n.progressCallback_&&m.removeUploadProgressListener(E),n.pendingConnection_=null;const T=m.getErrorCode()===bu.NO_ERROR,S=m.getStatus();if(!T||n.isRetryStatusCode_(S)){const O=m.getErrorCode()===bu.ABORT;return void l(!1,new Sy(!1,null,O))}const R=-1!==n.successCodes_.indexOf(S);l(!0,new Sy(R,m))})},a,this.timeout_)}getPromise(){return this.promise_}cancel(n){this.canceled_=!0,this.appDelete_=n||!1,null!==this.backoffId_&&function(i){i(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(n){const r=n>=500&&n<600,l=-1!==[408,429].indexOf(n),h=-1!==this.additionalRetryCodes_.indexOf(n);return r||l||h}}class Sy{constructor(n,r,a){this.wasSuccessCode=n,this.connection=r,this.canceled=!!a}}function xR(...i){const n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){const r=new n;for(let a=0;a<i.length;a++)r.append(i[a]);return r.getBlob()}if(Cy())return new Blob(i);throw new yn("unsupported-environment","This browser doesn't seem to support creating Blobs")}const is={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ay{constructor(n,r){this.data=n,this.contentType=r||null}}function Ny(i,n){switch(i){case is.RAW:return new Ay(oT(n));case is.BASE64:case is.BASE64URL:return new Ay(aT(i,n));case is.DATA_URL:return new Ay(function(i){const n=new WA(i);return n.base64?aT(is.BASE64,n.rest):function(i){let n;try{n=decodeURIComponent(i)}catch(r){throw mp(is.DATA_URL,"Malformed data URL.")}return oT(n)}(n.rest)}(n),function(i){return new WA(i).contentType}(n))}throw ti()}function oT(i){const n=[];for(let r=0;r<i.length;r++){let a=i.charCodeAt(r);a<=127?n.push(a):a<=2047?n.push(192|a>>6,128|63&a):55296==(64512&a)?r<i.length-1&&56320==(64512&i.charCodeAt(r+1))?(a=65536|(1023&a)<<10|1023&i.charCodeAt(++r),n.push(240|a>>18,128|a>>12&63,128|a>>6&63,128|63&a)):n.push(239,191,189):56320==(64512&a)?n.push(239,191,189):n.push(224|a>>12,128|a>>6&63,128|63&a)}return new Uint8Array(n)}function aT(i,n){switch(i){case is.BASE64:{const l=-1!==n.indexOf("-"),h=-1!==n.indexOf("_");if(l||h)throw mp(i,"Invalid character '"+(l?"-":"_")+"' found: is it base64url encoded?");break}case is.BASE64URL:{const l=-1!==n.indexOf("+"),h=-1!==n.indexOf("/");if(l||h)throw mp(i,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");n=n.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=function(i){return atob(i)}(n)}catch(l){throw mp(i,"Invalid character found")}const a=new Uint8Array(r.length);for(let l=0;l<r.length;l++)a[l]=r.charCodeAt(l);return a}class WA{constructor(n){this.base64=!1,this.contentType=null;const r=n.match(/^data:([^,]+)?,/);if(null===r)throw mp(is.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const a=r[1]||null;null!=a&&(this.base64=function(i,n){return i.length>=n.length&&i.substring(i.length-n.length)===n}(a,";base64"),this.contentType=this.base64?a.substring(0,a.length-";base64".length):a),this.rest=n.substring(n.indexOf(",")+1)}}class fo{constructor(n,r){let a=0,l="";nT(n)?(this.data_=n,a=n.size,l=n.type):n instanceof ArrayBuffer?(r?this.data_=new Uint8Array(n):(this.data_=new Uint8Array(n.byteLength),this.data_.set(new Uint8Array(n))),a=this.data_.length):n instanceof Uint8Array&&(r?this.data_=n:(this.data_=new Uint8Array(n.length),this.data_.set(n)),a=n.length),this.size_=a,this.type_=l}size(){return this.size_}type(){return this.type_}slice(n,r){if(nT(this.data_)){const l=function(i,n,r){return i.webkitSlice?i.webkitSlice(n,r):i.mozSlice?i.mozSlice(n,r):i.slice?i.slice(n,r):null}(this.data_,n,r);return null===l?null:new fo(l)}{const a=new Uint8Array(this.data_.buffer,n,r-n);return new fo(a,!0)}}static getBlob(...n){if(Cy()){const r=n.map(a=>a instanceof fo?a.data_:a);return new fo(xR.apply(null,r))}{const r=n.map(m=>Ty(m)?Ny(is.RAW,m).data:m.data_);let a=0;r.forEach(m=>{a+=m.byteLength});const l=new Uint8Array(a);let h=0;return r.forEach(m=>{for(let E=0;E<m.length;E++)l[h++]=m[E]}),new fo(l,!0)}}uploadData(){return this.data_}}function _p(i){let n;try{n=JSON.parse(i)}catch(r){return null}return function(i){return"object"==typeof i&&!Array.isArray(i)}(n)?n:null}function A0(i){const n=i.lastIndexOf("/",i.length-2);return-1===n?i:i.slice(n+1)}function lT(i,n){return n}class ri{constructor(n,r,a,l){this.server=n,this.local=r||n,this.writable=!!a,this.xform=l||lT}}let jl=null;function vp(){if(jl)return jl;const i=[];i.push(new ri("bucket")),i.push(new ri("generation")),i.push(new ri("metageneration")),i.push(new ri("name","fullPath",!0));const r=new ri("name");r.xform=function(h,m){return function(i){return!Ty(i)||i.length<2?i:A0(i)}(m)},i.push(r);const l=new ri("size");return l.xform=function(h,m){return void 0!==m?Number(m):m},i.push(l),i.push(new ri("timeCreated")),i.push(new ri("updated")),i.push(new ri("md5Hash",null,!0)),i.push(new ri("cacheControl",null,!0)),i.push(new ri("contentDisposition",null,!0)),i.push(new ri("contentEncoding",null,!0)),i.push(new ri("contentLanguage",null,!0)),i.push(new ri("contentType",null,!0)),i.push(new ri("metadata","customMetadata",!0)),jl=i,jl}function N0(i,n,r){const a=_p(n);return null===a?null:function(i,n,r){const a={type:"file"},l=r.length;for(let h=0;h<l;h++){const m=r[h];a[m.local]=m.xform(a,n[m.server])}return function(i,n){Object.defineProperty(i,"ref",{get:function(){const h=new ni(i.bucket,i.fullPath);return n._makeStorageReference(h)}})}(a,i),a}(i,a,r)}function Ep(i,n){const r={},a=n.length;for(let l=0;l<a;l++){const h=n[l];h.writable&&(r[h.server]=i[h.local])}return JSON.stringify(r)}const dT="prefixes";class po{constructor(n,r,a,l){this.url=n,this.method=r,this.handler=a,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Kt(i){if(!i)throw ti()}function P0(i,n){return function(a,l){const h=N0(i,l,n);return Kt(null!==h),h}}function bp(i){return function(r,a){let l;return l=401===r.getStatus()?r.getResponseText().includes("Firebase App Check token is invalid")?new yn("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new yn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===r.getStatus()?function(i){return new yn("quota-exceeded","Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(i.bucket):403===r.getStatus()?function(i){return new yn("unauthorized","User does not have permission to access '"+i+"'.")}(i.path):a,l.serverResponse=a.serverResponse,l}}function $l(i){const n=bp(i);return function(a,l){let h=n(a,l);return 404===a.getStatus()&&(h=function(i){return new yn("object-not-found","Object '"+i+"' does not exist.")}(i.path)),h.serverResponse=l.serverResponse,h}}function hT(i,n,r){const l=Bl(n.fullServerUrl(),i.host,i._protocol),m=i.maxOperationRetryTime,E=new po(l,"GET",P0(i,r),m);return E.errorHandler=$l(n),E}function LR(i,n,r,a,l){const h={};h.prefix=n.isRoot?"":n.path+"/",r&&r.length>0&&(h.delimiter=r),a&&(h.pageToken=a),l&&(h.maxResults=l);const E=Bl(n.bucketOnlyServerUrl(),i.host,i._protocol),S=i.maxOperationRetryTime,R=new po(E,"GET",function(i,n){return function(a,l){const h=function(i,n,r){const a=_p(r);return null===a?null:function(i,n,r){const a={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[dT])for(const l of r[dT]){const h=l.replace(/\/$/,""),m=i._makeStorageReference(new ni(n,h));a.prefixes.push(m)}if(r.items)for(const l of r.items){const h=i._makeStorageReference(new ni(n,l.name));a.items.push(h)}return a}(i,n,a)}(i,n,l);return Kt(null!==h),h}}(i,n.bucket),S);return R.urlParams=h,R.errorHandler=bp(n),R}function VR(i,n,r){const l=Bl(n.fullServerUrl(),i.host,i._protocol),m=i.maxOperationRetryTime,E=new po(l,"GET",function(i,n){return function(a,l){const h=N0(i,l,n);return Kt(null!==h),function(i,n,r,a){const l=_p(n);if(null===l||!Ty(l.downloadTokens))return null;const h=l.downloadTokens;if(0===h.length)return null;const m=encodeURIComponent;return h.split(",").map(S=>{const O=i.fullPath;return Bl("/b/"+m(i.bucket)+"/o/"+m(O),r,a)+C0({alt:"media",token:S})})[0]}(h,l,i.host,i._protocol)}}(i,r),m);return E.errorHandler=$l(n),E}function UR(i,n,r,a){const h=Bl(n.fullServerUrl(),i.host,i._protocol),E=Ep(r,a),S=i.maxOperationRetryTime,R=new po(h,"PATCH",P0(i,a),S);return R.headers={"Content-Type":"application/json; charset=utf-8"},R.body=E,R.errorHandler=$l(n),R}function YA(i,n){const a=Bl(n.fullServerUrl(),i.host,i._protocol),E=new po(a,"DELETE",function(T,S){},i.maxOperationRetryTime);return E.successCodes=[200,204],E.errorHandler=$l(n),E}function fT(i,n,r){const a=Object.assign({},r);return a.fullPath=i.path,a.size=n.size(),a.contentType||(a.contentType=function(i,n){return n&&n.type()||"application/octet-stream"}(0,n)),a}class Ry{constructor(n,r,a,l){this.current=n,this.total=r,this.finalized=!!a,this.metadata=l||null}}function gT(i,n){let r=null;try{r=i.getResponseHeader("X-Goog-Upload-Status")}catch(l){Kt(!1)}return Kt(!!r&&-1!==(n||["active"]).indexOf(r)),r}const jR={STATE_CHANGED:"state_changed"},ii={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function M0(i){switch(i){case"running":case"pausing":case"canceling":return ii.RUNNING;case"paused":return ii.PAUSED;case"success":return ii.SUCCESS;case"canceled":return ii.CANCELED;case"error":default:return ii.ERROR}}class tN{constructor(n,r,a){if(function(i){return"function"==typeof i}(n)||null!=r||null!=a)this.next=n,this.error=null!=r?r:void 0,this.complete=null!=a?a:void 0;else{const h=n;this.next=h.next,this.error=h.error,this.complete=h.complete}}}function Bd(i){return(...n)=>{Promise.resolve().then(()=>i(...n))}}class yT{constructor(n,r,a=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=n,this._blob=r,this._metadata=a,this._mappings=vp(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=l=>{this._request=void 0,this._chunkMultiplier=1,l._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=l,this._transition("error"))},this._metadataErrorHandler=l=>{this._request=void 0,l._codeEquals("canceled")?this.completeTransitions_():(this._error=l,this._transition("error"))},this._promise=new Promise((l,h)=>{this._resolve=l,this._reject=h,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const n=this._transferred;return r=>this._updateProgress(n+r)}_shouldDoResumable(n){return n.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(n){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,a])=>{switch(this._state){case"running":n(r,a);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((n,r)=>{const a=function(i,n,r,a,l){const h=n.bucketOnlyServerUrl(),m=fT(n,a,l),E={name:m.fullPath},T=Bl(h,i.host,i._protocol),R={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${a.size()}`,"X-Goog-Upload-Header-Content-Type":m.contentType,"Content-Type":"application/json; charset=utf-8"},O=Ep(m,r),Z=new po(T,"POST",function(ge){let Re;gT(ge);try{Re=ge.getResponseHeader("X-Goog-Upload-URL")}catch(We){Kt(!1)}return Kt(Ty(Re)),Re},i.maxUploadRetryTime);return Z.urlParams=E,Z.headers=R,Z.body=O,Z.errorHandler=bp(n),Z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),l=this._ref.storage._makeRequest(a,n,r);this._request=l,l.getPromise().then(h=>{this._request=void 0,this._uploadUrl=h,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const n=this._uploadUrl;this._resolveToken((r,a)=>{const l=function(i,n,r,a){const T=new po(r,"POST",function(S){const R=gT(S,["active","final"]);let O=null;try{O=S.getResponseHeader("X-Goog-Upload-Size-Received")}catch(q){Kt(!1)}O||Kt(!1);const V=Number(O);return Kt(!isNaN(V)),new Ry(V,a.size(),"final"===R)},i.maxUploadRetryTime);return T.headers={"X-Goog-Upload-Command":"query"},T.errorHandler=bp(n),T}(this._ref.storage,this._ref._location,n,this._blob),h=this._ref.storage._makeRequest(l,r,a);this._request=h,h.getPromise().then(m=>{m=m,this._request=void 0,this._updateProgress(m.current),this._needToFetchStatus=!1,m.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const n=262144*this._chunkMultiplier,r=new Ry(this._transferred,this._blob.size()),a=this._uploadUrl;this._resolveToken((l,h)=>{let m;try{m=function(i,n,r,a,l,h,m,E){const T=new Ry(0,0);if(m?(T.current=m.current,T.total=m.total):(T.current=0,T.total=a.size()),a.size()!==T.total)throw new yn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const S=T.total-T.current;let R=S;l>0&&(R=Math.min(R,l));const O=T.current,Z={"X-Goog-Upload-Command":R===S?"upload, finalize":"upload","X-Goog-Upload-Offset":`${T.current}`},ge=a.slice(O,O+R);if(null===ge)throw eT();const Ye=new po(r,"POST",function(Je,$t){const Un=gT(Je,["active","final"]),fr=T.current+R,o=a.size();let s;return s="final"===Un?P0(n,h)(Je,$t):null,new Ry(fr,o,"final"===Un,s)},n.maxUploadRetryTime);return Ye.headers=Z,Ye.body=ge.uploadData(),Ye.progressCallback=E||null,Ye.errorHandler=bp(i),Ye}(this._ref._location,this._ref.storage,a,this._blob,n,this._mappings,r,this._makeProgressCallback())}catch(T){return this._error=T,void this._transition("error")}const E=this._ref.storage._makeRequest(m,l,h);this._request=E,E.getPromise().then(T=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(T.current),T.finalized?(this._metadata=T.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((n,r)=>{const a=hT(this._ref.storage,this._ref._location,this._mappings),l=this._ref.storage._makeRequest(a,n,r);this._request=l,l.getPromise().then(h=>{this._request=void 0,this._metadata=h,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((n,r)=>{const a=function(i,n,r,a,l){const h=n.bucketOnlyServerUrl(),m={"X-Goog-Upload-Protocol":"multipart"},T=function(){let Ye="";for(let Je=0;Je<2;Je++)Ye+=Math.random().toString().slice(2);return Ye}();m["Content-Type"]="multipart/related; boundary="+T;const S=fT(n,a,l),R=Ep(S,r),q=fo.getBlob("--"+T+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+R+"\r\n--"+T+"\r\nContent-Type: "+S.contentType+"\r\n\r\n",a,"\r\n--"+T+"--");if(null===q)throw eT();const Z={name:S.fullPath},ge=Bl(h,i.host,i._protocol),We=i.maxUploadRetryTime,nt=new po(ge,"POST",P0(i,r),We);return nt.urlParams=Z,nt.headers=m,nt.body=q.uploadData(),nt.errorHandler=bp(n),nt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),l=this._ref.storage._makeRequest(a,n,r);this._request=l,l.getPromise().then(h=>{this._request=void 0,this._metadata=h,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(n){const r=this._transferred;this._transferred=n,this._transferred!==r&&this._notifyObservers()}_transition(n){if(this._state!==n)switch(n){case"canceling":case"pausing":this._state=n,void 0!==this._request&&this._request.cancel();break;case"running":const r="paused"===this._state;this._state=n,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=n,this._notifyObservers();break;case"canceled":this._error=b0(),this._state=n,this._notifyObservers();break;case"error":case"success":this._state=n,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const n=M0(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:n,metadata:this._metadata,task:this,ref:this._ref}}on(n,r,a,l){const h=new tN(r||void 0,a||void 0,l||void 0);return this._addObserver(h),()=>{this._removeObserver(h)}}then(n,r){return this._promise.then(n,r)}catch(n){return this.then(null,n)}_addObserver(n){this._observers.push(n),this._notifyObserver(n)}_removeObserver(n){const r=this._observers.indexOf(n);-1!==r&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(void 0!==this._resolve){let n=!0;switch(M0(this._state)){case ii.SUCCESS:Bd(this._resolve.bind(null,this.snapshot))();break;case ii.CANCELED:case ii.ERROR:Bd(this._reject.bind(null,this._error))();break;default:n=!1}n&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(n){switch(M0(this._state)){case ii.RUNNING:case ii.PAUSED:n.next&&Bd(n.next.bind(n,this.snapshot))();break;case ii.SUCCESS:n.complete&&Bd(n.complete.bind(n))();break;case ii.CANCELED:case ii.ERROR:n.error&&Bd(n.error.bind(n,this._error))();break;default:n.error&&Bd(n.error.bind(n,this._error))()}}resume(){const n="paused"===this._state||"pausing"===this._state;return n&&this._transition("running"),n}pause(){const n="running"===this._state;return n&&this._transition("pausing"),n}cancel(){const n="running"===this._state||"pausing"===this._state;return n&&this._transition("canceling"),n}}class Mr{constructor(n,r){this._service=n,this._location=r instanceof ni?r:ni.makeFromUrl(r,n.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(n,r){return new Mr(n,r)}get root(){const n=new ni(this._location.bucket,"");return this._newRef(this._service,n)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return A0(this._location.path)}get storage(){return this._service}get parent(){const n=function(i){if(0===i.length)return null;const n=i.lastIndexOf("/");return-1===n?"":i.slice(0,n)}(this._location.path);if(null===n)return null;const r=new ni(this._location.bucket,n);return new Mr(this._service,r)}_throwIfRoot(n){if(""===this._location.path)throw Dy(n)}}function sN(i,n,r){return O0.apply(this,arguments)}function O0(){return(O0=(0,pe.Z)(function*(i,n,r){const l=yield vT(i,{pageToken:r});n.prefixes.push(...l.prefixes),n.items.push(...l.items),null!=l.nextPageToken&&(yield sN(i,n,l.nextPageToken))})).apply(this,arguments)}function vT(i,n){return k0.apply(this,arguments)}function k0(){return(k0=(0,pe.Z)(function*(i,n){null!=n&&"number"==typeof n.maxResults&&T0("options.maxResults",1,1e3,n.maxResults);const r=n||{},a=LR(i.storage,i._location,"/",r.pageToken,r.maxResults);return(yield i.storage.makeRequestWithTokens(a)).getPromise()})).apply(this,arguments)}function xy(){return(xy=(0,pe.Z)(function*(i){i._throwIfRoot("getMetadata");const n=hT(i.storage,i._location,vp());return(yield i.storage.makeRequestWithTokens(n)).getPromise()})).apply(this,arguments)}function F0(){return(F0=(0,pe.Z)(function*(i,n){i._throwIfRoot("updateMetadata");const r=UR(i.storage,i._location,n,vp());return(yield i.storage.makeRequestWithTokens(r)).getPromise()})).apply(this,arguments)}function ET(){return(ET=(0,pe.Z)(function*(i){i._throwIfRoot("getDownloadURL");const n=VR(i.storage,i._location,vp());return(yield i.storage.makeRequestWithTokens(n)).getPromise().then(r=>{if(null===r)throw I0();return r})})).apply(this,arguments)}function Dp(){return(Dp=(0,pe.Z)(function*(i){i._throwIfRoot("deleteObject");const n=YA(i.storage,i._location);return(yield i.storage.makeRequestWithTokens(n)).getPromise()})).apply(this,arguments)}function wT(i,n){const r=function(i,n){const r=n.split("/").filter(a=>a.length>0).join("/");return 0===i.length?r:i+"/"+r}(i._location.path,n),a=new ni(i._location.bucket,r);return new Mr(i.storage,a)}function uN(i,n){if(i instanceof Vi){const r=i;if(null==r._bucket)throw new yn("no-default-bucket","No default bucket found. Did you set the '"+QD+"' property when initializing the app?");const a=new Mr(r,r._bucket);return null!=n?uN(a,n):a}return void 0!==n?wT(i,n):i}function lN(i,n){if(n&&function(i){return/^[A-Za-z]+:\/\//.test(i)}(n)){if(i instanceof Vi)return function(i,n){return new Mr(i,n)}(i,n);throw Ul("To use ref(service, url), the first argument must be a Storage instance.")}return uN(i,n)}function bT(i,n){const r=null==n?void 0:n[QD];return null==r?null:ni.makeFromBucketSpec(r,i)}class Vi{constructor(n,r,a,l,h,m){this.app=n,this._authProvider=r,this._appCheckProvider=a,this._pool=l,this._url=h,this._firebaseVersion=m,this._bucket=null,this._host=gp,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=h?ni.makeFromBucketSpec(h,this._host):bT(this._host,this.app.options)}get host(){return this._host}set host(n){this._host=n,this._bucket=null!=this._url?ni.makeFromBucketSpec(this._url,n):bT(n,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(n){T0("time",0,Number.POSITIVE_INFINITY,n),this._maxUploadRetryTime=n}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(n){T0("time",0,Number.POSITIVE_INFINITY,n),this._maxOperationRetryTime=n}_getAuthToken(){var n=this;return(0,pe.Z)(function*(){if(n._overrideAuthToken)return n._overrideAuthToken;const r=n._authProvider.getImmediate({optional:!0});if(r){const a=yield r.getToken();if(null!==a)return a.accessToken}return null})()}_getAppCheckToken(){var n=this;return(0,pe.Z)(function*(){const r=n._appCheckProvider.getImmediate({optional:!0});return r?(yield r.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(n=>n.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(n){return new Mr(this,n)}_makeRequest(n,r,a){if(this._deleted)return new UA(D0());{const l=function(i,n,r,a,l,h){const m=C0(i.urlParams),E=i.url+m,T=Object.assign({},i.headers);return function(i,n){n&&(i["X-Firebase-GMPID"]=n)}(T,n),function(i,n){null!==n&&n.length>0&&(i.Authorization="Firebase "+n)}(T,r),function(i,n){i["X-Firebase-Storage-Version"]="webjs/"+(null!=n?n:"AppManager")}(T,h),function(i,n){null!==n&&(i["X-Firebase-AppCheck"]=n)}(T,a),new rT(E,i.method,T,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,l)}(n,this._appId,r,a,this._pool,this._firebaseVersion);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(n){var r=this;return(0,pe.Z)(function*(){const[a,l]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(n,a,l)})()}}function B0(i,n){return lN(i=(0,Et.m9)(i),n)}(0,al._registerComponent)(new Ga.wA("storage",function(i,{instanceIdentifier:n}){const r=i.getProvider("app").getImmediate(),a=i.getProvider("auth-internal"),l=i.getProvider("app-check-internal");return new Vi(r,a,l,new VA,n,al.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,al.registerVersion)("@firebase/storage","0.8.3");class Oy{constructor(n,r,a){this._delegate=n,this.task=r,this.ref=a}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class ky{constructor(n,r){this._delegate=n,this._ref=r,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Oy(this._delegate.snapshot,this,this._ref)}then(n,r){return this._delegate.then(a=>{if(n)return n(new Oy(a,this,this._ref))},r)}on(n,r,a,l){let h;return r&&(h="function"==typeof r?m=>r(new Oy(m,this,this._ref)):{next:r.next?m=>r.next(new Oy(m,this,this._ref)):void 0,complete:r.complete||void 0,error:r.error||void 0}),this._delegate.on(n,h,a||void 0,l||void 0)}}class AT{constructor(n,r){this._delegate=n,this._service=r}get prefixes(){return this._delegate.prefixes.map(n=>new bn(n,this._service))}get items(){return this._delegate.items.map(n=>new bn(n,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class bn{constructor(n,r){this._delegate=n,this.storage=r}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(n){const r=function(i,n){return wT(i,n)}(this._delegate,n);return new bn(r,this.storage)}get root(){return new bn(this._delegate.root,this.storage)}get parent(){const n=this._delegate.parent;return null==n?null:new bn(n,this.storage)}put(n,r){return this._throwIfRoot("put"),new ky(function(i,n,r){return function(i,n,r){return i._throwIfRoot("uploadBytesResumable"),new yT(i,new fo(n),r)}(i=(0,Et.m9)(i),n,r)}(this._delegate,n,r),this)}putString(n,r=is.RAW,a){this._throwIfRoot("putString");const l=Ny(r,n),h=Object.assign({},a);return null==h.contentType&&null!=l.contentType&&(h.contentType=l.contentType),new ky(new yT(this._delegate,new fo(l.data,!0),h),this)}listAll(){return function(i){return function(i){const n={prefixes:[],items:[]};return sN(i,n).then(()=>n)}(i=(0,Et.m9)(i))}(this._delegate).then(n=>new AT(n,this.storage))}list(n){return function(i,n){return vT(i=(0,Et.m9)(i),n)}(this._delegate,n||void 0).then(r=>new AT(r,this.storage))}getMetadata(){return function(i){return function(i){return xy.apply(this,arguments)}(i=(0,Et.m9)(i))}(this._delegate)}updateMetadata(n){return function(i,n){return function(i,n){return F0.apply(this,arguments)}(i=(0,Et.m9)(i),n)}(this._delegate,n)}getDownloadURL(){return function(i){return function(i){return ET.apply(this,arguments)}(i=(0,Et.m9)(i))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(i){return function(i){return Dp.apply(this,arguments)}(i=(0,Et.m9)(i))}(this._delegate)}_throwIfRoot(n){if(""===this._delegate._location.path)throw Dy(n)}}class jd{constructor(n,r){this.app=n,this._delegate=r}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(n){if(Tp(n))throw Ul("ref() expected a child path but got a URL, use refFromURL instead.");return new bn(B0(this._delegate,n),this)}refFromURL(n){if(!Tp(n))throw Ul("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ni.makeFromUrl(n,this._delegate.host)}catch(r){throw Ul("refFromUrl() expected a valid full URL but got an invalid one.")}return new bn(B0(this._delegate,n),this)}setMaxUploadRetryTime(n){this._delegate.maxUploadRetryTime=n}setMaxOperationRetryTime(n){this._delegate.maxOperationRetryTime=n}useEmulator(n,r,a={}){!function(i,n,r,a={}){!function(i,n,r,a={}){i.host=`${n}:${r}`,i._protocol="http";const{mockUserToken:l}=a;l&&(i._overrideAuthToken="string"==typeof l?l:(0,Et.Sg)(l,i.app.options.projectId))}(i,n,r,a)}(this._delegate,n,r,a)}}function Tp(i){return/^[A-Za-z]+:\/\//.test(i)}function RT(i,{instanceIdentifier:n}){const r=i.getProvider("app-compat").getImmediate(),a=i.getProvider("storage").getImmediate({identifier:n});return new jd(r,a)}function xT(i){const n=function(i){return new jo.y(n=>{const r=m=>n.next(m);r(i.snapshot);const h=i.on("state_changed",r);return i.then(m=>{r(m),n.complete()},m=>{r(i.snapshot),(m=>{n.error(m)})(m)}),function(){h()}}).pipe(function(i,n=Jn.P){return r=>r.lift(new NA(i,n))}(0))}(i);return{task:i,then:i.then.bind(i),catch:i.catch.bind(i),pause:i.pause.bind(i),cancel:i.cancel.bind(i),resume:i.resume.bind(i),snapshotChanges:()=>n,percentageChanges:()=>n.pipe((0,Zr.U)(r=>r.bytesTransferred/r.totalBytes*100))}}function Vy(i){return{getDownloadURL:()=>(0,Mi.of)(void 0).pipe(Gt.fc,ho(()=>i.getDownloadURL()),Gt.iC),getMetadata:()=>(0,Mi.of)(void 0).pipe(Gt.fc,ho(()=>i.getMetadata()),Gt.iC),delete:()=>(0,Pi.D)(i.delete()),child:n=>Vy(i.child(n)),updateMetadata:n=>(0,Pi.D)(i.updateMetadata(n)),put:(n,r)=>xT(i.put(n,r)),putString:(n,r,a)=>xT(i.putString(n,r,a)),listAll:()=>(0,Pi.D)(i.listAll())}}!function(i){const n={TaskState:ii,TaskEvent:jR,StringFormat:is,Storage:jd,Reference:bn};i.INTERNAL.registerComponent(new Ga.wA("storage-compat",RT,"PUBLIC").setServiceProps(n).setMultipleInstances(!0)),i.registerVersion("@firebase/storage-compat","0.1.3")}(_g.Z);const yN=new b.OlP("angularfire2.storageBucket"),PT=new b.OlP("angularfire2.storage.maxUploadRetryTime"),_N=new b.OlP("angularfire2.storage.maxOperationRetryTime"),vN=new b.OlP("angularfire2.storage.use-emulator");let EN=(()=>{class i{constructor(r,a,l,h,m,E,T,S,R){const O=(0,Lt.on)(r,m,a);this.storage=(0,Gt.cc)(`${O.name}.storage.${l}`,"AngularFireStorage",O.name,()=>{const V=m.runOutsideAngular(()=>O.storage(l||void 0)),q=R;return q&&V.useEmulator(...q),T&&V.setMaxUploadRetryTime(T),S&&V.setMaxOperationRetryTime(S),V},[T,S])}ref(r){return Vy(this.storage.ref(r))}refFromURL(r){return Vy(this.storage.refFromURL(r))}upload(r,a,l){return Vy(this.storage.ref(r)).put(a,l)}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(Lt.Dh),b.LFG(Lt.xv,8),b.LFG(yN,8),b.LFG(b.Lbi),b.LFG(b.R0b),b.LFG(Gt.HU),b.LFG(PT,8),b.LFG(_N,8),b.LFG(vN,8))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),Cp=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=b.oAB({type:i}),i.\u0275inj=b.cJS({}),i})(),H0=(()=>{class i{constructor(){m0.Z.registerVersion("angularfire",Gt.q4.full,"gcs-compat")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=b.oAB({type:i}),i.\u0275inj=b.cJS({providers:[EN],imports:[Cp]}),i})(),wN=(()=>{class i{constructor(r){this.firestore=r}createRecord(r){return this.firestore.collection("records").add(r)}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(_0))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),MT=(()=>{class i{constructor(r){this.firestore=r}createStatistic(r){return this.firestore.collection("statistics").add(r)}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(_0))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),bN=(()=>{class i{constructor(){this.newBoard=new b.vpe}generateNewBoard(){this.newBoard.emit()}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=b.Xpm({type:i,selectors:[["app-mines-counter"]],inputs:{minesTotal:"minesTotal",minesLeft:"minesLeft"},outputs:{newBoard:"newBoard"},decls:7,vars:2,consts:[[3,"click"]],template:function(r,a){1&r&&(b.TgZ(0,"div"),b.TgZ(1,"h3"),b._uU(2),b.qZA(),b.TgZ(3,"h3"),b._uU(4),b.qZA(),b.qZA(),b.TgZ(5,"button",0),b.NdJ("click",function(){return a.generateNewBoard()}),b._uU(6,"New game"),b.qZA()),2&r&&(b.xp6(2),b.hij("Mines total: ",a.minesTotal,""),b.xp6(2),b.hij("Mines left: ",a.minesLeft,""))},styles:["button[_ngcontent-%COMP%]{font-size:20px;padding:10px 30px;margin-left:30px;border:0;border-radius:10px}"]}),i})();const $0=function(i,n){return{backgroundColor:i,color:n}};let OT=(()=>{class i{constructor(){this.mineMarked=new b.vpe,this.mineExploded=new b.vpe,this.fieldOpened=new b.vpe,this.text=""}leftClick(){var r,a,l,h,m,E,T;(null===(r=this.field)||void 0===r?void 0:r.isMarked)||((null===(a=this.field)||void 0===a?void 0:a.isMined)?(this.text="\u{1f4a3}",this.mineExploded.emit(!0)):0===(null===(l=this.field)||void 0===l?void 0:l.minesAround)?this.fieldOpened.emit({i:null===(h=this.field)||void 0===h?void 0:h.i,j:null===(m=this.field)||void 0===m?void 0:m.j}):(this.text=""+(null===(E=this.field)||void 0===E?void 0:E.minesAround),this.fieldOpened.emit()),null===(T=this.field)||void 0===T||(T.isLeftClicked=!0))}rightClick(){var r,a,l;(null===(r=this.field)||void 0===r?void 0:r.isMarked)?(this.text="",this.mineMarked.emit(!1)):(this.text="\u{1f6a9}",this.mineMarked.emit(!0)),null===(a=this.field)||void 0===a||(a.isMarked=!(null===(l=this.field)||void 0===l?void 0:l.isMarked))}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=b.Xpm({type:i,selectors:[["app-field"]],inputs:{id:"id",field:"field"},outputs:{mineMarked:"mineMarked",mineExploded:"mineExploded",fieldOpened:"fieldOpened"},decls:2,vars:7,consts:[[3,"ngStyle","id","disabled","click","contextmenu"]],template:function(r,a){1&r&&(b.TgZ(0,"button",0),b.NdJ("click",function(){return a.leftClick()})("contextmenu",function(){return a.rightClick()}),b._uU(1),b.qZA()),2&r&&(b.s9C("id",a.id),b.Q6J("ngStyle",b.WLB(4,$0,null!=a.field&&a.field.isLeftClicked?"lightsteelblue":"burlywood",+a.text<2?"rgb(0,0,255)":+a.text<3?"rgb(0,128,0)":+a.text<4?"rgb(255,0,0)":+a.text<5?"rgb(0,0,128)":+a.text<6?"rgb(128,0,0)":+a.text<7?"rgb(0,128,128)":+a.text<8?"rgb(0,0,0)":"rgb(128,128,128)"))("disabled",null==a.field?null:a.field.isLeftClicked),b.xp6(1),b.hij(" ",a.text,"\n"))},directives:[Au],styles:["button[_ngcontent-%COMP%]{width:25px;height:25px;font-weight:900;font-size:15px}button[_ngcontent-%COMP%]:disabled{background-color:#000;color:initial;border:1px solid rgba(0,0,0,.1)}"]}),i})();function kT(i,n){if(1&i){const r=b.EpF();b.TgZ(0,"div",4),b.TgZ(1,"app-field",5),b.NdJ("mineMarked",function(l){return b.CHM(r),b.oxw(3).minesLeftChange(l)})("mineExploded",function(){return b.CHM(r),b.oxw(3).mineExploded()})("fieldOpened",function(l){return b.CHM(r),b.oxw(3).spacesLeftChange(l)}),b.qZA(),b.qZA()}if(2&i){const r=n.$implicit;b.xp6(1),b.Q6J("id",r.id)("field",r)}}function FT(i,n){if(1&i&&(b.TgZ(0,"div",2),b.YNc(1,kT,2,2,"div",3),b.qZA()),2&i){const r=n.$implicit;b.xp6(1),b.Q6J("ngForOf",r)}}function IN(i,n){if(1&i&&(b.TgZ(0,"div"),b.YNc(1,FT,2,1,"div",1),b.qZA()),2&i){const r=b.oxw();b.xp6(1),b.Q6J("ngForOf",r.board.fields)}}let DN=(()=>{class i{constructor(){this.minesMarked=new b.vpe,this.gameEnded=new b.vpe}minesLeftChange(r){this.minesMarked.emit(r)}mineExploded(){this.gameEnded.emit(!0)}spacesLeftChange(r){var a;setTimeout(()=>{if(r){let l=r.i,h=r.j;this.buttonComp&&this.buttonComp.filter(m=>{var E,T,S,R,O,V,q;return!(!this.board||!(l>0&&m.id===l-1+"-"+h||l<(null===(E=this.board)||void 0===E?void 0:E.height)&&m.id===l+1+"-"+h||h>0&&m.id===l+"-"+(h-1)||h<(null===(T=this.board)||void 0===T?void 0:T.width)&&m.id===l+"-"+(h+1)||l>0&&h>0&&m.id===l-1+"-"+(h-1)||l>0&&h<(null===(S=this.board)||void 0===S?void 0:S.width)&&m.id===l-1+"-"+(h+1)||l<(null===(R=this.board)||void 0===R?void 0:R.height)&&h>0&&m.id===l+1+"-"+(h-1)||l<(null===(O=this.board)||void 0===O?void 0:O.height)&&h<(null===(V=this.board)||void 0===V?void 0:V.width)&&m.id===l+1+"-"+(h+1))||(null===(q=m.field)||void 0===q?void 0:q.isLeftClicked))}).forEach(m=>m.leftClick())}},0),this.amountOfFields&&this.board&&(this.amountOfFields--,this.amountOfFields-(null===(a=this.board)||void 0===a?void 0:a.mines)==0&&(this.gameEnded.emit(!1),this.minesMarked.emit(this.board.mines)))}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=b.Xpm({type:i,selectors:[["app-board"]],viewQuery:function(r,a){if(1&r&&b.Gf(OT,5),2&r){let l;b.iGM(l=b.CRH())&&(a.buttonComp=l)}},inputs:{board:"board",amountOfFields:"amountOfFields"},outputs:{minesMarked:"minesMarked",gameEnded:"gameEnded"},decls:1,vars:1,consts:[[4,"ngIf"],["class","rows",4,"ngFor","ngForOf"],[1,"rows"],["class","fields",4,"ngFor","ngForOf"],[1,"fields"],[3,"id","field","mineMarked","mineExploded","fieldOpened"]],template:function(r,a){1&r&&b.YNc(0,IN,2,1,"div",0),2&r&&b.Q6J("ngIf",a.board)},directives:[_t,Xt,OT],styles:[".rows[_ngcontent-%COMP%], .fields[_ngcontent-%COMP%], .fields[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{display:flex}.rows[_ngcontent-%COMP%]{flex-direction:row}.fields[_ngcontent-%COMP%], .fields[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{flex-direction:column}"]}),i})();const TN=function(i){return{color:i}};let da=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=b.Xpm({type:i,selectors:[["app-announcer"]],inputs:{userLost:"userLost"},decls:2,vars:4,consts:[[3,"ngStyle"]],template:function(r,a){1&r&&(b.TgZ(0,"h1",0),b._uU(1),b.qZA()),2&r&&(b.Q6J("ngStyle",b.VKq(2,TN,a.userLost?"red":"green")),b.xp6(1),b.hij(" ",a.userLost?"Game over":"You won!","\n"))},directives:[Au],styles:[""]}),i})();function Sp(i,n){if(1&i&&b._UZ(0,"app-announcer",3),2&i){const r=b.oxw();b.Q6J("userLost",r.userLost)}}const Hd=function(i){return{pointerEvents:i}};let Uy=(()=>{class i{constructor(r){this.SS=r,this.newBoard=new b.vpe,this.gameEnded=!1,this.userLost=!1,this.minesMarked=0}generateNewBoard(){this.newBoard.emit()}changeAmountOfMinesLeft(r){"boolean"==typeof r?this.minesMarked+=r?1:-1:this.minesMarked=r,this.minesTotal&&(this.minesLeft=this.minesTotal-this.minesMarked)}gameCondition(r){if(this.userLost=r,this.gameEnded=!0,this.board){let a="",l="",h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_";for(let E=0;E<10;E++)a+=h.charAt(Math.floor(Math.random()*h.length)),l+=h.charAt(Math.floor(Math.random()*h.length));let m={id:a,date:new Date,width:this.board.width,height:this.board.height,mines:this.board.mines,time:600*Math.random(),playerName:l,lost:r};console.log(m),this.SS.createStatistic(m).catch(E=>console.log(E))}}}return i.\u0275fac=function(r){return new(r||i)(b.Y36(MT))},i.\u0275cmp=b.Xpm({type:i,selectors:[["app-gameplay-container"]],inputs:{board:"board",amountOfFields:"amountOfFields",minesTotal:"minesTotal",minesLeft:"minesLeft"},outputs:{newBoard:"newBoard"},decls:3,vars:8,consts:[["id","minesCounter",3,"minesTotal","minesLeft","newBoard"],["id","board",3,"ngStyle","board","amountOfFields","minesMarked","gameEnded"],["id","announcer",3,"userLost",4,"ngIf"],["id","announcer",3,"userLost"]],template:function(r,a){1&r&&(b.TgZ(0,"app-mines-counter",0),b.NdJ("newBoard",function(){return a.generateNewBoard()}),b.qZA(),b.TgZ(1,"app-board",1),b.NdJ("minesMarked",function(h){return a.changeAmountOfMinesLeft(h)})("gameEnded",function(h){return a.gameCondition(h)}),b.qZA(),b.YNc(2,Sp,1,1,"app-announcer",2)),2&r&&(b.Q6J("minesTotal",a.minesTotal)("minesLeft",a.minesLeft),b.xp6(1),b.Q6J("ngStyle",b.VKq(6,Hd,a.gameEnded?"none":"auto"))("board",a.board)("amountOfFields",a.amountOfFields),b.xp6(1),b.Q6J("ngIf",a.gameEnded))},directives:[bN,DN,Au,_t,da],styles:["#minesCounter[_ngcontent-%COMP%], #board[_ngcontent-%COMP%], #announcer[_ngcontent-%COMP%]{display:flex}#minesCounter[_ngcontent-%COMP%]{margin-bottom:30px}#announcer[_ngcontent-%COMP%]{justify-content:center;width:400px;padding:15px 0;background-color:#f8f8ffcc;position:absolute;top:calc(50% - 35px);left:calc(50% - 200px);border-radius:10px}"]}),i})();const Iu=function(i){return{opacity:i}};let CN=(()=>{class i{constructor(){this.tryToBuildBoard=new b.vpe,this.isWidthValid=this.isHeightValid=this.isMinesValid=!0,this.width=this.height=10,this.mines=20}changeWidth(r){let a=r.target.value;+a>9&&+a<41?(this.width=+a,this.isWidthValid=!0):this.isWidthValid=!1}changeHeight(r){let a=r.target.value;+a>9&&+a<21?(this.height=+a,this.isHeightValid=!0):this.isHeightValid=!1}changeMines(r){let a=r.target.value;+a>9&&+a<Math.floor(this.width*this.height/2)?(this.mines=+a,this.isMinesValid=!0):this.isMinesValid=!1}submit(r){r.preventDefault();let a=new Array(this.height).fill(new Array(this.width).fill(void 0));a=a.map((E,T)=>E.map((S,R)=>({i:T,j:R,isMined:!1,isMarked:!1,minesAround:0,id:T+"-"+R})));let h,m,l=this.mines;do{h=Math.floor(Math.random()*this.height),m=Math.floor(Math.random()*this.width),a[h][m].isMined||(a[h][m].isMined=!0,h>0&&(a[h-1][m].minesAround++,m>0&&a[h-1][m-1].minesAround++,m<this.width-1&&a[h-1][m+1].minesAround++),h<this.height-1&&(a[h+1][m].minesAround++,m>0&&a[h+1][m-1].minesAround++,m<this.width-1&&a[h+1][m+1].minesAround++),m>0&&a[h][m-1].minesAround++,m<this.width-1&&a[h][m+1].minesAround++,l--)}while(l>0);this.tryToBuildBoard.emit({width:this.width,height:this.height,mines:this.mines,fields:a})}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=b.Xpm({type:i,selectors:[["app-board-form"]],outputs:{tryToBuildBoard:"tryToBuildBoard"},decls:21,vars:13,consts:[["data-title","(min 10, max 40)",1,"input-group"],["type","number","value","10",3,"value","input"],[1,"error",3,"ngStyle"],["data-title","(min 10, max 20)",1,"input-group"],["data-title","(min 10, max w*h/2)",1,"input-group"],["type","number","value","20",3,"value","input"],[3,"disabled","click"]],template:function(r,a){1&r&&(b.TgZ(0,"form"),b.TgZ(1,"div",0),b.TgZ(2,"label"),b._uU(3,"Width"),b.qZA(),b.TgZ(4,"input",1),b.NdJ("input",function(h){return a.changeWidth(h)}),b.qZA(),b.qZA(),b.TgZ(5,"span",2),b._uU(6,"Width value invalid"),b.qZA(),b.TgZ(7,"div",3),b.TgZ(8,"label"),b._uU(9,"Height"),b.qZA(),b.TgZ(10,"input",1),b.NdJ("input",function(h){return a.changeHeight(h)}),b.qZA(),b.qZA(),b.TgZ(11,"span",2),b._uU(12,"Height value invalid"),b.qZA(),b.TgZ(13,"div",4),b.TgZ(14,"label"),b._uU(15,"Mines"),b.qZA(),b.TgZ(16,"input",5),b.NdJ("input",function(h){return a.changeMines(h)}),b.qZA(),b.qZA(),b.TgZ(17,"span",2),b._uU(18,"Mines value invalid"),b.qZA(),b.TgZ(19,"button",6),b.NdJ("click",function(h){return a.submit(h)}),b._uU(20,"Start game"),b.qZA(),b.qZA()),2&r&&(b.xp6(4),b.Q6J("value",a.width),b.xp6(1),b.Q6J("ngStyle",b.VKq(7,Iu,a.isWidthValid?"0":"1")),b.xp6(5),b.Q6J("value",a.height),b.xp6(1),b.Q6J("ngStyle",b.VKq(9,Iu,a.isHeightValid?"0":"1")),b.xp6(5),b.Q6J("value",a.mines),b.xp6(1),b.Q6J("ngStyle",b.VKq(11,Iu,a.isMinesValid?"0":"1")),b.xp6(2),b.Q6J("disabled",a.isWidthValid&&a.isHeightValid&&a.isMinesValid))},directives:[Au],styles:["form[_ngcontent-%COMP%]{width:400px;display:flex;flex-direction:column}.input-group[_ngcontent-%COMP%]{display:flex;flex-direction:row}.input-group[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;text-align:center;padding:10px 0;border:0;border-radius:10px}.input-group[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:50%}.input-group[_ngcontent-%COMP%]{position:relative}.input-group[_ngcontent-%COMP%]:hover:after{position:absolute;bottom:-15px;right:0;content:attr(data-title);font-size:15px;font-weight:initial}span[_ngcontent-%COMP%]{background-color:#ffc8c8cc;text-align:center;font-weight:initial;font-size:15px;border-radius:10px}.error[_ngcontent-%COMP%]{color:#dc143c}"]}),i})();function SN(i,n){if(1&i){const r=b.EpF();b.TgZ(0,"div"),b.TgZ(1,"app-gameplay-container",2),b.NdJ("newBoard",function(){return b.CHM(r),b.oxw().newBoard()}),b.qZA(),b.qZA()}if(2&i){const r=b.oxw();b.Q6J("@insertRemoveBoard",void 0),b.xp6(1),b.Q6J("board",r.board)("amountOfFields",r.amountOfFields)("minesTotal",r.board.mines)("minesLeft",r.board.mines)}}function AN(i,n){if(1&i){const r=b.EpF();b.TgZ(0,"app-board-form",3),b.NdJ("tryToBuildBoard",function(l){return b.CHM(r),b.oxw().setBoard(l)}),b.qZA()}2&i&&b.Q6J("@insertRemoveForm",void 0)}let LT=(()=>{class i{constructor(){this.gameBuilt=!1,window.oncontextmenu=r=>{r.preventDefault()}}setBoard(r){this.gameBuilt=!0,this.board=r,this.amountOfFields=r.width*r.height}newBoard(){this.gameBuilt=!1}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=b.Xpm({type:i,selectors:[["app-root"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["boardForm",""],[1,"content",3,"board","amountOfFields","minesTotal","minesLeft","newBoard"],[1,"content",3,"tryToBuildBoard"]],template:function(r,a){if(1&r&&(b.YNc(0,SN,2,5,"div",0),b.YNc(1,AN,1,1,"ng-template",null,1,b.W1O)),2&r){const l=b.MAs(2);b.Q6J("ngIf",a.gameBuilt&&a.board)("ngIfElse",l)}},directives:[_t,Uy,CN],styles:[".content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;position:relative;padding:20px;margin:50px 0;border-radius:10px;background-color:#b2d7b2;transition:display 1000s linear}"],data:{animation:[Ra("insertRemoveBoard",[di(":enter",[Si({opacity:0,display:"none"}),Po("300ms",Si({opacity:1,display:"flex"}))]),di(":leave",[Si({opacity:1,display:"flex"}),Po("300ms",Si({opacity:0,display:"none"}))])]),Ra("insertRemoveForm",[di(":enter",[Si({opacity:0,display:"none"}),Po("300ms",Si({opacity:1,display:"flex"}))]),di(":leave",[Si({opacity:1,display:"flex"}),Po("300ms",Si({opacity:0,display:"none"}))])])]}}),i})();const q0_firebaseConfig={apiKey:"AIzaSyCtb9dt7UKRoQCQSQv6lkjnJvaWDnIGQuI",authDomain:"minesweeper-830b3.firebaseapp.com",projectId:"minesweeper-830b3",storageBucket:"minesweeper-830b3.appspot.com",messagingSenderId:"605988123822",appId:"1:605988123822:web:59d05f6ecbc7faf35ea93f",measurementId:"G-Q88LFPPVYC"};let VT=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=b.oAB({type:i,bootstrap:[LT]}),i.\u0275inj=b.cJS({providers:[wN,MT],imports:[[Sa,st,Lt.hO.initializeApp(q0_firebaseConfig),CR,GD,H0]]}),i})();(0,b.G48)(),i_().bootstrapModule(VT).catch(i=>console.error(i))},4762:(et,Ne,L)=>{"use strict";function ye(X,ae){var ue={};for(var K in X)Object.prototype.hasOwnProperty.call(X,K)&&ae.indexOf(K)<0&&(ue[K]=X[K]);if(null!=X&&"function"==typeof Object.getOwnPropertySymbols){var be=0;for(K=Object.getOwnPropertySymbols(X);be<K.length;be++)ae.indexOf(K[be])<0&&Object.prototype.propertyIsEnumerable.call(X,K[be])&&(ue[K[be]]=X[K[be]])}return ue}function Ie(X,ae,ue,K){return new(ue||(ue=Promise))(function(se,dt){function Mt(Oe){try{Se(K.next(Oe))}catch(Be){dt(Be)}}function Zt(Oe){try{Se(K.throw(Oe))}catch(Be){dt(Be)}}function Se(Oe){Oe.done?se(Oe.value):function(se){return se instanceof ue?se:new ue(function(dt){dt(se)})}(Oe.value).then(Mt,Zt)}Se((K=K.apply(X,ae||[])).next())})}function ie(X,ae){var K,be,se,dt,ue={label:0,sent:function(){if(1&se[0])throw se[1];return se[1]},trys:[],ops:[]};return dt={next:Mt(0),throw:Mt(1),return:Mt(2)},"function"==typeof Symbol&&(dt[Symbol.iterator]=function(){return this}),dt;function Mt(Se){return function(Oe){return function(Se){if(K)throw new TypeError("Generator is already executing.");for(;ue;)try{if(K=1,be&&(se=2&Se[0]?be.return:Se[0]?be.throw||((se=be.return)&&se.call(be),0):be.next)&&!(se=se.call(be,Se[1])).done)return se;switch(be=0,se&&(Se=[2&Se[0],se.value]),Se[0]){case 0:case 1:se=Se;break;case 4:return ue.label++,{value:Se[1],done:!1};case 5:ue.label++,be=Se[1],Se=[0];continue;case 7:Se=ue.ops.pop(),ue.trys.pop();continue;default:if(!(se=(se=ue.trys).length>0&&se[se.length-1])&&(6===Se[0]||2===Se[0])){ue=0;continue}if(3===Se[0]&&(!se||Se[1]>se[0]&&Se[1]<se[3])){ue.label=Se[1];break}if(6===Se[0]&&ue.label<se[1]){ue.label=se[1],se=Se;break}if(se&&ue.label<se[2]){ue.label=se[2],ue.ops.push(Se);break}se[2]&&ue.ops.pop(),ue.trys.pop();continue}Se=ae.call(X,ue)}catch(Oe){Se=[6,Oe],be=0}finally{K=se=0}if(5&Se[0])throw Se[1];return{value:Se[0]?Se[1]:void 0,done:!0}}([Se,Oe])}}}function J(X){var ae="function"==typeof Symbol&&Symbol.iterator,ue=ae&&X[ae],K=0;if(ue)return ue.call(X);if(X&&"number"==typeof X.length)return{next:function(){return X&&K>=X.length&&(X=void 0),{value:X&&X[K++],done:!X}}};throw new TypeError(ae?"Object is not iterable.":"Symbol.iterator is not defined.")}function te(X,ae){var ue="function"==typeof Symbol&&X[Symbol.iterator];if(!ue)return X;var be,dt,K=ue.call(X),se=[];try{for(;(void 0===ae||ae-- >0)&&!(be=K.next()).done;)se.push(be.value)}catch(Mt){dt={error:Mt}}finally{try{be&&!be.done&&(ue=K.return)&&ue.call(K)}finally{if(dt)throw dt.error}}return se}function re(X,ae,ue){if(ue||2===arguments.length)for(var se,K=0,be=ae.length;K<be;K++)(se||!(K in ae))&&(se||(se=Array.prototype.slice.call(ae,0,K)),se[K]=ae[K]);return X.concat(se||Array.prototype.slice.call(ae))}L.d(Ne,{_T:()=>ye,mG:()=>Ie,Jh:()=>ie,XA:()=>J,CR:()=>te,ev:()=>re})},8239:(et,Ne,L)=>{"use strict";function b($,ye,me,he,Ce,Ie,ie){try{var k=$[Ie](ie),H=k.value}catch(J){return void me(J)}k.done?ye(H):Promise.resolve(H).then(he,Ce)}function ne($){return function(){var ye=this,me=arguments;return new Promise(function(he,Ce){var Ie=$.apply(ye,me);function ie(H){b(Ie,he,Ce,ie,k,"next",H)}function k(H){b(Ie,he,Ce,ie,k,"throw",H)}ie(void 0)})}}L.d(Ne,{Z:()=>ne})}},et=>{et(et.s=493)}]);